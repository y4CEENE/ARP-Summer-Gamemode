/// @file      Misc.def
/// @author    BOURAOUI Al-Moez L.A
/// @date      Created at 2021-03-29 12:23:11 +0100
/// @copyright Copyright (c) 2022


#define percent(%0,%1)  floatround((float((%0)) / 100) * (%1))
#define Random(%0,%1)   (random((%1) - (%0)) + (%0))
#undef INVALID_3DTEXT_ID
#define INVALID_3DTEXT_ID (Text3D:0xFFFF)

#define SCM                 SendClientMessage
#define SM 		            SendMessage // SendClientMessage with string formats

SendMessage(playerid, color, const text[], {Float,_}:...)
{
	static
  	    args,
	    str[192];

	if((args = numargs()) <= 3)
	{
	    SCM(playerid, color, text);
	}
	else
	{
		while(--args >= 3)
		{
			#emit LCTRL 	5
			#emit LOAD.alt 	args
			#emit SHL.C.alt 2
			#emit ADD.C 	12
			#emit ADD
			#emit LOAD.I
			#emit PUSH.pri
		}
		#emit PUSH.S 	text
		#emit PUSH.C 	192
		#emit PUSH.C 	str
		#emit PUSH.S	8
		#emit SYSREQ.C 	format
		#emit LCTRL 	5
		#emit SCTRL 	4

		SCM(playerid, color, str);

		#emit RETN
	}
	return 1;
}

#define IPI                 INVALID_PLAYER_ID
#define SendInfoMessage(%0,%1)   SendClientMessageEx((%0), COLOR_WHITE, ""%1)
#define SendSyntaxMessage(%0,%1) SendClientMessageEx((%0), COLOR_GREY, "Usage: "%1)
#define SendErrorMessage(%0,%1)  ShowPlayerFooter((%0), "~r~ERROR:~w~ "%1)
#define RCHECK(%0,               while (!(%0)) return SendClientMessageEx(playerid, COLOR_GREY,
// ---------------------------------------
#define HOLDING(%0) \
    ((newkeys & (%0)) == (%0))
#define RELEASED(%0) \
    (((newkeys & (%0)) != (%0)) && ((oldkeys & (%0)) == (%0)))
#define PRESSED(%0) \
    (((newkeys & (%0)) == (%0)) && ((oldkeys & (%0)) != (%0)))
#define publish%0(%1)    \
        forward%0(%1); \
        public%0(%1)

#define DB:%0(%1) \
        publish db_%0(%1)

#define Accept:%0(%1) \
        publish accept_%0(%1)

#define SendServerMessage(%0,%1) \
    SendClientMessageEx(%0, COLOR_WHITE, "[SERVER]:{FFFFFF} "%1)
