#include "samplib/VLib.inc"

// ---------------------------------------
native WP_Hash(buffer[], len, const str[]);
// ---------------------------------------

#if defined strcpy
    #undef strcpy
#endif

#define BODY_PART_HEAD 1001
#define BODY_PART_CHEST 1002
#define BODY_PART_GROIN 1003
#define BODY_PART_LEFT_ARM 1004
#define BODY_PART_RIGHT_ARM 1005
#define BODY_PART_LEFT_LEG 1006
#define BODY_PART_RIGHT_LEG 1007


enum zoneEnum
{
    zoneName[32],
    Float:zoneMinX,
    Float:zoneMinY,
    Float:zoneMinZ,
    Float:zoneMaxX,
    Float:zoneMaxY,
    Float:zoneMaxZ
};

static const zoneArray[][zoneEnum] =
{
    {"The Big Ear",                   -410.00, 1403.30, -3.00, -137.90, 1681.20, 200.00},
    {"Aldea Malvada",                -1372.10, 2498.50, 0.00, -1277.50, 2615.30, 200.00},
    {"Angel Pine",                   -2324.90, -2584.20, -6.10, -1964.20, -2212.10, 200.00},
    {"Arco del Oeste",               -901.10, 2221.80, 0.00, -592.00, 2571.90, 200.00},
    {"Avispa Country Club",          -2646.40, -355.40, 0.00, -2270.00, -222.50, 200.00},
    {"Avispa Country Club",          -2831.80, -430.20, -6.10, -2646.40, -222.50, 200.00},
    {"Avispa Country Club",          -2361.50, -417.10, 0.00, -2270.00, -355.40, 200.00},
    {"Avispa Country Club",          -2667.80, -302.10, -28.80, -2646.40, -262.30, 71.10},
    {"Avispa Country Club",          -2470.00, -355.40, 0.00, -2270.00, -318.40, 46.10},
    {"Avispa Country Club",          -2550.00, -355.40, 0.00, -2470.00, -318.40, 39.70},
    {"Back o Beyond",                -1166.90, -2641.10, 0.00, -321.70, -1856.00, 200.00},
    {"Battery Point",                -2741.00, 1268.40, -4.50, -2533.00, 1490.40, 200.00},
    {"Bayside",                      -2741.00, 2175.10, 0.00, -2353.10, 2722.70, 200.00},
    {"Bayside Marina",               -2353.10, 2275.70, 0.00, -2153.10, 2475.70, 200.00},
    {"Beacon Hill",                  -399.60, -1075.50, -1.40, -319.00, -977.50, 198.50},
    {"Blackfield",                   964.30, 1203.20, -89.00, 1197.30, 1403.20, 110.90},
    {"Blackfield",                   964.30, 1403.20, -89.00, 1197.30, 1726.20, 110.90},
    {"Blackfield Chapel",            1375.60, 596.30, -89.00, 1558.00, 823.20, 110.90},
    {"Blackfield Chapel",            1325.60, 596.30, -89.00, 1375.60, 795.00, 110.90},
    {"Blackfield Intersection",      1197.30, 1044.60, -89.00, 1277.00, 1163.30, 110.90},
    {"Blackfield Intersection",      1166.50, 795.00, -89.00, 1375.60, 1044.60, 110.90},
    {"Blackfield Intersection",      1277.00, 1044.60, -89.00, 1315.30, 1087.60, 110.90},
    {"Blackfield Intersection",      1375.60, 823.20, -89.00, 1457.30, 919.40, 110.90},
    {"Blueberry",                    104.50, -220.10, 2.30, 349.60, 152.20, 200.00},
    {"Blueberry",                    19.60, -404.10, 3.80, 349.60, -220.10, 200.00},
    {"Blueberry Acres",              -319.60, -220.10, 0.00, 104.50, 293.30, 200.00},
    {"Caligula's Palace",            2087.30, 1543.20, -89.00, 2437.30, 1703.20, 110.90},
    {"Caligula's Palace",            2137.40, 1703.20, -89.00, 2437.30, 1783.20, 110.90},
    {"Calton Heights",               -2274.10, 744.10, -6.10, -1982.30, 1358.90, 200.00},
    {"Chinatown",                    -2274.10, 578.30, -7.60, -2078.60, 744.10, 200.00},
    {"City Hall",                    -2867.80, 277.40, -9.10, -2593.40, 458.40, 200.00},
    {"Come-A-Lot",                   2087.30, 943.20, -89.00, 2623.10, 1203.20, 110.90},
    {"Commerce",                     1323.90, -1842.20, -89.00, 1701.90, -1722.20, 110.90},
    {"Commerce",                     1323.90, -1722.20, -89.00, 1440.90, -1577.50, 110.90},
    {"Commerce",                     1370.80, -1577.50, -89.00, 1463.90, -1384.90, 110.90},
    {"Commerce",                     1463.90, -1577.50, -89.00, 1667.90, -1430.80, 110.90},
    {"Commerce",                     1583.50, -1722.20, -89.00, 1758.90, -1577.50, 110.90},
    {"Commerce",                     1667.90, -1577.50, -89.00, 1812.60, -1430.80, 110.90},
    {"Conference Center",            1046.10, -1804.20, -89.00, 1323.90, -1722.20, 110.90},
    {"Conference Center",            1073.20, -1842.20, -89.00, 1323.90, -1804.20, 110.90},
    {"Cranberry Station",            -2007.80, 56.30, 0.00, -1922.00, 224.70, 100.00},
    {"Creek",                        2749.90, 1937.20, -89.00, 2921.60, 2669.70, 110.90},
    {"Dillimore",                    580.70, -674.80, -9.50, 861.00, -404.70, 200.00},
    {"Doherty",                      -2270.00, -324.10, -0.00, -1794.90, -222.50, 200.00},
    {"Doherty",                      -2173.00, -222.50, -0.00, -1794.90, 265.20, 200.00},
    {"Downtown",                     -1982.30, 744.10, -6.10, -1871.70, 1274.20, 200.00},
    {"Downtown",                     -1871.70, 1176.40, -4.50, -1620.30, 1274.20, 200.00},
    {"Downtown",                     -1700.00, 744.20, -6.10, -1580.00, 1176.50, 200.00},
    {"Downtown",                     -1580.00, 744.20, -6.10, -1499.80, 1025.90, 200.00},
    {"Downtown",                     -2078.60, 578.30, -7.60, -1499.80, 744.20, 200.00},
    {"Downtown",                     -1993.20, 265.20, -9.10, -1794.90, 578.30, 200.00},
    {"Downtown Los Santos",          1463.90, -1430.80, -89.00, 1724.70, -1290.80, 110.90},
    {"Downtown Los Santos",          1724.70, -1430.80, -89.00, 1812.60, -1250.90, 110.90},
    {"Downtown Los Santos",          1463.90, -1290.80, -89.00, 1724.70, -1150.80, 110.90},
    {"Downtown Los Santos",          1370.80, -1384.90, -89.00, 1463.90, -1170.80, 110.90},
    {"Downtown Los Santos",          1724.70, -1250.90, -89.00, 1812.60, -1150.80, 110.90},
    {"Downtown Los Santos",          1370.80, -1170.80, -89.00, 1463.90, -1130.80, 110.90},
    {"Downtown Los Santos",          1378.30, -1130.80, -89.00, 1463.90, -1026.30, 110.90},
    {"Downtown Los Santos",          1391.00, -1026.30, -89.00, 1463.90, -926.90, 110.90},
    {"Downtown Los Santos",          1507.50, -1385.20, 110.90, 1582.50, -1325.30, 335.90},
    {"East Beach",                   2632.80, -1852.80, -89.00, 2959.30, -1668.10, 110.90},
    {"East Beach",                   2632.80, -1668.10, -89.00, 2747.70, -1393.40, 110.90},
    {"East Beach",                   2747.70, -1668.10, -89.00, 2959.30, -1498.60, 110.90},
    {"East Beach",                   2747.70, -1498.60, -89.00, 2959.30, -1120.00, 110.90},
    {"East Los Santos",              2421.00, -1628.50, -89.00, 2632.80, -1454.30, 110.90},
    {"East Los Santos",              2222.50, -1628.50, -89.00, 2421.00, -1494.00, 110.90},
    {"East Los Santos",              2266.20, -1494.00, -89.00, 2381.60, -1372.00, 110.90},
    {"East Los Santos",              2381.60, -1494.00, -89.00, 2421.00, -1454.30, 110.90},
    {"East Los Santos",              2281.40, -1372.00, -89.00, 2381.60, -1135.00, 110.90},
    {"East Los Santos",              2381.60, -1454.30, -89.00, 2462.10, -1135.00, 110.90},
    {"East Los Santos",              2462.10, -1454.30, -89.00, 2581.70, -1135.00, 110.90},
    {"Easter Basin",                 -1794.90, 249.90, -9.10, -1242.90, 578.30, 200.00},
    {"Easter Basin",                 -1794.90, -50.00, -0.00, -1499.80, 249.90, 200.00},
    {"Easter Bay Airport",           -1499.80, -50.00, -0.00, -1242.90, 249.90, 200.00},
    {"Easter Bay Airport",           -1794.90, -730.10, -3.00, -1213.90, -50.00, 200.00},
    {"Easter Bay Airport",           -1213.90, -730.10, 0.00, -1132.80, -50.00, 200.00},
    {"Easter Bay Airport",           -1242.90, -50.00, 0.00, -1213.90, 578.30, 200.00},
    {"Easter Bay Airport",           -1213.90, -50.00, -4.50, -947.90, 578.30, 200.00},
    {"Easter Bay Airport",           -1315.40, -405.30, 15.40, -1264.40, -209.50, 25.40},
    {"Easter Bay Airport",           -1354.30, -287.30, 15.40, -1315.40, -209.50, 25.40},
    {"Easter Bay Airport",           -1490.30, -209.50, 15.40, -1264.40, -148.30, 25.40},
    {"Easter Bay Chemicals",         -1132.80, -768.00, 0.00, -956.40, -578.10, 200.00},
    {"Easter Bay Chemicals",         -1132.80, -787.30, 0.00, -956.40, -768.00, 200.00},
    {"El Castillo del Diablo",       -464.50, 2217.60, 0.00, -208.50, 2580.30, 200.00},
    {"El Castillo del Diablo",       -208.50, 2123.00, -7.60, 114.00, 2337.10, 200.00},
    {"El Castillo del Diablo",       -208.50, 2337.10, 0.00, 8.40, 2487.10, 200.00},
    {"El Corona",                    1812.60, -2179.20, -89.00, 1970.60, -1852.80, 110.90},
    {"El Corona",                    1692.60, -2179.20, -89.00, 1812.60, -1842.20, 110.90},
    {"El Quebrados",                 -1645.20, 2498.50, 0.00, -1372.10, 2777.80, 200.00},
    {"Esplanade East",               -1620.30, 1176.50, -4.50, -1580.00, 1274.20, 200.00},
    {"Esplanade East",               -1580.00, 1025.90, -6.10, -1499.80, 1274.20, 200.00},
    {"Esplanade East",               -1499.80, 578.30, -79.60, -1339.80, 1274.20, 20.30},
    {"Esplanade North",              -2533.00, 1358.90, -4.50, -1996.60, 1501.20, 200.00},
    {"Esplanade North",              -1996.60, 1358.90, -4.50, -1524.20, 1592.50, 200.00},
    {"Esplanade North",              -1982.30, 1274.20, -4.50, -1524.20, 1358.90, 200.00},
    {"Fallen Tree",                  -792.20, -698.50, -5.30, -452.40, -380.00, 200.00},
    {"Fallow Bridge",                434.30, 366.50, 0.00, 603.00, 555.60, 200.00},
    {"Fern Ridge",                   508.10, -139.20, 0.00, 1306.60, 119.50, 200.00},
    {"Financial",                    -1871.70, 744.10, -6.10, -1701.30, 1176.40, 300.00},
    {"Fisher's Lagoon",              1916.90, -233.30, -100.00, 2131.70, 13.80, 200.00},
    {"Flint Intersection",           -187.70, -1596.70, -89.00, 17.00, -1276.60, 110.90},
    {"Flint Range",                  -594.10, -1648.50, 0.00, -187.70, -1276.60, 200.00},
    {"Fort Carson",                  -376.20, 826.30, -3.00, 123.70, 1220.40, 200.00},
    {"Foster Valley",                -2270.00, -430.20, -0.00, -2178.60, -324.10, 200.00},
    {"Foster Valley",                -2178.60, -599.80, -0.00, -1794.90, -324.10, 200.00},
    {"Foster Valley",                -2178.60, -1115.50, 0.00, -1794.90, -599.80, 200.00},
    {"Foster Valley",                -2178.60, -1250.90, 0.00, -1794.90, -1115.50, 200.00},
    {"Frederick Bridge",             2759.20, 296.50, 0.00, 2774.20, 594.70, 200.00},
    {"Gant Bridge",                  -2741.40, 1659.60, -6.10, -2616.40, 2175.10, 200.00},
    {"Gant Bridge",                  -2741.00, 1490.40, -6.10, -2616.40, 1659.60, 200.00},
    {"Ganton",                       2222.50, -1852.80, -89.00, 2632.80, -1722.30, 110.90},
    {"Ganton",                       2222.50, -1722.30, -89.00, 2632.80, -1628.50, 110.90},
    {"Garcia",                       -2411.20, -222.50, -0.00, -2173.00, 265.20, 200.00},
    {"Garcia",                       -2395.10, -222.50, -5.30, -2354.00, -204.70, 200.00},
    {"Garver Bridge",                -1339.80, 828.10, -89.00, -1213.90, 1057.00, 110.90},
    {"Garver Bridge",                -1213.90, 950.00, -89.00, -1087.90, 1178.90, 110.90},
    {"Garver Bridge",                -1499.80, 696.40, -179.60, -1339.80, 925.30, 20.30},
    {"Glen Park",                    1812.60, -1449.60, -89.00, 1996.90, -1350.70, 110.90},
    {"Glen Park",                    1812.60, -1100.80, -89.00, 1994.30, -973.30, 110.90},
    {"Glen Park",                    1812.60, -1350.70, -89.00, 2056.80, -1100.80, 110.90},
    {"Green Palms",                  176.50, 1305.40, -3.00, 338.60, 1520.70, 200.00},
    {"Greenglass College",           964.30, 1044.60, -89.00, 1197.30, 1203.20, 110.90},
    {"Greenglass College",           964.30, 930.80, -89.00, 1166.50, 1044.60, 110.90},
    {"Hampton Barns",                603.00, 264.30, 0.00, 761.90, 366.50, 200.00},
    {"Hankypanky Point",             2576.90, 62.10, 0.00, 2759.20, 385.50, 200.00},
    {"Harry Gold Parkway",           1777.30, 863.20, -89.00, 1817.30, 2342.80, 110.90},
    {"Hashbury",                     -2593.40, -222.50, -0.00, -2411.20, 54.70, 200.00},
    {"Hilltop Farm",                 967.30, -450.30, -3.00, 1176.70, -217.90, 200.00},
    {"Hunter Quarry",                337.20, 710.80, -115.20, 860.50, 1031.70, 203.70},
    {"Idlewood",                     1812.60, -1852.80, -89.00, 1971.60, -1742.30, 110.90},
    {"Idlewood",                     1812.60, -1742.30, -89.00, 1951.60, -1602.30, 110.90},
    {"Idlewood",                     1951.60, -1742.30, -89.00, 2124.60, -1602.30, 110.90},
    {"Idlewood",                     1812.60, -1602.30, -89.00, 2124.60, -1449.60, 110.90},
    {"Idlewood",                     2124.60, -1742.30, -89.00, 2222.50, -1494.00, 110.90},
    {"Idlewood",                     1971.60, -1852.80, -89.00, 2222.50, -1742.30, 110.90},
    {"Jefferson",                    1996.90, -1449.60, -89.00, 2056.80, -1350.70, 110.90},
    {"Jefferson",                    2124.60, -1494.00, -89.00, 2266.20, -1449.60, 110.90},
    {"Jefferson",                    2056.80, -1372.00, -89.00, 2281.40, -1210.70, 110.90},
    {"Jefferson",                    2056.80, -1210.70, -89.00, 2185.30, -1126.30, 110.90},
    {"Jefferson",                    2185.30, -1210.70, -89.00, 2281.40, -1154.50, 110.90},
    {"Jefferson",                    2056.80, -1449.60, -89.00, 2266.20, -1372.00, 110.90},
    {"Julius Thruway East",          2623.10, 943.20, -89.00, 2749.90, 1055.90, 110.90},
    {"Julius Thruway East",          2685.10, 1055.90, -89.00, 2749.90, 2626.50, 110.90},
    {"Julius Thruway East",          2536.40, 2442.50, -89.00, 2685.10, 2542.50, 110.90},
    {"Julius Thruway East",          2625.10, 2202.70, -89.00, 2685.10, 2442.50, 110.90},
    {"Julius Thruway North",         2498.20, 2542.50, -89.00, 2685.10, 2626.50, 110.90},
    {"Julius Thruway North",         2237.40, 2542.50, -89.00, 2498.20, 2663.10, 110.90},
    {"Julius Thruway North",         2121.40, 2508.20, -89.00, 2237.40, 2663.10, 110.90},
    {"Julius Thruway North",         1938.80, 2508.20, -89.00, 2121.40, 2624.20, 110.90},
    {"Julius Thruway North",         1534.50, 2433.20, -89.00, 1848.40, 2583.20, 110.90},
    {"Julius Thruway North",         1848.40, 2478.40, -89.00, 1938.80, 2553.40, 110.90},
    {"Julius Thruway North",         1704.50, 2342.80, -89.00, 1848.40, 2433.20, 110.90},
    {"Julius Thruway North",         1377.30, 2433.20, -89.00, 1534.50, 2507.20, 110.90},
    {"Julius Thruway South",         1457.30, 823.20, -89.00, 2377.30, 863.20, 110.90},
    {"Julius Thruway South",         2377.30, 788.80, -89.00, 2537.30, 897.90, 110.90},
    {"Julius Thruway West",          1197.30, 1163.30, -89.00, 1236.60, 2243.20, 110.90},
    {"Julius Thruway West",          1236.60, 2142.80, -89.00, 1297.40, 2243.20, 110.90},
    {"Juniper Hill",                 -2533.00, 578.30, -7.60, -2274.10, 968.30, 200.00},
    {"Juniper Hollow",               -2533.00, 968.30, -6.10, -2274.10, 1358.90, 200.00},
    {"K.A.C.C. Military Fuels",      2498.20, 2626.50, -89.00, 2749.90, 2861.50, 110.90},
    {"Kincaid Bridge",               -1339.80, 599.20, -89.00, -1213.90, 828.10, 110.90},
    {"Kincaid Bridge",               -1213.90, 721.10, -89.00, -1087.90, 950.00, 110.90},
    {"Kincaid Bridge",               -1087.90, 855.30, -89.00, -961.90, 986.20, 110.90},
    {"King's",                       -2329.30, 458.40, -7.60, -1993.20, 578.30, 200.00},
    {"King's",                       -2411.20, 265.20, -9.10, -1993.20, 373.50, 200.00},
    {"King's",                       -2253.50, 373.50, -9.10, -1993.20, 458.40, 200.00},
    {"LVA Freight Depot",            1457.30, 863.20, -89.00, 1777.40, 1143.20, 110.90},
    {"LVA Freight Depot",            1375.60, 919.40, -89.00, 1457.30, 1203.20, 110.90},
    {"LVA Freight Depot",            1277.00, 1087.60, -89.00, 1375.60, 1203.20, 110.90},
    {"LVA Freight Depot",            1315.30, 1044.60, -89.00, 1375.60, 1087.60, 110.90},
    {"LVA Freight Depot",            1236.60, 1163.40, -89.00, 1277.00, 1203.20, 110.90},
    {"Las Barrancas",                -926.10, 1398.70, -3.00, -719.20, 1634.60, 200.00},
    {"Las Brujas",                   -365.10, 2123.00, -3.00, -208.50, 2217.60, 200.00},
    {"Las Colinas",                  1994.30, -1100.80, -89.00, 2056.80, -920.80, 110.90},
    {"Las Colinas",                  2056.80, -1126.30, -89.00, 2126.80, -920.80, 110.90},
    {"Las Colinas",                  2185.30, -1154.50, -89.00, 2281.40, -934.40, 110.90},
    {"Las Colinas",                  2126.80, -1126.30, -89.00, 2185.30, -934.40, 110.90},
    {"Las Colinas",                  2747.70, -1120.00, -89.00, 2959.30, -945.00, 110.90},
    {"Las Colinas",                  2632.70, -1135.00, -89.00, 2747.70, -945.00, 110.90},
    {"Las Colinas",                  2281.40, -1135.00, -89.00, 2632.70, -945.00, 110.90},
    {"Las Payasadas",                -354.30, 2580.30, 2.00, -133.60, 2816.80, 200.00},
    {"Las Venturas Airport",         1236.60, 1203.20, -89.00, 1457.30, 1883.10, 110.90},
    {"Las Venturas Airport",         1457.30, 1203.20, -89.00, 1777.30, 1883.10, 110.90},
    {"Las Venturas Airport",         1457.30, 1143.20, -89.00, 1777.40, 1203.20, 110.90},
    {"Las Venturas Airport",         1515.80, 1586.40, -12.50, 1729.90, 1714.50, 87.50},
    {"Last Dime Motel",              1823.00, 596.30, -89.00, 1997.20, 823.20, 110.90},
    {"Leafy Hollow",                 -1166.90, -1856.00, 0.00, -815.60, -1602.00, 200.00},
    {"Liberty City",                 -1000.00, 400.00, 1300.00, -700.00, 600.00, 1400.00},
    {"Lil' Probe Inn",               -90.20, 1286.80, -3.00, 153.80, 1554.10, 200.00},
    {"Linden Side",                  2749.90, 943.20, -89.00, 2923.30, 1198.90, 110.90},
    {"Linden Station",               2749.90, 1198.90, -89.00, 2923.30, 1548.90, 110.90},
    {"Linden Station",               2811.20, 1229.50, -39.50, 2861.20, 1407.50, 60.40},
    {"Little Mexico",                1701.90, -1842.20, -89.00, 1812.60, -1722.20, 110.90},
    {"Little Mexico",                1758.90, -1722.20, -89.00, 1812.60, -1577.50, 110.90},
    {"Los Flores",                   2581.70, -1454.30, -89.00, 2632.80, -1393.40, 110.90},
    {"Los Flores",                   2581.70, -1393.40, -89.00, 2747.70, -1135.00, 110.90},
    {"Los Santos International",     1249.60, -2394.30, -89.00, 1852.00, -2179.20, 110.90},
    {"Los Santos International",     1852.00, -2394.30, -89.00, 2089.00, -2179.20, 110.90},
    {"Los Santos International",     1382.70, -2730.80, -89.00, 2201.80, -2394.30, 110.90},
    {"Los Santos International",     1974.60, -2394.30, -39.00, 2089.00, -2256.50, 60.90},
    {"Los Santos International",     1400.90, -2669.20, -39.00, 2189.80, -2597.20, 60.90},
    {"Los Santos International",     2051.60, -2597.20, -39.00, 2152.40, -2394.30, 60.90},
    {"Marina",                       647.70, -1804.20, -89.00, 851.40, -1577.50, 110.90},
    {"Marina",                       647.70, -1577.50, -89.00, 807.90, -1416.20, 110.90},
    {"Marina",                       807.90, -1577.50, -89.00, 926.90, -1416.20, 110.90},
    {"Market",                       787.40, -1416.20, -89.00, 1072.60, -1310.20, 110.90},
    {"Market",                       952.60, -1310.20, -89.00, 1072.60, -1130.80, 110.90},
    {"Market",                       1072.60, -1416.20, -89.00, 1370.80, -1130.80, 110.90},
    {"Market",                       926.90, -1577.50, -89.00, 1370.80, -1416.20, 110.90},
    {"Market Station",               787.40, -1410.90, -34.10, 866.00, -1310.20, 65.80},
    {"Martin Bridge",                -222.10, 293.30, 0.00, -122.10, 476.40, 200.00},
    {"Missionary Hill",              -2994.40, -811.20, 0.00, -2178.60, -430.20, 200.00},
    {"Montgomery",                   1119.50, 119.50, -3.00, 1451.40, 493.30, 200.00},
    {"Montgomery",                   1451.40, 347.40, -6.10, 1582.40, 420.80, 200.00},
    {"Montgomery Intersection",      1546.60, 208.10, 0.00, 1745.80, 347.40, 200.00},
    {"Montgomery Intersection",      1582.40, 347.40, 0.00, 1664.60, 401.70, 200.00},
    {"Mulholland",                   1414.00, -768.00, -89.00, 1667.60, -452.40, 110.90},
    {"Mulholland",                   1281.10, -452.40, -89.00, 1641.10, -290.90, 110.90},
    {"Mulholland",                   1269.10, -768.00, -89.00, 1414.00, -452.40, 110.90},
    {"Mulholland",                   1357.00, -926.90, -89.00, 1463.90, -768.00, 110.90},
    {"Mulholland",                   1318.10, -910.10, -89.00, 1357.00, -768.00, 110.90},
    {"Mulholland",                   1169.10, -910.10, -89.00, 1318.10, -768.00, 110.90},
    {"Mulholland",                   768.60, -954.60, -89.00, 952.60, -860.60, 110.90},
    {"Mulholland",                   687.80, -860.60, -89.00, 911.80, -768.00, 110.90},
    {"Mulholland",                   737.50, -768.00, -89.00, 1142.20, -674.80, 110.90},
    {"Mulholland",                   1096.40, -910.10, -89.00, 1169.10, -768.00, 110.90},
    {"Mulholland",                   952.60, -937.10, -89.00, 1096.40, -860.60, 110.90},
    {"Mulholland",                   911.80, -860.60, -89.00, 1096.40, -768.00, 110.90},
    {"Mulholland",                   861.00, -674.80, -89.00, 1156.50, -600.80, 110.90},
    {"Mulholland Intersection",      1463.90, -1150.80, -89.00, 1812.60, -768.00, 110.90},
    {"North Rock",                   2285.30, -768.00, 0.00, 2770.50, -269.70, 200.00},
    {"Ocean Docks",                  2373.70, -2697.00, -89.00, 2809.20, -2330.40, 110.90},
    {"Ocean Docks",                  2201.80, -2418.30, -89.00, 2324.00, -2095.00, 110.90},
    {"Ocean Docks",                  2324.00, -2302.30, -89.00, 2703.50, -2145.10, 110.90},
    {"Ocean Docks",                  2089.00, -2394.30, -89.00, 2201.80, -2235.80, 110.90},
    {"Ocean Docks",                  2201.80, -2730.80, -89.00, 2324.00, -2418.30, 110.90},
    {"Ocean Docks",                  2703.50, -2302.30, -89.00, 2959.30, -2126.90, 110.90},
    {"Ocean Docks",                  2324.00, -2145.10, -89.00, 2703.50, -2059.20, 110.90},
    {"Ocean Flats",                  -2994.40, 277.40, -9.10, -2867.80, 458.40, 200.00},
    {"Ocean Flats",                  -2994.40, -222.50, -0.00, -2593.40, 277.40, 200.00},
    {"Ocean Flats",                  -2994.40, -430.20, -0.00, -2831.80, -222.50, 200.00},
    {"Octane Springs",               338.60, 1228.50, 0.00, 664.30, 1655.00, 200.00},
    {"Old Venturas Strip",           2162.30, 2012.10, -89.00, 2685.10, 2202.70, 110.90},
    {"Palisades",                    -2994.40, 458.40, -6.10, -2741.00, 1339.60, 200.00},
    {"Palomino Creek",               2160.20, -149.00, 0.00, 2576.90, 228.30, 200.00},
    {"Paradiso",                     -2741.00, 793.40, -6.10, -2533.00, 1268.40, 200.00},
    {"Pershing Square",              1440.90, -1722.20, -89.00, 1583.50, -1577.50, 110.90},
    {"Pilgrim",                      2437.30, 1383.20, -89.00, 2624.40, 1783.20, 110.90},
    {"Pilgrim",                      2624.40, 1383.20, -89.00, 2685.10, 1783.20, 110.90},
    {"Pilson Intersection",          1098.30, 2243.20, -89.00, 1377.30, 2507.20, 110.90},
    {"Pirates in Men's Pants",       1817.30, 1469.20, -89.00, 2027.40, 1703.20, 110.90},
    {"Playa del Seville",            2703.50, -2126.90, -89.00, 2959.30, -1852.80, 110.90},
    {"Prickle Pine",                 1534.50, 2583.20, -89.00, 1848.40, 2863.20, 110.90},
    {"Prickle Pine",                 1117.40, 2507.20, -89.00, 1534.50, 2723.20, 110.90},
    {"Prickle Pine",                 1848.40, 2553.40, -89.00, 1938.80, 2863.20, 110.90},
    {"Prickle Pine",                 1938.80, 2624.20, -89.00, 2121.40, 2861.50, 110.90},
    {"Queens",                       -2533.00, 458.40, 0.00, -2329.30, 578.30, 200.00},
    {"Queens",                       -2593.40, 54.70, 0.00, -2411.20, 458.40, 200.00},
    {"Queens",                       -2411.20, 373.50, 0.00, -2253.50, 458.40, 200.00},
    {"Randolph Industrial Estate",   1558.00, 596.30, -89.00, 1823.00, 823.20, 110.90},
    {"Redsands East",                1817.30, 2011.80, -89.00, 2106.70, 2202.70, 110.90},
    {"Redsands East",                1817.30, 2202.70, -89.00, 2011.90, 2342.80, 110.90},
    {"Redsands East",                1848.40, 2342.80, -89.00, 2011.90, 2478.40, 110.90},
    {"Redsands West",                1236.60, 1883.10, -89.00, 1777.30, 2142.80, 110.90},
    {"Redsands West",                1297.40, 2142.80, -89.00, 1777.30, 2243.20, 110.90},
    {"Redsands West",                1377.30, 2243.20, -89.00, 1704.50, 2433.20, 110.90},
    {"Redsands West",                1704.50, 2243.20, -89.00, 1777.30, 2342.80, 110.90},
    {"Regular Tom",                  -405.70, 1712.80, -3.00, -276.70, 1892.70, 200.00},
    {"Richman",                      647.50, -1118.20, -89.00, 787.40, -954.60, 110.90},
    {"Richman",                      647.50, -954.60, -89.00, 768.60, -860.60, 110.90},
    {"Richman",                      225.10, -1369.60, -89.00, 334.50, -1292.00, 110.90},
    {"Richman",                      225.10, -1292.00, -89.00, 466.20, -1235.00, 110.90},
    {"Richman",                      72.60, -1404.90, -89.00, 225.10, -1235.00, 110.90},
    {"Richman",                      72.60, -1235.00, -89.00, 321.30, -1008.10, 110.90},
    {"Richman",                      321.30, -1235.00, -89.00, 647.50, -1044.00, 110.90},
    {"Richman",                      321.30, -1044.00, -89.00, 647.50, -860.60, 110.90},
    {"Richman",                      321.30, -860.60, -89.00, 687.80, -768.00, 110.90},
    {"Richman",                      321.30, -768.00, -89.00, 700.70, -674.80, 110.90},
    {"Robada Intersection",          -1119.00, 1178.90, -89.00, -862.00, 1351.40, 110.90},
    {"Roca Escalante",               2237.40, 2202.70, -89.00, 2536.40, 2542.50, 110.90},
    {"Roca Escalante",               2536.40, 2202.70, -89.00, 2625.10, 2442.50, 110.90},
    {"Rockshore East",               2537.30, 676.50, -89.00, 2902.30, 943.20, 110.90},
    {"Rockshore West",               1997.20, 596.30, -89.00, 2377.30, 823.20, 110.90},
    {"Rockshore West",               2377.30, 596.30, -89.00, 2537.30, 788.80, 110.90},
    {"Rodeo",                        72.60, -1684.60, -89.00, 225.10, -1544.10, 110.90},
    {"Rodeo",                        72.60, -1544.10, -89.00, 225.10, -1404.90, 110.90},
    {"Rodeo",                        225.10, -1684.60, -89.00, 312.80, -1501.90, 110.90},
    {"Rodeo",                        225.10, -1501.90, -89.00, 334.50, -1369.60, 110.90},
    {"Rodeo",                        334.50, -1501.90, -89.00, 422.60, -1406.00, 110.90},
    {"Rodeo",                        312.80, -1684.60, -89.00, 422.60, -1501.90, 110.90},
    {"Rodeo",                        422.60, -1684.60, -89.00, 558.00, -1570.20, 110.90},
    {"Rodeo",                        558.00, -1684.60, -89.00, 647.50, -1384.90, 110.90},
    {"Rodeo",                        466.20, -1570.20, -89.00, 558.00, -1385.00, 110.90},
    {"Rodeo",                        422.60, -1570.20, -89.00, 466.20, -1406.00, 110.90},
    {"Rodeo",                        466.20, -1385.00, -89.00, 647.50, -1235.00, 110.90},
    {"Rodeo",                        334.50, -1406.00, -89.00, 466.20, -1292.00, 110.90},
    {"Royal Casino",                 2087.30, 1383.20, -89.00, 2437.30, 1543.20, 110.90},
    {"San Andreas Sound",            2450.30, 385.50, -100.00, 2759.20, 562.30, 200.00},
    {"Santa Flora",                  -2741.00, 458.40, -7.60, -2533.00, 793.40, 200.00},
    {"Santa Maria Beach",            342.60, -2173.20, -89.00, 647.70, -1684.60, 110.90},
    {"Santa Maria Beach",            72.60, -2173.20, -89.00, 342.60, -1684.60, 110.90},
    {"Shady Cabin",                  -1632.80, -2263.40, -3.00, -1601.30, -2231.70, 200.00},
    {"Shady Creeks",                 -1820.60, -2643.60, -8.00, -1226.70, -1771.60, 200.00},
    {"Shady Creeks",                 -2030.10, -2174.80, -6.10, -1820.60, -1771.60, 200.00},
    {"Sobell Rail Yards",            2749.90, 1548.90, -89.00, 2923.30, 1937.20, 110.90},
    {"Spinybed",                     2121.40, 2663.10, -89.00, 2498.20, 2861.50, 110.90},
    {"Starfish Casino",              2437.30, 1783.20, -89.00, 2685.10, 2012.10, 110.90},
    {"Starfish Casino",              2437.30, 1858.10, -39.00, 2495.00, 1970.80, 60.90},
    {"Starfish Casino",              2162.30, 1883.20, -89.00, 2437.30, 2012.10, 110.90},
    {"Temple",                       1252.30, -1130.80, -89.00, 1378.30, -1026.30, 110.90},
    {"Temple",                       1252.30, -1026.30, -89.00, 1391.00, -926.90, 110.90},
    {"Temple",                       1252.30, -926.90, -89.00, 1357.00, -910.10, 110.90},
    {"Temple",                       952.60, -1130.80, -89.00, 1096.40, -937.10, 110.90},
    {"Temple",                       1096.40, -1130.80, -89.00, 1252.30, -1026.30, 110.90},
    {"Temple",                       1096.40, -1026.30, -89.00, 1252.30, -910.10, 110.90},
    {"The Camel's Toe",              2087.30, 1203.20, -89.00, 2640.40, 1383.20, 110.90},
    {"The Clown's Pocket",           2162.30, 1783.20, -89.00, 2437.30, 1883.20, 110.90},
    {"The Emerald Isle",             2011.90, 2202.70, -89.00, 2237.40, 2508.20, 110.90},
    {"The Farm",                     -1209.60, -1317.10, 114.90, -908.10, -787.30, 251.90},
    {"The Four Dragons Casino",      1817.30, 863.20, -89.00, 2027.30, 1083.20, 110.90},
    {"The High Roller",              1817.30, 1283.20, -89.00, 2027.30, 1469.20, 110.90},
    {"The Mako Span",                1664.60, 401.70, 0.00, 1785.10, 567.20, 200.00},
    {"The Panopticon",               -947.90, -304.30, -1.10, -319.60, 327.00, 200.00},
    {"The Pink Swan",                1817.30, 1083.20, -89.00, 2027.30, 1283.20, 110.90},
    {"The Sherman Dam",              -968.70, 1929.40, -3.00, -481.10, 2155.20, 200.00},
    {"The Strip",                    2027.40, 863.20, -89.00, 2087.30, 1703.20, 110.90},
    {"The Strip",                    2106.70, 1863.20, -89.00, 2162.30, 2202.70, 110.90},
    {"The Strip",                    2027.40, 1783.20, -89.00, 2162.30, 1863.20, 110.90},
    {"The Strip",                    2027.40, 1703.20, -89.00, 2137.40, 1783.20, 110.90},
    {"The Visage",                   1817.30, 1863.20, -89.00, 2106.70, 2011.80, 110.90},
    {"The Visage",                   1817.30, 1703.20, -89.00, 2027.40, 1863.20, 110.90},
    {"Unity Station",                1692.60, -1971.80, -20.40, 1812.60, -1932.80, 79.50},
    {"Valle Ocultado",               -936.60, 2611.40, 2.00, -715.90, 2847.90, 200.00},
    {"Verdant Bluffs",               930.20, -2488.40, -89.00, 1249.60, -2006.70, 110.90},
    {"Verdant Bluffs",               1073.20, -2006.70, -89.00, 1249.60, -1842.20, 110.90},
    {"Verdant Bluffs",               1249.60, -2179.20, -89.00, 1692.60, -1842.20, 110.90},
    {"Verdant Meadows",              37.00, 2337.10, -3.00, 435.90, 2677.90, 200.00},
    {"Verona Beach",                 647.70, -2173.20, -89.00, 930.20, -1804.20, 110.90},
    {"Verona Beach",                 930.20, -2006.70, -89.00, 1073.20, -1804.20, 110.90},
    {"Verona Beach",                 851.40, -1804.20, -89.00, 1046.10, -1577.50, 110.90},
    {"Verona Beach",                 1161.50, -1722.20, -89.00, 1323.90, -1577.50, 110.90},
    {"Verona Beach",                 1046.10, -1722.20, -89.00, 1161.50, -1577.50, 110.90},
    {"Vinewood",                     787.40, -1310.20, -89.00, 952.60, -1130.80, 110.90},
    {"Vinewood",                     787.40, -1130.80, -89.00, 952.60, -954.60, 110.90},
    {"Vinewood",                     647.50, -1227.20, -89.00, 787.40, -1118.20, 110.90},
    {"Vinewood",                     647.70, -1416.20, -89.00, 787.40, -1227.20, 110.90},
    {"Whitewood Estates",            883.30, 1726.20, -89.00, 1098.30, 2507.20, 110.90},
    {"Whitewood Estates",            1098.30, 1726.20, -89.00, 1197.30, 2243.20, 110.90},
    {"Willowfield",                  1970.60, -2179.20, -89.00, 2089.00, -1852.80, 110.90},
    {"Willowfield",                  2089.00, -2235.80, -89.00, 2201.80, -1989.90, 110.90},
    {"Willowfield",                  2089.00, -1989.90, -89.00, 2324.00, -1852.80, 110.90},
    {"Willowfield",                  2201.80, -2095.00, -89.00, 2324.00, -1989.90, 110.90},
    {"Willowfield",                  2541.70, -1941.40, -89.00, 2703.50, -1852.80, 110.90},
    {"Willowfield",                  2324.00, -2059.20, -89.00, 2541.70, -1852.80, 110.90},
    {"Willowfield",                  2541.70, -2059.20, -89.00, 2703.50, -1941.40, 110.90},
    {"Yellow Bell Station",          1377.40, 2600.40, -21.90, 1492.40, 2687.30, 78.00},
    {"Los Santos",                   44.60, -2892.90, -242.90, 2997.00, -768.00, 900.00},
    {"Las Venturas",                 869.40, 596.30, -242.90, 2997.00, 2993.80, 900.00},
    {"Bone County",                  -480.50, 596.30, -242.90, 869.40, 2993.80, 900.00},
    {"Tierra Robada",                -2997.40, 1659.60, -242.90, -480.50, 2993.80, 900.00},
    {"Tierra Robada",                -1213.90, 596.30, -242.90, -480.50, 1659.60, 900.00},
    {"San Fierro",                   -2997.40, -1115.50, -242.90, -1213.90, 1659.60, 900.00},
    {"Red County",                   -1213.90, -768.00, -242.90, 2997.00, 596.30, 900.00},
    {"Flint County",                 -1213.90, -2892.90, -242.90, 44.60, -768.00, 900.00},
    {"Whetstone",                    -2997.40, -2892.90, -242.90, -1213.90, -1115.50, 900.00}
};


stock GetZoneName(Float:x, Float:y, Float:z)
{
    new zone[32];

    for (new i = 0; i < sizeof(zoneArray); i ++)
    {
        if ((zoneArray[i][zoneMinX] <= x <= zoneArray[i][zoneMaxX]) && (zoneArray[i][zoneMinY] <= y <= zoneArray[i][zoneMaxY]) && (zoneArray[i][zoneMinZ] <= z <= zoneArray[i][zoneMaxZ]))
        {
            strcpy(zone, zoneArray[i][zoneName]);
            return zone;
        }
    }

    return zone;
}

stock GangZoneCreateEx(Float:minx, Float:miny, Float:maxx, Float:maxy)
{
    return GangZoneCreate((minx > maxx) ? (maxx) : (minx), (miny > maxy) ? (maxy) : (miny), (minx > maxx) ? (minx) : (maxx), (miny > maxy) ? (miny) : (maxy));
}

stock Float:GetDistanceBetweenPoints(Float:x1, Float:y1, Float:z1, Float:x2, Float:y2, Float:z2)
{
    return floatsqroot(floatpower(x1 - x2, 2) + floatpower(y1 - y2, 2) + floatpower(z1 - z2, 2));
}

stock Float:DistanceCameraTargetToLocation(Float:cx, Float:cy, Float:cz, Float:ox, Float:oy, Float:oz, Float:vx, Float:vy, Float:vz)
{
    new Float:distance = GetDistanceBetweenPoints(cx, cy, cz, ox, oy, oz);
    return GetDistanceBetweenPoints(vx * distance + cx, vy * distance + cy, vz * distance + cz, ox, oy, oz);
}

stock IsPointInRangeOfPoint(Float:x1, Float:y1, Float:z1, Float:radius, Float:x2, Float:y2, Float:z2)
{
    x1 -= x2;
    y1 -= y2;
    z1 -= z2;

    return ((x1 * x1) + (y1 * y1) + (z1 * z1)) < (radius * radius);
}

// --- Player ---

stock IsPlayerAiming(playerid)
{
    new keys, ud, lr;
    GetPlayerKeys(playerid, keys, ud, lr);
    if ((keys & KEY_HANDBRAKE) & KEY_HANDBRAKE && (22 <= GetPlayerWeapon(playerid) <= 38))
    {
        switch (GetPlayerAnimationIndex(playerid))
        {
            case 1160..1167, 360..363, 220, 640, 1189, 1331, 1365, 1453, 1449, 1643:
            {
                return 1;
            }
        }
    }
    return 0;
}

stock IsPlayerNearPoint(playerid, Float:range, Float:x, Float:y, Float:z, interior = -1, world = -1)
{
    return IsPlayerInRangeOfPoint(playerid, range, x, y, z) &&
           (interior == -1 || interior == GetPlayerInterior(playerid)) &&
           (world    == -1 || world    == GetPlayerVirtualWorld(playerid));
}

stock Float:GetDistanceBetweenPlayers(player1, player2)
{
    new Float: pos[3];
    GetPlayerPos(player1, pos[0], pos[1], pos[2]);
    return GetPlayerDistanceFromPoint(player2, pos[0], pos[1], pos[2]);
}

stock IsPlayerNearPlayer(playerid, targetid, Float:radius)
{
    static Float:x, Float:y, Float:z;
    GetPlayerPos(targetid, x, y, z);
    return (IsPlayerInRangeOfPoint(playerid, radius, x, y, z) && GetPlayerInterior(playerid) == GetPlayerInterior(targetid) && GetPlayerVirtualWorld(playerid) == GetPlayerVirtualWorld(targetid));
}

stock GetClosestPlayer(playerid)
{
    new Float:range = 99999.99;
    new nearestid = INVALID_PLAYER_ID;

    foreach(new nid: Player)
    {
        if (playerid != nid && IsPlayerNearPlayer(playerid, nid, range))
        {
            range = GetDistanceBetweenPlayers(playerid, nid);
            nearestid = nid;
        }
    }
    return nearestid;
}

stock IsPlayerInSF(playerid)
{
    return (IsPlayerInRangeOfPoint(playerid, 1800.0, -2208.5339, 207.5916, 34.7299)); // SF Center
}
stock SendToLs(playerid)
{
    TeleportToCoords(playerid, 1544.4407, -1675.5522, 13.5584, 90.0000, 0, 0);
}

stock GetPlayerIP(playerid)
{
    new ip[16];
    GetPlayerIp(playerid, ip, sizeof(ip));
    return ip;
}

stock GetPlayerIPRange(playerid, ch = '*')
{
    new string[16], part[2];
    if (!sscanf(GetPlayerIP(playerid), "p<.>ii{ii}", part[0], part[1]))
    {
        format(string, sizeof(string), "%i.%i.%c.%c", part[0], part[1], ch, ch);
    }
    return string;
}

stock GetPlayerHealthEx(playerid)
{
    new Float:health;
    GetPlayerHealth(playerid, health);
    return floatround(health);
}

stock GetPlayerArmourEx(playerid)
{
    new Float:armor;
    GetPlayerArmour(playerid, armor);
    return floatround(armor);
}

stock GetPlayerNameEx(playerid)
{
    new name[MAX_PLAYER_NAME];
    GetPlayerName(playerid, name, sizeof(name));
    return name;
}

stock GetPlayerID(const name[])
{
    if (!isnull(name))
    {
        foreach(new i : Player)
        {
            if (strmatch(GetPlayerNameEx(i), name))
            {
                return i;
            }
        }
    }
    return INVALID_PLAYER_ID;
}

stock GetNameWithSpace(oldName[])
{
    new name[MAX_PLAYER_NAME];

    format(name, sizeof(name), "%s", oldName);

    for (new i = 0; name[i] ; i++)
    {
        if (name[i] == '_')
        {
            name[i] = ' ';
        }
    }
    return name;
}

stock GetRPName(playerid)
{
    new name[MAX_PLAYER_NAME];
    name = GetPlayerNameEx(playerid);
    name = GetNameWithSpace(name);
    return name; // crash when passing string function output to another function
}

stock PlaySoundForPlayersInRange(soundid, Float:range, Float:x, Float:y, Float:z)
{
    foreach (new i : Player)
    {
        if (IsPlayerInRangeOfPoint(i,range,x,y,z))
        {
            PlayerPlaySound(i, soundid, x, y, z);
        }
    }
}

stock PlayerPlaySoundEx(playerid, soundid, Float:range=20.0)
{
    new Float: pos[3];
    GetPlayerPos(playerid, pos[0], pos[1], pos[2]);
    PlaySoundForPlayersInRange(soundid, range, pos[0], pos[1], pos[2]);
    return 1;
}

stock IsValidModel(modelid)
{
    static modeldat[] =
    {
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -128,
        -515899393, -134217729, -1, -1, 33554431, -1, -1, -1, -14337, -1, -33,
        127, 0, 0, 0, 0, 0, -8388608, -1, -1, -1, -16385, -1, -1, -1, -1, -1,
       -1, -1, -33, -1, -771751937, -1, -9, -1, -1, -1, -1, -1, -1, -1, -1, -1,
       -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
       -1, -1, -1, -1, -1, -1, -1, -1, 33554431, -25, -1, -1, -1, -1, -1, -1,
       -1073676289, -2147483648, 34079999, 2113536, -4825600, -5, -1, -3145729,
       -1, -16777217, -63, -1, -1, -1, -1, -201326593, -1, -1, -1, -1, -1,
       -257, -1, 1073741823, -133122, -1, -1, -65, -1, -1, -1, -1, -1, -1,
       -2146435073, -1, -1, -1, -1, -1, -1, -1, -1, -1, 1073741823, -64, -1,
       -1, -1, -1, -2635777, 134086663, 0, -64, -1, -1, -1, -1, -1, -1, -1,
       -536870927, -131069, -1, -1, -1, -1, -1, -1, -1, -1, -16384, -1,
       -33554433, -1, -1, -1, -1, -1, -1610612737, 524285, -128, -1,
       2080309247, -1, -1, -1114113, -1, -1, -1, 66977343, -524288, -1, -1, -1,
       -1, -2031617, -1, 114687, -256, -1, -4097, -1, -4097, -1, -1,
       1010827263, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -32768, -1, -1, -1, -1, -1,
       2147483647, -33554434, -1, -1, -49153, -1148191169, 2147483647,
       -100781080, -262145, -57, 134217727, -8388608, -1, -1, -1, -1, -1, -1,
       -1, -1, -1, -1, -1, -1, -1, -1, -1048577, -1, -449, -1017, -1, -1, -1,
       -1, -1, -1, -1, -1, -1, -1, -1, -1835009, -2049, -1, -1, -1, -1, -1, -1,
       -8193, -1, -536870913, -1, -1, -1, -1, -1, -87041, -1, -1, -1, -1, -1,
       -1, -209860, -1023, -8388609, -2096897, -1, -1048577, -1, -1, -1, -1,
       -1, -1, -897, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1610612737,
       -3073, -28673, -1, -1, -1, -1537, -1, -1, -13, -1, -1, -1, -1, -1985,
       -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1056964609, -1, -1, -1,
       -1, -1, -1, -1, -2, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
       -236716037, -1, -1, -1, -1, -1, -1, -1, -536870913, 3, 0, 0, 0, 0, 0, 0,
       0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
       0, 0, 0, 0, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
       -1, -1, -1, -1, -1, -2097153, -2109441, -1, 201326591, -4194304, -1, -1,
       -241, -1, -1, -1, -1, -1, -1, 7, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
       0, -32768, -1, -1, -1, -2, -671096835, -1, -8388609, -66323585, -13,
       -1793, -32257, -247809, -1, -1, -513, 16252911, 0, 0, 0, -131072,
       33554383, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
       0, 0, 0, 0, 0, 0, 0, 0, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
       -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 8356095, 0, 0, 0, 0, 0,
       0, -256, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
       -268435449, -1, -1, -2049, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
       92274627, -65536, -2097153, -268435457, 591191935, 1, 0, -16777216, -1,
       -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 127
    };
    if ((modelid >= 0) && ((modelid / 32) < sizeof (modeldat)) && (modeldat[modelid / 32] & (1 << (modelid % 32))))
    {
        return 1;
    }
    if ((18632 <= modelid <= 19999) || (11682 <= modelid <= 11753))
    {
        return 1;
    }
    return 0;
}

stock SetAttachedObject(playerid, modelid, bone, Float:x = 0.0, Float:y = 0.0, Float:z = 0.0, Float:rx = 0.0, Float:ry = 0.0, Float:rz = 0.0, Float:sx = 1.0, Float:sy = 1.0, Float:sz = 1.0, materialcolor1 = 0, materialcolor2 = 0)
{
    for (new i = 0; i < MAX_PLAYER_ATTACHED_OBJECTS; i ++)
    {
        if (!IsPlayerAttachedObjectSlotUsed(playerid, i))
        {
            SetPlayerAttachedObject(playerid, i, modelid, bone, x, y, z, rx, ry, rz, sx, sy, sz, materialcolor1, materialcolor2);
            return i;
        }
    }
    return -1;
}

stock Float:GetPlayerSpeed(playerid)
{
    static Float:velocity[3];

    if (IsPlayerInAnyVehicle(playerid))
        GetVehicleVelocity(GetPlayerVehicleID(playerid), velocity[0], velocity[1], velocity[2]);
    else
        GetPlayerVelocity(playerid, velocity[0], velocity[1], velocity[2]);

    return floatsqroot((velocity[0] * velocity[0]) + (velocity[1] * velocity[1]) + (velocity[2] * velocity[2])) * 100.0;
}

stock GetDeathReason(reason)
{
    new string[24];
    switch (reason)
    {
        case 0: string = "Fists";
        case 18: string = "Molotov Cocktail";
        case 44: string = "Nightvision Goggles";
        case 45: string = "Infrared Goggles";
        case 49: string = "Vehicle";
        case 50: string = "Helicopter Blades";
        case 51: string = "Explosion";
        case 53: string = "Drowned";
        case 54: string = "Splat";
        default: GetWeaponName(reason, string, sizeof(string));
    }
    return string;
}

stock GetBodyPartName(bodypart)
{
    new bodyname[20] = EOS;

    switch (bodypart)
    {
        case BODY_PART_HEAD:bodyname = "HEAD";
        case BODY_PART_CHEST:bodyname = "CHEST";
        case BODY_PART_GROIN:bodyname = "GROIN";
        case BODY_PART_LEFT_ARM:bodyname = "LEFT ARM";
        case BODY_PART_RIGHT_ARM:bodyname = "RIGHT ARM";
        case BODY_PART_LEFT_LEG:bodyname = "LEFT LEG";
        case BODY_PART_RIGHT_LEG:bodyname = "RIGHT LEG";
    }

    return bodyname;
}

stock GetBoneName(boneid)
{
    new string[16] = EOS;
    switch (boneid)
    {
        case 1: string = "Spine";
        case 2: string = "Head";
        case 3: string = "Left upper arm";
        case 4: string = "Right upper arm";
        case 5: string = "Left hand";
        case 6: string = "Right hand";
        case 7: string = "Left thigh";
        case 8: string = "Right thigh";
        case 9: string = "Left foot";
        case 10: string = "Right foot";
        case 11: string = "Right calf";
        case 12: string = "Left calf";
        case 13: string = "Left forearm";
        case 14: string = "Right forearm";
        case 15: string = "Left shoulder";
        case 16: string = "Right shoulder";
        case 17: string = "Neck";
        case 18: string = "Jaw";
    }
    return string;
}


// --- Vehicle ---

stock IsVehicleTowedToTrailer(trailerid)
{
    foreach(new vehicleid: Vehicle)
    {
        if (GetVehicleTrailer(vehicleid) == trailerid)
            return true;
    }
    return false;
}

// --- Send Message ---

stock PlayerText:ShowPlayerBox(playerid, color)
{
    new PlayerText:textid;

    textid = CreatePlayerTextDraw(playerid, 0.000000, 0.000000, "_");
    PlayerTextDrawFont(playerid, textid, 1);
    PlayerTextDrawLetterSize(playerid, textid, 0.500000, 50.000000);
    PlayerTextDrawColor(playerid, textid, -1);
    PlayerTextDrawUseBox(playerid, textid, 1);
    PlayerTextDrawBoxColor(playerid, textid, color);
    PlayerTextDrawTextSize(playerid, textid, 640.000000, 30.000000);
    PlayerTextDrawShow(playerid, textid);

    return textid;
}

stock ShowActionBubble(playerid, text[], {Float, _}:...)
{
    static sizeArgsInBytes, args, str[192];

    /*
     *  Custom function that uses #emit to format variables into a string.
     *  This code is very fragile; touching any code here will cause crashing!
    */
    if ((args = numargs()) <= 2)
    {
        SetPlayerChatBubble(playerid, text, 0xC2A2DAFF, 25.0, 6000);
    }
    else
    {
        sizeArgsInBytes = (1 + args) * 4;
        while (--args >= 2)
        {
            #emit LCTRL 5
            #emit LOAD.alt args
            #emit SHL.C.alt 2
            #emit ADD.C 12
            #emit ADD
            #emit LOAD.I
            #emit PUSH.pri
        }
        #emit PUSH.S    text
        #emit PUSH.C    192
        #emit PUSH.C    str
        // Push the number of parameters passed (in bytes) to the function.
        #emit PUSH      sizeArgsInBytes
        #emit SYSREQ.C  format
        #emit LCTRL     5
        #emit SCTRL     4

        SetPlayerChatBubble(playerid, str, 0xC2A2DAFF, 25.0, 6000);

        #emit RETN
    }
    return 1;
}

stock SendClientSplitMessage(playerid, color, const text[])
{
    new string[192], parse[12], length;

    length = strlen(text);
    if (length < 100)
    {
        SendClientMessage(playerid, color, text);
    }
    else
    {
        for (new i = 0; i < 100; i ++)
        {
            if ((i + 7 < length) && (text[i] == '{' && text[i + 7] == '}'))
            {
                strmid(parse, text, i, i + 8);
            }
        }
        strmid(string, text, 0, 100);

        SendClientMessage(playerid, color, string);

        strmid(string, text, 100, length);
        strins(string, "...", 0);

        if (strlen(parse) > 0)
        {
            strins(string, parse, 0);
        }
        SendClientMessage(playerid, color, string);
    }
}

stock SendClientSplitMessageEx(playerid, color, const text[], {Float, _}:...)
{
    static sizeArgsInBytes, args, str[192];

    /*
     *  Custom function that uses #emit to format variables into a string.
     *  This code is very fragile; touching any code here will cause crashing!
    */
    if ((args = numargs()) <= 3)
    {
        SendClientSplitMessage(playerid, color, text);
    }
    else
    {
        sizeArgsInBytes = (1 + args) * 4;
        while (--args >= 3)
        {
            #emit LCTRL 5
            #emit LOAD.alt args
            #emit SHL.C.alt 2
            #emit ADD.C 12
            #emit ADD
            #emit LOAD.I
            #emit PUSH.pri
        }
        #emit PUSH.S    text
        #emit PUSH.C    192
        #emit PUSH.C    str
        // Push the number of parameters passed (in bytes) to the function.
        #emit PUSH      sizeArgsInBytes
        #emit SYSREQ.C  format
        #emit LCTRL     5
        #emit SCTRL     4

        SendClientSplitMessage(playerid, color, str);

        #emit RETN
    }
    return 1;
}

stock PlayerTextDrawFormatString(playerid, PlayerText:playertextid, text[], {Float, _}:...)
{
    static sizeArgsInBytes, args, str[192];

    /*
     *  Custom function that uses #emit to format variables into a string.
     *  This code is very fragile; touching any code here will cause crashing!
    */
    if ((args = numargs()) <= 3)
    {
        PlayerTextDrawSetString(playerid, playertextid, text);
    }
    else
    {
        sizeArgsInBytes = (1 + args) * 4;
        while (--args >= 3)
        {
            #emit LCTRL 5
            #emit LOAD.alt args
            #emit SHL.C.alt 2
            #emit ADD.C 12
            #emit ADD
            #emit LOAD.I
            #emit PUSH.pri
        }
        #emit PUSH.S    text
        #emit PUSH.C    192
        #emit PUSH.C    str
        // Push the number of parameters passed (in bytes) to the function.
        #emit PUSH      sizeArgsInBytes
        #emit SYSREQ.C  format
        #emit LCTRL     5
        #emit SCTRL     4

        PlayerTextDrawSetString(playerid, playertextid, str);

        #emit RETN
    }
    return 1;
}

stock SendDistanceMessage(playerid, Float:distance, color, const text[], {Float, _}:...)
{
    static sizeArgsInBytes, args, str[192];

    /*
     *  Custom function that uses #emit to format variables into a string.
     *  This code is very fragile; touching any code here will cause crashing!
    */
    if ((args = numargs()) <= 4)
    {
        foreach (new i : Player)
        {
            if (IsPlayerNearPlayer(i, playerid, distance))
            {
                SendClientSplitMessageEx(i, color, text);
            }
        }
    }
    else
    {
        sizeArgsInBytes = (1 + args) * 4;
        while (--args >= 4)
        {
            #emit LCTRL 5
            #emit LOAD.alt args
            #emit SHL.C.alt 2
            #emit ADD.C 12
            #emit ADD
            #emit LOAD.I
            #emit PUSH.pri
        }
        #emit PUSH.S    text
        #emit PUSH.C    192
        #emit PUSH.C    str
        // Push the number of parameters passed (in bytes) to the function.
        #emit PUSH      sizeArgsInBytes
        #emit SYSREQ.C  format
        #emit LCTRL     5
        #emit SCTRL     4

        foreach (new i : Player)
        {
            if (IsPlayerNearPlayer(i, playerid, distance))
            {
                SendClientSplitMessageEx(i, color, str);
            }
        }

        #emit RETN
    }
    return 1;
}

SendClientMessageEx(playerid, color, const text[], {Float,_}:...)
{
    static sizeArgsInBytes, args, str[192];

    if ((args = numargs()) <= 3)
    {
        SendClientMessage(playerid, color, text);
    }
    else
    {
        sizeArgsInBytes = (1 + args) * 4;
        while (--args >= 3)
        {
            #emit LCTRL     5
            #emit LOAD.alt  args
            #emit SHL.C.alt 2
            #emit ADD.C     12
            #emit ADD
            #emit LOAD.I
            #emit PUSH.pri
        }
        #emit PUSH.S    text
        #emit PUSH.C    192
        #emit PUSH.C    str
        // Push the number of parameters passed (in bytes) to the function.
        #emit PUSH      sizeArgsInBytes
        #emit SYSREQ.C  format
        #emit LCTRL     5
        #emit SCTRL     4

        SendClientMessage(playerid, color, str);

        #emit RETN
    }
    return 1;
}

stock SendNearbyMessage(playerid, Float:radius, color, const text[], {Float,_}:...)
{
    static sizeArgsInBytes, args, str[192];

    if ((args = numargs()) <= 4)
    {
        foreach(new i : Player)
        {
            if (IsPlayerNearPlayer(i, playerid, radius))
            {
                SendClientMessage(i, color, text);
            }
        }

    }
    else
    {
        sizeArgsInBytes = (1 + args) * 4;
        while (--args >= 4)
        {
            #emit LCTRL     5
            #emit LOAD.alt  args
            #emit SHL.C.alt 2
            #emit ADD.C     12
            #emit ADD
            #emit LOAD.I
            #emit PUSH.pri
        }
        #emit PUSH.S    text
        #emit PUSH.C    192
        #emit PUSH.C    str
        // Push the number of parameters passed (in bytes) to the function.
        #emit PUSH      sizeArgsInBytes
        #emit SYSREQ.C  format
        #emit LCTRL     5
        #emit SCTRL     4

        foreach(new i : Player)
        {
            if (IsPlayerNearPlayer(i, playerid, radius))
            {
                SendClientMessage(i, color, str);
            }
        }

        #emit RETN
    }
    return 1;
}

stock SetPlayerBubbleText(playerid, Float:drawdistance, color, text[], {Float,_}:...)
{
    static sizeArgsInBytes, args, str[192];

    if ((args = numargs()) <= 4)
    {
        SetPlayerChatBubble(playerid, text, color, drawdistance, 8000);
    }
    else
    {
        sizeArgsInBytes = (1 + args) * 4;
        while (--args >= 4)
        {
            #emit LCTRL     5
            #emit LOAD.alt  args
            #emit SHL.C.alt 2
            #emit ADD.C     12
            #emit ADD
            #emit LOAD.I
            #emit PUSH.pri
        }
        #emit PUSH.S    text
        #emit PUSH.C    192
        #emit PUSH.C    str
        // Push the number of parameters passed (in bytes) to the function.
        #emit PUSH      sizeArgsInBytes
        #emit SYSREQ.C  format
        #emit LCTRL     5
        #emit SCTRL     4

        SetPlayerChatBubble(playerid, str, color, drawdistance, 8000);

        #emit RETN
    }
    return 1;
}

stock SendUnauthorized(playerid)
{
    return SendClientMessage(playerid, 0xAFAFAFFF, "[!] You are not authorized to use this command.");
}

stock SendUnautorizedGate(playerid)
{
    return SendClientMessage(playerid, 0xAFAFAFFF, "[!] You are not authorized to open this gate.");
}

stock SendUnautorizedDoor(playerid)
{
    return SendClientMessage(playerid, 0xAFAFAFFF, "[!] You are not authorized to open this door.");
}

stock SendUnautorizedCell(playerid)
{
    return SendClientMessage(playerid, 0xAFAFAFFF, "[!] You are not authorized to open this cell.");
}

stock SendUnautorizedChat(playerid)
{
    return SendClientMessage(playerid, 0xAFAFAFFF, "[!] You are not authorized to use this chat.");
}

stock SendUnautorizedTogF(playerid)
{
    return SendClientMessage(playerid, 0xAFAFAFFF, "[!] You are not authorized to toggle this feature.");
}

stock SendNoPermission(playerid)
{
    return SendClientMessage(playerid, 0xAFAFAFFF, "[!] You don't have permission to use this command.");
}

stock SendUsageHeader(playerid, cmd[], params[])
{
    return SendClientMessageEx(playerid, 0xAFAFAFFF, " {00F000}USAGE: {FFFFFF}/%s {AFAFAF}%s", cmd, params);
}

stock ClearChat(playerid)
{
    for (new i = 0; i < 30; i ++)
    {
        SendClientMessage(playerid, -1, " ");
    }
}

// --- Streamer ---

stock Streamer_GetExtraInt(objectid, type)
{
    new extra[11];
    if (Streamer_GetArrayData(STREAMER_TYPE_OBJECT, objectid, E_STREAMER_EXTRA_ID, extra, sizeof(extra)))
    {
        return extra[type];
    }
    return 0;
}

stock Streamer_SetExtraInt(objectid, type, value)
{
    new extra[11];
    if (Streamer_GetArrayData(STREAMER_TYPE_OBJECT, objectid, E_STREAMER_EXTRA_ID, extra, sizeof(extra)))
    {
        extra[type] = value;
        return Streamer_SetArrayData(STREAMER_TYPE_OBJECT, objectid, E_STREAMER_EXTRA_ID, extra, sizeof(extra));
    }
    return 0;
}

stock Float:Streamer_GetExtraFloat(objectid, type)
{
    new
        string[24];

    getproperty(.id = objectid, .value = type, .string = string);
    strunpack(string, string);
    return floatstr(string);
}

stock Streamer_SetExtraFloat(objectid, type, Float:value)
{
    new
        string[24];

    format(string, sizeof(string), "%f", value);
    setproperty(.id = objectid, .value = type, .string = string);
    return 1;
}

stock IsPlayerInRangeOfDynamicObject(playerid, objectid, Float:radius)
{
    if (IsValidDynamicObject(objectid))
    {
        new
            interiorid = Streamer_GetIntData(STREAMER_TYPE_OBJECT, objectid, E_STREAMER_INTERIOR_ID),
            worldid = Streamer_GetIntData(STREAMER_TYPE_OBJECT, objectid, E_STREAMER_WORLD_ID),
            Float:x,
            Float:y,
            Float:z;

        GetDynamicObjectPos(objectid, x, y, z);

        if (interiorid == -1)
        {
            interiorid = GetPlayerInterior(playerid);
        }
        if (worldid == -1)
        {
            worldid = GetPlayerVirtualWorld(playerid);
        }

        if (IsPlayerInRangeOfPoint(playerid, radius, x, y, z) && GetPlayerInterior(playerid) == interiorid && GetPlayerVirtualWorld(playerid) == worldid)
        {
            return 1;
        }
    }

    return 0;
}

stock CreateDynamicLabeledPickup(color, const text[], Float:x, Float:y, Float:z, interior, vw, pickupid, Float:radius )
{
    CreateDynamic3DTextLabel(text, color, x, y, z, radius, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 0, vw, interior, -1, 20.0);
    CreateDynamicPickup(pickupid, 1, x, y, z, vw, interior);
}

// --- Weapon ---

stock IsValidWeaponID(weaponid)
{
    return (0 <= weaponid <= 46);
}

stock GetWeaponNameEx(weaponid)
{
    new weapon[24] = EOS;
    GetWeaponName(weaponid, weapon, sizeof(weapon));
    switch (weaponid)
    {
        case 0: weapon = "None";
        case 18: weapon = "Molotov Cocktail";
        case 44: weapon = "Nightvision Goggles";
        case 45: weapon = "Infrared Goggles";
    }
    return weapon;
}

stock GetWeaponSlot(weaponid)
{
    switch ( weaponid )
    {
        case 0, 1:                      { return 0; }
        case 2, 3, 4, 5, 6, 7, 8, 9:    { return 1; }
        case 22, 23, 24:                { return 2; }
        case 25, 26, 27:                { return 3; }
        case 28, 29, 32:                { return 4; }
        case 30, 31:                    { return 5; }
        case 33, 34:                    { return 6; }
        case 35, 36, 37, 38:            { return 7; }
        case 16, 17, 18, 39, 40:        { return 8; }
        case 41, 42, 43:                { return 9; }
        case 10, 11, 12, 13, 14, 15:    { return 10; }
        case 44, 45, 46:                { return 11; }
    }
    return 0;
}

stock GetWeaponClipSize(weaponid)
{
    switch (weaponid)
    {
        case 22, 23:     return 17;
        case 26:         return 2;
        case 24, 27:     return 7;
        case 28, 31, 32: return 50;
        case 29, 30:     return 30;
    }
    return 0;
}

stock GetWeaponModelID(weaponid)
{
    switch (weaponid)
    {
        case 1:      return 331;
        case 2..8:   return weaponid+331;
        case 9:      return 341;
        case 10..15: return weaponid+311;
        case 16..18: return weaponid+326;
        case 22..29: return weaponid+324;
        case 30,31:  return weaponid+325;
        case 32:     return 372;
        case 33..45: return weaponid+324;
        case 46:     return 371;
    }
    return 0;
}

// --- Date & Time ---

stock GetDateTime(ltr=1)
{
    new date[5], string[24];

    getdate(date[0], date[1], date[2]);
    gettime(date[3], date[4]);
    if (ltr)
    {
        format(string, sizeof(string), "%i-%02d-%02d %02d:%02d", date[0], date[1], date[2], date[3], date[4]);
    }
    else
    {
        format(string, sizeof(string), "%02d:%02d %02d-%02d-%i", date[3], date[4], date[2], date[1], date[0]);
    }
    return string;
}

stock TimestampToString(timestamp, _form=0)
{
    new year=1970, day=0, month=0, hourt=0, mins=0, sec=0;

    new days_of_month[12] = { 31,28,31,30,31,30,31,31,30,31,30,31 };
    new names_of_month[12][10] = {"January","February","March","April","May","June","July","August","September","October","November","December"};
    new returnstring[32];

    while (timestamp>31622400)
    {
        timestamp -= 31536000;
        if ( ((year % 4 == 0) && (year % 100 != 0)) || (year % 400 == 0) )
        {
            timestamp -= 86400;
        }
        year++;
    }

    if ( ((year % 4 == 0) && (year % 100 != 0)) || (year % 400 == 0) )
    {
        days_of_month[1] = 29;
    }


    while (timestamp>86400)
    {
        timestamp -= 86400, day++;
        if (day == days_of_month[month])
        {
            day=0;
            month++;
        }
    }

    while (timestamp>60)
    {
        timestamp -= 60, mins++;
        if ( mins == 60)
        {
            mins=0;
            hourt++;
        }
    }

    sec=timestamp;

    switch ( _form )
    {
        case 1: format(returnstring, 31, "%02d/%02d/%d %02d:%02d:%02d", day+1, month+1, year, hourt, mins, sec);
        case 2: format(returnstring, 31, "%s %02d, %d, %02d:%02d:%02d", names_of_month[month],day+1,year, hourt, mins, sec);
        case 3: format(returnstring, 31, "%d %c%c%c %d, %02d:%02d", day+1,names_of_month[month][0],names_of_month[month][1],names_of_month[month][2], year,hourt,mins);
        case 4: format(returnstring, 31, "%s %02d, %d", names_of_month[month],day+1,year);
        case 5: format(returnstring, 31, "%d/%02d/%02d %02d:%02d:%02d", year, month+1, day+1, hourt, mins, sec);
        default: format(returnstring, 31, "%02d.%02d.%d-%02d:%02d:%02d", day+1, month+1, year, hourt, mins, sec);
    }

    return returnstring;
}

// --- Colors ---

stock IsValidColorCode(color[])
{
    if (IsNumeric(color))
    {
        return 1;
    }
    if (strcmp(color, "black", true)==0) return 1;
    else if (strcmp(color, "white", true)==0) return 1;
    else if (strcmp(color, "blue", true)==0) return 1;
    else if (strcmp(color, "red", true)==0) return 1;
    else if (strcmp(color, "green", true)==0) return 1;
    else if (strcmp(color, "purple", true)==0) return 1;
    else if (strcmp(color, "yellow", true)==0) return 1;
    else if (strcmp(color, "lightblue", true)==0) return 1;
    else if (strcmp(color, "navy", true)==0) return 1;
    else if (strcmp(color, "beige", true)==0) return 1;
    else if (strcmp(color, "darkgreen", true)==0) return 1;
    else if (strcmp(color, "darkblue", true)==0) return 1;
    else if (strcmp(color, "darkgrey", true)==0) return 1;
    else if (strcmp(color, "gold", true)==0) return 1;
    else if (strcmp(color, "brown", true)==0 || strcmp(color, "dennell", true)==0) return 1;
    else if (strcmp(color, "darkbrown", true)==0) return 1;
    else if (strcmp(color, "darkred", true)==0) return 1;
    else if (strcmp(color, "maroon", true)==0) return 1;
    else if (strcmp(color, "pink", true)==0) return 1;
    return 0;
}

stock GetColorCode(color[])
{
    if (IsNumeric(color))
    {
        return strval(color);
    }
    if (strcmp(color, "black", true)==0) return 0;
    if (strcmp(color, "white", true)==0) return 1;
    if (strcmp(color, "blue", true)==0) return 2;
    if (strcmp(color, "red", true)==0) return 3;
    if (strcmp(color, "green", true)==0) return 16;
    if (strcmp(color, "purple", true)==0) return 5;
    if (strcmp(color, "yellow", true)==0) return 6;
    if (strcmp(color, "lightblue", true)==0) return 7;
    if (strcmp(color, "navy", true)==0) return 94;
    if (strcmp(color, "beige", true)==0) return 102;
    if (strcmp(color, "darkgreen", true)==0) return 51;
    if (strcmp(color, "darkblue", true)==0) return 103;
    if (strcmp(color, "darkgrey", true)==0) return 13;
    if (strcmp(color, "gold", true)==0) return 99;
    if (strcmp(color, "brown", true)==0 || strcmp(color, "dennell", true)==0) return 55;
    if (strcmp(color, "darkbrown", true)==0) return 84;
    if (strcmp(color, "darkred", true)==0) return 74;
    if (strcmp(color, "maroon", true)==0) return 115;
    if (strcmp(color, "pink", true)==0) return 126;
    return -1;
}

// --- stuff ---

stock fcreate(const filename[])
{
    if (fexist(filename))
    {
        return false;
    }
    new File:fhnd;
    fhnd = fopen(filename,io_write);
    if (fhnd)
    {
        fclose(fhnd);
        return true;
    }
    return false;
}

stock IsKeyPress(key, newkeys, oldkeys)
{
    return ((newkeys & key) && !(oldkeys & key));
}

stock IsKeyReleased(key, newkeys, oldkeys)
{
    return (!(newkeys & key) && (oldkeys & key));
}

// --- string ---

stock FormatNumber(number)
{
    new length, value[32];

    format(value, sizeof(value), "%i", (number < 0) ? (-number) : (number));

    length = strlen(value);

    if (length > 3)
    {
        for (new l = 0, i = length; --i >= 0; l ++)
        {
            if ((l % 3 == 0) && l > 0)
            {
                strins(value, ",", i + 1);
            }
        }
    }

    if (number < 0)
    {
        strins(value, "-", 0);
    }

    return value;
}

stock FormatCash(value)
{
    new str[32];
    str = FormatNumber(value);
    if (str[0] == '-')
    {
        strins(str, "$", 1);
    }
    else
    {
        strins(str, "$", 0);
    }
    return str;
}

stock IsNumeric(const string[])
{
    new i = 0;
    if (string[0] == '-')
    {
        i++;
    }
    while (string[i])
    {
        if (!('0' <= string[i++] <= '9'))
         {
            return 0;
         }
    }
    return 1;
}

stock IsValidGameText(const text[])
{
    for (new i = 0 ; text[i] ; i++)
    {
        if (text[i] == '~')
        {
            if (text[i+1] == 0)
                return false;
            if (text[i+1] != 'r' &&
                text[i+1] != 'g' &&
                text[i+1] != 'b' &&
                text[i+1] != 'w' &&
                text[i+1] != 'y' &&
                text[i+1] != 'p' &&
                text[i+1] != 'l' &&
                text[i+1] != 'h')
                return false;
            if (text[i+2] != '~')
                return false;
            i = i + 2;
        }
    }
    return true;
}

stock strmatch(const string1[], const string2[])
{
    if ((strcmp(string1, string2, true, strlen(string2)) == 0) && (strlen(string2) == strlen(string1)))
    {
        return true;
    }
    else
    {
        return false;
    }
}

stock strcpy(dest[], const source[], maxlength = sizeof(dest))
{
    dest[0] = EOS;
    strcat(dest, source, maxlength);
}

stock IsAlphaNum(const str[])
{
    for (new i = 0; str[i]; i++)
    {
        if ('A' <= str[i] <= 'Z' || 'a' <= str[i] <= 'z' || '0' <= str[i] <= '9')
            continue;
        return false;
    }
    return true;
}

stock ToLower(dest[], const source[], maxlength = sizeof(dest))
{
    new i = 0;
    for (; source[i] && i < maxlength - 1; i++)
    {
        dest[i] = tolower(source[i]);
    }
    dest[i] = EOS;
}

stock ToUpper(dest[], const source[], maxlength = sizeof(dest))
{
    new i = 0;
    for (; source[i] && i < maxlength - 1; i++)
    {
        dest[i] = toupper(source[i]);
    }
    dest[i] = EOS;
}

stock AppendFormat(output[], len, const text[], {Float,_}:...)
{
    static args, sizeArgsInBytes;
    static tmpData[4096];

    /*
     *  Custom function that uses #emit to format variables into a string.
     *  This code is very fragile; touching any code here will cause crashing!
    */
    if ((args = numargs()) <= 3)
    {
        strcat(output, text, len);
    }
    else
    {
        sizeArgsInBytes = args * 4;
        while (--args >= 3)
        {
            #emit LCTRL 5        //  PRI reg is set to the current value of 5=FRM (Stack Frame Pointer)
            #emit LOAD.alt args  //  ALT = [args]
            #emit SHL.C.alt 2    //  ALT = ALT << 2 (.C means const)
            #emit ADD.C 12       //  PRI = PRI + 12
            #emit ADD            //  PRI = PRI + ALT
            #emit LOAD.I         //  PRI = [PRI]
            #emit PUSH.pri       //  [STK] = PRI, STK = STK  cell_size
            // [STK] = [STK + 12 + args * 2]
        }
        #emit PUSH.S    text            // Type: ARRAY => [STK] = [FRM + text]      , STK = STK  cell_size
        #emit PUSH.C    4096            // Type: INT   => [STK] = 4096              , STK = STK  cell_size
        #emit PUSH.S    tmpData         // Type: INT   => [STK] = [FRM + tmpData]   , STK = STK  cell_size
        // Push the number of parameters passed (in bytes) to the function.
        #emit PUSH      sizeArgsInBytes // Type: INT   => [STK] = [sizeArgsInBytes] , STK = STK  cell_size
        #emit SYSREQ.C  format
        #emit LCTRL     5
        #emit SCTRL     4
        strcat(output, tmpData, len);
        #emit RETN
    }
    return 1;
}

stock strreplace2(string[], const search[], const replacement[], bool:ignorecase = false, pos = 0, limit = -1, maxlength = sizeof(string))
{
    if (limit == 0)
    {
        return 0;
    }

    new sublen = strlen(search);
    new replen = strlen(replacement);
    new bool:packed = ispacked(string);
    new maxlen = maxlength;
    new len = strlen(string);
    new count = 0;

    if (!sublen)
    {
        return 0;
    }

    if (packed)
    {
        maxlen *= 4;
    }

    while (-1 != (pos = strfind(string, search, ignorecase, pos)))
    {
        strdel(string, pos, pos + sublen);
        len -= sublen;

        if (replen && len + replen < maxlen)
        {
            strins(string, replacement, pos, maxlength);
            pos += replen;
            len += replen;
        }

        if (limit != -1 && ++count >= limit)
        {
            break;
        }
    }

    return count;
}

// --- Music ---
PlayNearbySound(playerid, soundid)
{
    new Float:x, Float:y, Float:z;
    GetPlayerPos(playerid, x, y, z);

    foreach (new i : Player)
    {
        if (i == playerid || IsPlayerStreamedIn(playerid, i))
        {
            PlayerPlaySound(i, soundid, x, y, z);
        }
    }
}

// --- Utils ---
stock SetServerHostName(const name[])
{
    new cmd[128];
    format(cmd, sizeof(cmd), "hostname            %s", name);
    return SendRconCommand(cmd);
}

stock CheckServerAd(const text[])
{
    new count, period, dash, pos, c, colon;

    while ((c = text[pos++]))
    {
        if ('0' <= c <= '9') count++;
        else if (c == '.') period++;
        else if (c == '-') dash++;
        else if (c == ':') colon++;
    }
    return (count >= 7 && period >= 3 && colon >= 1 || strfind(text, "samp.") > -1 || strfind(text, ":7777") > -1);
}

stock IsAnIP(const ip[])
{
    new part[4];

    if (!sscanf(ip, "p<.>iiii", part[0], part[1], part[2], part[3]))
    {
        return (0 <= part[0] <= 255) && (0 <= part[1] <= 255) && (0 <= part[2] <= 255) && (0 <= part[3] <= 255);
    }
    else if (!sscanf(ip, "p<.>iicc", part[0], part[1], part[2], part[3]))
    {
        return (0 <= part[0] <= 255) && (0 <= part[1] <= 255) && (part[2] == '*' && part[3] == '*');
    }
    return 0;
}

stock Log(const filename[], const text[], {Float,_}:...)
{
    static sizeArgsInBytes;
    static args;
    static str[192];
    static log_entry[256];
    static hour, minute, second;
    static year, month, day;
    static result;

    gettime(hour, minute, second);
    getdate(year, month, day);

    if ((args = numargs()) <= 2)
    {
        format(log_entry, sizeof(log_entry), "[%i/%i/%i - %i:%i:%i] %s\r\n", year, month, day, hour, minute, second, text);
        result = LogToFile(filename, log_entry);
    }
    else
    {
        sizeArgsInBytes = (1 + args) * 4;
        while (--args >= 2)
        {
            #emit LCTRL     5
            #emit LOAD.alt  args
            #emit SHL.C.alt 2
            #emit ADD.C     12
            #emit ADD
            #emit LOAD.I
            #emit PUSH.pri
        }
        #emit PUSH.S    text
        #emit PUSH.C    192
        #emit PUSH.C    str
        // Push the number of parameters passed (in bytes) to the function.
        #emit PUSH      sizeArgsInBytes
        #emit SYSREQ.C  format
        #emit LCTRL     5
        #emit SCTRL     4

        format(log_entry, sizeof(log_entry), "[%i/%i/%i - %i:%i:%i] %s\r\n", year, month, day, hour, minute, second, str);
        result = LogToFile(filename, log_entry);
        #emit RETN
    }
    return result;
}

task Beacon[10000]()
{
    new hour, minute, second, timestamp;
    timestamp = gettime(hour, minute, second);
    CallRemoteFunction("OnServerBeacon", "i", timestamp); // seconds since epoc
}

task HeartBeat[1000]()
{
    new hour, minute, second, timestamp;
    timestamp = gettime(hour, minute, second);

    CallRemoteFunction("OnServerHeartBeat", "i", timestamp); // seconds since epoc
}


static lasthour = -1;

task NewMinute[60000]()
{
    new hour, minute, second, timestamp;
    timestamp = gettime(hour, minute, second); // seconds since epoc

    if (lasthour != hour)
    {
        if (lasthour != -1)
        {
            CallRemoteFunction("OnNewHour", "ii", timestamp, hour);
        }
        lasthour=hour;
    }
    CallRemoteFunction("OnNewMinute", "i", timestamp);
}

stock GetSkinName(skinid)
{
    static skinName[][64] = {
        "Carl Johnson (CJ)", "The Truth", "Maccer", "Andre", "Barry 'Big Bear' Thorne [Thin]",
        "Barry 'Big Bear' Thorne [Big]", "Emmet", "Taxi Driver", "Janitor", "Normal Ped", "Old Woman",
        "Casino croupier", "Rich Woman", "Street Girl", "Normal Ped", "Mr.Whittaker", "Airport Ground Worker",
        "Businessman", "Beach Visitor", "DJ", "Rich Guy (Madd Dogg's Manager)", "Normal Ped", "Normal Ped",
        "BMXer", "Madd Dogg Bodyguard", "Madd Dogg Bodyguard", "Backpacker", "Construction Worker",
        "Drug Dealer", "Drug Dealer", "Drug Dealer", "Farm-Town inhabitant", "Farm-Town inhabitant",
        "Farm-Town inhabitant", "Farm-Town inhabitant", "Gardener", "Golfer", "Golfer", "Normal Ped",
        "Normal Ped", "Normal Ped", "Normal Ped", "Jethro", "Normal Ped", "Normal Ped", "Beach Visitor",
        "Normal Ped", "Normal Ped", "Normal Ped", "Snakehead (Da Nang)", "Mechanic", "Mountain Biker",
        "Mountain Biker", "Unknown", "Normal Ped", "Normal Ped", "Normal Ped", "Oriental Ped", "Oriental Ped",
        "Normal Ped", "Normal Ped", "Pilot", "Colonel Fuhrberger", "Prostitute", "Prostitute", "Kendl Johnson",
        "Pool Player", "Pool Player", "Priest/Preacher", "Normal Ped", "Scientist", "Security Guard", "Hippy",
        "Hippy", "Carl Johnson (CJ)", "Prostitute", "Stewardess", "Homeless", "Homeless", "Homeless", "Boxer",
        "Boxer", "Black Elvis", "White Elvis", "Blue Elvis", "Prostitute", "Ryder with robbery mask", "Stripper",
        "Normal Ped", "Normal Ped", "Jogger", "Rich Woman", "Rollerskater", "Normal Ped", "Normal Ped",
        "Normal Ped (Dillimore Gas Station)", "Jogger", "Lifeguard", "Normal Ped", "Rollerskater", "Biker",
        "Normal Ped", "Balla", "Balla", "Balla", "Grove Street Families", "Grove Street Families",
        "Grove Street Families", "Los Santos Vagos", "Los Santos Vagos", "Los Santos Vagos", "The Russian Mafia",
        "The Russian Mafia", "The Russian Mafia", "Varios Los Aztecas", "Varios Los Aztecas", "Varios Los Aztecas",
        "Triad", "Triad", "Johhny Sindacco", "Triad Boss", "Da Nang Boy", "Da Nang Boy", "Da Nang Boy",
        "The Mafia", "The Mafia", "The Mafia", "The Mafia", "Farm Inhabitant", "Farm Inhabitant",
        "Farm Inhabitant", "Farm Inhabitant", "Farm Inhabitant", "Farm Inhabitant", "Homeless", "Homeless",
        "Normal Ped", "Homeless", "Beach Visitor", "Beach Visitor", "Beach Visitor", "Businesswoman",
        "Taxi Driver", "Crack Maker", "Crack Maker", "Crack Maker", "Crack Maker", "Businessman",
        "Businesswoman", "Big Smoke Armored", "Businesswoman", "Normal Ped", "Prostitute", "Construction Worker",
        "Beach Visitor", "Well Stacked Pizza Worker", "Barber", "Hillbilly", "Farmer", "Hillbilly", "Hillbilly",
        "Farmer", "Hillbilly", "Black Bouncer", "White Bouncer", "White MIB agent", "Black MIB agent",
        "Cluckin' Bell Worker", "Hotdog/Chilli Dog Vendor", "Normal Ped", "Normal Ped", "Blackjack Dealer",
        "Casino croupier", "San Fierro Rifa", "San Fierro Rifa", "San Fierro Rifa", "Barber", "Barber",
        "Whore", "Ammunation Salesman", "Tattoo Artist", "Punk", "Cab Driver", "Normal Ped", "Normal Ped",
        "Normal Ped", "Normal Ped", "Businessman", "Normal Ped", "Valet", "Barbara Schternvart", "Helena Wankstein",
        "Michelle Cannes", "Katie Zhan", "Millie Perkins", "Denise Robinson", "Farm-Town inhabitant", "Hillbilly",
        "Farm-Town inhabitant", "Farm-Town inhabitant", "Hillbilly", "Farmer", "Farmer", "Karate Teacher",
        "Karate Teacher", "Burger Shot Cashier", "Cab Driver", "Prostitute", "Su Xi Mu (Suzie)",
        "Oriental Noodle stand vendor", "Oriental Boating School Instructor", "Clothes shop staff",
        "Homeless", "Weird old man", "Waitress (Maria Latore)", "Normal Ped", "Normal Ped", "Clothes shop staff",
        "Normal Ped", "Rich Woman", "Cab Driver", "Normal Ped", "Normal Ped", "Normal Ped", "Normal Ped",
        "Normal Ped", "Normal Ped", "Oriental Businessman", "Oriental Ped", "Oriental Ped", "Homeless",
        "Normal Ped", "Normal Ped", "Normal Ped", "Cab Driver", "Normal Ped", "Normal Ped", "Prostitute",
        "Prostitute", "Homeless", "The D.A", "Afro-American", "Mexican", "Prostitute", "Stripper",
        "Prostitute", "Stripper", "Biker", "Biker", "Pimp", "Normal Ped", "Lifeguard", "Naked Valet",
        "Bus Driver", "Biker Drug Dealer", "Chauffeur (Limo Driver)", "Stripper", "Stripper", "Heckler",
        "Heckler", "Construction Worker", "Cab driver", "Cab driver", "Normal Ped", "Clown (Ice-cream Van Driver)",
        "Officer Frank Tenpenny (Corrupt Cop)", "Officer Eddie Pulaski (Corrupt Cop)", "Officer Jimmy Hernandez",
        "Dwaine/Dwayne", "Melvin 'Big Smoke' Harris", "Sean 'Sweet' Johnson", "Lance 'Ryder' Wilson", "Mafia Boss",
        "T-Bone Mendez", "Paramedic", "Paramedic", "Paramedic", "Firefighter", "Firefighter", "Firefighter",
        "Los Santos Police Officer", "San Fierro Police Officer", "Las Venturas Police Officer", "County Sheriff",
        "LSPD Motorbike Cop", "S.W.A.T Special Forces", "Federal Agent", "San Andreas Army", "Desert Sheriff",
        "Zero", "Ken Rosenberg", "Kent Paul", "Cesar Vialpando", "Jeffery 'OG Loc' Martin/Cross", "Wu Zi Mu (Woozie)",
        "Michael Toreno", "Jizzy B.", "Madd Dogg", "Catalina", "Claude Speed", "Los Santos Police Officer (Without gun holster)",
        "San Fierro Police Officer (Without gun holster)", "Las Venturas Police Officer (Without gun holster)",
        "Los Santos Police Officer (Without uniform)", "Los Santos Police Officer (Without uniform)",
        "Las Venturas Police Officer (Without uniform)", "Los Santos Police Officer", "San Fierro Police Officer",
        "San Fierro Paramedic", "Las Venturas Police Officer", "Country Sheriff (Without hat)", "Desert Sheriff (Without hat)"
    };
    new result[64];
    if (0 <= skinid < sizeof(skinName))
        strcpy(result, skinName[skinid]);
    else
        result[0] = EOS;
    return result;
}

stock PlayerGender:GetSkinGender(skinid)
{
    static skinGender[] = {
        0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        1, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0,
        0, 1, 1, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 1, 1, 1,
        1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 1, 0, 0, 1, 0, 1, 1, 1, 0, 0,
        0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0, 1, 0, 0, 1, 1, 1,
        0, 1, 1, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0,
        0, 0, 0, 1, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1,
        0, 0,
    };

    if (0 <= skindid < sizeof(skinGender))
        return skinGender[skinid] == 0 ? PlayerGender_Male : PlayerGender_Female;
    else
        return PlayerGender_Unspecified;
}
