/*  
===================================================
    ðŸ“œ SCRIPT INFORMATION
===================================================
    âž¤ Script Name  : Arabica RolePlay | Chapter 2
    âž¤ Script Type  : SA-MP (San Andreas Multiplayer)  
    âž¤ Version      : V5.0-RC2
    âž¤ Author       : [ Khalil Zoldyck ]  
    âž¤ Description  : 
        - Implements Many systems
        - Includes Voice Chat & Anti Ddos ...
        - Doors open/close with animations  
    âž¤ Last Updated : [ 13/07/2025 ]  
===================================================
*/

// TODO:
//   + Casino Random 3 objects
//   + Casino Horse Game
//   + Capture the flag Game
//   + Race event in interrior
//   + Race event add time, position, and nb of checkpoints text
//   + any player can hijack race cars

#define STREAMER_OBJECT_DD 250.0
#define STREAMER_OBJECT_SD 250.0
#include <a_samp>
#include <crashdetect>
#include <a_http>
#include <a_mysql>
#include <foreach>
#include <sampvoice>
#define ITER_NONE						(cellmin) // Temporary fix for https://github.com/Misiur/YSI-Includes/issues/109

#include <MenuStore>
#include <progress2>
#include <sscanf2>
#include <tp>
#include <selection>
#include <Pawn.CMD>
#include <youtube_stream>
#include <dof2>
#include <streamer>
#include <flycam>
#include <nex-ac>
#include <YSI_Coding\y_timers>
#include "samplib\samplib.inc"
// --------------------------------------

// ---------------------------------------
#include "config\server.config"
// ---------------------------------------
#include "const\version.def"
#include "const\def_abreviations.lwor"
#include "const\def_table.lwor"
#include "const\def_colors.lwor"
#include "const\def_admins.lwor"
#include "const\def_max.lwor"
#include "const\iterators.lwor"
// ---------------------------------------
#include "const\mysql_thread.lwor"
#include "const\def_modelSelection.lwor"
#include "const\def_misc.lwor"
// ---------------------------------------
#include "dev\developer.pwn"
// ---------------------------------------
#undef SSCANF_Join
#undef SSCANF_Leave
//----------------------------------------
#define INVALID_FLOOR           (-1)
#include <vehicleFix>
// ---------------------------------------
#include "core\core.def.inc"

#include "rex/Anti-DialogSpoffing.pwn"
#include "rex/Anti-HealthHack.pwn"
#include "rex/RudeWordsGuard.pwn"
#include <YSI\y_hooks>
DEFINE_HOOK_REPLACEMENT(OnPlayer, OP_);

#define Mysql_Hostname "db.velocityhost.tn"
#define Mysql_Username "u109_Zq484lG0Rx"
#define Mysql_Password "iQKp!dkVSLH=+e+P+rXRGX8M"
#define Mysql_Database "s109_arabica"

//#define SM 		SendMessage // SendClientMessage with string formats
#define SAM 	SendAdminMessage // with string formats

/*SendMessage(playerid, color, const text[], {Float,_}:...)
{
	static
  	    args,
	    str[192];

	if((args = numargs()) <= 3)
	{
	    SCM(playerid, color, text);
	}
	else
	{
		while(--args >= 3)
		{
			#emit LCTRL 	5
			#emit LOAD.alt 	args
			#emit SHL.C.alt 2
			#emit ADD.C 	12
			#emit ADD
			#emit LOAD.I
			#emit PUSH.pri
		}
		#emit PUSH.S 	text
		#emit PUSH.C 	192
		#emit PUSH.C 	str
		#emit PUSH.S	8
		#emit SYSREQ.C 	format
		#emit LCTRL 	5
		#emit SCTRL 	4

		SCM(playerid, color, str);

		#emit RETN
	}
	return 1;
}*/

enum
{
	DIALOG_NONE = 1,
	DIALOG_SETTINGS2,
	DIALOG_SETTINGS,
	DIALOG_POST_APPLICATION,
	DIALOG_HELP,
	DIALOG_STATS,
	DIALOG_FOOD,
	DIALOG_BUYVEHICLENEW,
	DIALOG_NEWBIE,
	ACCOUNT_CREATION,
	DIALOG_REGISTER,
	DIALOG_LOGIN,
	DIALOG_GENDER,
	DIALOG_AGE,
	DIALOG_REFERRAL,
	DIALOG_ATM,
	DIALOG_ATMDEPOSIT,
	DIALOG_ATMWITHDRAW,
	DIALOG_BUYCLOTHINGTYPE,
	DIALOG_BUYCLOTHING,
	DIALOG_BUYCLOTHES,
	DIALOG_FACTIONPAY1,
	DIALOG_PHONEBOOK,
	DIALOG_LANDBUILDTYPE,
	DIALOG_LANDBUILD1,
	DIALOG_LANDBUILD2,
	DIALOG_LANDMENU,
	DIALOG_LANDOBJECTMENU,
	DIALOG_LANDOBJECTS,
	DIALOG_MP3PLAYER,
	DIALOG_ADDSTATION,
	DIALOG_GANGSTASH,
	DIALOG_GANGSTASHVEST,
	DIALOG_GANGSTASHWEAPONS1,
	DIALOG_GANGSTASHDRUGS1,
	DIALOG_GANGSTASHDRUGS2,
	DIALOG_GANGSTASHCRAFT,
	DIALOG_GANGSTASHMATS,
	DIALOG_GANGSTASHCASH,
	DIALOG_GANGWITHDRAW,
	DIALOG_GANGDEPOSIT,
	DIALOG_GANGARMSPRICES,
	DIALOG_GANGARMSDEALER,
	DIALOG_GANGARMSWEAPONS,
	DIALOG_GANGARMSEDIT,
	GangStashDepositMats,
	GangStashWithdrawMats,
	DIALOG_CRACKTRUNK,
	DIALOG_RULES,
	DIALOG_LOCATE,
	DIALOG_FACTIONEQUIPMENT,
	DIALOG_CREATEQUIZ,
	DIALOG_DELETEOBJECT,
	DIALOG_PAINTBALL,
	DIALOG_BUYVEHICLE,
	DIALOG_JOBCENTER
}

enum
{
	VEHICLE_ENGINE,
	VEHICLE_LIGHTS,
	VEHICLE_ALARM,
	VEHICLE_DOORS,
	VEHICLE_BONNET,
	VEHICLE_BOOT,
	VEHICLE_OBJECTIVE
};

enum
{
	STASH_CAPACITY_CASH,
	STASH_CAPACITY_MATERIALS,
	STASH_CAPACITY_WEED,
	STASH_CAPACITY_COCAINE,
	STASH_CAPACITY_HEROIN,
 	STASH_CAPACITY_PAINKILLERS,
	STASH_CAPACITY_WEAPONS
};
enum {
	EDIT_TYPE_NONE,
	EDIT_TYPE_PREVIEW,
	EDIT_TYPE_FURNITURE,
	EDIT_TYPE_PAYPHONE,
	EDIT_TYPE_ATM
};

enum
{
 	E_OBJECT_TYPE,
	E_OBJECT_INDEX_ID,
	E_OBJECT_EXTRA_ID,
	E_OBJECT_3DTEXT_ID,
 	E_OBJECT_OPENED,
 	E_OBJECT_WEAPONID,
 	E_OBJECT_FACTION,
 	E_OBJECT_X,
 	E_OBJECT_Y,
 	E_OBJECT_Z
};

enum
{
	E_OBJECT_FURNITURE,
	E_OBJECT_WEAPON,
	E_OBJECT_LAND
};

enum
{
	EDIT_CLOTHING_PREVIEW = 1,
	EDIT_CLOTHING,
	EDIT_LAND_OBJECT_PREVIEW,
	EDIT_LAND_OBJECT,
	EDIT_LAND_GATE_MOVE,
	EDIT_COP_CLOTHING,
	EDIT_GATE_OBJECT,
	EDIT_GATE_MOVE
};

enum
{
	DEPLOY_SPIKESTRIP,
	DEPLOY_CONE,
	DEPLOY_ROADBLOCK,
	DEPLOY_BARREL,
	DEPLOY_FLARE
};

enum
{
	FACTION_NONE,
	FACTION_POLICE,
	FACTION_MEDIC,
	FACTION_NEWS,
	FACTION_GOVERNMENT,
	FACTION_HITMAN,
	FACTION_FEDERAL,
	FACTION_ARMY,
	FACTION_TERRORIST
};

enum
{
	CHECKPOINT_NONE = 0,
	CHECKPOINT_PIZZA,
	CHECKPOINT_TEST,
	CHECKPOINT_MINING,
	CHECKPOINT_MATS,
	CHECKPOINT_DRUGS,
	CHECKPOINT_HOUSE,
	CHECKPOINT_ROBBERY,
	CHECKPOINT_DROPCAR,
	CHECKPOINT_MISC,
	CHECKPOINT_GARBAGE,
	CHECKPOINT_FARMER,
	CHECKPOINT_HOUSEROB,
	CHECKPOINT_TRUCKDELIVERY,
	CHECKPOINT_FORKLIFT,
	CHECKPOINT_FISHER,
	CHECKPOINT_RACE,
	CHECKPOINT_MAKECIMENT,
	CHECKPOINT_BUTCHER,
	CHECKPOINT_BRINKS
};

enum
{
	HANGUP_DROPPED,
	HANGUP_USER
};

enum
{
	MUSIC_NONE,
	MUSIC_MP3PLAYER,
	MUSIC_BOOMBOX,
	MUSIC_VEHICLE
};

enum
{
	ITEM_WEAPON,
	ITEM_SELLGUN,
	ITEM_MATERIALS,
	ITEM_WEED,
	ITEM_COCAINE,
	ITEM_HEROIN,
	ITEM_PAINKILLERS,
	ITEM_SEEDS,
	ITEM_EPHEDRINE,
	ITEM_CASH,
	ITEM_GSELLGUN
};

enum
{
	CAPACITY_MATERIALS,
	CAPACITY_WEED,
	CAPACITY_COCAINE,
	CAPACITY_HEROIN,
	CAPACITY_PAINKILLERS,
	CAPACITY_SEEDS,
	CAPACITY_EPHEDRINE,
	CAPACITY_GAZCAN
};

enum
{
	LIMIT_HOUSES,
	LIMIT_BUSINESSES,
	LIMIT_GARAGES,
	LIMIT_VEHICLES
};

enum
{
	GANGWEAPON_9MM,
	GANGWEAPON_SDPISTOL,
	GANGWEAPON_DEAGLE,
	GANGWEAPON_SHOTGUN,
	GANGWEAPON_TEC9,
	GANGWEAPON_UZI,
	GANGWEAPON_MP5,
	GANGWEAPON_AK47,
	GANGWEAPON_RIFLE,
	GANGWEAPON_M4,
	GANGWEAPON_SPAS12,
	GANGWEAPON_SNIPER
};

enum
{
	TAG_NONE,
	TAG_ADMIN,
	TAG_HELPER,
	TAG_VIP
};

enum
{
	GRAPHICRANK_NONE = 0,
	GRAPHICRANK_REGULAR,
	GRAPHICRANK_SENIOR,
	GRAPHICRANK_MANAGER
};

enum
{
	ZONETYPE_LAND = 1,
	ZONETYPE_TURF,
	ZONETYPE_POINT
};

enum
{
	DOOR_DRIVER,
	DOOR_PASSENGER
};

enum
{
	HOSPITAL_COUNTY = 1,
	HOSPITAL_ALLSAINTS,
	HOSPITAL_FMDHQ,
	HOSPITAL_VIPLOUNGE,
    HOSPITAL_SAN_FIERRO
};

enum e_Payphones {
	phID,
	phExists,
	phNumber,
	phOccupied,
	phCaller,
	Float:phX,
	Float:phY,
	Float:phZ,
	Float:phA,
	phInterior,
	phWorld,
	phObject,
	Text3D:phText
};
enum e_ATM
{
	atmID,
	atmExists,
	Float:atmSpawn[4],
	atmInterior,
	atmWorld,
	atmObject,
	Text3D:atmText
};
enum pEnum
{
 	pPassword[129],
	pUsername[MAX_PLAYER_NAME],
	pRegDate[32],
	pID,
	pLogged,
	pKicked,
    pIntroKickTimer,
	pLoginTries,
	pSetup,
	pGender,
	pAge,
	pSkin,
	Float:pCameraX,
	Float:pCameraY,
	Float:pCameraZ,
	Float:pPosX,
	Float:pPosY,
	Float:pPosZ,
	Float:pPosA,
	pInterior,
	pWorld,
	pCash,
	pBank,
 	pPaycheck,
 	pvLock,
	pLevel,
	pSpawnSelect,
	pSpawnHouse,
	pSpawnPrecinct,
	pChatstyle,
	pEdit,
	pEditID,
	pHouseEdit,
	pPreviewIndex,
	pFurnitureIndex,
	pHouse,
	pBugFix,
	pInTurf,
    pCompany,
    pDealershipMenu,
    pDealershipIndex,
	pShowFooter,
	pFooterTimer,
	pVehicleCMD,
	pCrowbar,
    pDealership,
    pSpeedTime,
	pSpeakerPhone,
	pRangeBooth,
	pTargets,
	pTargetLevel,
	bool:pSWATduty,
    pEditRack,
	pPVIPVoucher,
	pPhoneRingTone[132],
	pCellname,
	pToggleVehCam,
	pHouseAlarm,
	Text3D:aMeID,
	aMeStatus,
	pDJ,
	pAdminStrike,
	Text3D:pRepfam[64],
	pEXP,
	pGraphic,
	pMinutes,
	pHours,
	pAdmin,
	pEditLandGraffiti,
    pRobHouse,
	pAdminName[MAX_PLAYER_NAME],
	pHelper,
	Float:pHealth,
	Float:pArmor,
    PlayerText:pHealthText,
    PlayerText:pArmorText,
	pUpgradePoints,
	pWarnings,
	pInjured,
	pHospital,
	Float:pSpawnHealth,
	Float:pSpawnArmor,
	pJailType,
	pJailTime,
	pNewbieMuted,
	pHelpMuted,
	pAdMuted,
	pLiveMuted,
	pGlobalMuted,
	pReportMuted,
	pReportWarns,
	pFightStyle,
	pAccent[16],
	pPhone,
	pCalling,
	pPhoneSMS,
	pCaller,
	pPayphone,
	pJob,
	pSecondJob,
	pCrimes,
	pArrested,
	pWantedLevel,
	pNotoriety,
	pMaterials,
	pWeed,
	pCocaine,
	pHeroin,
	pPainkillers,
	pSeeds,
	pEphedrine,
	pMuriaticAcid,
	pBakingSoda,
	pCigars,
	pPrivateRadio,
	pChannel,
	pRentingHouse,
	pSpraycans,
	pCondom,
	pBoombox,
	pMP3Player,
	pPhonebook,
	pFishingRod,
	pFishingBait,
	pFishWeight,
	pNetSize,
	pDolphinWeight,
	pCrabWeight,
	pSharkWeight,
	pDolphinCount,
	pCrabCount,
	pSharkCount,
	pComponents,
	pSweep,
	pSweepLeft,
	pRccam,
	pMechanicSkill,
	pSmugglerSkill,
	pWeaponSkill,
	pDrugDealerSkill,
	pFarmerSkill,
	pDetectiveSkill,
	pLawyerSkill,
	pForkliftSkill,
	pCarJackerSkill,
	pCraftSkill,
	pPizzaSkill,
	pTruckerSkill,
	pHookerSkill,
	pRobberySkill,
	pFishingSkill,
	TruckerGoodsType:pTruckerGoodType,
	pGunsAmmo[13],
	pAGuns[13],
	pGunLicense,
	pToggleTextdraws,
	pToggleTP,
	pToggleOOC,
	pTogglePhone,
	pToggleAdmin,
	pToggleHelper,
	pToggleNewbie,
	pTogglePoints,
	pToggleTurfs,
	pTogglePR,
	pTogglePM,
	pToggleRadio,
	pToggleVIP,
	pToggleMusic,
	pToggleFaction,
	pToggleGang,
	pToggleNews,
	pToggleGlobal,
	pToggleCam,
	pToggleHUD,
	pToggleReports,
	pToggleWhisper,
	pToggleBug,
	pCarLicense,
	pDonator,
	pVIPTime,
	pVIPCooldown,
	pWeapons[13],
	pAmmo[13],
	pTempWeapons[13],
	pFaction,
	pFactionRank,
	pFactionLeader,
	pRadar,
	pGang,
	pWebDev,
	pGangRank,
	pDivision,
	pCrew,
	pContracted,
	pContractBy[MAX_PLAYER_NAME],
	pBombs,
	pCompletedHits,
	pFailedHits,
	pReports,
	pNewbies,
	pHelpRequests,
	pSpeedometer, // (1) KM/H (2) MPH
	pFactionMod,
	pGangMod,
	pBanAppealer,
	pFormerAdmin,
	pDeveloper,
	pAdminPersonnel,
	pDynamicAdmin,
	pHelperManager,
	pHumanResources,
	pComplaintMod,
	pGameAffairs,
	pWeedPlanted,
	pWeedTime,
	pWeedGrams,
	Float:pWeedX,
	Float:pWeedY,
	Float:pWeedZ,
	Float:pWeedA,
	Float:pWeed1X,
	Float:pWeed1Y,
	Float:pWeed1Z,
	Float:pWeed1A,
	Float:pWeed2X,
	Float:pWeed2Y,
	Float:pWeed2Z,
	Float:pWeed2A,
	pInventoryUpgrade,
	pAddictUpgrade,
	pTraderUpgrade,
	pAssetUpgrade,
	pLaborUpgrade,
	pDMWarnings,
	pWeaponRestricted,
	pReferralUID,
	pWatch,
	pGPS,
    PlayerText:pGPSText,
	pPrisonedBy[MAX_PLAYER_NAME],
	pPrisonReason[128],
	pClothes,
    pShowLands,
	pShowTurfs,
	pWatchOn,
	pGPSOn,
	pDoubleXP,
	pDetectiveCooldown,
	pThiefCooldown,
	pCocaineCooldown,
 	pGasCan,
 	pPassport,
	pPassportName[MAX_PLAYER_NAME],
	pPassportLevel,
	pPassportSkin,
	pPassportPhone,
	pNewbieMuteTime,
	pReportMuteTime,
	pGlobalMuteTime,
	pAdminHide,
	pInsurance,
	pRope,
	pTotalPatients,
	pTotalFires,
	pFirstAid,
	pPoliceScanner,
	pBodykits,
	pRimkits,
	pScannerOn,
	pLastReport,
	pLastNewbie,
	pLastFare,
	pLastRequest,
	pLastPay,
	pLastRepair,
	pLastRefuel,
	pLastDrug,
	pLastDefend,
	pLastSell,
	pLastEnter,
	pLastPress,
	pLastDeath,
	pLastDesync,
	pLastGlobal,
	pLastPizza,
	pLastStuck,
	pLastLoad,
	pLastBet,
	pLastShot,
	pFPS,
	pDrunkLevel,
 	pAdminDuty,
	pActiveReport,
	pHospitalTime,
	pHospitalType,
	pListen,
	pPaintball,
	pPaintballTeam,
	pDueling,
	pAwaitingClothing,
	pFreezeTimer,
	pHelpRequest[128],
	pAcceptedHelp,
	pHouseOffer,
	pHouseOffered,
	pHousePrice,
	pGarageOffer,
	pGarageOffered,
	pGaragePrice,
	pBizOffer,
	pBizOffered,
	pBizPrice,
	pVestOffer,
	pVestPrice,
	pBocketFull,
	pBocket,
	pBodyCam,
	pGlassItem,
	pMetalItem,
	pRubberItem,
	pIronItem,
	pPlasticItem,
	pRecycleStage,
	pCapturingPoint,
    pCaptureTime,
    Float:pPointX,
    Float:pPointY,
    Float:pPointZ,
	pCarOffer,
	pCarOffered,
	pCarPrice,
	pFactionOffer,
	pFactionOffered,
	pGangOffer,
	pGangOffered,
	pFriskOffer,
	pTicketOffer,
	pTicketPrice,
    pTicketReason[128],
	pLiveOffer,
	pLiveBroadcast,
	pShakeOffer,
	pShakeType,
	pLandOffer,
	pLandOffered,
	pLandPrice,
	pSellOffer,
	pSellQuantity,
	pAllianceOffer,
	pWarOffer,
	pSellType,
	pSellExtra,
	pSellPrice,
	pDefendOffer,
	pDefendPrice,
	pDiceOffer,
	pDiceBet,
	pDiceRigged,
	pInviteOffer,
	pInviteHouse,
	pRobberyOffer,
	pDuelOffer,

	pObjectLand,
	pClothingIndex,
	pEditType,
	pEditObject,
	pCategory,
	pSelected,
	pFactionEdit,
	pPrice,
	pFurniturePerms,
	pLandPerms,
	Float:pDistance,
	pCP,
	pShipment,
	pFishTime,
	pUsedBait,
	pSmuggleMats,
	pSmuggleDrugs,
	pRefuel,
	pRefuelAmount,
	pCallLine,
	pCallStage,
	pDrivingTest,
	pTestVehicle,
	pTestCP,
	pSweeping,
	pSweepTime,
	pSweepEarnings,
	Text3D:pSpecialTag,
	pTagType,
	pVIPColor,
	pTaxiFare,
	pTaxiPassenger,
	pTaxiBill,
	pTaxiTime,
	pSkinSelected,
	pDuty,
	pBackup,
	pTazer,
	pTazedTime,
	pCuffed,
	pTied,
	pDraggedBy,
	pReceivingAid,
	pDelivered,
	pPlantedBomb,
	Float:pBombX,
	Float:pBombY,
	Float:pBombZ,
	pBombObject,
	pContractTaken,
	pPage,
	pSpamTime,
	pMuted,
	Text3D:pBoomboxText,
	pBoomboxPlaced, // BOOMBOX
	pBoomboxObject,
	pBoomboxListen,
	pBoomboxURL[128],
	Float:pMinX, // LAND CREATION
	Float:pMinY,
	Float:pMaxX,
	Float:pMaxY,
	Float:pTurfPointX,
	Float:pTurfPointY,
	Float:pTurfPointZ,
	pZoneType,
	pZonePickups[4],
	pZoneID,
	pZoneCreation, //
	pLandCost,
	pTurfType,
	pTurfName[32],
	pGenre[32],
	pSubgenre[32],
	pSearch,
	pMusicType,
	pStreamType,
	pNameChange[MAX_PLAYER_NAME],
	pFreeNamechange,
	pChosenLevel,
	pChosenSkin,
	pVehicleKeys,
 	pCurrentVehicle,
 	pVehicleCount,
 	pACWarns,
 	pACTime,
 	pArmorTime,
 	pWeedObject,
 	pPickPlant,
 	pPickTime,
 	pCookHeroin,
 	pCookTime,
 	pCookGrams,
 	pDrugsUsed,
 	pDrugsTime,
 	pBandana,
    pHouseKeys,
 	pLoginCamera,
 	pSmuggleTime,
 	pDealerGang,
 	pPoisonTime,
 	pJetpack,
	pTextFrom,
	pWhisperFrom,
	pMechanicCall,
	pTaxiCall,
	pEmergencyCall,
	pEmergencyType,
	pEmergency[128],
 	pFindTime,
 	pFindPlayer,
 	pRobCash,
 	pLootTime,
 	pRemoveFrom,
 	pMenuType,
 	pSniper,
 	Text3D:pLockText,
 	Float:pLockHealth,
	pLockBreak,
	pLockTimer,
	pAnimation,
	pDropTime,
	pCocaineTrunk,
	pCocaineTime,
	pCocaineFrom,
	pRapidFire,
	pNoDamage,
	pGodmode,
	Float:pGodmodeHP,
	Float:pGodmodeAP,
	pPreviewHouse,
	pPreviewType,
	pPreviewTime,
	pDedication,
	pPasswordChanged,
	pGarbage,
	pDamageTimer,
	pHHCheck,
	pHHTime,
	pHHRounded,
	pHHCount,
	pCustomTitle[64],
	pCustomTColor,
	pGovTimer,
	pGodshand,
	pUndercover[2],
	Float:pUndercoverHP,
	Float:pUndercoverAR,
	pHurt,
	pBugged,
	pBuggedBy[MAX_PLAYER_NAME],
	pSkates,
	pSkateObj,
	bool:pSkating,
	bool:pSkateAct,
	pRareTime,
	pAcceptedEMS,
	pHuntKilled,
	pDiamonds,
	pDeleteMode,
	pAdvertWarnings,
	pNoKnife,
	pExecute,
	pMarriedTo,
	pMarriedName[MAX_PLAYER_NAME],
	pMarriageOffer,
	pStationEdit,
	pRobbingBiz,
	pHelmet,
	pCarryCrate,
	pBlindfold,
	pBlinded,
	pRepairShop,
	pRepairTime
};

enum rEnum
{
	rExists,
	rReporter,
	rAccepted,
	rHandledBy,
	rText[128],
	rTime
};
enum SAZONE_MAIN { //Betamaster
	SAZONE_NAME[28],
	Float:SAZONE_AREA[6]
};



enum robberyEnum
{
	rTime,
	rPlanning,
	rStarted,
	rStolen,
	rRobbers[MAX_BANK_ROBBERS],
	rObjects[2],
	Text3D:rText[5]
};

enum mEnum
{
	Float:mPosX,
	Float:mPosY,
	Float:mPosZ,
	Float:mPosA,
	mInterior,
	mWorld
};

enum cEnum
{
	cExists,
	cID,
	cName[32],
	cModel,
	cBone,
	cAttached,
	Float:cPosX,
	Float:cPosY,
	Float:cPosZ,
	Float:cRotX,
	Float:cRotY,
	Float:cRotZ,
	Float:cScaleX,
	Float:cScaleY,
	Float:cScaleZ,
	cAttachedIndex,
};
	
enum vEnum
{
	vID,
	vOwnerID,
	vOwner[MAX_PLAYER_NAME],
	vModel,
	vPrice,
	vType,
    vPlate[32],
	vTickets,
	gv_iLoadMax,
	pvImpounded,
	vLocked,
	Float:vHealth,
	Float:vPosX,
	Float:vPosY,
	Float:vPosZ,
	Float:vPosA,
	vColor1,
	vColor2,
	vPaintjob,
	vInterior,
	vWorld,
	vNeon,
	vNeonEnabled,
	vTrunk,
	vAlarm,
	vCorp,
	vMods[14],
	vCash,
	vMaterials,
	vWeed,
	vCocaine,
	vHeroin,
	vPainkillers,
	vWeapons[5],
	vGang,
	vFaction,
	vFGDivision,
	vVIP,
	vJob,
	vRespawnDelay,
	vObjects[2],
	vTimer,
	vRank,
	carImpounded,
	carImpoundPrice,
	bool:vForSale,
	vForSalePrice,
	Text3D:vForSaleLabel,
	Float:vMileage,
};

enum fEnum
{
	fName[48],
	fShortName[24],
	fMOTD[128],
	fLeader[MAX_PLAYER_NAME],
	fType,
	fColor,
	fRankCount,
	fBudget,
	g_iLockerStock,
	fSkins[MAX_FACTION_SKINS],
	fPaycheck[MAX_FACTION_RANKS],
	fTurfTokens,
	Text3D:fText,
	fPickup,
};

enum lkEnum
{
	lID,
	lExists,
	lFaction,
	Float:lPosX,
	Float:lPosY,
	Float:lPosZ,
	lInterior,
	lWorld,
	lLabel,
	lIcon,
	locKevlar[2],
    locMedKit[2],
    locNitestick[2],
    locMace[2],
    locDeagle[2],
    locShotgun[2],
    locMP5[2],
    locM4[2],
    locSpas12[2],
    locSniper[2],
    locCamera[2],
    locFireExt[2],
    locPainKillers[2],
	Text3D:lText,
	lPickup
};

enum dEnum
{
	dExists,
	dType,
	Float:dPosX,
	Float:dPosY,
	Float:dPosZ,
	Float:dPosA,
	dObject
};

enum e_Damages
{
	damageTaken,
	damageWeapon,
	damageBodypart,
	damageArmor,
	damageTime,
	damageBy[90],
}

enum gaEnum
{
	gSetup,
	gIsMafia,
	gName[32],
	gMOTD[128],
	gLeaderUID,
	gLeader[MAX_PLAYER_NAME],
	gColor,
    gCount,
	gStrikes,
	gLevel,
	gPoints,
	gTurfTokens,
	Float:gStashX,
	Float:gStashY,
	Float:gStashZ,
	gStashInterior,
	gStashWorld,
	gCash,
	gMaterials,
	gWeed,
	gCocaine,
	gHeroin,
	gPainkillers,
	gSkins[MAX_GANG_SKINS],
	gWeapons[14],
	gWeaponRanks[14],
	gVestRank,
	gArmsDealer,
	gDrugDealer,
	Float:gArmsX,
	Float:gArmsY,
	Float:gArmsZ,
	Float:gArmsA,
	Float:gDrugX,
	Float:gDrugY,
	Float:gDrugZ,
	Float:gDrugA,
	gArmsWorld,
	gDrugWorld,
	gDrugWeed,
	gDrugCocaine,
	gDrugHeroin,
	gArmsMaterials,
	gArmsPrices[12],
	gDrugPrices[3],
	Text3D:gText[3],
	gPickup,
	gActors[2],
	gAlliance,
	gMatLevel,
	gGunLevel,
	gInvCooldown,
    gRankingPoints
};



enum {
	RECORD_TICKET,
	RECORD_CHARGE
}

// ---------------------------------------

new connectionID;
new queryBuffer[1024];
new gAnticheat = 1;
new Text:TimeTD;
new enabledOOC;
new enabledNewbie = 1;
new enabledGlobal = 1;
new enabledReports = 1;
new pTazerReplace[MAX_PLAYERS];
new PlayerText:playerfooter[MAX_PLAYERS];
new ViewCam[MAX_PLAYERS];
new szMiscArray[4096];
new IsPlayerSteppingInVehicle[MAX_PLAYERS] = -1;
new tsstring[2048];
new Text:Blind;
new firstperson[MAX_PLAYERS];
new HelmetEnabled[MAX_PLAYERS];
new CarWindows[MAX_VEHICLES] = 0;
new Text3D:fRepfamtext[MAX_PLAYERS];
new Text:welcomenew;
new VIPVehicles[50];
new pObj[MAX_PLAYERS];
new openedpaycheck[MAX_PLAYERS];
new chosednumber[MAX_PLAYERS];

new nextWeather;
new Text3D:DonatorCallSign[MAX_VEHICLES] = {Text3D:INVALID_3DTEXT_ID, ...};
new seatbelt[MAX_PLAYERS];
new g_BoothUsed[MAX_BOOTHS];
new g_BoothObject[MAX_BOOTHS] = {-1, ...};
new PlayerText:LoadingObjects0[MAX_PLAYERS];
new PlayerText:LoadingObjects1[MAX_PLAYERS];
new PlayerText:LoadingObjects2[MAX_PLAYERS];
new PlayerText:LoadingObjects3[MAX_PLAYERS];
new PlayerText:LoadingObjects4[MAX_PLAYERS];
new PlayerText:LoadingObjects5[MAX_PLAYERS];
new testVehicles[5];
new Text:Damage[MAX_PLAYERS];
new gWorldTime;
new gCharityHealth, gCharityArmor;
new Float:WeaponDamages[47];
new gLastMusic, gGMX;
new gVIPHealth, gVIPArmor, gPaycheck;
new gParachutes[2];
new gSeedsStock = 200, gCocaineStock = 100, gEphedrineStock = 50;
new Text3D:gSeedsStockText, Text3D:gCocaineText, Text3D:gEphedrineStockText;
new gPrisonCells[24], gPDGates[2], gFBIGates[2];
enum eGateInfo
{
	gateFactionType,
    gateObject,
	gateModelId,
    Float:gateX,
    Float:gateY,
    Float:gateZ,
    Float:gateRX,
    Float:gateRY,
    Float:gateRZ,
    Float:gateMoveSpeed,
    Float:gateMoveX,
    Float:gateMoveY,
    Float:gateMoveZ,
    Float:gateMoveRX,
    Float:gateMoveRY,
    Float:gateMoveRZ
};
new gGates[][eGateInfo] = {
	{ FACTION_ARMY, INVALID_OBJECT_ID, 980, 2666.76978, -2504.55322, 15.31310, 0.0, 0.0,  90.0, 2.0, 2666.76978, -2515.98240, 15.31310, 0.0, 0.0,  90.0 },
	{ FACTION_ARMY, INVALID_OBJECT_ID, 980, 2612.83350, -2404.20728, 15.31310, 0.0, 0.0,  90.0, 2.0, 2612.83350, -2393.11450, 15.31310, 0.0, 0.0,  90.0 },
	{ FACTION_ARMY, INVALID_OBJECT_ID, 980, 2694.02026, -2330.29248, 15.31310, 0.0, 0.0,   0.0, 2.0, 2682.60620, -2330.29248, 15.31310, 0.0, 0.0,   0.0 },
	{ FACTION_ARMY, INVALID_OBJECT_ID, 980, 2751.21802, -2565.42212, 15.31310, 0.0, 0.0, 180.0, 2.0, 2740.35990, -2565.42212, 15.31310, 0.0, 0.0, 180.0 },
	{ FACTION_NEWS, INVALID_OBJECT_ID, 980,  777.833, -1384.47, 15.500, 0.0, 0.0, 180.0, 2.0, 768.163, -1384.47, 15.500, 0.0, 0.0, 180.0},
	{ FACTION_NEWS, INVALID_OBJECT_ID, 980,  778.218, -1330.67, 15.304, 0.0, 0.0,  -1.0, 2.0, 768.300, -1330.50, 15.304, 0.0, 0.0,  -1.0}
};
new gPDDoors[8];
new gFires, gFireObjects[MAX_FIRES] = {INVALID_OBJECT_ID, ...}, Float:gFireHealth[MAX_FIRES];
new zone_paintball[2], area_paintball[2];
new pbNext;

new aimWarnings[MAX_PLAYERS];
new quizQuestion[72];
new quizAnswer[32];
new CreateQuiz = -1;
new gListedItems[MAX_PLAYERS][100], gTargetName[MAX_PLAYERS][MAX_PLAYER_NAME];
new gPreviewFurniture[MAX_PLAYERS] = {-1, ...};
new DamageData[MAX_PLAYERS][MAX_DAMAGES][e_Damages];
new InsideShamal[MAX_PLAYERS];
new VehicleStatus[MAX_VEHICLES char] = 0; // 0 == none, 1 == vehicle dead about to respawn
new RobberyInfo[robberyEnum];
new MarkedPositions[MAX_PLAYERS][3][mEnum];
new PlayerData[MAX_PLAYERS+1][pEnum];
new ATM[MAX_ATMS][e_ATM];
new Payphones[MAX_PAYPHONES][e_Payphones];
new ReportInfo[MAX_REPORTS][rEnum];
new GarageInfo[MAX_GARAGES][gEnum];
new BusinessInfo[MAX_BUSINESSES][bEnum];
new EntranceInfo[MAX_ENTRANCES][eEnum];
new ClothingInfo[MAX_PLAYERS][MAX_PLAYER_CLOTHING][cEnum];
new VehicleInfo[MAX_VEHICLES][vEnum];
new FactionInfo[MAX_FACTIONS][fEnum];
new FactionRanks[MAX_FACTIONS][MAX_FACTION_RANKS][32];
new FactionDivisions[MAX_FACTIONS][MAX_FACTION_DIVISIONS][32];
new GangCrews[MAX_GANGS][MAX_GANG_CREWS][32];
new LockerInfo[MAX_LOCKERS][lkEnum];
new DeployInfo[MAX_DEPLOYABLES][dEnum];
new LandInfo[MAX_LANDS][lEnum];
new GangInfo[MAX_GANGS][gaEnum];
new GangRanks[MAX_GANGS][7][32];
new adminVehicle[MAX_VEHICLES char];
new vehicleSiren[MAX_VEHICLES] = {INVALID_OBJECT_ID, ...};
new vehicleStream[MAX_VEHICLES][128];
new vehicleColors[MAX_VEHICLES][2];
new totalDamages[MAX_PLAYERS];
new bool:chattingWith[MAX_PLAYERS][MAX_PLAYERS char];
new Text3D:vehicleCallsign[MAX_VEHICLES] = {Text3D:INVALID_3DTEXT_ID, ...};
new PayCheckCode[MAX_PLAYERS];

// ---------------------------------------


new const Float:g_RepairShops[][] =
{
	{2074.7122,	 -1831.3906, 13.5469, 	2065.4092,	-1831.4474,	13.3643, 90.0000,   2076.0828,  -1831.3698, 13.2777, 270.0000},
	{1025.1017,	 -1032.9968, 31.8545, 	1024.9688,	-1023.1215,	31.9303, 0.0000,  1024.9032,  -1033.9376, 31.6534, 180.0000},
	{488.5583,	 -1731.2819, 11.2464, 	487.3807,	-1741.6285,	11.0107, 170.0000,  489.1483,   -1730.7385, 11.0434, 350.0000},
	{720.2086, 	 -465.7499,  16.3437, 	720.0692,	-456.0589,	17.0412, 0.0000,	720.1885,	-469.6240,	17.0489, 180.0000},
	{-99.8833, 	 1109.2959,  19.7422,	-100.0493,	1116.5676,	20.3480, 0.0000,	-99.8743,	1105.2859,	20.4476, 180.0000},
	{-1420.7378, 2594.0757,  55.7505, 	-1420.5433,	2585.7573,	56.5724, 180.0000,	-1420.6559,	2595.4070,	56.4271,   0.0000},
	{-1904.5217, 273.42460,  41.0469, 	-1904.4248,  285.5524,  40.7516,   0.0000,	-1904.8774,  272.5919,  40.7486, 180.0000}
};
new const Float:arrBoothPositions[MAX_BOOTHS][3] = {
    {300.5000, -138.5660, 1004.0625},
	{300.5000, -137.0286, 1004.0625},
	{300.5000, -135.5336, 1004.0625},
	{300.5000, -134.0436, 1004.0625},
	{300.5000, -132.5637, 1004.0625},
	{300.5000, -131.0782, 1004.0625},
	{300.5000, -129.5582, 1004.0625},
	{300.5000, -128.0786, 1004.0625}
};



#define ADMIN_SKIN 217
#define HELPER_SKIN 189

new const clothesShopSkins[] = {
	1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19,
	20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37,
	38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55,
	56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73,
	75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92,
	93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108,
	109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123,
	124, 125, 126, 127, 128, 129, 130, 131, 132, 133, 134, 135, 136, 137, 138,
	139, 140, 141, 142, 143, 144, 145, 146, 147, 148, 149, 150, 151, 152, 153,
	154, 155, 156, 157, 158, 159, 160, 161, 162, 163, 164, 165, 166, 167, 168,
	169, 170, 171, 172, 173, 174, 175, 176, 177, 178, 179, 180, 181, 182, 183,
	184, 185, 186, 187, 188,      190, 191, 192, 193, 194, 195, 196, 197, 198,
	199, 200, 201, 202, 203, 204, 205, 206, 207, 208, 209, 210, 211, 212, 213,
	214, 215, 216, 218, 219, 220, 221, 222, 223, 224, 225, 226, 227, 228,
	229, 230, 231, 232, 233, 234, 235, 236, 237, 238, 239, 240, 241, 242, 243,
	244, 245, 246, 247, 248, 249, 250, 251, 252, 253, 254, 255, 256, 257, 258,
	259, 260, 261, 262, 263, 264, 265, 266, 267, 268, 269, 270, 271, 272, 273,
	289, 290, 291, 292, 293, 294, 295, 296, 297, 298, 299
};

new const VipSkins[] = {
	1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19,
	20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37,
	38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55,
	56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73,
	75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92,
	93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108,
	109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123,
	124, 125, 126, 127, 128, 129, 130, 131, 132, 133, 134, 135, 136, 137, 138,
	139, 140, 141, 142, 143, 144, 145, 146, 147, 148, 149, 150, 151, 152, 153,
	154, 155, 156, 157, 158, 159, 160, 161, 162, 163, 164, 165, 166, 167, 168,
	169, 170, 171, 172, 173, 174, 175, 176, 177, 178, 179, 180, 181, 182, 183,
	184, 185, 186, 187, 188, 189, 190, 191, 192, 193, 194, 195, 196, 197, 198,
	199, 200, 201, 202, 203, 204, 205, 206, 207, 208, 209, 210, 211, 212, 213,
	214, 215, 216, 218, 219, 220, 221, 222, 223, 224, 225, 226, 227, 228,
	229, 230, 231, 232, 233, 234, 235, 236, 237, 238, 239, 240, 241, 242, 243,
	244, 245, 246, 247, 248, 249, 250, 251, 252, 253, 254, 255, 256, 257, 258,
	259, 260, 261, 262, 263, 264, 265, 266, 267, 268, 269, 270, 271, 272, 273,
	289, 290, 291, 292, 293, 294, 295, 296, 297, 298, 299
};

enum locEnum
{
	locID,
	locName[32],
	bool:locExists,
	Float:locPosX,
	Float:locPosY,
	Float:locPosZ
};
new LocationInfo[MAX_LOCATIONS][locEnum];

enum atmEnum
{
	Float:atmX,
	Float:atmY,
	Float:atmZ,
	Float:atmA
};

new const atmMachines[][atmEnum] =
{
    {2228.394775, -1714.255126, 13.158315, 270.000000},
    {1928.599975, -1779.941650, 13.136871, 90.000000},
//    {1493.294677, -1772.306640, 18.385747, 180.000000},
    {1102.299438, -1438.380981, 15.396868, 90.000000},
    {563.902526, -1293.948730, 16.858232, 180.000000},
    {2233.269042, -1158.040527, 25.540679, 270.000000},
    {827.125183, -1345.751220, 13.182147, 270.000000},
    {827.125183, -1346.811157, 13.182147, 270.000000},
    {1093.036621, 29.262479, 1000.309509, 0.000000},
    {-14.377381, -180.600250, 1003.186889, 180.000000},
    {9.334012, -31.044189, 1003.159179, 270.000000},
    {-24.413511, -91.806381, 1003.126708, 180.000000},
    {-21.125793, -140.438766, 1003.166564, 180.000000},
    {-24.290849, -57.946674, 1003.176574, 180.000000}
};

enum fireEnum
{
 	fireIndex,
 	Float:fireX,
 	Float:fireY,
 	Float:fireZ,
 	Float:fireA,
};

new const randomFireSpawns[][fireEnum] =
{
    {0, 1720.231079, -1740.936889, 11.432815, 180.922180},
    {0, 1723.581298, -1740.882934, 11.432815, 180.922180},
    {0, 1726.050537, -1740.842773, 11.432815, 180.922180},
    {0, 1716.479858, -1740.926757, 11.432815, 180.922180},
    {0, 1713.465332, -1740.676391, 11.432815, 180.922180},
    {0, 1723.581298, -1740.882934, 13.742803, 180.922180},
    {0, 1726.050537, -1740.842773, 14.072817, 180.922180},
    {0, 1720.231079, -1740.936889, 14.142808, 180.922180},
    {0, 1716.479858, -1740.926757, 14.642818, 180.922180},
    {0, 1713.465332, -1740.676391, 14.992820, 180.922180},
    {0, 1729.405151, -1742.339111, 11.432815, 180.922180},
    {0, 1729.405883, -1742.379028, 14.632813, 180.922180},
    {0, 1729.453002, -1745.278564, 11.432815, 180.922180},
    {0, 1729.452514, -1745.258789, 14.632813, 180.922180},
    {0, 1729.500610, -1748.218139, 11.432815, 180.922180},
    {0, 1729.497314, -1748.038085, 14.632813, 180.922180},
    {0, 1729.548095, -1751.127929, 11.432815, 180.922180},
    {0, 1729.547485, -1751.098022, 14.632813, 180.922180},
    {0, 1729.587524, -1753.567871, 11.432815, 180.922180},
    {0, 1729.587280, -1753.588500, 14.632813, 180.922180},
    {0, 1710.109741, -1740.329467, 11.432815, 180.922180},
    {0, 1707.230224, -1740.376220, 11.432815, 180.922180},
    {0, 1704.329956, -1740.422607, 11.432815, 180.922180},
    {0, 1710.109741, -1740.329467, 14.922813, 180.922180},
    {0, 1707.150390, -1740.377075, 14.922813, 180.922180},
    {0, 1704.710327, -1740.416137, 14.922813, 180.922180},
    {1, 1972.983886, -1923.633544, 11.286870, 358.727569},
    {1, 1975.173583, -1923.682617, 11.286870, 358.727569},
    {1, 1977.542724, -1923.735229, 11.286870, 358.727569},
    {1, 1979.951782, -1923.788696, 11.286870, 358.727569},
    {1, 1982.091552, -1923.836547, 11.286870, 358.727569},
    {1, 1984.420532, -1923.887817, 11.286870, 358.727569},
    {1, 1986.800292, -1923.941040, 11.286870, 358.727569},
    {1, 1989.079589, -1923.991821, 11.286870, 358.727569},
    {1, 1991.318847, -1924.041625, 11.286870, 358.727569},
    {1, 1993.569335, -1924.091918, 11.286870, 358.727569},
    {1, 1995.939086, -1924.143676, 11.286870, 358.727569},
    {1, 1998.008422, -1924.189697, 11.286870, 358.727569},
    {1, 1998.008422, -1924.189697, 14.286870, 358.727569},
    {1, 1995.939086, -1924.143676, 14.286870, 358.727569},
    {1, 1993.569335, -1924.091918, 14.286870, 358.727569},
    {1, 1991.318847, -1924.041625, 14.286870, 358.727569},
    {1, 1989.079589, -1923.991821, 14.286870, 358.727569},
    {1, 1986.800292, -1923.941040, 14.286870, 358.727569},
    {1, 1984.420532, -1923.887817, 14.286870, 358.727569},
    {1, 1982.091552, -1923.836547, 14.286870, 358.727569},
    {1, 1979.951782, -1923.788696, 14.286870, 358.727569},
    {1, 1977.542724, -1923.735229, 14.286870, 358.727569},
    {1, 1975.173583, -1923.682617, 14.286870, 358.727569},
    {1, 1972.983886, -1923.633544, 14.286870, 358.727569},
    {2, 2422.197753, -1963.760864, 11.329407, 270.000000},
    {2, 2422.197753, -1965.961059, 11.329407, 270.000000},
    {2, 2422.538085, -1968.141479, 11.329407, 270.000000},
    {2, 2422.437988, -1970.161865, 11.329407, 270.000000},
    {2, 2422.488037, -1972.322143, 11.329407, 270.000000},
    {2, 2422.488037, -1974.422363, 11.329407, 270.000000},
    {2, 2422.488037, -1976.602905, 11.329407, 270.000000},
    {2, 2422.568115, -1978.533569, 11.329407, 270.000000},
    {2, 2422.678222, -1980.704101, 11.329407, 270.000000},
    {2, 2422.197753, -1963.760864, 13.829407, 270.000000},
    {2, 2422.197753, -1965.961059, 13.829407, 270.000000},
    {2, 2422.538085, -1968.141479, 13.829407, 270.000000},
    {2, 2422.437988, -1970.161865, 13.829407, 270.000000},
    {2, 2422.488037, -1972.322143, 13.829407, 270.000000},
    {2, 2422.488037, -1974.422363, 13.829407, 270.000000},
    {2, 2422.488037, -1976.602905, 13.829407, 270.000000},
    {2, 2422.568115, -1978.533569, 13.829407, 270.000000},
    {2, 2422.678222, -1980.704101, 13.829407, 270.000000},
    {3, 855.264770, -1038.802124, 23.446907, 215.000000},
    {3, 853.698852, -1040.191894, 23.446907, 215.000000},
    {3, 851.837646, -1041.666137, 23.446907, 215.000000},
    {3, 850.262207, -1042.989501, 23.446907, 215.000000},
    {3, 848.620910, -1044.236816, 23.446907, 215.000000},
    {3, 846.878112, -1045.530883, 23.446907, 215.000000},
    {3, 844.986694, -1046.648193, 23.446907, 215.000000},
    {3, 843.184570, -1048.032226, 23.446907, 215.000000},
    {3, 841.548889, -1049.287597, 23.446907, 215.000000},
    {3, 839.740478, -1050.627563, 23.446907, 215.000000},
    {4, 512.298522, -1522.487792, 12.252450, 90.000000},
    {4, 512.298522, -1520.456787, 12.252450, 90.000000},
    {4, 512.298522, -1518.425903, 12.252450, 90.000000},
    {4, 512.298522, -1516.165405, 12.252450, 90.000000},
    {4, 512.298522, -1514.245239, 12.252450, 90.000000},
    {4, 512.068359, -1511.944091, 12.252450, 90.000000},
    {4, 512.068359, -1509.814208, 12.252450, 90.000000},
    {4, 512.298522, -1507.425292, 12.252450, 90.000000},
    {4, 512.298522, -1505.304931, 12.252450, 90.000000},
    {4, 512.298522, -1503.384521, 12.252450, 90.000000},
    {4, 512.298522, -1501.624389, 12.252450, 90.000000},
    {4, 512.298522, -1499.298339, 12.252450, 90.000000},
    {4, 512.298522, -1522.487792, 13.752450, 90.000000},
    {4, 512.298522, -1520.456787, 13.752450, 90.000000},
    {4, 512.298522, -1518.425903, 13.752450, 90.000000},
    {4, 512.298522, -1516.165405, 13.752450, 90.000000},
    {4, 512.298522, -1514.245239, 13.752450, 90.000000},
    {4, 512.068359, -1511.944091, 13.752450, 90.000000},
    {4, 512.068359, -1509.814208, 13.752450, 90.000000},
    {4, 512.298522, -1507.425292, 13.752450, 90.000000},
    {4, 512.298522, -1505.304931, 13.752450, 90.000000},
    {4, 512.298522, -1503.384521, 13.752450, 90.000000},
    {4, 512.298522, -1501.624389, 13.752450, 90.000000},
    {4, 512.298522, -1499.298339, 13.752450, 90.000000},
    {5, 2012.939208, -1282.796264, 21.760301, 179.226959},
    {5, 2010.718627, -1282.766845, 21.760301, 179.226959},
    {5, 2008.219238, -1282.732910, 21.760301, 179.226959},
    {5, 2005.989379, -1282.702880, 21.760301, 179.226959},
    {5, 2003.889770, -1282.674316, 21.760301, 179.226959},
    {5, 2001.719848, -1282.645507, 21.760301, 179.226959},
    {5, 1999.509765, -1282.615966, 21.760301, 179.226959},
    {5, 1997.539794, -1282.589599, 21.760301, 179.226959},
    {5, 1995.449462, -1282.561889, 21.760301, 179.226959},
    {5, 1993.546508, -1282.786621, 21.760301, 179.226959},
    {5, 1991.387695, -1282.647827, 21.760301, 179.226959},
    {5, 1989.187133, -1282.638427, 21.760301, 179.226959},
    {5, 1987.196044, -1282.701660, 21.760301, 179.226959},
    {5, 1985.255126, -1282.785278, 21.760301, 179.226959},
    {5, 1983.203491, -1282.928100, 21.760301, 179.226959},
    {5, 1981.183105, -1282.901489, 21.760301, 179.226959},
    {5, 1979.322875, -1282.876708, 21.760301, 179.226959},
    {5, 1977.321655, -1282.920288, 21.760301, 179.226959},
    {5, 1975.070434, -1282.950805, 21.760301, 179.226959},
    {5, 1973.359741, -1282.997802, 21.760301, 179.226959},
    {6, 2520.653076, -1268.459106, 32.786579, 268.202911},
    {6, 2520.595947, -1270.278076, 32.786579, 268.202911},
    {6, 2520.631347, -1272.040527, 32.786579, 268.202911},
    {6, 2520.779785, -1273.676757, 32.786579, 268.202911},
    {6, 2520.882080, -1275.182128, 32.786579, 268.202911},
    {6, 2520.826904, -1276.951538, 32.786579, 268.202911},
    {6, 2520.767822, -1278.821655, 32.786579, 268.202911},
    {6, 2520.811035, -1280.303833, 32.786579, 268.202911},
    {6, 2520.782958, -1281.844604, 32.786579, 268.202911},
    {6, 2520.734863, -1283.715209, 32.786579, 268.202911},
    {6, 2521.593261, -1265.743408, 32.543724, 178.275573},
    {6, 2520.653076, -1268.459106, 34.286579, 268.202911},
    {6, 2520.595947, -1270.278076, 34.286579, 268.202911},
    {6, 2520.631347, -1272.040527, 34.286579, 268.202911},
    {6, 2520.779785, -1273.676757, 34.286579, 268.202911},
    {6, 2520.882080, -1275.182128, 34.286579, 268.202911},
    {6, 2520.826904, -1276.951538, 34.286579, 268.202911},
    {6, 2520.767822, -1278.821655, 34.286579, 268.202911},
    {6, 2520.811035, -1280.303833, 34.286579, 268.202911},
    {6, 2520.782958, -1281.844604, 34.286579, 268.202911},
    {6, 2520.734863, -1283.715209, 34.286579, 268.202911},
    {6, 2521.593261, -1265.743408, 34.043724, 178.275573},
    {7, 2420.582031, -1510.028320, 22.002197, 87.980613},
    {7, 2420.656494, -1507.899536, 22.002197, 87.980613},
    {7, 2420.729248, -1505.820434, 22.002197, 87.980613},
    {7, 2420.797607, -1503.861328, 22.002197, 87.980613},
    {7, 2420.706298, -1501.856079, 22.002197, 87.980613},
    {7, 2420.772460, -1499.967163, 22.002197, 87.980613},
    {7, 2420.558349, -1498.327880, 22.002197, 87.980613},
    {7, 2420.629638, -1496.288818, 22.002197, 87.980613},
    {7, 2420.637451, -1494.617797, 22.002197, 87.980613},
    {7, 2418.689453, -1511.844482, 21.619995, 0.000000},
    {7, 2416.989501, -1511.844482, 21.619995, 0.000000},
    {7, 2415.138427, -1511.844482, 21.619995, 0.000000},
    {7, 2413.137939, -1511.844482, 21.619995, 0.000000},
    {7, 2411.336914, -1511.844482, 21.619995, 0.000000},
    {7, 2409.695800, -1511.844482, 21.619995, 0.000000},
    {7, 2408.024169, -1511.844482, 21.619995, 0.000000},
    {7, 2406.803466, -1511.844482, 21.619995, 0.000000},
    {7, 2405.712890, -1511.844482, 21.619995, 0.000000},
    {8, 1769.756469, -1721.183105, 11.426870, 0.000000},
    {8, 1771.825805, -1721.219238, 11.426870, 0.000000},
    {8, 1774.065917, -1721.219238, 11.426870, 0.000000},
    {8, 1776.336303, -1721.219238, 11.426870, 0.000000},
    {8, 1778.396972, -1721.219238, 11.426870, 0.000000},
    {8, 1780.507202, -1721.219238, 11.426870, 0.000000},
    {8, 1782.597290, -1721.219238, 11.426870, 0.000000},
    {8, 1784.728027, -1721.219238, 11.426870, 0.000000},
    {8, 1786.797851, -1721.219238, 11.426870, 0.000000},
    {8, 1788.677001, -1721.219238, 11.426870, 0.000000},
    {8, 1790.987304, -1721.219238, 11.426870, 0.000000},
    {8, 1792.916625, -1721.219238, 11.426870, 0.000000},
    {8, 1794.967285, -1721.219238, 11.426870, 0.000000},
    {8, 1796.447021, -1721.219238, 11.426870, 0.000000},
    {8, 1798.347534, -1721.219238, 11.426870, 0.000000},
    {9, 2723.256591, -2020.687255, 11.477196, 0.000000},
    {9, 2723.196289, -2022.766357, 11.477196, 0.000000},
    {9, 2723.316894, -2024.821044, 11.477196, 0.000000},
    {9, 2723.316894, -2026.461547, 11.477196, 0.000000},
    {9, 2723.316894, -2028.431030, 11.477196, 0.000000},
    {9, 2723.316894, -2030.141479, 11.477196, 0.000000},
    {9, 2723.316894, -2031.961547, 11.477196, 0.000000},
    {9, 2723.316894, -2033.631713, 11.477196, 0.000000},
    {9, 2723.316894, -2035.612060, 11.477196, 0.000000},
    {9, 2723.316894, -2037.552978, 11.477196, 0.000000},
    {9, 2723.316894, -2038.973632, 11.477196, 0.000000}
};

new const Float:minerPositions[][] =
{
    //{1276.6024, -1252.0608, 13.8471},
	//{1264.3618, -1240.3776, 16.0091},
	//{1255.6558, -1242.5010, 17.6045},
	//{1255.5265, -1251.3208, 13.8461},
	{ 571.8854, 889.3759, -88.1907 }
};
new const Float:paintballTSpawns[][] =
{ // TDM Arena
    //   X         Y        Z          R
    {1303.8156, 1.8952, 1001.0244, 146.4729}, // Team 1
    {1260.6339, -66.3295, 1002.4949, 318.4712} // Team 2
};
new const Float:paintballDSpawns[][] =
{ // Deagle Arena
    //   X         Y        Z          R
    {1299.0728, 2103.4670, 11.0234, 10.4824},
    {1298.5331, 2196.3188, 11.0234, 2.9623},
    {1397.0685, 2101.0967, 11.0234, 260.1884},
    {1315.7385, 2206.4363, 16.8045, 205.3078},
    {1388.1871, 2206.5242, 16.7969, 267.3483},
    {1407.4728, 2140.1846, 17.6797, 195.9077},
    {1411.0127, 2107.6167, 12.0156, 172.0940},
    {1399.2078, 2206.6550, 12.0156, 213.8402},
    {1301.0807, 2212.7083, 12.0156, 92.1932}
};
new const Float:paintballSSpawns[][] =
{ // Sniper Arena
    //   X         Y        Z          R
    {-2233.8169, -1743.4373, 480.8561, 37.9961},
    //{-2386.9824, -1841.8787, 441.4585, 356.9490},
    {-2351.9800, -1714.6760, 479.6617, 27.9689},
    {-2344.3889, -1703.7188, 483.6255, 326.3146},
    {-2425.2998, -1623.8129, 524.8774, 212.5245}
};
new const Float:paintballFSpawns[][] =
{// FFA Arena
    //   X         Y        Z          R
    {1291.2968, -0.1334, 1001.0228, 180.0000},
    {1304.6259, -28.7442, 1001.0326, 90.0000},
    {1260.6687, -0.6802, 1001.0234, 180.0000},
    {1251.9862, -26.3548, 1001.0340, 270.0000},
    {1278.8584, -44.1545, 1001.0236, 0.0000},
    {1256.5944, -61.9047, 1002.4999, 0.0000},
    {1297.3204, -61.4144, 1002.4980, 0.0000}
};
new const Float:paintballLVPD[][] =
{// LVPD Paintball
    // X        Y       Z       R
    {288.8384, 170.8850, 1007.1794, 357.9209},
    {238.8748, 141.8436, 1003.0234, 0.1136},
    {209.6191, 142.1594, 1003.0234, 271.4633},
    {202.5294, 159.5241, 1003.0234, 0.1370},
    {226.6185, 180.8132, 1003.0312, 180.5951}
};

new const Float:drivingTestCPs[][] =
{
    {1257.5657, -1849.3583, 13.0332},
	{1128.2242, -1849.8821, 13.0332},
	{1063.3004, -1839.3625, 13.0332},
	{987.0623, -1784.1073, 14.0711},
	{920.1835, -1758.3966, 13.3804},
	{919.8111, -1656.9091, 13.3828},
	{919.9860, -1560.1482, 13.3828},
	{930.4203, -1492.2578, 13.3754},
	{980.7775, -1492.2339, 13.3828},
	{1054.2943, -1491.7645, 13.3828},
	{1065.0643, -1416.5730, 13.3828},
	{1115.0032, -1408.2512, 13.3828},
	{1178.4860, -1408.3331, 13.3828},
	{1268.5947, -1408.8792, 13.3828},
	{1339.5221, -1416.9095, 13.3828},
	{1320.8999, -1494.4954, 13.3828},
	{1295.2820, -1573.4578, 13.3828},
	{1294.6698, -1666.3483, 13.3828},
	{1284.0913, -1709.6714, 13.3828},
	{1212.7543, -1709.5531, 13.3828},
	{1172.5828, -1724.7937, 13.6049},
	{1172.4504, -1783.9113, 13.3984},
	{1179.8055, -1855.1219, 13.3984},
	{1213.0060, -1842.1384, 13.3984}
};

new const Float:cellPositions[][] =
{
	{1205.69995117, -1328.09997559, 797.00000000, 1205.699951, -1326.500000, 797.000000},
	{1205.69995117, -1331.30004883, 797.00000000, 1205.699951, -1329.700073, 797.000000},
	{1205.69995117, -1331.30004883, 800.50000000, 1205.699951, -1329.700073, 800.500000},
	{1205.69995117, -1328.09997559, 800.50000000, 1205.699951, -1326.500000, 800.500000},
	{1215.30004883, -1328.09997559, 797.00000000, 1215.300048, -1326.500000, 797.000000},
	{1215.30004883, -1331.30004883, 797.00000000, 1215.300048, -1329.700073, 797.000000},
	{1215.30004883, -1331.30004883, 800.50000000, 1215.300048, -1329.700073, 800.500000},
	{1215.30004883, -1328.09997559, 800.50000000, 1215.300048, -1326.500000, 800.500000},
	{1215.30004883, -1334.50000000, 797.00000000, 1215.300048, -1332.900024, 797.000000},
	{1215.29980469, -1337.69921875, 797.00000000, 1215.299804, -1336.099243, 797.000000},
	{1215.30004883, -1340.90002441, 797.00000000, 1215.300048, -1339.300048, 797.000000},
	{1215.30004883, -1340.90002441, 800.50000000, 1215.300048, -1339.300048, 800.500000},
	{1215.30004883, -1337.69995117, 800.50000000, 1215.300048, -1336.099975, 800.500000},
	{1215.30004883, -1334.50000000, 800.50000000, 1215.300048, -1332.900024, 800.500000},
	{1205.69995117, -1334.50000000, 800.50000000, 1205.699951, -1332.900024, 800.500000},
	{1205.69995117, -1337.69995117, 800.50000000, 1205.699951, -1336.099975, 800.500000},
	{1205.69995117, -1340.90002441, 800.50000000, 1205.699951, -1339.300048, 800.500000},
	{1205.69995117, -1334.50000000, 797.00000000, 1205.699951, -1332.900024, 797.000000},
	{1205.69995117, -1337.69995117, 797.00000000, 1205.699951, -1336.099975, 797.000000},
	{1205.69995117, -1340.90002441, 797.00000000, 1205.699951, -1339.300048, 797.000000},
	{1215.30004883, -1344.09997559, 800.50000000, 1215.300048, -1342.500000, 800.500000},
	{1215.30004883, -1344.09997559, 797.00000000, 1215.300048, -1342.500000, 797.000000},
	{1205.69995117, -1344.09997559, 800.50000000, 1205.699951, -1342.500000, 800.500000},
	{1205.69995117, -1344.09997559, 797.00000000, 1205.699951, -1342.500000, 797.000000}
};

new const Float:cellSpawns[][] =
{
    {1599.5602, -1660.2219, 2107.0806, 359.7994},
	{1602.2844, -1659.9176, 2107.0808, 359.7994},
	{1606.7863, -1659.4351, 2107.0813, 0.6927},
	{1203.2362, -1333.9489, 796.7505, 270.0000}
};

new const Float:AdminPrisonFloat[18][3] = {
        {215.664749, 1806.403198, 1618.534423},
        {211.635513, 1806.531005, 1618.534423},
        {207.159301, 1806.923339, 1618.535888},
        {201.544662, 1806.452758, 1618.535888},
        {197.230133, 1806.381225, 1618.535888},
        {193.142883, 1806.796752, 1618.535888},
        {215.664749, 1806.403198, 1614.260375},
        {211.635513, 1806.531005, 1614.260375},
        {207.159301, 1806.923339, 1614.260375},
        {201.544662, 1806.452758, 1614.260375},
        {197.230133, 1806.381225, 1614.260375},
        {193.142883, 1806.796752, 1614.260375},
        {215.664749, 1806.403198, 1609.985473},
        {211.635513, 1806.531005, 1609.985473},
        {207.159301, 1806.923339, 1609.985473},
        {201.544662, 1806.452758, 1609.985473},
        {197.230133, 1806.381225, 1609.985473},
        {193.142883, 1806.796752, 1609.985473}
};

new const Float:arrestPoints[][] =
{
    { 1229.3544, -1311.8627, 796.7859}, // PD interior
	{ 1746.078857, -979.039184, 1152.578735}, // PD garage
	{ 1564.6931, -1662.1338,  28.3956}, // PD roof
	{  310.3752, -1515.3691,  24.9219}, // FBI garage
	{ 1382.0898, -1393.6364, -33.7034}, // army garage
	{ 2755.8171, -2515.4490,  13.6398}, // army hq
	{-1605.5806,   674.8765,  -5.2422}, // sfpd garage
	{ 1153.9830, 2974.9168, 1003.4802}  // precinct
};

new Float:SpawnBolnica[ 3 ][ 3 ] = {
    { -2272.7239, 98.7313, -4.6833 },
    { -2272.9255, 101.8626, -4.6833 },
    { -2272.8877, 105.0981, -4.6833 }
};
new const factionTypes[][] =
{
	{"Civilian"},
	{"Law enforcement"},
	{"Medical & fire"},
	{"News agency"},
	{"Government"},
	{"Hitman agency"},
	{"Federal police"},
	{"Armed Forces"}
};

new const deployableItems[][] =
{
	{"Spikestrip"},
	{"Traffic cone"},
	{"Roadblock"},
	{"Barrel"},
	{"Smoke flare"}
};

new const clothingTypes[][] =
{
	{"Glasses"},
	{"Bandanas & masks"},
	{"Hats & caps"},
	{"Misc clothing"}
};

enum clothingEnum
{
	clothingType[20],
	clothingName[32],
	clothingModel,
	clothingBone,
	clothingPrice
};

new const clothingArray[][clothingEnum] =
{
    {"Glasses",		        "Red tinted shades",        19006, 2, 500},
    {"Glasses",		        "Brown tinted shades",      19007, 2, 500},
    {"Glasses",		        "Green tinted shades",      19008, 2, 500},
    {"Glasses",		        "Blue tinted shades",       19009, 2, 500},
    {"Glasses",		        "Pink tinted shades",       19010, 2, 500},
    {"Glasses",		        "Spiralled shades",         19011, 2, 500},
    {"Glasses",		        "Black tinted shades",      19012, 2, 500},
    {"Glasses",		        "Gag glasses",       	    19013, 2, 500},
    {"Glasses",		        "Checkered shades",         19014, 2, 500},
    {"Glasses",		        "Reading glasses",    	    19015, 2, 500},
    {"Glasses",		        "X-Ray glasses",            19016, 2, 500},
    {"Glasses",		        "Plastic black shades",     19017, 2, 500},
    {"Glasses",		        "Plastic orange shades",    19018, 2, 500},
    {"Glasses",		        "Plastic red shades",       19019, 2, 500},
    {"Glasses",		        "Plastic blue shades",      19020, 2, 500},
    {"Glasses",		        "Plastic green shades",     19021, 2, 500},
    {"Glasses",		        "Clear sunglasses",         19022, 2, 500},
    {"Glasses",		        "Blue sunglasses",          19023, 2, 500},
    {"Glasses",		        "Purple sunglasses",        19024, 2, 500},
    {"Glasses",		        "Pink sunglasses",          19025, 2, 500},
    {"Glasses",		        "Red sunglasses",           19026, 2, 500},
    {"Glasses",		        "Brown sunglasses",         19027, 2, 500},
    {"Glasses",		        "Yellow sunglasses",        19028, 2, 500},
    {"Glasses",		        "Green sunglasses",         19029, 2, 500},
    {"Glasses",		        "Plain brown shades",       19030, 2, 500},
    {"Glasses",		        "Plain yellow shades",      19031, 2, 500},
    {"Glasses",		        "Plain red shades",         19032, 2, 500},
    {"Glasses",		        "Plain black shades",       19033, 2, 500},
    {"Glasses",		        "Checkered glasses",        19034, 2, 500},
    {"Glasses",		        "Wavy glasses",             19035, 2, 500},
    {"Bandanas & masks",	"Balaclava", 			    19801, 2, 375},
    {"Bandanas & masks",	"Dark blue bandana", 	   	18891, 2, 375},
    {"Bandanas & masks",	"Red bandana", 			   	18892, 2, 375},
    {"Bandanas & masks",	"Red & white bandana", 	   	18893, 2, 375},
    {"Bandanas & masks",	"Orange star bandana", 	   	18894, 2, 375},
    {"Bandanas & masks",	"Skull bandana", 		   	18895, 2, 375},
    {"Bandanas & masks",	"Black bandana", 		   	18896, 2, 375},
    {"Bandanas & masks",	"Blue bandana", 		   	18897, 2, 375},
    {"Bandanas & masks",	"Green bandana", 		   	18898, 2, 375},
    {"Bandanas & masks",	"Pink bandana", 		   	18899, 2, 375},
    {"Bandanas & masks",	"Hippie bandana", 		   	18900, 2, 375},
    {"Bandanas & masks",	"Tiger bandana", 		   	18901, 2, 375},
    {"Bandanas & masks",	"Yellow bandana",		   	18902, 2, 375},
    {"Bandanas & masks",	"Purple bandana", 		   	18903, 2, 375},
    {"Bandanas & masks",	"Cool blue bandana", 	   	18904, 2, 375},
    {"Bandanas & masks",	"Brown bandana", 		   	18905, 2, 375},
    {"Bandanas & masks",	"Skull bandana mask", 	   	18911, 2, 375},
    {"Bandanas & masks",	"Black bandana mask", 	   	18912, 2, 375},
    {"Bandanas & masks",	"Grove bandana mask", 	   	18913, 2, 375},
    {"Bandanas & masks",	"Camo bandana mask", 	   	18914, 2, 375},
    {"Bandanas & masks",	"Hippie bandana mask", 	   	18915, 2, 375},
    {"Bandanas & masks",	"Yellow bandana mask", 	   	18916, 2, 375},
    {"Bandanas & masks",	"Blue bandana mask", 	   	18917, 2, 375},
    {"Bandanas & masks",	"Green bandana mask", 	   	18918, 2, 375},
    {"Bandanas & masks",	"White bandana mask", 	   	18919, 2, 375},
    {"Bandanas & masks",	"Flower bandana mask", 	   	18920, 2, 375},
    {"Bandanas & masks",	"White hockey mask", 	    19036, 2, 375},
	{"Bandanas & masks",	"Red hockey mask", 		    19037, 2, 375},
	{"Bandanas & masks",	"Green hockey mask", 	    19038, 2, 375},
	{"Bandanas & masks",	"Sexy mask", 			    19557, 2, 375},
	{"Bandanas & masks",	"Devil mask", 			   	11704, 2, 375},
	{"Bandanas & masks",	"Gas mask", 			    19472, 2, 375},
	{"Bandanas & masks",	"Zorro mask", 			   	18974, 2, 375},
	{"Bandanas & masks",	"Gimp mask", 			    19163, 2, 375},
	{"Hats & caps",         "Santa hat",                19064, 2, 240},
    {"Hats & caps",			"Dude hat", 			    19160, 2, 240},
	{"Hats & caps",			"Top hat", 				    19352, 2, 240},
    {"Hats & caps",			"Witch hat",                19528, 2, 240},
    {"Hats & caps",			"Yellow fire hat", 		    19330, 2, 240},
	{"Hats & caps",			"Black fire hat", 	  	    19331, 2, 240},
	{"Hats & caps",			"Black beret", 			   	18921, 2, 240},
    {"Hats & caps",			"Brown beret", 			   	18922, 2, 240},
    {"Hats & caps",			"Blue beret", 			   	18923, 2, 240},
    {"Hats & caps",			"Camo beret", 			   	18924, 2, 240},
    {"Hats & caps",			"Red beret", 			   	18925, 2, 240},
    {"Hats & caps",			"Camo cap", 			   	18926, 2, 240},
    {"Hats & caps",			"Wave cap", 			   	18927, 2, 240},
    {"Hats & caps",			"Hippy cap", 			   	18928, 2, 240},
    {"Hats & caps",			"Green cap", 			   	18929, 2, 240},
    {"Hats & caps",			"Red cap", 				   	18930, 2, 240},
    {"Hats & caps",			"Blue cap", 			  	18931, 2, 240},
    {"Hats & caps",			"Orange cap", 			   	18932, 2, 240},
    {"Hats & caps",			"White cap", 			   	18933, 2, 240},
    {"Hats & caps",			"Plain pink cap", 		   	18934, 2, 240},
    {"Hats & caps",			"Plain yellow cap", 	   	18935, 2, 240},
    {"Hats & caps",			"Blue back cap", 		   	18939, 2, 240},
    {"Hats & caps",			"Wave back cap", 		   	18940, 2, 240},
    {"Hats & caps",			"Black back cap", 		   	18941, 2, 240},
    {"Hats & caps",			"White back cap", 		   	18942, 2, 240},
    {"Hats & caps",			"Green back cap", 		   	18943, 2, 240},
    {"Hats & caps",			"Red boater hat", 		   	18944, 2, 240},
    {"Hats & caps",			"Green boater hat", 	   	18945, 2, 240},
    {"Hats & caps",			"Striped boater hat", 	   	18946, 2, 240},
    {"Hats & caps",			"Black bowler hat", 	   	18947, 2, 240},
    {"Hats & caps",			"White bowler hat",		    19488, 2, 240},
    {"Hats & caps",			"Blue bowler hat", 		   	18948, 2, 240},
    {"Hats & caps",			"Green bowler hat", 	   	18949, 2, 240},
    {"Hats & caps",			"Red bowler hat", 		   	18950, 2, 240},
    {"Hats & caps",			"Yellow bowler hat", 	   	18951, 2, 240},
    {"Hats & caps",			"Black knit cap", 		   	18953, 2, 240},
    {"Hats & caps",			"White knit cap", 		   	18954, 2, 240},
    {"Hats & caps",			"Hippie hat", 			   	18960, 2, 240},
    {"Hats & caps",			"Born 2 truck hat", 	   	18961, 2, 240},
    {"Hats & caps",			"Brown cowboy hat", 	    19098, 2, 240},
	{"Hats & caps",			"Black cowboy hat",		    19096, 2, 240},
    {"Hats & caps",			"Skully cap", 			   	18964, 2, 240},
    {"Hats & caps",			"Black bucket hat", 	   	18967, 2, 240},
    {"Hats & caps",			"Plaid bucket hat", 	   	18968, 2, 240},
    {"Hats & caps",			"Zig-Zag bucket hat", 	   	18969, 2, 240},
    {"Hats & caps",			"Camo bucket hat", 		    19106, 2, 240},
    {"Hats & caps",			"Hippy hat", 			    19113, 2, 240},
    {"Hats & caps",			"Don't shoot me hat", 	    19114, 2, 240},
    {"Hats & caps",			"Skull hat", 			    19115, 2, 240},
    {"Hats & caps",			"Tiger hat", 			   	18970, 2, 240},
    {"Hats & caps",			"Hard hat", 			   	18638, 2, 240},
	{"Hats & caps",			"Straw hat", 			    19553, 2, 240},
	{"Hats & caps",			"Pizza hat", 			    19558, 2, 240},
	{"Hats & caps",			"Beanie hat", 			    19554, 2, 240},
    {"Hats & caps",			"Checkered fedora", 	   	18971, 2, 240},
    {"Hats & caps",			"Orange fedora", 		   	18972, 2, 240},
    {"Hats & caps",			"Yellow fedora", 		   	18973, 2, 240},
    {"Hats & caps",			"Camoflauge helmet", 	    19101, 2, 240},
    {"Hats & caps",			"Black helmet", 		    19116, 2, 240},
    {"Hats & caps",			"Red helmet", 			    19117, 2, 240},
    {"Hats & caps",			"Green helmet",	 		    19118, 2, 240},
    {"Hats & caps",			"Blue helmet", 			    19119, 2, 240},
    {"Hats & caps",			"Yellow helmet", 		    19120, 2, 240},
    {"Hats & caps",			"Boxing helmet", 		   	18952, 2, 240},
    {"Hats & caps",			"Motorcycle helmet",   	   	18645, 2, 240},
    {"Misc clothing",	    "Gold watch",	 			19039, 6, 500},
	{"Misc clothing",	    "Silver watch", 			19040, 6, 500},
	{"Misc clothing",	    "Bronze watch", 			19041, 6, 500},
	{"Misc clothing",	    "Yellow watch", 			19042, 6, 500},
	{"Misc clothing",	    "White watch", 			 	19043, 6, 500},
	{"Misc clothing",	    "Purple watch", 			19044, 6, 500},
	{"Misc clothing",	    "Pink watch", 				19045, 6, 500},
	{"Misc clothing",	    "Green watch", 			 	19046, 6, 500},
	{"Misc clothing",	    "Blue watch", 				19047, 6, 500},
	{"Misc clothing",	    "Camo watch", 				19053, 6, 500},
	{"Misc clothing",	    "White headphones", 		19421, 2, 500},
    {"Misc clothing",	    "Black headphones", 		19422, 2, 500},
    {"Misc clothing",	    "Orange headphones", 		19423, 2, 500},
    {"Misc clothing",	    "Blue headphones", 		 	19424, 2, 500},
	{"Misc clothing",	    "Red clown hair", 			19274, 2, 500},
    {"Misc clothing",	    "Grey clown hair", 		 	19518, 2, 500},
    {"Misc clothing",	    "Black hair", 				19077, 2, 500},
    {"Misc clothing",	    "Grey hair", 				19517, 2, 500},
	{"Misc clothing",	    "Bass guitar", 			 	19317, 1, 500},
	{"Misc clothing",	    "White guitar", 		 	19318, 1, 500},
	{"Misc clothing",	    "Black guitar", 			19319, 1, 500},
	{"Misc clothing",	    "Pilot hat", 				19520, 2, 500},
	{"Misc clothing",       "Bag of money",             1550,  1, 500},
	{"Misc clothing",	    "Shop basket", 			 	19592, 6, 500},
	{"Misc clothing",	    "Oil can", 				 	19621, 6, 500},
	{"Misc clothing",	    "Broom", 				 	19622, 1, 500},
	{"Misc clothing",	    "Camera", 					19623, 6, 500},
	{"Misc clothing",	    "Briefcase", 				19624, 6, 500},
	{"Misc clothing",	    "Cigarette", 				19625, 2, 500},
	{"Misc clothing",	    "Spade", 					19626, 1, 500},
	{"Misc clothing",	    "Left boxing glove", 		19555, 5, 500},
	{"Misc clothing",	    "Right boxing glove", 		19556, 6, 500},
	{"Misc clothing",	    "Scarf", 					19469, 2, 500},
	{"Misc clothing",	    "Eye patch", 				19085, 2, 500},
	{"Misc clothing",	    "Hiker backpack", 			19559, 1, 500},
	{"Misc clothing",	    "Construction vest", 		19904, 1, 500},
	{"Misc clothing",	    "Police radio", 			19942, 1, 500},
	{"Misc clothing",	    "Bodybag", 				 	19944, 1, 500},
	{"Misc clothing",	    "Sports bag", 				11745, 1, 500},
	{"Misc clothing",	    "Holster", 				 	19773, 8, 500},
    {"Misc clothing",	    "Fedora", 					18639, 2, 500},
    {"Misc clothing",	    "Afro", 					18640, 2, 500},
    {"Misc clothing",	    "Flashlight",          		18641, 6, 500},
    {"Misc clothing",	    "Hammer",              		18635, 6, 500},
    {"Misc clothing",	    "Wrench",              		18633, 2, 500},
    {"Misc clothing",       "Backpack",                  3026, 9, 500}
};


enum copEnum
{
	cModel,
	cBone,
	cName[24]
};

new const copClothing[][copEnum] =
{
	{18636, 2, "Police cap"},
	{19521, 2, "Police hat"},
	{19099, 2, "Black rim hat"},
	{19100, 2, "Brown rim hat"},
	{19139, 2, "Red shades"},
	{19140, 2, "Blue shades"},
	{19138, 2, "Black shades"},
	{19774, 1, "Badge"},
	{19942, 1, "Radio"},
	{19162, 2, "Blue cap"},
	{19161, 2, "Black cap"},
	{19200, 2, "Bike helmet"},
	{18637, 1, "Riot shield"},
	{19141, 2, "SWAT helmet"},
	{19142, 1, "SWAT armor"},
	{19515, 1, "Grey armor"},
	{19514, 2, "Grey helmet"},
	{19777, 1, "FBI insignia"},
	{19776, 1, "FBI ID card"},
	{18642, 1, "Taser"},
	{18641, 1, "Flashlight"},
	{11749, 1, "Handcuffs"},
	{11750, 1, "Closed cuff"},
	{19783, 1, "Police badge"},
	{19784, 1, "Police badge 2"},
	{19785, 1, "Senior Ld. badge"},
	{19778, 1, "Detective badge"},
	{19779, 1, "Detective badge 2"},
	{19780, 1, "Detective badge 3"},
	{19781, 1, "Sergeant badge"},
	{19782, 1, "Sergeant badge 2"}
};

enum bizInts
{
	intName[32],
	intID,
	Float:intX,
	Float:intY,
	Float:intZ,
	Float:intA
};

new const bizInteriorArray[][bizInts] =
{
	{"24/7 (version 1)", 		17, -25.9733, -187.8952, 1003.5468, 0.0000},
    {"24/7 (version 2)", 		10, 6.0159, -31.0345, 1003.5493, 0.0000},
    {"24/7 (version 3)", 		18, -30.9967, -91.4492, 1003.5468, 0.0000},
    {"24/7 (version 4)", 		16, -25.9416, -140.6656, 1003.5468, 0.0000},
    {"24/7 (version 5)", 		4, 	-27.3069, -30.8341, 1003.5573, 0.0000},
    {"24/7 (version 6)", 		6, 	-27.4368, -57.4361, 1003.5468, 0.0000},
    {"Ammunation (version 1)", 	7, 	315.7398, -143.1958, 999.6016, 0.0000},
    {"Ammunation (version 2)", 	1, 	285.3190, -41.1576, 1001.5156, 0.0000},
    {"Ammunation (version 3)", 	4, 	285.7825, -85.9860, 1001.5228, 0.0000},
    {"Ammunation (version 4)", 	6, 	296.7723, -111.6399, 1001.5156, 0.0000},
    {"Ammunation (version 5)", 	6, 	316.2890, -169.7619, 999.6010, 0.0000},
    {"Binco", 					15, 207.6329, -110.7673, 1005.1328, 0.0000},
    {"Pro-Laps", 				3, 	206.9459, -139.5319, 1003.5078, 0.0000},
    {"Didier Sachs", 			14,	204.2969, -168.3488, 1000.5233, 0.0000},
    {"Victim", 					5, 	226.7738, -8.2257, 1002.2108, 90.0000},
    {"Zip", 					18, 161.3670, -96.4953, 1001.8046, 0.0000},
    {"SubUrban", 				1, 	203.7149, -50.2200, 1001.8046, 0.0000},
    {"Betting (version 1)", 	3,  834.1848, 7.3453, 1004.1870, 90.0000},
	{"Betting (version 2)",     1,  -2170.3428, 640.7771, 1052.3817, 0.0000},
	{"Donut Shop", 				17, 377.0733, -193.0574, 1000.6400, 0.0000},
    {"Burger Shot", 			10, 363.1346, -74.8441, 1001.5078, 315.0000},
    {"Pizza Stack", 			5, 	372.3019, -133.1221, 1001.4921, 0.0000},
    {"Cluckin' Bell", 			9, 	364.8536, -11.1400, 1001.8516, 0.0000},
	{"Marco's Bistro",          1,  -795.0334, 489.8574, 1376.1953, 0.0000},
	{"Cafeteria",               4,  459.7685, -88.6637, 999.5547, 90.0000},
    {"Barber Shop", 			3, 	418.5545, -83.9392, 1001.8046, 0.0000},
    {"Tattoo Shop", 			3, 	-204.4362, -43.8119, 1002.2733, 0.0000},
    {"Ganton Gym", 				5, 	772.2800, -4.7154, 1000.7288, 0.0000},
    {"Las Venturas Gym", 		7, 	773.8508, -78.3952, 1000.6621, 0.0000},
    {"San Fierro Gym", 			6, 	774.1206, -49.9538, 1000.5858, 0.0000},
    {"Sex Shop", 				3, 	-100.3628, -24.4456, 1000.7188, 0.0000},
    {"RC Shop", 				6, 	-2240.3610, 128.2816, 1035.4210, 270.0000},
    {"Four Dragons Casino", 	10, 2018.2132, 1017.7788, 996.8750, 90.0000},
    {"Caligulas Casino", 		1, 	2234.0485, 1714.1568, 1012.3596, 180.0000},
    {"Red Sands Casino", 		12, 1133.1075, -15.3114, 1000.6796, 0.0000},
    {"Alhambra", 				17, 493.3728, -23.9953, 1000.6796, 0.0000},
    {"Pig Pen", 				2, 	1204.7922, -13.2587, 1000.9218, 0.0000},
    {"Big Spread Ranch", 		3, 	1212.1400, -26.3005, 1000.9531, 180.0000},
    {"Ten Green Bottles", 		11, 501.9559, -67.9867, 998.7578, 180.0000},
    {"Lil' Probe Inn",          18, -228.7570, 1401.2421, 27.7656, 270.0000},
    {"Warehouse",               18, 1307.0178, 4.1193, 1001.0289, 90.0000}
};

enum intEnum
{
    intName[32],
    intID,
    Float:intX,
    Float:intY,
    Float:intZ,
    Float:intA
}

new const interiorArray[][intEnum] =
{
    {"24/7 (version 1)", 17, -25.7220, -187.8215, 1003.5468, 5.0760},
    {"24/7 (version 2)", 10, 6.0854, -28.8966, 1003.5493, 5.0363},
    {"24/7 (version 3)", 18, -30.9874, -89.6806, 1003.5468, 359.8399},
    {"24/7 (version 4)", 16, -26.1856, -140.9163, 1003.5468, 2.9086},
    {"24/7 (version 5)", 4, -27.8439, -26.6737, 1003.5573, 184.3117},
    {"24/7 (version 6)", 6, -26.8339, -55.5844, 1003.5468, 3.9528},
    {"8-Track Stadium", 7, -1403.0114, -250.4526, 1043.5340, 355.8576},
    {"Abandoned AC Tower", 10, 419.8934, 2537.1154, 10.0000, 67.6537},
    {"Ammunation (version 1)", 7, 315.2438, -140.8858, 999.6016, 7.4225},
    {"Ammunation (version 2)", 1, 285.8359, -39.0166, 1001.5156, 0.7529},
    {"Ammunation (version 3)", 4, 291.7626, -80.1305, 1001.5156, 290.2195},
    {"Ammunation (version 4)", 6, 297.1440, -109.8702, 1001.5156, 20.2254},
    {"Ammunation (version 5)", 6, 316.5025, -167.6271, 999.5938, 10.3030},
    {"Andromada", 9, 315.4544, 976.5972, 1960.8509, 359.6368},
    {"Angel Pine Trailer", 2, 1.1851, -3.2386, 999.4284, 87.5718},
    {"Area 69", 0, 215.1515, 1874.0577, 13.1406, 177.5538},
    {"Atrium", 18, 1727.2851, -1642.9449, 20.2254, 172.4192},
    {"B Dup's Apartment", 3, 1527.0467, -12.0235, 1002.0971, 350.0013},
    {"B Dup's Crack Palace", 2, 1523.5096, -47.8209, 1002.2697, 262.7037},
    {"Bar", 11, 501.9577, -70.5646, 998.7578, 171.5706},
    {"Barbara's Love nest", 5, 322.5014, 303.6906, 999.1483, 8.1745},
    {"Barber Shop (version 1)", 3, 418.4666, -80.4595, 1001.8046, 343.2358},
    {"Barber Shop (version 2)", 12, 411.9707, -51.9216, 1001.8983, 173.3448},
    {"Barber Shop (version 3)", 2, 414.2987, -18.8043, 1001.8046, 41.4263},
    {"Big Smoke's Crack Palace", 2, 2536.5322, -1294.8425, 1044.1250, 254.9548},
    {"Bike School (version 1)", 3, 1494.8587, 1306.4798, 1093.2951, 196.0650},
    {"Bike School (version 2)", 0, 1168.5118, 1360.1145, 10.9293, 196.5933},
    {"Binco", 15, 207.5218, -109.7446, 1005.1328, 358.6199},
    {"Blastin' Fools Records", 3, 1037.8276, 0.3970, 1001.2844, 353.9335},
    {"Blood Bowl Stadium", 15, -1417.8927, 932.4481, 1041.5312, 0.7013},
    {"Blueberry Liquor Store", 0, 255.2082, -59.6753, 1.5701, 1.4644},
    {"Brothel 1", 3, 974.0177, -9.5937, 1001.1483, 22.6044},
    {"Brothel 2", 3, 961.9307, -51.9071, 1001.1171, 95.5381},
    {"Budget Inn Motel Room", 12, 446.3247, 509.9660, 1001.4193, 330.5671},
    {"Burger Shot", 10, 366.0248, -73.3478, 1001.5078, 292.0083},
    {"Burglary House 1", 15, 295.1390, 1473.3719, 1080.2578, 352.9526},
    {"Burglary House 2", 3, 234.6087, 1187.8194, 1080.2578, 349.4844},
    {"Burglary House 3", 5, 227.7559, 1114.3842, 1080.9920, 266.2622},
    {"Burglary House 4", 4, 261.1163, 1287.2197, 1080.2578, 178.9149},
    {"Burglary House 5", 4, 221.6766, 1142.4962, 1082.6092, 184.9618},
    {"Burglary House 6", 10, 24.3768, 1341.1827, 1084.3750, 8.3304},
    {"Burglary House 7", 4, -262.1759, 1456.6158, 1084.3670, 82.4589},
    {"Burglary House 8", 5, 22.8610, 1404.9165, 1084.4295, 349.6158},
    {"Burglary House 9", 5, 140.3679, 1367.8835, 1083.8620, 349.2372},
    {"Burglary House 10", 6, 234.2825, 1065.2290, 1084.2099, 4.3864},
    {"Burglary House 11", 6, -68.5145, 1353.8485, 1080.2109, 3.5741},
    {"Burglary House 12", 2, 225.5706, 1240.0643, 1082.1406, 96.2852},
    {"Burglary House 13", 15, -285.2510, 1471.1970, 1084.3750, 85.6547},
    {"Burglary House 14", 8, -42.5265, 1408.2298, 1084.4295, 172.0679},
    {"Burglary House 15", 9, 84.9244, 1324.2983, 1083.8592, 159.5581},
    {"Burglary House 16", 9, 260.7420, 1238.2259, 1084.2578, 84.3084},
    {"Burglary House 17", 1, 224.2879, 1289.1905, 1082.1406, 359.8680},
    {"Burglary House 18", 5, 239.2819, 1114.1989, 1080.9920, 270.2654},
    {"Burglary House 19", 2, 446.6260, 1397.7380, 1084.3045, 343.9645},
    {"Burning Desire Building", 5, 2350.1596, -1181.0656, 1027.9764, 99.1864},
    {"Caligula's Casino", 1, 2233.9362, 1711.8038, 1011.6312, 184.3890},
    {"Caligula's Roof", 1, 2268.5156, 1647.7680, 1084.2342, 99.7331},
    {"Casino (Redsands West)", 12, 1133.3498, -7.8460, 1000.6796, 165.8482},
    {"Cemetary", 0, 818.7714, -1102.8687, 25.7940, 91.1437},
    {"Club", 17, 493.1441, -24.2607, 1000.6796, 356.9862},
    {"Cluckin' Bell", 9, 366.0002, -9.4336, 1001.8516, 160.5278},
    {"Cobra Gym", 6, 773.8886, -47.7696, 1000.5858, 10.7159},
    {"Colonel Furhberger's", 8, 2807.3603, -1171.7048, 1025.5703, 193.7117},
    {"Crack Den", 5, 227.3921, 1114.6572, 1080.9985, 267.4590},
    {"Denise's Bedroom", 1, 245.2306, 304.7632, 999.1483, 273.4364},
    {"Didier Sachs", 14, 204.1658, -165.7678, 1000.5233, 181.7583},
    {"Dillimore Gas Station", 0, 663.0587, -573.6273, 16.3358, 264.9829},
    {"Diner 1", 5, 454.9851, -107.2546, 999.4376, 309.0195},
    {"Dirtbike Stadium", 4, -1421.5616, -663.8261, 1059.5567, 170.9340},
    {"Driving School", 3, -2031.1196, -115.8285, 1035.1717, 190.1876},
    {"Fanny Batter's Whore House", 6, 748.4622, 1438.2376, 1102.9531, 0.6068},
    {"Four Dragons", 10, 2016.1156, 1017.1541, 996.8750, 88.0055},
    {"Francis International Airport", 14, -1813.2130, -58.0120, 1058.9641, 335.3197},
    {"Ganton Gym", 5, 770.8032, -0.7031, 1000.7266, 22.8598},
    {"Helena's Barn", 3, 290.6228, 309.0621, 999.1483, 89.9162},
    {"Inside Track Betting", 3, 830.6016, 5.9404, 1004.1796, 125.8149},
    {"Jay's Diner", 4, 449.0172, -88.9894, 999.5546, 89.6606},
    {"Jefferson Motel", 15, 2217.2810, -1150.5349, 1025.7967, 273.7326},
    {"Jet Interior", 1, 1.5491, 23.3183, 1199.5937, 359.9053},
    {"K.A.C.C. Military Fuels Depot", 0, 2548.4807, 2823.7429, 10.8203, 270.6003},
    {"Katie's Lovenest", 2, 269.6405, 305.9512, 999.1483, 215.6625},
    {"Kickstart Stadium", 14, -1420.4277, 1616.9221, 1052.5312, 159.1255},
    {"Las Venturas Gym", 7, 773.7318, -74.6957, 1000.6541, 5.2304},
    {"Las Venturas Police Department", 3, 288.4721, 170.0646, 1007.1793, 22.0477},
    {"Las Venturas Tattoo parlor", 3, -201.2236, -43.2463, 1002.2733, 45.8613},
    {"Liberty City", 1, -741.8494, 493.0036, 1371.9764, 71.7780},
    {"Lil' Probe Inn", 18, -227.5702, 1401.5544, 27.7656, 269.2976},
    {"Loco Low Co", 2, 611.3535, -77.5574, 997.9995, 320.9263},
    {"Los Santos Airport", 14, -1864.9433, 55.7323, 1055.5274, 85.8541},
    {"Los Santos Police Department", 6, 246.6694, 65.8039, 1003.6406, 7.9562},
    {"Los Santos Tattoo Parlor", 16, -202.8419, -24.0324, 1002.2733, 252.8153},
    {"Lost San Fierro Tattoo parlor", 17, -202.9380, -6.7006, 1002.2733, 204.2693},
    {"Madd Dogg's Mansion", 5, 1267.8405, -776.9586, 1091.9062, 231.3417},
    {"Michelle's Love Nest", 4, 306.1965, 307.8190, 1003.3046, 203.1354},
    {"Millie's Bedroom", 6, 344.9984, 307.1824, 999.1557, 193.6430},
    {"OG Loc's House", 3, 512.9290, -11.6927, 1001.5653, 198.7669},
    {"Old Venturas Strip Casino", 2, 2236.6997, -1078.9477, 1049.0234, 2.5706},
    {"Otto's Autos", 0, -1658.1656, 1215.0002, 7.2500, 103.9074},
    {"Oval Stadium", 1, -1402.6612, 106.3897, 1032.2734, 105.1354},
    {"Palamino Bank", 0, 2306.3825, -15.2363, 26.7495, 274.4898},
    {"Palamino Diner", 0, 2331.8984, 6.7814, 26.5032, 100.2357},
    {"Pizza Stack", 5, 372.5563, -131.3607, 1001.4921, 354.2283},
    {"Planning Department", 3, 386.5259, 173.6381, 1008.3828, 63.7397},
    {"Pro-Laps", 3, 206.4627, -137.7075, 1003.0938, 10.9347},
    {"RC Battlefield", 10, -1129.8907, 1057.5423, 1346.4139, 274.5267},
    {"Rosenberg's Office", 2, 2182.2016, 1628.5848, 1043.8723, 224.8601},
    {"Rusty Brown's Donuts", 17, 378.0260, -190.5155, 1000.6328, 141.0245},
    {"Ryder's House", 2, 2447.8703, -1704.4509, 1013.5078, 314.5252},
    {"Safe House (version 1)", 5, 2233.6918, -1112.8105, 1050.8828, 8.6483},
    {"Safe House (version 2)", 9, 2319.1271, -1023.9561, 1050.2109, 167.3959},
    {"Safe House (version 3)", 10, 2261.0976, -1137.8833, 1050.6328, 266.8800},
    {"San Fierro Garage", 1, -2041.2332, 178.3968, 28.8465, 156.2153},
    {"San Fierro Police Department", 10, 246.0688, 108.9701, 1003.2188, 0.2921},
    {"Secret Valley Diner", 6, 442.1293, -52.4780, 999.7166, 177.9394},
    {"Sex Shop", 3, -100.2674, -22.9375, 1000.7188, 17.2849},
    {"Sherman Dam", 17, -944.2401, 1886.1534, 5.0050, 179.8547},
    {"Sindacco Abatoir", 1, 963.0584, 2159.7563, 1011.0302, 175.3130},
    {"SubUrban", 1, 204.1174, -46.8045, 1001.8046, 357.5776},
    {"Sweet's House", 1, 2527.0175, -1679.2076, 1015.4984, 260.9707},
    {"The Big Spread Ranch", 3, 1212.1489, -28.5387, 1000.9531, 170.5691},
    {"The Camel's Toe Safehouse", 1, 2216.1281, -1076.3050, 1050.4842, 86.4280},
    {"The Johnson House", 3, 2496.0549, -1695.1749, 1014.7421, 179.2174},
    {"The Pig Pen (strip club 2)", 2, 1204.6689, -13.5429, 1000.9218, 350.0202},
    {"The Pleasure Domes", 3, -2638.8232, 1407.3393, 906.4608, 94.6792},
    {"The Welcome Pump", 1, 681.6215, -451.8933, -25.6172, 166.1660},
    {"Torreno's Ranch", 0, -688.1494, 942.0825, 13.6328, 177.6573},
    {"Transfenders", 1, 621.4528, -23.7289, 1000.9218, 15.6787},
    {"Unused Safe House", 12, 2323.7062, -1147.6507, 1050.7099, 206.5352},
    {"Verdant Bluffs Safehouse", 8, 2365.1088, -1133.0793, 1050.8750, 177.3946},
    {"Vice Stadium", 16, -1401.0670, 1265.3706, 1039.8670, 178.6483},
    {"Victim", 5, 225.0305, -9.1836, 1002.2180, 85.5322},
    {"Wang Cars", 0, -1961.6280, 295.2377, 35.4687, 264.4891},
    {"Wardrobe/Changing room", 14, 256.9046, -41.6537, 1002.0233, 85.8774},
    {"Warehouse 1", 18, 1290.4106, 1.9512, 1001.0200, 179.9418},
    {"Warehouse 2", 1, 1412.1472, -2.2836, 1000.9240, 114.6610},
    {"Warehouse 3", 0, 2135.2004, -2276.2814, 20.6718, 318.5899},
    {"Wheel Arch Angels", 3, 612.2191, -123.9028, 997.9921, 266.5704},
    {"Willowfield Safehouse", 11, 2283.3117, 1139.3070, 1050.8984, 19.7031},
    {"World of Coq", 1, 445.6003, -6.9822, 1000.7343, 172.2104},
    {"Wu-Zi Mu's", 1, -2158.6730, 642.0900, 1052.3750, 86.5401},
    {"Zero's RC Shop", 6, -2240.1027, 136.9730, 1035.4139, 269.0953},
    {"Zip", 18, 161.4048, -94.2416, 1001.8046, 0.7936},
    {"Zombotech", 0, -1916.1268, 714.8615, 46.5625, 152.2839}
};


new Text:currentcam[MAX_PLAYERS];

GetVehicleOwnerID(vehicleid)
{
    foreach(new playerid: Player) 
    {
        if(PlayerData[playerid][pID] == VehicleInfo[vehicleid][vOwnerID])
        {
            return playerid;
        }
    }
    return INVALID_PLAYER_ID;
}

#include "rex/BanSystem.pwn"
#include "modules/Achievements.pwn"
#include <YSI\y_hooks>
#include "core\core.func.inc"

main()
{
    printf("Server Started");
}

GetAdminDivision(playerid)
{
	new division[4];
	if(PlayerData[playerid][pAdminPersonnel])
	{
		division = "AP";
	}
	else if(PlayerData[playerid][pHumanResources])
	{
	    division = "HR";
	}
	else if(PlayerData[playerid][pGameAffairs])
	{
	    division = "DGA";
	}
	else if(PlayerData[playerid][pWebDev])
	{
		division = "BM";
	}
	else if(PlayerData[playerid][pFactionMod])
	{
	    division = "FM";
	}
	else if(PlayerData[playerid][pGangMod])
	{
	    division = "GM";
	}
	else if(PlayerData[playerid][pBanAppealer])
	{
	    division = "BA";
	}
	else if(PlayerData[playerid][pComplaintMod])
	{
	    division = "CM";
	}
	else if(PlayerData[playerid][pHelperManager])
	{
	    division = "PR";
	}
	else if(PlayerData[playerid][pDynamicAdmin])
	{
		division = "DA";
	}
	else if(PlayerData[playerid][pDeveloper])
	{
	    division = "DEV";
	}
	else
	{
	    division = "";
	}
	return division;
}

GetStaffRank(playerid)
{
	new string[24];

	if(PlayerData[playerid][pAdmin] > 1 && !PlayerData[playerid][pAdminHide])
	{
		switch(PlayerData[playerid][pAdmin])
		{
		    case 2: string = "Trial Admin";
		    case 3: string = "Junior Admin";
		    case 4: string = "General Admin";
			case 5: string = "Senior Admin";
			case 6: string = "Head Admin";
			case 7: string = "Lead Head Admin";
			case 8: string = "Executive Admin";
			case 9: string = "Assistant Management";
			case 10: string = "Management";
		}
		return string;
	}
	if(PlayerData[playerid][pHelper] > 0)
	{
    	switch(PlayerData[playerid][pHelper])
    	{
		    case 1: string = "Junior Helper";
		    case 2: string = "Senior Helper";
		    case 3: string = "Ast Head Helper";
		    case 4: string = "Head Helper";
		    case 5: string = "Junior Advisor";
		    case 6: string = "Senior Advisor";
		    case 7: string = "Chief Advisor";
		}
	}
	else if(PlayerData[playerid][pFormerAdmin])
	{
	    string = "Former Admin";
	}
	else
	{
	    string = "Undercover Admin";
	}
	return string;
}

GetAdminRank(playerid)
{
	new string[24];

	switch(PlayerData[playerid][pAdmin])
	{
	    case 0:
	    {
	        if(PlayerData[playerid][pFormerAdmin])
	            string = "Former Admin";
	        else
	            string = "None";
	    }
	    case 1: string = "Secret Admin";
	    case 2: string = "Trial Admin";
	    case 3: string = "Junior Admin";
	    case 4: string = "General Admin";
		case 5: string = "Senior Admin";
		case 6: string = "Head Admin";
		case 7: string = "Lead Head Admin";
		case 8: string = "Executive Admin";
		case 9: string = "Assistant Management";
		case 10: string = "Management";


	}
	return string;
}

GetAdmCmdRank(playerid)
{
	new string[64];

	switch(PlayerData[playerid][pAdmin])
	{
	    case 1: string = "Secret Admin";
	    case 2: string = "{00FF00}Trial Admin{FF6347}";
	    case 3: string = "{00AA00}Junior Admin{FF6347}";
	    case 4: string = "{00AA00}General Admin{FF6347}";
		case 5: string = "{FFA500}Senior Admin{FF6347}";
		case 6: string = "{FF0000}Head Admin{FF6347}";
		case 7: string = "{298EFF}Lead Head Admin{FF6347}";
		case 8: string = "{298EFF}Executive Admin{FF6347}";
		case 9: string = "{D909D9}Asst Management{FF6347}";
		case 10: string = "{D909D9}Management{FF6347}";
	}
	return string;
}

GetAdminRank1(playerid)
{
	new string[24];

	switch(PlayerData[playerid][pAdmin])
	{
	    case 0:
	    {
	        if(PlayerData[playerid][pFormerAdmin])
	            string = "Former Admin";
            else if(PlayerData[playerid][pDeveloper])
				string = "Developer";
	        else
	            string = "None";
	    }
	    case 1: string = "Secret Admin";
	    case 2: string = "{00FF00}Trial Admin";
	    case 3: string = "{00AA00}Junior Admin";
	    case 4: string = "{00AA00}General Admin";
		case 5: string = "{FFA500}Senior Admin";
		case 6: string = "{FF0000}Head Admin";
		case 7: string = "{298EFF}Lead Head Admin";
		case 8: string = "{298EFF}Executive Admin";
		case 9: string = "{D909D9}Asst Management";
		case 10: string = "{D909D9}Management";
	}
	return string;
}

GetHelperRank(playerid)
{
	new string[24];

	switch(PlayerData[playerid][pHelper])
	{
	    case 0: string = "None";
	    case 1: string = "Junior Helper";
	    case 2: string = "Senior Helper";
	    case 3: string = "Ast Head Helper";
	    case 4: string = "Head Helper";
	    case 5: string = "Junior Advisor";
	    case 6: string = "Senior Advisor";
	    case 7: string = "Chief Advisor";
	}

	return string;
}

GetVIPRank(level)
{
	new string[16];

	switch(level)
	{
	    case 1: string = "Silver";
	    case 2: string = "Gold";
	    case 3: string = "Legendary";
		default: string = "None";
	}

	return string;
}

GetVIPRankEx(level)
{
	new string[50];

	switch(level)
	{
	    case 1: string = "{3284FF}Silver";
	    case 2: string = "{FF6BEF}Gold";
	    case 3: string = "{FFBD30}Legendary";	    
		default: string = "{FFFFFF}None";

	}

	return string;
}


GetPlayerCapacity(playerid, item)
{
	switch(item)
	{
	    case CAPACITY_MATERIALS:
	    {
	        return 50000 + (PlayerData[playerid][pInventoryUpgrade] * 10000);
		}
		case CAPACITY_WEED:
		{
		    switch(PlayerData[playerid][pInventoryUpgrade])
		    {
		        case 0: return 50;
		        case 1: return 75;
		        case 2: return 100;
		        case 3: return 125;
		        case 4: return 150;
		        case 5: return 200;
			}
		}
		case CAPACITY_COCAINE:
		{
		    switch(PlayerData[playerid][pInventoryUpgrade])
     		{
		        case 0: return 25;
		        case 1: return 50;
		        case 2: return 75;
		        case 3: return 100;
		        case 4: return 125;
		        case 5: return 150;
			}
		}
		case CAPACITY_HEROIN:
		{
		    switch(PlayerData[playerid][pInventoryUpgrade])
     		{
		        case 0: return 20;
		        case 1: return 40;
		        case 2: return 60;
		        case 3: return 80;
		        case 4: return 100;
		        case 5: return 150;
			}
		}
        case CAPACITY_PAINKILLERS:
		{
		    switch(PlayerData[playerid][pInventoryUpgrade])
     		{
		        case 0: return 5;
		        case 1: return 10;
		        case 2: return 15;
		        case 3: return 20;
		        case 4: return 25;
		        case 5: return 30;
			}
		}
		case CAPACITY_SEEDS:
		{
		    switch(PlayerData[playerid][pInventoryUpgrade])
     		{
		        case 0: return 10;
		        case 1: return 20;
		        case 2: return 30;
		        case 3: return 40;
		        case 4: return 50;
		        case 5: return 60;
			}
		}
		case CAPACITY_EPHEDRINE:
		{
		    switch(PlayerData[playerid][pInventoryUpgrade])
     		{
		        case 0: return 10;
		        case 1: return 15;
		        case 2: return 20;
		        case 3: return 25;
		        case 4: return 30;
		        case 5: return 40;
			}
		}
		case CAPACITY_GAZCAN:
		{
		    switch(PlayerData[playerid][pInventoryUpgrade])
     		{
		        case 0: return 25;
		        case 1: return 50;
		        case 2: return 75;
		        case 3: return 100;
		        case 4: return 150;
		        case 5: return 200;
			}
		}
	}

	return 0;
}

GetPlayerAssetCount(playerid, type)
{
	new count;

	switch(type)
	{
	    case LIMIT_HOUSES:
	    {
	        foreach(new i : House)
	        {
	            if(HouseInfo[i][hExists] && PlayerData[playerid][pID] == HouseInfo[i][hOwnerID])
	            {
	                count++;
				}
			}
		}
		case LIMIT_BUSINESSES:
	    {
         	foreach(new i : Business)
	        {
	            if(BusinessInfo[i][bExists] && PlayerData[playerid][pID] == BusinessInfo[i][bOwnerID])
	            {
	                count++;
				}
			}
		}
		case LIMIT_GARAGES:
	    {
         	foreach(new i : Garage)
	        {
	            if(GarageInfo[i][gExists] && PlayerData[playerid][pID] == GarageInfo[i][gOwnerID])
	            {
	                count++;
				}
			}
		}
	}

	return count;
}

GetPlayerAssetLimit(playerid, type)
{
	switch(type)
	{
	    case LIMIT_HOUSES:
	    {
	        switch(PlayerData[playerid][pDonator])
			{
			    case 2: return 4;
			    case 3: return 6;
			}

			switch(PlayerData[playerid][pAssetUpgrade])
			{
			    case 0, 1: return 1;
			    case 2, 3: return 2;
			    case 4: return 3;
			}
		}
		case LIMIT_BUSINESSES:
	    {
			switch(PlayerData[playerid][pAssetUpgrade])
			{
			    case 0, 1: return 1;
			    case 2, 3: return 2;
			    case 4: return 3;
			}
		}
		case LIMIT_GARAGES:
	    {
			switch(PlayerData[playerid][pAssetUpgrade])
			{
			    case 0, 1: return 1;
			    case 2, 3: return 2;
			    case 4: return 3;
			}
		}
        case LIMIT_VEHICLES:
	    {
            switch(PlayerData[playerid][pDonator])
			{
			    case 1: return 10;
			    case 2: return 15;
			    case 3: return 20;
			}

	        switch(PlayerData[playerid][pAssetUpgrade])
	        {
	            case 0: return 3;
	            case 1: return 4;
	            case 2: return 5;
	            case 3: return 7;
	            case 4: return 10;
			}
		}
	}

	return 0;
}

DeployObject(type, Float:x, Float:y, Float:z, Float:angle)
{
	for(new i = 0; i < MAX_DEPLOYABLES; i ++)
	{
	    if(!DeployInfo[i][dExists])
	    {
			DeployInfo[i][dExists] = 1;
            DeployInfo[i][dType] = type;
            DeployInfo[i][dPosX] = x;
            DeployInfo[i][dPosY] = y;
            DeployInfo[i][dPosZ] = z;
            DeployInfo[i][dPosA] = angle;

            if(type == DEPLOY_SPIKESTRIP) {
                DeployInfo[i][dObject] = CreateDynamicObject(2899, x + 1.0 * floatsin(-angle, degrees), y + 1.0 * floatcos(-angle, degrees), z - 0.9, 0.0, 0.0, angle + 90.0);
            } else if(type == DEPLOY_CONE) {
                DeployInfo[i][dObject] = CreateDynamicObject(1238, x + 1.0 * floatsin(-angle, degrees), y + 1.0 * floatcos(-angle, degrees), z - 0.7, 0.0, 0.0, angle);
	        } else if(type == DEPLOY_ROADBLOCK) {
	            DeployInfo[i][dObject] = CreateDynamicObject(981, x + 3.0 * floatsin(-angle, degrees), y + 3.0 * floatcos(-angle, degrees), z, 0.0, 0.0, angle);
			} else if(type == DEPLOY_BARREL) {
			    DeployInfo[i][dObject] = CreateDynamicObject(1237, x + 1.0 * floatsin(-angle, degrees), y + 1.0 * floatcos(-angle, degrees), z - 1.0, 0.0, 0.0, angle);
			} else if(type == DEPLOY_FLARE) {
			    DeployInfo[i][dObject] = CreateDynamicObject(18728, x, y, z - 1.4, 0.0, 0.0, angle);
			}

			return i;
		}
	}

	return -1;
}

HandleContract(playerid, killerid)
{
    if(GetPlayerFaction(killerid) == FACTION_HITMAN && PlayerData[killerid][pContractTaken] == playerid)
	{
	    new price = PlayerData[playerid][pContracted] / 2;

	    SendClientMessageEx(killerid, COLOR_YELLOW, "You have completed your contract on %s and received %s.", GetRPName(playerid), FormatCash(price));
	    SendClientMessageEx(playerid, COLOR_YELLOW, "You have been killed by a hitman and lost %s.", FormatCash(price));

	    SendFactionMessage(PlayerData[killerid][pFaction], COLOR_YELLOW, "Contract: %s has successfully completed the contract on %s and gained %s.", GetRPName(killerid), GetRPName(playerid), FormatCash(price));

	    GivePlayerCash(playerid, -price);
	    GivePlayerCash(killerid, price);

	    PlayerData[killerid][pContractTaken] = INVALID_PLAYER_ID;
	    PlayerData[killerid][pCompletedHits]++;
	    PlayerData[playerid][pContracted] = 0;
	    PlayerData[playerid][pContractBy] = 0;

	    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET contracted = 0, contractby = 'Nobody' WHERE uid = %i", PlayerData[playerid][pID]);
	    mysql_tquery(connectionID, queryBuffer);

	    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET completedhits = %i WHERE uid = %i", PlayerData[killerid][pCompletedHits], PlayerData[killerid][pID]);
	    mysql_tquery(connectionID, queryBuffer);

        foreach(new i : Player)
        {
            if(PlayerData[i][pContractTaken] == playerid)
            {
                PlayerData[i][pContractTaken] = INVALID_PLAYER_ID;
			}
		}

		Log_Write("log_contracts", "%s (uid: %i) successfully completed their hit on %s (uid: %i) for $%i.", GetRPName(killerid), PlayerData[killerid][pID], GetRPName(playerid), PlayerData[playerid][pID], price);
	}
	else if(PlayerData[playerid][pContractTaken] == killerid)
	{
	    new price = PlayerData[killerid][pContracted];

	    SendClientMessageEx(playerid, COLOR_YELLOW, "You have failed your contract on %s and lost %s.", GetRPName(playerid), FormatCash(price));
	    SendClientMessageEx(killerid, COLOR_YELLOW, "You have killed a hitman chasing after you and received %s. The contract on your head has been removed.", FormatCash(price));
	    SendFactionMessage(PlayerData[playerid][pFaction], COLOR_YELLOW, "Contract: %s has failed the contract on %s and lost %s.", GetRPName(playerid), GetRPName(killerid), FormatCash(price));

	    GivePlayerCash(playerid, -price);
	    GivePlayerCash(killerid, price);

	    PlayerData[playerid][pContractTaken] = INVALID_PLAYER_ID;
	    PlayerData[playerid][pFailedHits]++;
	    PlayerData[killerid][pContracted] = 0;
	    PlayerData[killerid][pContractBy] = 0;

	    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET contracted = 0, contractby = 'Nobody' WHERE uid = %i", PlayerData[killerid][pID]);
	    mysql_tquery(connectionID, queryBuffer);

	    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET failedhits = %i WHERE uid = %i", PlayerData[playerid][pFailedHits], PlayerData[playerid][pID]);
	    mysql_tquery(connectionID, queryBuffer);

        foreach(new i : Player)
        {
            if(PlayerData[i][pContractTaken] == killerid)
            {
                PlayerData[i][pContractTaken] = INVALID_PLAYER_ID;
			}
		}

		Log_Write("log_contracts", "%s (uid: %i) failed their hit on %s (uid: %i) and lost $%i.", GetRPName(playerid), PlayerData[playerid][pID], GetRPName(killerid), PlayerData[killerid][pID], price);
	}
}

GetPlayerZoneName(playerid)
{
	new zone[32], Float:x, Float:y, Float:z;

	GetPlayerPos(playerid, x, y, z);

	if(GetInsideHouse(playerid) >= 0)
	    zone = "House";
	else if(GetInsideBusiness(playerid) >= 0)
	    zone = "Business";
	else if(GetInsideGarage(playerid) >= 0)
	    zone = "Garage";
	else if(GetPlayerInterior(playerid))
	    zone = "Interior";
	else
	    strcpy(zone, GetZoneName(x, y, z));

	return zone;
}

GetPlayerPosEx(playerid, &Float:x, &Float:y, &Float:z)
{
	new id;
	if(GetPlayerInterior(playerid))
	{
		if((id = GetInsideHouse(playerid)) >= 0)
		{
		    x = HouseInfo[id][hPosX];
		    y = HouseInfo[id][hPosY];
		    z = HouseInfo[id][hPosZ];
		    return 1;
		}
		else if((id = GetInsideBusiness(playerid)) >= 0)
		{
		    x = BusinessInfo[id][bPosX];
		    y = BusinessInfo[id][bPosY];
		    z = BusinessInfo[id][bPosZ];
		    return 1;
		}
		else if((id = GetInsideGarage(playerid)) >= 0)
		{
		    x = GarageInfo[id][gPosX];
		    y = GarageInfo[id][gPosY];
		    z = GarageInfo[id][gPosZ];
		    return 1;
		}
		else if((id = GetInsideEntrance(playerid)) >= 0)
		{
		    x = EntranceInfo[id][ePosX];
		    y = EntranceInfo[id][ePosY];
		    z = EntranceInfo[id][ePosZ];
		    return 1;
		}
		else if(GetPlayerInterior(playerid))
		{
			for(new i = 0; i < sizeof(staticEntrances); i ++)
			{
			    if(IsPlayerInRangeOfPoint(playerid, 100.0, staticEntrances[i][eIntX], staticEntrances[i][eIntY], staticEntrances[i][eIntZ]))
			    {
			        x = staticEntrances[i][ePosX];
			        y = staticEntrances[i][ePosY];
			        z = staticEntrances[i][ePosZ];
			        return 1;
				}
			}
		}
	}
 	GetPlayerPos(playerid, x, y, z);
  	return 1;
}

GetVehicleCranePrice(vehicleid, bool:extras = true)
{
	new amount;

    if((VehicleInfo[vehicleid][vOwnerID] > 0) ||  (testVehicles[0] <= vehicleid <= testVehicles[4]) || IsJobCar(vehicleid))
    {
        return 0;
	}
	if((VehicleInfo[vehicleid][vID] > 0) && (VehicleInfo[vehicleid][vFaction] >= 0 || VehicleInfo[vehicleid][vGang] >= 0 && VehicleInfo[vehicleid][vJob] >= 0))
	{
	    return 0;
	}

	switch(GetVehicleModel(vehicleid))
	{
	    case 481, 509, 510: // Bicycles.
	        amount = 80;

	    case 448, 462, 463, 468, 471: // Mid bikes.
	        amount = 150;

		case 461, 521, 522, 581: // High bikes.
		    amount = 200;

		case 402, 429, 475, 477, 494, 496, 502..504, 558..562, 565, 587, 589, 602, 603: // Muscle cars and mid sports cars.
		    amount = 300;

		case 411, 415, 451, 506, 541: // High sports cars.
		    amount = 400;

		case 403, 408, 414, 443, 455, 456, 498, 499, 514, 515, 524, 578, 609: // Boxed trucks and trucks.
		    amount = 350;

		case 413, 418, 422, 440, 459, 478, 482, 543, 552, 554, 582, 600, 605: // Pickup trucks and vans.
		    amount = 250;

		case 400, 424, 444, 470, 489, 495, 500, 505, 556, 557, 568, 573, 579: // Offroad vehicles
		    amount = 275;

		case 412, 534..536, 566, 567, 575, 576: // Lowriders
		    amount = 250;

		case 401, 404, 405, 410, 419, 421, 426, 436, 445, 458, 466, 467, 474, 479, 491, 492, 516..518, 526, 527, 529, 540, 542, 546, 547, 549..551, 580, 585, 604: // Saloon cars & station wagons.
		    amount = 200;
 	}

	if(extras)
	{
		amount += amount;
	}

 	return amount;
}

GetVehicleValue(vehicleid)
{
	new
		price = VehicleInfo[vehicleid][vPrice];

	switch(VehicleInfo[vehicleid][vAlarm])
	{
	    case 1: price += 15000;
	    case 2: price += 30000;
	    case 3: price += 60000;
	}

	if(VehicleInfo[vehicleid][vNeon])
	{
	    price += 30000;
	}
	if(VehicleInfo[vehicleid][vTrunk])
	{
	    price += VehicleInfo[vehicleid][vTrunk] * 10000;
	}
	return price;
}

GetVehicleLinkedID(id)
{
    foreach(new i: Vehicle)
    {
        if(VehicleInfo[i][vID] == id)
        {
		 	return i;
    	}
    }

    return INVALID_VEHICLE_ID;
}

PreviewClothing(playerid, index)
{
    if(PlayerData[playerid][pCash] < clothingArray[index][clothingPrice])
    {
        SendClientMessage(playerid, COLOR_GREY, "You can't purchase this. You don't have enough money for it.");
    }
    else
    {
        SetPlayerAttachedObject(playerid, 9, clothingArray[index][clothingModel], clothingArray[index][clothingBone]);

		PlayerData[playerid][pEditType] = EDIT_CLOTHING_PREVIEW;
        PlayerData[playerid][pSelected] = index;

		SendClientMessageEx(playerid, COLOR_AQUA, "You are now previewing {FF6347}%s{33CCFF}. This clothing item costs {00AA00}%s{33CCFF} to purchase.", clothingArray[index][clothingName], FormatCash(clothingArray[index][clothingPrice]));
		SendClientMessageEx(playerid, COLOR_AQUA, "Use your cursor to control the editor interface. Click the floppy disk to save changes.");
        EditAttachedObject(playerid, 9);
	}
}

ShowClothingSelectionMenu(playerid)
{
    new
		models[MAX_SELECTION_MENU_ITEMS] = {-1, ...},
		index;

	PlayerData[playerid][pClothingIndex] = -1;

	for(new i = 0; i < sizeof(clothingArray); i ++)
    {
        if(!strcmp(clothingArray[i][clothingType], clothingTypes[PlayerData[playerid][pCategory]]))
        {
	        if(PlayerData[playerid][pClothingIndex] == -1)
	        {
	            PlayerData[playerid][pClothingIndex] = i;
			}

	        models[index++] = clothingArray[i][clothingModel];
	    }
	}

	ShowPlayerSelectionMenu(playerid, MODEL_SELECTION_CLOTHING, clothingTypes[PlayerData[playerid][pCategory]], models, index);
}

PurchaseLandObject(playerid, landid, index)
{
    if(PlayerData[playerid][pCash] < landArray[index][fPrice])
    {
        SendClientMessage(playerid, COLOR_GREY, "You can't purchase this. You don't have enough money for it.");
    }
    else
    {
        new
            Float:x,
            Float:y,
	        Float:z,
    	    Float:a;

        if(PlayerData[playerid][pEditType] == EDIT_LAND_OBJECT_PREVIEW && IsValidDynamicObject(PlayerData[playerid][pEditObject])) // Bug fix where if you did '/furniture buy' again while editing your object gets stuck. (12/28/2016)
        {
            DestroyDynamicObject(PlayerData[playerid][pEditObject]);
            PlayerData[playerid][pEditObject] = INVALID_OBJECT_ID;
		}

		GetPlayerPos(playerid, x, y, z);
		GetPlayerFacingAngle(playerid, a);

		PlayerData[playerid][pEditType] = EDIT_LAND_OBJECT_PREVIEW;
		PlayerData[playerid][pEditObject] = CreateDynamicObject(landArray[index][fModel], x + 2.0 * floatsin(-a, degrees), y + 2.0 * floatcos(-a, degrees), z + 1.0, 0.0, 0.0, ((19353 <= landArray[index][fModel] <= 19417) || (19426 <= landArray[index][fModel] <= 19465)) ? (a + 90.0) : (a), GetPlayerVirtualWorld(playerid), GetPlayerInterior(playerid));
		PlayerData[playerid][pObjectLand] = landid;
        PlayerData[playerid][pSelected] = index;

		SendClientMessageEx(playerid, COLOR_AQUA, "You are now previewing {FF6347}%s{33CCFF}. This object costs {00AA00}%s{33CCFF} to purchase.", landArray[index][fName], FormatCash(landArray[index][fPrice]));
		SendClientMessageEx(playerid, COLOR_AQUA, "Use your cursor to control the editor interface. Click the floppy disk to save changes.");
        Streamer_Update(playerid);
        EditDynamicObject(playerid, PlayerData[playerid][pEditObject]);
	}
}

ShowLandObjects(playerid, type)
{
    new
		models[MAX_SELECTION_MENU_ITEMS] = {-1, ...},
		index;

	PlayerData[playerid][pFurnitureIndex] = -1;

	for(new i = 0; i < sizeof(landArray); i ++)
	{
	    if(!strcmp(landArray[i][fCategory], landCategories[PlayerData[playerid][pCategory]]))
	    {
	        if(PlayerData[playerid][pFurnitureIndex] == -1)
	        {
	            PlayerData[playerid][pFurnitureIndex] = i;
			}

	        models[index++] = landArray[i][fModel];
	    }
	}

	ShowPlayerSelectionMenu(playerid, type, landCategories[PlayerData[playerid][pCategory]], models, index);
}

Dialog:WeaponDamages(playerid, response, listitem, inputtext[])
{
	if (response)
	{
	    new count;

	    for(new i = 0; i < sizeof(WeaponDamages); i ++)
		{
		    if(IsValidDamageWeapon(i))
		    {
				if(count++ == listitem)
				{
				    PlayerData[playerid][pSelected] = i;
	    			return Dialog_Show(playerid, SetDamage, DIALOG_STYLE_INPUT, "{FFFFFF}Set Damage", "Please enter the weapon damage to set for %s (use 0 for default).", "Submit", "Back", GetWeaponNameEx(PlayerData[playerid][pSelected]));
				}
			}
		}
	}
	return 1;
}

Dialog:SetDamage(playerid, response, listitem, inputtext[])
{
	if (response)
	{
	    new Float:damage;

	    if (sscanf(inputtext, "f", damage))
	    {
	        return Dialog_Show(playerid, SetDamage, DIALOG_STYLE_INPUT, "{FFFFFF}Set Damage", "Please enter the weapon damage to set for %s (use 0 for default).", "Submit", "Back", GetWeaponNameEx(PlayerData[playerid][pSelected]));
		}
		else if (damage < 0.0 || damage > 100.0)
		{
		    return Dialog_Show(playerid, SetDamage, DIALOG_STYLE_INPUT, "{FFFFFF}Set Damage", "The specified damage can't be below 0 or above 100.\n\nPlease enter the weapon damage to set for %s (use 0 for default).", "Submit", "Back", GetWeaponNameEx(PlayerData[playerid][pSelected]));
		}
		else
		{
		    new weaponid = PlayerData[playerid][pSelected];

		    SetWeaponDamage(weaponid, damage);

		    if (damage == 0.0)
		    {
		    	SendAdminMessage(COLOR_ADM, "Admin: %s has set the damage for %s to default.", GetRPName(playerid), GetWeaponNameEx(weaponid));
			}
			else
			{
			    SendAdminMessage(COLOR_ADM, "Admin: %s has set the damage for %s to %.1f.", GetRPName(playerid), GetWeaponNameEx(weaponid), damage);
			}
		}
	}
	else
	{
	    ShowWeaponDamageEditMenu(playerid);
	}
	return 1;
}

GetGangColor(gangid)
{
	return (GangInfo[gangid][gColor] >>> 8);
}

stock ClearDamages(playerid)
{
	for(new id = 0; id < MAX_DAMAGES; id++)
	{
		if(DamageData[playerid][id][damageTaken] != 0){
			DamageData[playerid][id][damageTaken] = 0;
			DamageData[playerid][id][damageBodypart] = 0;
			DamageData[playerid][id][damageTime] = 0;
			DamageData[playerid][id][damageWeapon] = -1;
			DamageData[playerid][id][damageBy] = -1;
		}
	}

	totalDamages[playerid] = 0;
	PlayerData[playerid][pLegShot] = false;

	return true;
}

ReturnDamages(damaged, playerid)
{
	new str[400], longstr[2500], title[90], count = 0;

	format(title, sizeof(title), "%s", GetRPName(damaged));

	for(new id = 0; id < MAX_DAMAGES; id++){
		if(DamageData[damaged][id][damageTaken] != 0) count++;
	}
	if(!count)return Dialog_Show(playerid, 1, DIALOG_STYLE_LIST, title, "There are no damages to show.", ">>>", "");
	else if(count > 0){
		for(new id = 0; id < MAX_DAMAGES; id++){

			if(DamageData[damaged][id][damageTaken] >= 1){

				format(str, sizeof(str), "%d dmg from %s to %s (Kevlarhit: %d) %d s ago\n", DamageData[damaged][id][damageTaken], GetWeaponNameEx(DamageData[damaged][id][damageWeapon]), GetBodyPartName(DamageData[damaged][id][damageBodypart]), DamageData[damaged][id][damageArmor], gettime() - DamageData[damaged][id][damageTime]);
				strcat(longstr, str);
			}
		}

		Dialog_Show(playerid, 1, DIALOG_STYLE_LIST, title, longstr, ">>>", "");
	}

	return true;
}

ReturnDamagesAdmin(damaged, playerid)
{
	new str[400], longstr[2500], title[90], count = 0;

	format(title, sizeof(title), "%s", GetRPName(damaged));

	for(new id = 0; id < MAX_DAMAGES; id++){
		if(DamageData[damaged][id][damageTaken] != 0) count++;
	}
	if(!count)return Dialog_Show(playerid, 1, DIALOG_STYLE_LIST, title, "There are no damages to show.", ">>>", "");
	else if(count > 0){
		for(new id = 0; id < MAX_DAMAGES; id++){

			if(DamageData[damaged][id][damageTaken] != 0){
				format(str, sizeof(str), "{FF6346}(%s){FFFFFF} %d dmg from %s to %s (Kevlarhit: %d) %d s ago\n", DamageData[damaged][id][damageBy], DamageData[damaged][id][damageTaken], GetWeaponNameEx(DamageData[damaged][id][damageWeapon]), GetBodyPartName(DamageData[damaged][id][damageBodypart]), DamageData[damaged][id][damageArmor], gettime() - DamageData[damaged][id][damageTime]);
				strcat(longstr, str);
			}
		}

		Dialog_Show(playerid, 1, DIALOG_STYLE_LIST, title, longstr, ">>>", "");
	}

	return true;
}
ProcessDamage(playerid, weaponid)
{
	new
	    Float:damage = WeaponDamages[weaponid],
		Float:health,
		Float:armor;

	if (damage != 0.0)
	{
	    GetPlayerHealth(playerid, health);
	    GetPlayerArmour(playerid, armor);

	    if (armor >= damage) {
		    armor -= damage;
		} else if (armor < damage) {
		    health -= (damage - armor), armor = 0;
		} else if (health >= damage) {
		    health -= damage;
		} else {
		    health = 0;
		}

		SetPlayerHealth(playerid, health);
		SetPlayerArmour(playerid, armor);
	}
}
IsValidDamageWeapon(weaponid)
{
	if(!(0 <= weaponid <= 46))
		return false;

    switch(weaponid)
	{
        case 0, 19..21, WEAPON_DILDO..WEAPON_FLOWER, WEAPON_GRENADE..WEAPON_MOLTOV, WEAPON_ROCKETLAUNCHER..WEAPON_MINIGUN, WEAPON_SATCHEL..WEAPON_PARACHUTE:
            return false;
	}

	return true;
}

ShowWeaponDamageEditMenu(playerid)
{
	static
	    string[512];

	string = "Weapon\tDamage";

	for(new i = 0; i < sizeof(WeaponDamages); i ++)
	{
	    if(IsValidDamageWeapon(i))
	    {
		    if (WeaponDamages[i] != 0.0)
				format(string, sizeof(string), "%s\n%s\t%.1f%c", string, GetWeaponNameEx(i), WeaponDamages[i], '%');
			else
		    	format(string, sizeof(string), "%s\n%s\tDefault", string, GetWeaponNameEx(i));
		}
	}

	Dialog_Show(playerid, WeaponDamages, DIALOG_STYLE_TABLIST_HEADERS, "{FFFFFF}Select Weapon", string, "Change", "Cancel");
}

SetWeaponDamage(weaponid, Float:damage) // Edited by Grime (09-27-2017)
{
	if(IsValidDamageWeapon(weaponid))
	{
		format(queryBuffer, sizeof(queryBuffer), "INSERT INTO rp_gundamages (Weapon, Damage) VALUES(%i, %.4f) ON DUPLICATE KEY UPDATE Damage = %.4f", weaponid, damage, damage);
		mysql_tquery(connectionID, queryBuffer);
		WeaponDamages[weaponid] = damage;
	}
}

AddDamages(playerid, issuerid, weaponid, bodypart, Float:amount)
{
	new id;

	totalDamages[playerid]++;

	for(new i = 0; i < MAX_DAMAGES; i++)
	{
		if(!DamageData[playerid][i][damageTaken]){
			id = i;
			break;
		}
	}

	new Float: Armour;
	GetPlayerArmour(playerid, Armour);

	if(Armour > 1 && bodypart == BODY_PART_CHEST){
		DamageData[playerid][id][damageArmor] = 1;
	}
	else{
		DamageData[playerid][id][damageArmor] = 0;
	}

	DamageData[playerid][id][damageTaken] = floatround(amount, floatround_round);
	DamageData[playerid][id][damageWeapon] = weaponid;
	DamageData[playerid][id][damageBodypart] = bodypart;
	DamageData[playerid][id][damageTime] = gettime();
	format(DamageData[playerid][id][damageBy], 90, "%s", GetPlayerNameEx(issuerid));
	return true;
}
IsRepairShopInUse(id)
{
	foreach(new i : Player)
	{
		if(PlayerData[i][pRepairShop] == id && IsPlayerInRangeOfPoint(i, 10.0, g_RepairShops[id][3], g_RepairShops[id][4], g_RepairShops[id][5]))
		{
			return 1;
		}
	}

	return 0;
}


Dialog:ChangeMat(playerid, response, listitem, inputtext[])
{
	if(!response) return 1;
	if(listitem == 0 || listitem == 1) return ShowColorList(playerid);
	new t = -1;
	for(new x = 0; x < sizeof(MaterialIDs); x++)
	{
		if(strcmp(inputtext, MaterialIDs[x][Name], true) == 0)
		{
			t = x;
			break;
		}
	}
	if(t == -1) return SendClientMessage(playerid, COLOR_RED, "An error has occurred, please try it later! (DEBUG: \"ChangeMatHandler\")");
	FurnitureChange(playerid, GetPVarInt(playerid, "FurnID"), GetPVarInt(playerid, "MatSlot"), t, 1);
	return true;
}

Dialog:ChangeColor(playerid, response, listitem, inputtext[])
{
	if(!response) return 1;
	if(listitem == 0 || listitem == 1) return MaterialRes
	FurnitureChange(playerid, GetPVarInt(playerid, "FurnID"), GetPVarInt(playerid, "MatSlot"), listitem, 2);
	return true;
}



ListTexture(playerid)
{
    new fid = GetPVarInt(playerid, "FurnID");

	new list[256], header[64];
	format(header, sizeof(header), "You are now editing ID: %d.", GetPVarInt(playerid, "FurnID"));
	format(list, sizeof(list), "Index 1: %s\nIndex 2: %s\nIndex 3: %s\n \nClear Textures", Furniture[fid][fMaterial][0] ? ("{FFFF00}In Use") : ("{C3C3C3}Empty"), Furniture[fid][fMaterial][1] ? ("{FFFF00}In Use") : ("{C3C3C3}Empty"), Furniture[fid][fMaterial][2] ? ("{FFFF00}In Use") : ("{C3C3C3}Empty"));
	Dialog_Show(playerid, MaterialHandler, DIALOG_STYLE_LIST, header, list, ">>", "Cancel");
	return 1;
}

Dialog:MaterialHandler(playerid, response, listitem, inputtext[])
{
	if(!response) return 1;
	if(listitem == 4)
	{
	    for(new i = 0; i != 3; i ++)
		{
      		Furniture[GetPVarInt(playerid, "FurnID")][fMaterial][i] = 0;
      		Furniture[GetPVarInt(playerid, "FurnID")][fMatColour][i] = 0;
      		SetDynamicObjectMaterial(Furniture[GetPVarInt(playerid, "FurnID")][fObject], i, -1, "none", "none", 0);
		}
	    SaveFurniture(GetPVarInt(playerid, "FurnID"));
	}
	SetPVarInt(playerid, "MatSlot", listitem);
    MaterialRes
	//ShowMaterialList(playerid);
	return true;
}

Dialog:TextureResources(playerid, response, listitem, inputtext[])
{
    if(!response) return 1;
	new gstr[2056], gString[256];
    format(gString, sizeof(gString), " << {F3FF02}Select Color\n");
    strcat(gstr, gString);
	for(new i = 0; i < sizeof(MaterialIDs); i++)
	{
	    if(strcmp("None", MaterialIDs[i][Resource], true) == 0) continue;
		if(strcmp(inputtext, MaterialIDs[i][Resource], true) == 0)
		{
			strcat(gstr, MaterialIDs[i][Name]);
			strcat(gstr, "\n");
		}
	}
	Dialog_Show(playerid, ChangeMat, DIALOG_STYLE_LIST, "Texture List", gstr, ">>", "Cancel");
	return 1;
}

ShowColorList(playerid)
{
	new list[4056], bigStr[256], gString[256];
    format(gString, sizeof(gString), " << {F3FF02}Select Texture\n");
    strcat(list, gString);
	for(new i = 0; i < sizeof(MaterialColors); i++)
	{
	    if(strcmp("none", MaterialColors[i][ColorName], true) == 0) continue;
		format(bigStr, sizeof(bigStr), "%s\n", MaterialColors[i][ColorName]);
		strcat(list, bigStr);
	}
	Dialog_Show(playerid, ChangeColor, DIALOG_STYLE_LIST, "Color List", list, ">>", "Cancel");
	return 1;
}

Dialog:DIALOG_BUYVEHICLE2(playerid, response, listitem, inputtext[])
{
    if(response)
    {
        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "SELECT COUNT(*) FROM vehicles WHERE ownerid = %i", PlayerData[playerid][pID]);
        mysql_tquery(connectionID, queryBuffer, "OnPlayerAttemptBuyVehicle", "ii", playerid, PlayerData[playerid][pSelected]);
	}
	return 1;
}

forward PlayerCanAfford(playerid, amount);
public PlayerCanAfford(playerid, amount)
{
	return PlayerData[playerid][pCash] >= amount;
}

stock IsPlayerIdle(playerid)
{
	if(PlayerData[playerid][pTazedTime] || PlayerData[playerid][pCuffed] || PlayerData[playerid][pTied] || PlayerData[playerid][pJailTime])
	{
		return false;
	}

	if(PlayerData[playerid][pHurt] - 5 > 0 || PlayerData[playerid][pInjured] || PlayerData[playerid][pHospital])
	{
		return false;
	}

	if(IsPlayerInEvent(playerid) || PlayerData[playerid][pPaintball] || PlayerData[playerid][pDueling] != INVALID_PLAYER_ID)
	{
		return false;
	}
	return true;
}

GetStaticEntranceWorld(name[])
{
	for(new i = 0; i < sizeof(staticEntrances); i ++)
	{
     	if(!strcmp(staticEntrances[i][eName], name))
        {
            return staticEntrances[i][eWorld];
		}
	}

	return 0;
}

GetClosestDoor(playerid, Float:range)
{
	for (new i = 0; i < MAX_FURNITURE; i ++)
	{
		if (Furniture[i][fExists] && IsDoorModel(Furniture[i][fModel]) && IsPlayerNearPoint(playerid, range, Furniture[i][fSpawn][0], Furniture[i][fSpawn][1], Furniture[i][fSpawn][2], Furniture[i][fInterior], Furniture[i][fWorld]))
		{
			return i;
		}
	}
	return -1;
}

GateCheck(playerid)
{
	new id, gateid = GetNearbyGate(playerid);
	if (gateid != -1)
    {
        ToggleGate(playerid, gateid);
        return 1;
    }
    for(new idx=0;idx<sizeof(gGates); idx++)
    {
        if(IsPlayerInRangeOfPoint(playerid, 10.0, gGates[idx][gateX], gGates[idx][gateY], gGates[idx][gateZ]))
        {
            if(GetPlayerFaction(playerid) != gGates[idx][gateFactionType])
            {
                return SendClientErrorUnautorizedGate(playerid);
            }
            if(!Streamer_GetExtraInt(gGates[idx][gateObject], E_OBJECT_OPENED))
            {
                ShowActionBubble(playerid, "* %s uses their remote to open the gate.", GetRPName(playerid));
                MoveDynamicObject(gGates[idx][gateObject], gGates[idx][gateMoveX], gGates[idx][gateMoveY], gGates[idx][gateMoveZ], 
                    gGates[idx][gateMoveSpeed], gGates[idx][gateMoveRX], gGates[idx][gateMoveRY], gGates[idx][gateMoveRZ]);
                Streamer_SetExtraInt(gGates[idx][gateObject], E_OBJECT_OPENED, 1);
            }
            else
            {
                ShowActionBubble(playerid, "* %s uses their remote to close the gate.", GetRPName(playerid));
                MoveDynamicObject(gGates[idx][gateObject], gGates[idx][gateX], gGates[idx][gateY], gGates[idx][gateZ], 
                    gGates[idx][gateMoveSpeed], gGates[idx][gateRX], gGates[idx][gateRY], gGates[idx][gateRZ]);
                Streamer_SetExtraInt(gGates[idx][gateObject], E_OBJECT_OPENED, 0);
            }
		    return 1;
        }
    }
    if(IsPlayerInRangeOfPoint(playerid, 10.0, 1544.639892, -1631.008666, 13.252797)) // PD barrier
	{
	    if(GetPlayerFaction(playerid) != FACTION_POLICE && GetPlayerFaction(playerid) != FACTION_FEDERAL && GetPlayerFaction(playerid) != FACTION_GOVERNMENT)
        {
			return SendClientErrorUnautorizedGate(playerid);
		}

		if(!Streamer_GetExtraInt(gPDGates[0], E_OBJECT_OPENED))
		{
		    ShowActionBubble(playerid, "* %s uses their remote to open the gate.", GetRPName(playerid));
		    MoveDynamicObject(gPDGates[0], 1544.689941, -1630.818481, 13.116797, 0.2, 0.000000, 0.000000, 90.000000);
		    Streamer_SetExtraInt(gPDGates[0], E_OBJECT_OPENED, 1);
		}
		else
		{
		    ShowActionBubble(playerid, "* %s uses their remote to close the gate.", GetRPName(playerid));
		    MoveDynamicObject(gPDGates[0], 1544.639892, -1631.008666, 13.252797, 0.2, 0.000000, 90.000000, 90.000000);
		    Streamer_SetExtraInt(gPDGates[0], E_OBJECT_OPENED, 0);
		}

		return 1;
	}
	else if(IsPlayerInRangeOfPoint(playerid, 10.0, 1588.042602, -1638.079956, 14.602818)) // PD garage gate
	{
	    if(GetPlayerFaction(playerid) != FACTION_POLICE && GetPlayerFaction(playerid) != FACTION_FEDERAL && GetPlayerFaction(playerid) != FACTION_GOVERNMENT)
        {
			return SendClientErrorUnautorizedGate(playerid);
		}

		if(!Streamer_GetExtraInt(gPDGates[1], E_OBJECT_OPENED))
		{
		    ShowActionBubble(playerid, "* %s uses their remote to open the gate.", GetRPName(playerid));
		    MoveDynamicObject(gPDGates[1], 1597.332763, -1638.079956, 14.602818, 3.0);
		    Streamer_SetExtraInt(gPDGates[1], E_OBJECT_OPENED, 1);
		}
		else
		{
		    ShowActionBubble(playerid, "* %s uses their remote to close the gate.", GetRPName(playerid));
		    MoveDynamicObject(gPDGates[1], 1588.042602, -1638.079956, 14.602818, 3.0);
		    Streamer_SetExtraInt(gPDGates[1], E_OBJECT_OPENED, 0);
		}

		return 1;
	}
	else if(IsPlayerInRangeOfPoint(playerid, 10.0, 321.255279, -1488.601318, 25.281988)) // FBI garage gate
	{
	    if(GetPlayerFaction(playerid) != FACTION_FEDERAL  && GetPlayerFaction(playerid) != FACTION_GOVERNMENT)
        {
			return SendClientErrorUnautorizedGate(playerid);
		}

		if(!Streamer_GetExtraInt(gFBIGates[0], E_OBJECT_OPENED))
		{
		    ShowActionBubble(playerid, "* %s uses their remote to open the gate.", GetRPName(playerid));
		    MoveDynamicObject(gFBIGates[0], 327.033508, -1492.691650, 25.281988, 3.0);
		    Streamer_SetExtraInt(gFBIGates[0], E_OBJECT_OPENED, 1);
		}
		else
		{
		    ShowActionBubble(playerid, "* %s uses their remote to close the gate.", GetRPName(playerid));
		    MoveDynamicObject(gFBIGates[0], 321.255279, -1488.601318, 25.281988, 3.0);
		    Streamer_SetExtraInt(gFBIGates[0], E_OBJECT_OPENED, 0);
		}

		return 1;
	}
    else if(IsPlayerInRangeOfPoint(playerid, 10.0, 283.590423, -1542.835083, 25.281988)) // FBI garage gate
	{
	    if(GetPlayerFaction(playerid) != FACTION_FEDERAL  && GetPlayerFaction(playerid) != FACTION_GOVERNMENT)
        {
			return SendClientErrorUnautorizedGate(playerid);
		}

		if(!Streamer_GetExtraInt(gFBIGates[1], E_OBJECT_OPENED))
		{
		    ShowActionBubble(playerid, "* %s uses their remote to open the gate.", GetRPName(playerid));
		    MoveDynamicObject(gFBIGates[1], 289.593841, -1547.023071, 25.281988, 3.0);
		    Streamer_SetExtraInt(gFBIGates[1], E_OBJECT_OPENED, 1);
		}
		else
		{
		    ShowActionBubble(playerid, "* %s uses their remote to close the gate.", GetRPName(playerid));
		    MoveDynamicObject(gFBIGates[1], 283.590423, -1542.835083, 25.281988, 3.0);
		    Streamer_SetExtraInt(gFBIGates[1], E_OBJECT_OPENED, 0);
		}

		return 1;
	}
	if((id = GetNearbyLand(playerid)) >= 0 && (IsLandOwner(playerid, id) || PlayerData[playerid][pLandPerms] == id))
	{
		for(new i = 0, j = Streamer_GetUpperBound(STREAMER_TYPE_OBJECT); i <= j; i ++)
		{
    		if(IsValidDynamicObject(i) && IsGateObject(i) && IsPlayerInRangeOfPoint(playerid, 10.0, Streamer_GetExtraFloat(i, E_OBJECT_X), Streamer_GetExtraFloat(i, E_OBJECT_Y), Streamer_GetExtraFloat(i, E_OBJECT_Z)) && Streamer_GetExtraInt(i, E_OBJECT_TYPE) == E_OBJECT_LAND && Streamer_GetExtraInt(i, E_OBJECT_EXTRA_ID) == LandInfo[id][lID])
			{
			    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "SELECT * FROM landobjects WHERE id = %i", Streamer_GetExtraInt(i, E_OBJECT_INDEX_ID));
			    mysql_tquery(connectionID, queryBuffer, "OnPlayerUseLandGate", "ii", playerid, i);
			    return 1;
			}
		}
	}

	return 0;
}

DoorCheck(playerid)
{
    new houseid = GetInsideHouse(playerid), landid = GetNearbyLand(playerid);

    new Float:angle;
	for(new i = 0; i < sizeof(gPDDoors); i ++)
	{
	    if(IsPlayerInRangeOfDynamicObject(playerid, gPDDoors[i], 3.0))
	    {
	        if(GetPlayerFaction(playerid) != FACTION_POLICE && GetPlayerFaction(playerid) != FACTION_FEDERAL)
	        {
	            return SendClientErrorUnautorizedDoor(playerid);
			}
			Streamer_GetFloatData(STREAMER_TYPE_OBJECT, gPDDoors[i], E_STREAMER_R_Z, angle);
			if(!Streamer_GetExtraInt(gPDDoors[i], E_OBJECT_OPENED))
			{
			    ShowActionBubble(playerid, "* %s uses their card to open the door.", GetRPName(playerid));
			    SetDynamicObjectRot(gPDDoors[i], 0.0000, 0.0000, angle + 90.0);
			    Streamer_SetExtraInt(gPDDoors[i], E_OBJECT_OPENED, 1);
			}
			else
			{
			    ShowActionBubble(playerid, "* %s uses their card to close the door.", GetRPName(playerid));
			    SetDynamicObjectRot(gPDDoors[i], 0.0000, 0.0000, angle - 90.0);
			    Streamer_SetExtraInt(gPDDoors[i], E_OBJECT_OPENED, 0);
			}
			return 1;
		}
	}
	if(houseid)
	{
		if (IsValidFurnitureID(GetClosestDoor(playerid, 2.0)))
		{
			if (Furniture[GetClosestDoor(playerid, 2.0)][fDoorOpen] == 1)
			{
				Furniture[GetClosestDoor(playerid, 2.0)][fSpawn][5] = Furniture[GetClosestDoor(playerid, 2.0)][fSpawn][5] + 90.0;
				Furniture[GetClosestDoor(playerid, 2.0)][fDoorOpen] = 0;
				UpdateFurniture(GetClosestDoor(playerid, 2.0));
			}
			else
			{
				Furniture[GetClosestDoor(playerid, 2.0)][fSpawn][5] = Furniture[GetClosestDoor(playerid, 2.0)][fSpawn][5] - 90.0;
				Furniture[GetClosestDoor(playerid, 2.0)][fDoorOpen] = 1;
				UpdateFurniture(GetClosestDoor(playerid, 2.0));
			}
		}
	}
	for(new i = 0, j = Streamer_GetUpperBound(STREAMER_TYPE_OBJECT); i <= j; i ++)
	{
    	if(IsValidDynamicObject(i) && IsPlayerInRangeOfDynamicObject(playerid, i, 2.5) && IsDoorObject(i))
		{
			if(landid >= 0 && Streamer_GetExtraInt(i, E_OBJECT_TYPE) == E_OBJECT_LAND && Streamer_GetExtraInt(i, E_OBJECT_EXTRA_ID) == LandInfo[landid][lID])
			{
			    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "SELECT door_opened, door_locked FROM landobjects WHERE id = %i", Streamer_GetExtraInt(i, E_OBJECT_INDEX_ID));
			    mysql_tquery(connectionID, queryBuffer, "OnPlayerUseLandDoor", "iii", playerid, i, Streamer_GetExtraInt(i, E_OBJECT_INDEX_ID));
			    return 1;
			}
		}
	}

	return 0;
}

EnterCheck(playerid)
{
	new id, string[40];

	if((gettime() - PlayerData[playerid][pLastEnter]) < 3 && PlayerData[playerid][pAdminDuty] == 0)
	{
	    return SendClientMessage(playerid, COLOR_GREY, "Please wait a moment before entering or exiting again.");
	}
	new vehicleid = GetPlayerVehicleID(playerid);
	new closestcar = GetClosestVehicle(playerid, vehicleid);
	if(IsPlayerInRangeOfVehicle(playerid, closestcar, 6.0) && GetVehicleModel(closestcar) == 519)
	{
	    if(VehicleStatus{closestcar} == 1) return SendClientMessage(playerid, COLOR_WHITE, "You're not allowed to enter this Shamal as it's been damaged!");
   		ShowActionBubble(playerid, "* %s enters the Shamal airplane as a passenger.", GetRPName(playerid));

     	SetPlayerPos(playerid, 2.509036, 23.118730, 1199.593750);
     	SetPlayerFacingAngle(playerid, 82.14);
    }
    if((id = GetNearbyHouse(playerid)) >= 0)
	{
	    if(HouseInfo[id][hLocked])
	    {
			ShowPlayerFooter(playerid, "~r~Locked");
			return 0;
		}

		if(IsHouseOwner(playerid, id))
		{
		    HouseInfo[id][hTimestamp] = gettime();

		    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE houses SET timestamp = %i WHERE id = %i", gettime(), HouseInfo[id][hID]);
		    mysql_tquery(connectionID, queryBuffer);

		    ShowActionBubble(playerid, "* %s has entered their house.", GetRPName(playerid));
		}
		else
		{
			ShowActionBubble(playerid, "* %s has entered the house.", GetRPName(playerid));
		}

        PlayerData[playerid][pLastEnter] = gettime();
        SetFreezePos(playerid, HouseInfo[id][hIntX], HouseInfo[id][hIntY], HouseInfo[id][hIntZ]);
		SetPlayerFacingAngle(playerid, HouseInfo[id][hIntA]);
		SetPlayerInterior(playerid, HouseInfo[id][hInterior]);
		SetPlayerVirtualWorld(playerid, HouseInfo[id][hWorld]);
		SetCameraBehindPlayer(playerid);
		if(HouseInfo[id][hLights] == 1)
        {
            TextDrawHideForPlayer(playerid, houseLights);
        }
        else
        {
            TextDrawShowForPlayer(playerid, houseLights);
		}
		return 1;
	}
	else if((id = GetNearbyGarage(playerid)) >= 0)
	{
	    if(GarageInfo[id][gLocked])
	    {
			ShowPlayerFooter(playerid, "~r~Locked");
			return 0;
		}

		if(IsGarageOwner(playerid, id))
		{
		    GarageInfo[id][gTimestamp] = gettime();

		    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE garages SET timestamp = %i WHERE id = %i", gettime(), GarageInfo[id][gID]);
		    mysql_tquery(connectionID, queryBuffer);

		    ShowActionBubble(playerid, "* %s has entered their garage.", GetRPName(playerid));
		}
		else
		{
			ShowActionBubble(playerid, "* %s has entered the garage.", GetRPName(playerid));
		}

		if(GetPlayerState(playerid) == PLAYER_STATE_DRIVER)
		{
		    TeleportToCoords(playerid, garageInteriors[GarageInfo[id][gType]][intVX], garageInteriors[GarageInfo[id][gType]][intVY], garageInteriors[GarageInfo[id][gType]][intVZ], garageInteriors[GarageInfo[id][gType]][intVA], garageInteriors[GarageInfo[id][gType]][intID], GarageInfo[id][gWorld], true, true);
		}
		else
		{
		    PlayerData[playerid][pLastEnter] = gettime();
			SetFreezePos(playerid, garageInteriors[GarageInfo[id][gType]][intPX], garageInteriors[GarageInfo[id][gType]][intPY], garageInteriors[GarageInfo[id][gType]][intPZ]);
			SetPlayerFacingAngle(playerid, garageInteriors[GarageInfo[id][gType]][intPA]);
			SetPlayerInterior(playerid, garageInteriors[GarageInfo[id][gType]][intID]);
			SetPlayerVirtualWorld(playerid, GarageInfo[id][gWorld]);
			SetCameraBehindPlayer(playerid);
		}

		return 1;
	}
	else if((id = GetNearbyBusiness(playerid)) >= 0)
	{
	    if(BusinessInfo[id][bLocked])
	    {
			ShowPlayerFooter(playerid, "~r~Closed");
			return 0;
		}
		new turfid = GetNearbyTurf(playerid);
		if(turfid >= 0 && IsActiveTurf(turfid))
		{
			return SendClientMessageEx(playerid, COLOR_GREY, "The business is closed due to gang war.");
		}

		if(IsBusinessOwner(playerid, id))
		{
		    BusinessInfo[id][bTimestamp] = gettime();

		    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE businesses SET timestamp = %i WHERE id = %i", gettime(), BusinessInfo[id][bID]);
		    mysql_tquery(connectionID, queryBuffer);

		    ShowActionBubble(playerid, "* %s has entered their business.", GetRPName(playerid));
		}
		else
		{
		    if(BusinessInfo[id][bEntryFee] > 0)
			{
				if(PlayerData[playerid][pCash] < BusinessInfo[id][bEntryFee])
		    	{
		    	    return SendClientMessage(playerid, COLOR_GREY, "You don't have enough money to pay the entry fee. You may not enter.");
		        }

		        format(string, sizeof(string), "~r~-$%i", BusinessInfo[id][bEntryFee]);
		        GameTextForPlayer(playerid, string, 5000, 1);

		        BusinessInfo[id][bCash] += BusinessInfo[id][bEntryFee];
		        GivePlayerCash(playerid, -BusinessInfo[id][bEntryFee]);

		        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE businesses SET cash = %i WHERE id = %i", BusinessInfo[id][bCash], BusinessInfo[id][bID]);
		    	mysql_tquery(connectionID, queryBuffer);
		    }

			ShowActionBubble(playerid, "* %s has entered the business.", GetRPName(playerid));

			switch(BusinessInfo[id][bType])
			{
				case BUSINESS_STORE, BUSINESS_GUNSHOP, BUSINESS_CLOTHES, BUSINESS_RESTAURANT, BUSINESS_BARCLUB:
					SendClientMessageEx(playerid, COLOR_GREEN, "Welcome to %s's %s [%i products]. /buy to purchase from this business.", BusinessInfo[id][bOwner], bizInteriors[BusinessInfo[id][bType]][intType], BusinessInfo[id][bProducts]);
				case BUSINESS_GYM:
				    SendClientMessageEx(playerid, COLOR_GREEN, "Welcome to %s's %s. /buy to purchase a fighting style.", BusinessInfo[id][bOwner], bizInteriors[BusinessInfo[id][bType]][intType]);
				case BUSINESS_AGENCY:
				    SendClientMessageEx(playerid, COLOR_GREEN, "Welcome to %s's %s. /(ad)vertise to make an advertisement.", BusinessInfo[id][bOwner], bizInteriors[BusinessInfo[id][bType]][intType]);
			}
		}
		DisplayBizMessage(playerid,id);
		PlayerData[playerid][pLastEnter] = gettime();
		SetFreezePos(playerid, BusinessInfo[id][bIntX], BusinessInfo[id][bIntY], BusinessInfo[id][bIntZ]);
		SetPlayerFacingAngle(playerid, BusinessInfo[id][bIntA]);
		SetPlayerInterior(playerid, BusinessInfo[id][bInterior]);
		SetPlayerVirtualWorld(playerid, BusinessInfo[id][bWorld]);
		SetCameraBehindPlayer(playerid);
		return 1;
	}
	else if(IsPlayerInAnyVehicle(playerid) && GetPlayerState(playerid) == PLAYER_STATE_DRIVER && !PlayerData[playerid][pRepairTime])
	{
		for(new i = 0; i < sizeof(g_RepairShops); i ++)
		{
			if(IsPlayerInRangeOfPoint(playerid, 5.0, g_RepairShops[i][0], g_RepairShops[i][1], g_RepairShops[i][2]))
			{
				if(IsRepairShopInUse(i))
				{
					return SendErrorMessage(playerid, "This Pay n' Spray is currently in use.");
				}
				if((!PlayerCanAfford(playerid, 500)) && (GetPlayerFaction(playerid) != FACTION_POLICE && GetPlayerFaction(playerid) != FACTION_MEDIC))
				{
					return SendErrorMessage(playerid, "You can't afford the entry cost.");
				}

				SetVehiclePos(GetPlayerVehicleID(playerid), g_RepairShops[i][3], g_RepairShops[i][4], g_RepairShops[i][5]);
				SetVehicleZAngle(GetPlayerVehicleID(playerid), g_RepairShops[i][6]);

				TogglePlayerControllableEx(playerid, 0);
				SendClientMessage(playerid, COLOR_WHITE, "Garage: You will be moved out the garage in 8 seconds.");

				if(GetPlayerFaction(playerid) == FACTION_POLICE || GetPlayerFaction(playerid) == FACTION_MEDIC)
				{
					SendClientMessage(playerid, COLOR_GREEN, "Your vehicle is fixed free of charge due to being in a government faction!");
				}
				else
				{
					GivePlayerCash(playerid, -500);
				}

				PlayerData[playerid][pRepairTime] = 8;
				PlayerData[playerid][pRepairShop] = i;
				return 1;
			}
		}
		return 1;
	}
	else if((id = GetNearbyEntrance(playerid)) >= 0)
	{
	    if(EntranceInfo[id][eLocked])
	    {
			ShowPlayerFooter(playerid, "~r~Locked");
			return 0;
		}
		if(EntranceInfo[id][eIntX] == 0.0 && EntranceInfo[id][eIntY] == 0.0 && EntranceInfo[id][eIntZ] == 0.0)
		{
		    SendClientMessage(playerid, COLOR_GREY, "This entrance has no interior and therefore cannot be entered.");
		    return 0;
		}
		if(EntranceInfo[id][eType] == 2)
		{
		    SendClientMessage(playerid, COLOR_GREY, "You cannot enter this type of entrance!");
		    return 0;
		}

		if(!PlayerData[playerid][pAdminDuty])
		{
			if(EntranceInfo[id][eAdminLevel] && PlayerData[playerid][pAdmin] < EntranceInfo[id][eAdminLevel])
			{
			    SendClientMessage(playerid, COLOR_GREY, "Your administrator level is too low. You may not enter.");
		    	return 0;
			}
			if(EntranceInfo[id][eFaction] >= 0 && PlayerData[playerid][pFaction] != EntranceInfo[id][eFaction])
			{
		    	SendClientMessage(playerid, COLOR_GREY, "This entrance is only accesible to a specific faction type. You may not enter.");
				return 0;
			}
			if(EntranceInfo[id][eGang] >= 0 && EntranceInfo[id][eGang] != PlayerData[playerid][pGang])
			{
		    	SendClientMessage(playerid, COLOR_GREY, "This entrance is only accesible to a specific gang. You may not enter.");
				return 0;
			}
			if(EntranceInfo[id][eVIP] && PlayerData[playerid][pDonator] < EntranceInfo[id][eVIP])
			{
		    	SendClientMessage(playerid, COLOR_GREY, "Your VIP rank is too low. You may not enter.");
		    	return 0;
			}
		}

        PlayerData[playerid][pLastEnter] = gettime();
		ShowActionBubble(playerid, "* %s has entered the building.", GetRPName(playerid));

		if(EntranceInfo[id][eType] == 1)
		{
		    SendClientMessage(playerid, COLOR_WHITE, "This entrance can be used for OOC duels. Use /offerduel to initiate one!");
		}
		else if(EntranceInfo[id][eType] == 2)
		{
		    SendClientMessage(playerid, COLOR_WHITE, "This entrance can be used to repair vehicles, use /repaircar.");
		}

		if(EntranceInfo[id][eVehicles] && GetPlayerState(playerid) == PLAYER_STATE_DRIVER)
		{
		    if(EntranceInfo[id][eFreeze])
		    {
		        TeleportToCoords(playerid, EntranceInfo[id][eIntX], EntranceInfo[id][eIntY], EntranceInfo[id][eIntZ], EntranceInfo[id][eIntA], EntranceInfo[id][eInterior], EntranceInfo[id][eWorld], true);
		    }
			else
			{
				TeleportToCoords(playerid, EntranceInfo[id][eIntX], EntranceInfo[id][eIntY], EntranceInfo[id][eIntZ], EntranceInfo[id][eIntA], EntranceInfo[id][eInterior], EntranceInfo[id][eWorld]);
			}
		}
		else
		{
			if(EntranceInfo[id][eFreeze])
			{
  				SetFreezePos(playerid, EntranceInfo[id][eIntX], EntranceInfo[id][eIntY], EntranceInfo[id][eIntZ]);
			}
			else
			{
			    SetPlayerPos(playerid, EntranceInfo[id][eIntX], EntranceInfo[id][eIntY], EntranceInfo[id][eIntZ]);
  			}

	  		SetPlayerFacingAngle(playerid, EntranceInfo[id][eIntA]);
	    	SetPlayerInterior(playerid, EntranceInfo[id][eInterior]);
			SetPlayerVirtualWorld(playerid, EntranceInfo[id][eWorld]);
			SetCameraBehindPlayer(playerid);
		}

		if(!EntranceInfo[id][eFreeze])
		{
			format(string, sizeof(string), "~w~%s", EntranceInfo[id][eName]);
		    GameTextForPlayer(playerid, string, 5000, 1);
		}

		return 1;
	}
	else
	{
	    for(new i = 0; i < sizeof(staticEntrances); i ++)
	    {
	        if(IsPlayerInRangeOfPoint(playerid, 3.0, staticEntrances[i][ePosX], staticEntrances[i][ePosY], staticEntrances[i][ePosZ]))
	        {
	            if(PlayerData[playerid][pDonator] < staticEntrances[i][eVIP])
	            {
	                SendClientMessage(playerid, COLOR_GREY, "This lounge is only available to those with a VIP subscription.");
	                return 0;
	            }

	            if(staticEntrances[i][eFreeze])
				{
				    SetFreezePos(playerid, staticEntrances[i][eIntX], staticEntrances[i][eIntY], staticEntrances[i][eIntZ]);
				}
				else
				{
				    SetPlayerPos(playerid, staticEntrances[i][eIntX], staticEntrances[i][eIntY], staticEntrances[i][eIntZ]);

   					format(string, sizeof(string), "~w~%s", staticEntrances[i][eName]);
	            	GameTextForPlayer(playerid, string, 5000, 1);
				}

                PlayerData[playerid][pLastEnter] = gettime();
	            ShowActionBubble(playerid, "* %s has entered the building.", GetRPName(playerid));
	            SetPlayerFacingAngle(playerid, staticEntrances[i][eIntA]);
	            SetPlayerInterior(playerid, staticEntrances[i][eInterior]);
				SetPlayerVirtualWorld(playerid, staticEntrances[i][eWorld]);
				SetCameraBehindPlayer(playerid);
	            return 1;
			}
		}
	}

	return 0;
}

ExitCheck(playerid)
{
    new id;

    if ((gettime() - PlayerData[playerid][pLastEnter]) < 3 && PlayerData[playerid][pAdminDuty] == 0)
    {
        return SendClientMessage(playerid, COLOR_GREY, "Please wait a moment before entering or exiting again.");
    }
    if (InsideShamal[playerid] != INVALID_VEHICLE_ID && GetPlayerInterior(playerid) > 0)
    {
        ShowActionBubble(playerid, "* %s exits the %s.", GetRPName(playerid), GetVehicleName(InsideShamal[playerid]));

        new Float:X, Float:Y, Float:Z;
        GetVehiclePos(InsideShamal[playerid], X, Y, Z);
        SetPlayerPos(playerid, X-4, Y-2.3, Z);

        PlayerData[playerid][pWorld] = 0;
        SetPlayerVirtualWorld(playerid, 0);
        PlayerData[playerid][pInterior] = 0;
        SetPlayerInterior(playerid, 0);
        InsideShamal[playerid] = INVALID_VEHICLE_ID;
    }
    if ((id = GetInsideHouse(playerid)) >= 0 && IsPlayerInRangeOfPoint(playerid, 3.0, HouseInfo[id][hIntX], HouseInfo[id][hIntY], HouseInfo[id][hIntZ]))
    {
        PlayerData[playerid][pLastEnter] = gettime();
        ShowActionBubble(playerid, "* %s has exited the house.", GetRPName(playerid));
        SetPlayerPos(playerid, HouseInfo[id][hPosX], HouseInfo[id][hPosY], HouseInfo[id][hPosZ]);
        SetFreezePos(playerid, HouseInfo[id][hPosX], HouseInfo[id][hPosY], HouseInfo[id][hPosZ]);
        SetPlayerFacingAngle(playerid, HouseInfo[id][hPosA]);
        SetPlayerInterior(playerid, HouseInfo[id][hOutsideInt]);
        SetPlayerVirtualWorld(playerid, HouseInfo[id][hOutsideVW]);
        SetCameraBehindPlayer(playerid);
        TextDrawHideForPlayer(playerid, houseLights);
        return 1;

    }
    else if ((id = GetInsideGarage(playerid)) >= 0)
    {
        if ((GetPlayerState(playerid) == PLAYER_STATE_DRIVER && IsPlayerInRangeOfPoint(playerid, 6.0, garageInteriors[GarageInfo[id][gType]][intVX], garageInteriors[GarageInfo[id][gType]][intVY], garageInteriors[GarageInfo[id][gType]][intVZ])) ||
            ((GetPlayerState(playerid) == PLAYER_STATE_ONFOOT) && (IsPlayerInRangeOfPoint(playerid, 2.0, garageInteriors[GarageInfo[id][gType]][intPX], garageInteriors[GarageInfo[id][gType]][intPY], garageInteriors[GarageInfo[id][gType]][intPZ]) || IsPlayerInRangeOfPoint(playerid, 4.0, garageInteriors[GarageInfo[id][gType]][intVX], garageInteriors[GarageInfo[id][gType]][intVY], garageInteriors[GarageInfo[id][gType]][intVZ]))))
        {

            ShowActionBubble(playerid, "* %s has exited the garage.", GetRPName(playerid));

            if (GetPlayerState(playerid) == PLAYER_STATE_DRIVER)
            {
                TeleportToCoords(playerid, GarageInfo[id][gExitX], GarageInfo[id][gExitY], GarageInfo[id][gExitZ], GarageInfo[id][gExitA], 0, 0);
            }
            else
            {
                SetPlayerPos(playerid, GarageInfo[id][gPosX], GarageInfo[id][gPosY], GarageInfo[id][gPosZ]);
                SetFreezePos(playerid, GarageInfo[id][gPosX], GarageInfo[id][gPosY], GarageInfo[id][gPosZ]);
                SetPlayerFacingAngle(playerid, GarageInfo[id][gPosA]);
                SetPlayerInterior(playerid, 0);
                SetPlayerVirtualWorld(playerid, 0);
                SetCameraBehindPlayer(playerid);
            }
        }

        PlayerData[playerid][pLastEnter] = gettime();
        return 1;
    }
    else if ((id = GetInsideBusiness(playerid)) >= 0 && IsPlayerInRangeOfPoint(playerid, 3.0, BusinessInfo[id][bIntX], BusinessInfo[id][bIntY], BusinessInfo[id][bIntZ]))
    {
        PlayerData[playerid][pLastEnter] = gettime();


        ShowActionBubble(playerid, "* %s has exited the business.", GetRPName(playerid));

        SetPlayerPos(playerid, BusinessInfo[id][bPosX], BusinessInfo[id][bPosY], BusinessInfo[id][bPosZ]);
        SetFreezePos(playerid, BusinessInfo[id][bPosX], BusinessInfo[id][bPosY], BusinessInfo[id][bPosZ]);
        SetPlayerFacingAngle(playerid, BusinessInfo[id][bPosA]);
        SetPlayerInterior(playerid, BusinessInfo[id][bOutsideInt]);
        SetPlayerVirtualWorld(playerid, BusinessInfo[id][bOutsideVW]);
        SetCameraBehindPlayer(playerid);
        return 1;
    }
    else if ((id = GetInsideEntrance(playerid)) >= 0 && IsPlayerInRangeOfPoint(playerid, (IsPlayerInAnyVehicle(playerid)) ? (7.0) : (3.0), EntranceInfo[id][eIntX], EntranceInfo[id][eIntY], EntranceInfo[id][eIntZ]))
    {
        if (EntranceInfo[id][eType] == 1)
        {
            SetPlayerWeapons(playerid);
        }

        PlayerData[playerid][pLastEnter] = gettime();

        ShowActionBubble(playerid, "* %s has exited the building.", GetRPName(playerid));
        SendClientMessageEx(playerid, COLOR_AQUA,"* %s has exited the building.", GetRPName(playerid));

        if (EntranceInfo[id][eVehicles] && GetPlayerState(playerid) == PLAYER_STATE_DRIVER)
        {
            if (EntranceInfo[id][eFreeze])
            {
                TeleportToCoords(playerid, EntranceInfo[id][ePosX], EntranceInfo[id][ePosY], EntranceInfo[id][ePosZ], EntranceInfo[id][ePosA], EntranceInfo[id][eOutsideInt], EntranceInfo[id][eOutsideVW], true);
            }
            else
            {
                TeleportToCoords(playerid, EntranceInfo[id][ePosX], EntranceInfo[id][ePosY], EntranceInfo[id][ePosZ], EntranceInfo[id][ePosA], EntranceInfo[id][eOutsideInt], EntranceInfo[id][eOutsideVW]);
            }
        }
        else
        {
            if (EntranceInfo[id][eFreeze])
            {
                SetFreezePos(playerid, EntranceInfo[id][ePosX], EntranceInfo[id][ePosY], EntranceInfo[id][ePosZ]);
            }
            else
            {
                SetPlayerPos(playerid, EntranceInfo[id][ePosX], EntranceInfo[id][ePosY], EntranceInfo[id][ePosZ]);
            }

            SetPlayerFacingAngle(playerid, EntranceInfo[id][ePosA]);
            SetPlayerInterior(playerid, EntranceInfo[id][eOutsideInt]);
            SetPlayerVirtualWorld(playerid, EntranceInfo[id][eOutsideVW]);
            SetCameraBehindPlayer(playerid);
        }

        return 1;
    }
    else
    {
        for (new i = 0; i < sizeof(staticEntrances); i ++)
        {
            if (IsPlayerInRangeOfPoint(playerid, 3.0, staticEntrances[i][eIntX], staticEntrances[i][eIntY], staticEntrances[i][eIntZ]) && GetPlayerVirtualWorld(playerid) == staticEntrances[i][eWorld])
            {
                if (staticEntrances[i][eFreeze])
                {
                    SetFreezePos(playerid, staticEntrances[i][ePosX], staticEntrances[i][ePosY], staticEntrances[i][ePosZ]);
                }
                else
                {
                    SetPlayerPos(playerid, staticEntrances[i][ePosX], staticEntrances[i][ePosY], staticEntrances[i][ePosZ]);
                }

                PlayerData[playerid][pLastEnter] = gettime();

                ShowActionBubble(playerid, "* %s has exited the building.", GetRPName(playerid));
                SendClientMessageEx(playerid, COLOR_AQUA,"* %s has exited the building.", GetRPName(playerid));

                SetPlayerFacingAngle(playerid, staticEntrances[i][ePosA]);
                SetPlayerInterior(playerid, 0);
                SetPlayerVirtualWorld(playerid, 0);
                SetCameraBehindPlayer(playerid);
                return 1;
            }
        }
    }

    return 0;
}

AddReportToQueue(playerid, text[])
{
    for(new x = 0; x < MAX_REPORTS; x ++)
	{
	    if(!ReportInfo[x][rExists])
	    {
	        strcpy(ReportInfo[x][rText], text, 128);

	        ReportInfo[x][rExists] = 1;
			ReportInfo[x][rAccepted] = 0;
			ReportInfo[x][rReporter] = playerid;
			ReportInfo[x][rHandledBy] = INVALID_PLAYER_ID;
			ReportInfo[x][rTime] = 5;

	        PlayerData[playerid][pLastReport] = gettime();

	        foreach(new i : Player)
	        {
	            if(PlayerData[i][pAdmin] > 0 && !PlayerData[i][pToggleReports])
				{
	        		SendClientMessageEx(i, COLOR_YELLOW2, "Report from [%i]%s (RID: %i): %s", playerid, GetRPName(playerid), x, text);
				}
			}

	        return 1;
		}
	}

	return 0;
}

UpdateLandText(landid)
{
    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "SELECT COUNT(*) FROM landobjects WHERE landid = %i", LandInfo[landid][lID]);
	mysql_tquery(connectionID, queryBuffer, "OnQueryFinished", "ii", THREAD_UPDATE_LANDLABELS, landid);
}

// ---------------------------------------
// These functions are forwarded so they can be called by filterscripts using CallRemoteFunction.


//----------------------------------------
forward SetScriptPos(playerid, Float:x, Float:y, Float:z);
public SetScriptPos(playerid, Float:x, Float:y, Float:z)
{
	SetPlayerPos(playerid, x, y, z);
}
forward FinishServerShutdown();
public FinishServerShutdown()
{

	foreach(new i : Player) {
	    Kick(i);
	}

	SendRconCommand("exit");
	return 1;
}

forward SetScriptArmour(playerid, Float:amount);
public SetScriptArmour(playerid, Float:amount)
{
    PlayerData[playerid][pACTime] = gettime() + 5;
	PlayerData[playerid][pArmorTime] = gettime() + 5;
	PlayerData[playerid][pArmor] = amount;
	return SetPlayerArmour(playerid, amount);
}

GivePlayerHealth(playerid, Float:amount)
{
	new Float:health;
	GetPlayerHealth(playerid, health);
	SetPlayerHealth(playerid, (health + amount > 100.0) ? (100.0) : (health + amount));
}

GivePlayerArmour(playerid, Float:amount)
{
	new Float:armor;
	GetPlayerArmour(playerid, armor);
	SetScriptArmour(playerid, (armor + amount > 100.0) ? (100.0) : (armor + amount));
}

forward SetScriptSkin(playerid, skinid);
public SetScriptSkin(playerid, skinid)
{
    SetPlayerSkin(playerid, skinid);
	if(skinid != ADMIN_SKIN && skinid != HELPER_SKIN)
	{
    	PlayerData[playerid][pSkin] = skinid;
    	mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET skin = %i WHERE uid = %i", PlayerData[playerid][pSkin], PlayerData[playerid][pID]);
    	mysql_tquery(connectionID, queryBuffer);
	}

}

forward DestroyDamageTD(playerid);
public DestroyDamageTD(playerid)
{
	if(PlayerData[playerid][pDamageTimer] >= 0)
	{
	    TextDrawHideForPlayer(playerid, Damage[playerid]);
	    PlayerData[playerid][pDamageTimer] = -1;
	}
}

IsPlayerSpawned(playerid) 
{
	return PlayerData[playerid][pLogged];
}




forward GiveWeaponToPlayer(playerid, weaponid, bool:temp);
public GiveWeaponToPlayer(playerid, weaponid, bool:temp)
{
	GivePlayerWeaponEx(playerid, weaponid, temp);
}

forward ReturnChatAnimation(playerid, text[]);
public ReturnChatAnimation(playerid, text[])
{
    if(GetPlayerAnimationIndex(playerid) > 0)
	{
	    return 1;
	}
	switch(PlayerData[playerid][pChatstyle])
	{
		case 0: ApplyAnimation(playerid,"PED","IDLE_CHAT",4.0,1,1,0,1,1,1);
		case 1: ApplyAnimation(playerid, "GANGS", "PRTIAL_GNGTLKA",4.0,1,0,0,1,1,1);
		case 2: ApplyAnimation(playerid, "GANGS", "PRTIAL_GNGTLKB", 4.0,1,0,0,1,1,1);
		case 3: ApplyAnimation(playerid, "GANGS", "PRTIAL_GNGTLKD", 4.0,1,0,0,1,1,1);
		case 4: ApplyAnimation(playerid, "GANGS", "PRTIAL_GNGTLKE", 4.0,1,0,0,1,1,1);
		case 5: ApplyAnimation(playerid, "GANGS", "PRTIAL_GNGTLKF", 4.0,1,0,0,1,1,1);
		case 6: ApplyAnimation(playerid, "GANGS", "PRTIAL_GNGTLKG", 4.0,1,0,0,1,1,1);
		case 7: ApplyAnimation(playerid, "GANGS", "PRTIAL_GNGTLKH", 4.0,1,0,0,1,1,1);
	}
	if(strlen(text) <= 16) SetTimerEx("TIMER_EndChatAnim",2000, 0, "i", playerid);
	else if(strlen(text) <= 32 && strlen(text) > 16) SetTimerEx("TIMER_EndChatAnim",3500, 0, "i", playerid);
	else if(strlen(text) <= 64 && strlen(text) > 32) SetTimerEx("TIMER_EndChatAnim",4000, 0, "i", playerid);
	else if(strlen(text) <= 96 && strlen(text) > 64) SetTimerEx("TIMER_EndChatAnim",4500, 0, "i", playerid);
	else if(strlen(text) <= 128 && strlen(text) > 96) SetTimerEx("TIMER_EndChatAnim",5000, 0, "i", playerid);
	else if(strlen(text) > 128) SetTimerEx("TIMER_EndChatAnim",5500, 0, "i", playerid);
	return 1;
}

forward TIMER_EndChatAnim(playerid);
public TIMER_EndChatAnim(playerid)
{
	if(PlayerData[playerid][pInjured] == 0)
		return ApplyAnimation(playerid, "CARRY", "crry_prtial", 4, 0, 0, 0, 0, 0, 1);
	return 1;
}
forward AnimationCameraView(playerid, viewid, bool:play);
public AnimationCameraView(playerid, viewid,bool:play) {
	if(play) {
	    TogglePlayerSpectating(playerid, true);
	    TextDrawShowForPlayer(playerid, welcomenew);
		switch(viewid) {
		    case 1: {
		        InterpolateCameraPos(playerid, 2001.022338, -1680.001831, 111.524520, 1847.486328, -1588.119262, 45.335948, 10000);
				InterpolateCameraLookAt(playerid, 1996.748535, -1677.679321, 110.366386, 1842.846801, -1588.866577, 43.628067, 6000);
				ViewCam[playerid] = SetTimerEx("AnimationCameraView", 7000, false, "iib", playerid,2,true);
				return 1;
		    }
		    case 2: {
		        InterpolateCameraPos(playerid, 1350.769897, -1161.625610, 63.912643, 1345.028564, -1381.431640, 37.928005, 10000);
				InterpolateCameraLookAt(playerid, 1350.744140, -1165.983520, 61.461566, 1349.314086, -1383.640136, 36.602577, 6000);
				ViewCam[playerid] = SetTimerEx("AnimationCameraView", 7000, false, "iib", playerid,3,true);
				return 1;
		    }
		    case 3: {
				InterpolateCameraPos(playerid, 1715.645019, -1938.294555, 14.028053, 1714.797729, -1859.568725, 16.619020, 10000);
				InterpolateCameraLookAt(playerid, 1715.549194, -1933.334594, 14.652102, 1719.508422, -1858.186523, 15.670925, 10000);
				ViewCam[playerid] = SetTimerEx("AnimationCameraView", 7000, false, "iib", playerid,4,true);
				return 1;
		    }
		    case 4: {
		        InterpolateCameraPos(playerid, 2527.106445, -1651.230468, 59.606048, 2258.847900, -1651.125366, 33.323886, 10000);
				InterpolateCameraLookAt(playerid, 2523.139892, -1653.018554, 57.142471, 2254.557861, -1652.318969, 31.049913, 10000);
				ViewCam[playerid] = SetTimerEx("AnimationCameraView", 7000, false, "iib", playerid,5,true);
				return 1;
		    }
		    case 5: {
		        InterpolateCameraPos(playerid, 2209.850585, -1115.027709, 37.585510, 2019.370605, -1123.279907, 45.939300, 10000);
				InterpolateCameraLookAt(playerid, 2205.017089, -1116.304321, 37.493427, 2017.365600, -1127.638549, 44.531455, 10000);
				ViewCam[playerid] = SetTimerEx("AnimationCameraView", 7000, false, "iib", playerid,6,true);
				return 1;
		    }
		    case 6: {
		        InterpolateCameraPos(playerid, 1828.507446, -1052.825073, 30.756277, 1583.096679, -1035.206054, 32.867546, 10000);
				InterpolateCameraLookAt(playerid, 1823.512207, -1053.039550, 30.793386, 1584.801879, -1039.839111, 32.075389, 10000);
				ViewCam[playerid] = SetTimerEx("AnimationCameraView", 7000, false, "iib", playerid,7,true);
				return 1;
			}
			case 7: {
			    InterpolateCameraPos(playerid, 1531.205566, -978.054687, 60.876388, 1461.443481, -810.305114, 77.579307, 10000);
				InterpolateCameraLookAt(playerid, 1526.846191, -975.952758, 59.620300, 1456.799926, -812.138061, 77.300292, 10000);
				ViewCam[playerid] = SetTimerEx("AnimationCameraView", 7000, false, "iib", playerid,8,true);
				return 1;
			}
			case 8: {
			    InterpolateCameraPos(playerid, 635.315673, -1780.251342, 21.155647, 417.544250, -1759.125366, 26.359794, 15000);
				InterpolateCameraLookAt(playerid, 630.351623, -1779.681518, 20.973197, 415.232757, -1763.481567, 25.535095, 10000);
				ViewCam[playerid] = SetTimerEx("AnimationCameraView", 7000, false, "iib", playerid,9,true);
				return 1;
			}
			case 9: {
			    InterpolateCameraPos(playerid, 836.923767, -1779.394165, 18.188320, 970.047790, -1792.450439, 21.380487, 15000);
				InterpolateCameraLookAt(playerid, 840.450439, -1775.850219, 18.139299, 966.497192, -1789.023559, 20.574161, 10000);
				ViewCam[playerid] = SetTimerEx("AnimationCameraView", 7000, false, "iib", playerid,1,true);
				return 1;
			}

		}
	}
	else {
		KillTimer(ViewCam[playerid]);
		TogglePlayerSpectating(playerid, false);
		SetCameraBehindPlayer(playerid);
		TextDrawHideForPlayer(playerid, welcomenew);
	}
	return 1;
}
forward AddToPaycheck(playerid, amount);
public AddToPaycheck(playerid, amount)
{
	if(PlayerData[playerid][pLogged])
	{
		PlayerData[playerid][pPaycheck] = PlayerData[playerid][pPaycheck] + amount;

		if(PlayerData[playerid][pPaycheck] >= 20000)
		{
		    AwardAchievement(playerid, ACH_WorkingClass);
		}

		if(!PlayerData[playerid][pAdminDuty])
	    {
			mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET paycheck = paycheck + %i WHERE uid = %i", amount, PlayerData[playerid][pID]);
			mysql_tquery(connectionID, queryBuffer);
			AddToTaxVault(-amount);
		}
	}
}
IsPhoneBusy(number)
{
	new targetid = GetPhonePlayerID(number);

	return (targetid != INVALID_PLAYER_ID && PlayerData[targetid][pCalling] > 0);
}

GetPhonePayphoneID(number)
{
	for (new i = 0; i < MAX_PAYPHONES; i ++)
	{
		if (IsValidPayphoneID(i) && Payphones[i][phNumber] == number)
		{
			return i;
		}
	}

	return -1;
}

GetPhonePlayerID(number)
{
	foreach (new i : Player)
	{
		if (PlayerData[i][pPhone] == number)
		{
			return i;
		}
	}

	return INVALID_PLAYER_ID;
}
IsCallIncoming(playerid)
{
	return (PlayerData[playerid][pCalling] == 1 && PlayerData[playerid][pCaller] != INVALID_PLAYER_ID);
}

IsPlayerNearRingingPayphone(playerid)
{
	new payphone = GetClosestPayphone(playerid);

	return (IsValidPayphoneID(payphone) && Payphones[payphone][phCaller] != INVALID_PLAYER_ID);
}
IsPlayerNearPoint(playerid, Float:range, Float:x, Float:y, Float:z, interior = -1, world = -1)
{
	if (interior == -1)
		interior = GetPlayerInterior(playerid);

	if (world == -1)
		world = GetPlayerVirtualWorld(playerid);

	return (IsPlayerInRangeOfPoint(playerid, range, x, y, z)) && (GetPlayerInterior(playerid) == interior && GetPlayerVirtualWorld(playerid) == world);
}
GetClosestPayphone(playerid)
{
	for (new i = 0; i < MAX_PAYPHONES; i ++)
	{
		if (Payphones[i][phExists] && IsPlayerNearPoint(playerid, 2.0, Payphones[i][phX], Payphones[i][phY], Payphones[i][phZ], Payphones[i][phInterior], Payphones[i][phWorld]))
		{
			return i;
		}
	}
	return -1;
}

AddPayphone(Float:x, Float:y, Float:z, Float:angle, interior, world)
{
	new
		id = GetNextPayphoneID();

	if (id != -1)
	{
		Payphones[id][phExists] = 1;
		Payphones[id][phNumber] = Random(1000000, 9999999);
		Payphones[id][phOccupied] = 0;
		Payphones[id][phCaller] = INVALID_PLAYER_ID;
		Payphones[id][phX] = x;
		Payphones[id][phY] = y;
		Payphones[id][phZ] = z;
		Payphones[id][phA] = angle;
		Payphones[id][phInterior] = interior;
		Payphones[id][phWorld] = world;
		Payphones[id][phObject] = INVALID_OBJECT_ID;
		Payphones[id][phText] = INVALID_3DTEXT_ID;

		UpdatePayphone(id);

		mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "INSERT INTO rp_payphones (phInterior) VALUES(%i)", interior);
		mysql_tquery(connectionID, queryBuffer, "OnPayphoneAdded", "i", id);
	}
	return id;
}
forward OnATMAdded(id);
public OnATMAdded(id)
{
	ATM[id][atmID] = cache_insert_id(connectionID);

	SaveATM(id);
}
forward OnPayphoneAdded(id);
public OnPayphoneAdded(id)
{
	Payphones[id][phID] = cache_insert_id(connectionID);

	SavePayphone(id);
}

SavePayphone(id)
{
	static
	    queryString[512];

	if (!Payphones[id][phExists]) return 0;

	format(queryString, sizeof(queryString), "UPDATE rp_payphones SET phNumber = %i, phX = %.4f, phY = %.4f, phZ = %.4f, phA = %.4f, phInterior = %i, phWorld = %i WHERE phID = %i",
	    Payphones[id][phNumber],
	    Payphones[id][phX],
	    Payphones[id][phY],
	    Payphones[id][phZ],
	    Payphones[id][phA],
	    Payphones[id][phInterior],
	    Payphones[id][phWorld],
	    Payphones[id][phID]
	);

	return mysql_tquery(connectionID, queryString);
}
stock GetPlayerSQLId(playerid)
{
	return PlayerData[playerid][pID];
}
forward GetPlayerCash(playerid);
public GetPlayerCash(playerid)
{
	return PlayerData[playerid][pCash];
}
IsValidPayphoneID(id)
{
	return (id >= 0 && id < MAX_PAYPHONES) && Payphones[id][phExists];
}
GetNextPayphoneID()
{
	for (new i = 0; i < MAX_PAYPHONES; i ++)
	{
		if (!Payphones[i][phExists])
		{
			return i;
		}
	}
	return -1;
}




CreatePlayerTextDraws( playerid )
{
	playerfooter[playerid] = CreatePlayerTextDraw(playerid, 327.333190, 432.417785, ".");
	PlayerTextDrawLetterSize(playerid, playerfooter[playerid], 0.220000, 1.276443);
	PlayerTextDrawTextSize(playerid, playerfooter[playerid], 0.000000, 831.000000);
	PlayerTextDrawAlignment(playerid, playerfooter[playerid], 2);
	PlayerTextDrawColor(playerid, playerfooter[playerid], -1);
	PlayerTextDrawUseBox(playerid, playerfooter[playerid], 1);
	PlayerTextDrawBoxColor(playerid, playerfooter[playerid], 153);
	PlayerTextDrawSetShadow(playerid, playerfooter[playerid], 0);
	PlayerTextDrawSetOutline(playerid, playerfooter[playerid], 1);
	PlayerTextDrawBackgroundColor(playerid, playerfooter[playerid], 255);
	PlayerTextDrawFont(playerid, playerfooter[playerid], 2);
	PlayerTextDrawSetProportional(playerid, playerfooter[playerid], 1);



	LoadingObjects0[playerid] = CreatePlayerTextDraw(playerid, 219.267944, 377.416687, "LD_SPAC:white");
	PlayerTextDrawLetterSize(playerid, LoadingObjects0[playerid], 0.000000, 0.000000);
	PlayerTextDrawTextSize(playerid, LoadingObjects0[playerid], 205.212310, 58.333312);
	PlayerTextDrawAlignment(playerid, LoadingObjects0[playerid], 1);
	PlayerTextDrawColor(playerid, LoadingObjects0[playerid], -2139062017);
	PlayerTextDrawSetShadow(playerid, LoadingObjects0[playerid], 0);
	PlayerTextDrawSetOutline(playerid, LoadingObjects0[playerid], 0);
	PlayerTextDrawFont(playerid, LoadingObjects0[playerid], 4);

	LoadingObjects1[playerid] = CreatePlayerTextDraw(playerid, 424.011718, 382.666687, "LD_SPAC:white");
	PlayerTextDrawLetterSize(playerid, LoadingObjects1[playerid], 0.000000, 0.000000);
	PlayerTextDrawTextSize(playerid, LoadingObjects1[playerid], -204.743774, -5.250000);
	PlayerTextDrawAlignment(playerid, LoadingObjects1[playerid], 1);
	PlayerTextDrawColor(playerid, LoadingObjects1[playerid], -1);
	PlayerTextDrawSetShadow(playerid, LoadingObjects1[playerid], 0);
	PlayerTextDrawSetOutline(playerid, LoadingObjects1[playerid], 0);
	PlayerTextDrawFont(playerid, LoadingObjects1[playerid], 4);

	LoadingObjects2[playerid] = CreatePlayerTextDraw(playerid, 424.011718, 378.000000, "LD_SPAC:white");
	PlayerTextDrawLetterSize(playerid, LoadingObjects2[playerid], 0.000000, 0.000000);
	PlayerTextDrawTextSize(playerid, LoadingObjects2[playerid], -4.216674, 57.750000);
	PlayerTextDrawAlignment(playerid, LoadingObjects2[playerid], 1);
	PlayerTextDrawColor(playerid, LoadingObjects2[playerid], -1);
	PlayerTextDrawSetShadow(playerid, LoadingObjects2[playerid], 0);
	PlayerTextDrawSetOutline(playerid, LoadingObjects2[playerid], 0);
	PlayerTextDrawFont(playerid, LoadingObjects2[playerid], 4);

	LoadingObjects3[playerid] = CreatePlayerTextDraw(playerid, 218.799423, 377.416687, "LD_SPAC:white");
	PlayerTextDrawLetterSize(playerid, LoadingObjects3[playerid], 0.000000, 0.000000);
	PlayerTextDrawTextSize(playerid, LoadingObjects3[playerid], 4.685211, 58.333312);
	PlayerTextDrawAlignment(playerid, LoadingObjects3[playerid], 1);
	PlayerTextDrawColor(playerid, LoadingObjects3[playerid], -1);
	PlayerTextDrawSetShadow(playerid, LoadingObjects3[playerid], 0);
	PlayerTextDrawSetOutline(playerid, LoadingObjects3[playerid], 0);
	PlayerTextDrawFont(playerid, LoadingObjects3[playerid], 4);

	LoadingObjects4[playerid] = CreatePlayerTextDraw(playerid, 424.011718, 429.333312, "LD_SPAC:white");
	PlayerTextDrawLetterSize(playerid, LoadingObjects4[playerid], 0.000000, 0.000000);
	PlayerTextDrawTextSize(playerid, LoadingObjects4[playerid], -204.275253, 6.416687);
	PlayerTextDrawAlignment(playerid, LoadingObjects4[playerid], 1);
	PlayerTextDrawColor(playerid, LoadingObjects4[playerid], -1);
	PlayerTextDrawSetShadow(playerid, LoadingObjects4[playerid], 0);
	PlayerTextDrawSetOutline(playerid, LoadingObjects4[playerid], 0);
	PlayerTextDrawFont(playerid, LoadingObjects4[playerid], 4);

	LoadingObjects5[playerid] = CreatePlayerTextDraw(playerid, 230.043624, 398.416717, "Loading Objects...");
	PlayerTextDrawLetterSize(playerid, LoadingObjects5[playerid], 0.449999, 1.600000);
	PlayerTextDrawAlignment(playerid, LoadingObjects5[playerid], 1);
	PlayerTextDrawColor(playerid, LoadingObjects5[playerid], 255);
	PlayerTextDrawSetShadow(playerid, LoadingObjects5[playerid], 0);
	PlayerTextDrawSetOutline(playerid, LoadingObjects5[playerid], 1);
	PlayerTextDrawBackgroundColor(playerid, LoadingObjects5[playerid], 51);
	PlayerTextDrawFont(playerid, LoadingObjects5[playerid], 2);
	PlayerTextDrawSetProportional(playerid, LoadingObjects5[playerid], 1);
    return 1;
}

GetPlayerVehicle(playerid, vehicleid)
{
	#pragma unused playerid
    for(new v = 0; v < MAX_VEHICLES; v++)
    {
        if(VehicleInfo[v][vID] == vehicleid)
        {
            return v;
        }
    }
    return 0;
}

GetPlayerHelmet(playerid)
{
	switch(PlayerData[playerid][pHelmet])
	{
	    case 1: return 18645; //MotorcycleHelmet
		case 2: return 18976;	//MotorcycleHelmet2
		case 3: return 18977; 	//MotorcycleHelmet3
		case 4: return 18978;	//MotorcycleHelmet4
		case 5: return 18979;	//MotorcycleHelmet5
	}
	return true;
}

autoWeather()
{
	SetWeather(nextWeather);
    SetDBWeatherID(nextWeather);
	switch(random(21))
	{
 		case 0: nextWeather = 0;
   		case 1: nextWeather = 1;
	    case 2: nextWeather = 2;
	    case 3: nextWeather = 3;
	    case 4: nextWeather = 4;
	    case 5: nextWeather = 5;
	    case 6: nextWeather = 6;
	    case 7: nextWeather = 7;
	    case 8: nextWeather = 8;
	    case 9: nextWeather = 9;
	    case 10: nextWeather = 10;
	    case 11: nextWeather = 11;
	    case 12: nextWeather = 12;
	    case 13: nextWeather = 13;
	    case 14: nextWeather = 14;
	    case 15: nextWeather = 15;
	    case 16: nextWeather = 16;
	    case 17: nextWeather = 17;
        case 18: nextWeather = 18;
        case 19: nextWeather = 19;
        case 20: nextWeather = 20;
	}
}

stock GangTag_IntColor(color)
{
	if(color == 0) return color;
	new rgba = 0xFF + (color * 256);
	return rgba >>> 8 | rgba << 24;
}
stock Booth_GetPlayer(id)
{
	foreach (new i : Player) if (PlayerData[i][pRangeBooth] == id) {
	    return i;
	}
	return INVALID_PLAYER_ID;
}

Booth_Leave(playerid)
{
	if (PlayerData[playerid][pRangeBooth] != -1)
	{
	    if (IsValidObject(g_BoothObject[PlayerData[playerid][pRangeBooth]])) {
	        DestroyObject(g_BoothObject[PlayerData[playerid][pRangeBooth]]);

	        g_BoothObject[PlayerData[playerid][pRangeBooth]] = -1;
	    }
    	ResetPlayerWeapons(playerid);
   		SetPlayerWeapons(playerid);

		g_BoothUsed[PlayerData[playerid][pRangeBooth]] = false;

		PlayerData[playerid][pRangeBooth] = -1;
  		PlayerData[playerid][pTargets] = 0;
  		PlayerData[playerid][pTargetLevel] = 0;
	}
	return 1;
}

Booth_Refresh(playerid)
{
	new id = PlayerData[playerid][pRangeBooth];

	if (id == -1)
	    return 0;

	if (IsValidObject(g_BoothObject[id])) {
	    DestroyObject(g_BoothObject[id]);
	}
	g_BoothObject[id] = CreateDynamicObjectEx(1583, arrBoothPositions[id][0] - 15.0, arrBoothPositions[id][1] + 1.5, arrBoothPositions[id][2], 0.0, 0.0, 90.0);

	return MoveObject(g_BoothObject[id], arrBoothPositions[id][0] - 1.0, arrBoothPositions[id][1] + 1.5, arrBoothPositions[id][2], (!PlayerData[playerid][pTargetLevel]) ? (2.0) : (2.0 + (PlayerData[playerid][pTargetLevel] * 1.2)));
}

GenderToString(gender)
{
	new sex[7];
	switch(gender)
	{
        case 2: sex = "Female";
        default: sex = "Male";
    }
    return sex;
}

stock GetPlayerGenderStr(playerid)
{
	new sex[7];
	switch(PlayerData[playerid][pGender]) 
	{
        case 2: sex = "Female";
        default: sex = "Male";
    }
    return sex;
}

stock GetPlayerAgeStr(playerid)
{
	new age[7];
	format(age, sizeof(age), "%d", PlayerData[playerid][pAge]);
	return age;
}

GetWeaponLicStatus(weaponLicStatus) {
	new weapLic[20];
    switch(weaponLicStatus) {
        case 1: weapLic = "Passed";
        case 2: weapLic = "Permanent Passed";
        default: weapLic = "Not Passed";
    }

    return weapLic;
}
GetDriveLicStatus(driveLicStatus) {
	new driveLic[15];
    switch(driveLicStatus) {
        case 1: driveLic = "Passed";
        default: driveLic = "Not Passed";
    }

    return driveLic;
}

IsVehicleSpawnSetup(company)
{
	return (BusinessInfo[company][cVehicle][0] != 0.0 && BusinessInfo[company][cVehicle][1] != 0.0 && BusinessInfo[company][cVehicle][2] != 0.0);
}
IsValidCompanyID(id)
{
	return (id >= 0 && id < MAX_BUSINESSES) && BusinessInfo[id][bExists];
}

forward HidePlayerBox(playerid, PlayerText:boxid);
public HidePlayerBox(playerid, PlayerText:boxid)
{
	if (!IsPlayerConnected(playerid))
	    return 0;

	PlayerTextDrawHide(playerid, boxid);
	PlayerTextDrawDestroy(playerid, boxid);

	return 1;
}

stock Float:GetDistanceToTruckDepot(p1,p2)
{
	new Float:x1,Float:y1,Float:z1,Float:x2,Float:y2,Float:z2;
	x1 = TruckDepotInfo[p1][pTDPosX];
	y1 = TruckDepotInfo[p1][pTDPosY];
	z1 = TruckDepotInfo[p1][pTDPosZ];
	GetPlayerPos(p2,x2,y2,z2);
	return floatsqroot(floatpower(floatabs(floatsub(x2,x1)),2)+floatpower(floatabs(floatsub(y2,y1)),2)+floatpower(floatabs(floatsub(z2,z1)),2));
}

stock GetClosestTruckDepot(p1, level)
{
	new Float:dis,Float:dis2,player, count;
	player = -1;
	dis = 99999.99;
	for(new x=0; x<MAX_TRUCKDEPOTS; x++)
	{
	    if(TruckDepotInfo[x][pTDLevel] == level)
	    {
	        count ++;
			dis2 = GetDistanceToTruckDepot(x,p1);
			if(dis2 < dis && dis2 != -1.00)
			{
				dis = dis2;
				player = x;
			}
		}
	}
	if(count == 0) player = -1;
	return player;
}

ABroadCast(hColor, szMessage[], iLevel) 
{
	foreach(new i: Player)
	{
		if(PlayerData[i][pAdmin] >= iLevel) {
			SendClientMessageEx(i, hColor, szMessage);
		}
	}
	return 1;
}

ShowPlayerFooter(playerid, string[], time = 5000) 
{
	if (PlayerData[playerid][pShowFooter]) {
	    PlayerTextDrawHide(playerid, playerfooter[playerid]);
	    KillTimer(PlayerData[playerid][pFooterTimer]);
	}
	PlayerTextDrawSetString(playerid, playerfooter[playerid], string);
	PlayerTextDrawShow(playerid, playerfooter[playerid]);

	PlayerData[playerid][pShowFooter] = true;
	PlayerData[playerid][pFooterTimer] = SetTimerEx("HidePlayerFooter", time, false, "d", playerid);
	return 1;
}

forward HidePlayerFooter(playerid);
public HidePlayerFooter(playerid) {

	if (!PlayerData[playerid][pShowFooter])
	    return 0;

	PlayerData[playerid][pShowFooter] = false;
	return PlayerTextDrawHide(playerid, playerfooter[playerid]);
}

ShowFreezeTextdraw(playerid)
{
	PlayerTextDrawShow(playerid, LoadingObjects0[playerid]);
	PlayerTextDrawShow(playerid, LoadingObjects1[playerid]);
	PlayerTextDrawShow(playerid, LoadingObjects2[playerid]);
	PlayerTextDrawShow(playerid, LoadingObjects3[playerid]);
	PlayerTextDrawShow(playerid, LoadingObjects4[playerid]);
	PlayerTextDrawShow(playerid, LoadingObjects5[playerid]);

	return 1;
}

SetPlayerCellphoneAction(playerid, enable)
{
	if (PlayerData[playerid][pCuffed])
	{
		return 0;
	}
	else
	{
		if (enable)
		{
			if (VehicleHasDoors(GetPlayerVehicleID(playerid)))
			{
				ApplyAnimation(playerid, "CAR_CHAT", "carfone_in", 4.1, 0, 0, 0, 1, 0, 1);
			}
			else
			{
				SetPlayerSpecialAction(playerid, SPECIAL_ACTION_USECELLPHONE);
				SetPlayerAttachedObject(playerid, 5, 330, 6);
			}
		}
		else
		{
			if (VehicleHasDoors(GetPlayerVehicleID(playerid)))
			{
				ApplyAnimation(playerid, "CAR_CHAT", "carfone_out", 4.1, 0, 0, 0, 0, 0, 1);
			}
			else
			{
				SetPlayerSpecialAction(playerid, SPECIAL_ACTION_STOPUSECELLPHONE);
				RemovePlayerAttachedObject(playerid, 5);
			}
		}
	}
	return 1;
}
ResetPayphone(playerid)
{
	if (PlayerData[playerid][pPayphone] != -1)
	{
		Payphones[PlayerData[playerid][pPayphone]][phOccupied] = 0;
		UpdatePayphoneText(PlayerData[playerid][pPayphone]);
	}
	PlayerData[playerid][pPayphone] = -1;
}

HangupCall(playerid)
{
	if (PlayerData[playerid][pCalling] > 0)
	{
		for (new i = 0; i < MAX_PAYPHONES; i ++)
		{
			if (IsValidPayphoneID(i) && Payphones[i][phCaller] == playerid)
			{
				Payphones[i][phCaller] = INVALID_PLAYER_ID;

				UpdatePayphoneText(i);
			}
		}
		if (PlayerData[playerid][pCaller] != INVALID_PLAYER_ID)
		{
			SetPlayerCellphoneAction(PlayerData[playerid][pCaller], false);

			SendInfoMessage(PlayerData[playerid][pCaller], "The other line has ended the call.");
			PlayerPlaySound(PlayerData[playerid][pCaller], 20601, 0.0, 0.0, 0.0);

			if (PlayerData[PlayerData[playerid][pCaller]][pPayphone] != -1)
			{
				ResetPayphone(PlayerData[playerid][pCaller]);
				ShowActionBubble(PlayerData[playerid][pCaller], "* %s hangs up the payphone.", GetRPName(PlayerData[playerid][pCaller]));
			}
			else
			{
				ShowActionBubble(PlayerData[playerid][pCaller], "* %s hangs up the phone and puts it in their pocket.", GetRPName(PlayerData[playerid][pCaller]));
			}

			PlayerData[PlayerData[playerid][pCaller]][pCalling] = 0;
			PlayerData[PlayerData[playerid][pCaller]][pCaller] = INVALID_PLAYER_ID;
		}
		SetPlayerCellphoneAction(playerid, false);
		PlayerPlaySound(playerid, 20601, 0.0, 0.0, 0.0);

		PlayerData[playerid][pCalling] = 0;
		PlayerData[playerid][pCaller] = INVALID_PLAYER_ID;

		if (PlayerData[playerid][pPayphone] != -1)
		{
			ResetPayphone(playerid);
			ShowActionBubble(playerid, "* %s hangs up the payphone.", GetRPName(playerid));
		}
		else
		{
			ShowActionBubble(playerid, "* %s hangs up the phone and puts it in their pocket.", GetRPName(playerid));
		}
	}
}

SendTextMessage(playerid, number, const text[])
{
	foreach (new i : Player)
	{
		if (number != 0 && PlayerData[i][pPhone] == number)
		{
			if (PlayerData[i][pTogglePhone])
			{
				return SendErrorMessage(playerid, "That player's phone is turned off.");
			}
			else
			{
				SendClientMessageEx(i, COLOR_YELLOW, "* Text from %i: %s", PlayerData[playerid][pPhone], text);
				SendClientMessageEx(playerid, COLOR_YELLOW, "* Text to %i: %s",  number, text);
				return 1;
			}
		}
	}
	return SendErrorMessage(playerid, "The specified number is not in service.");
}
CallPayphone(playerid, payphone)
{
	foreach (new i : Player)
	{
		if (IsPlayerNearPoint(i, 20.0, Payphones[payphone][phX], Payphones[payphone][phY], Payphones[payphone][phZ], Payphones[payphone][phInterior], Payphones[payphone][phWorld]))
		{
			SendClientMessage(i, COLOR_PURPLE, "* The payphone is ringing. (( /answer ))");
		}
	}

	Payphones[payphone][phCaller] = playerid;

	UpdatePayphoneText(payphone);
}

AssignPayphone(playerid, payphone)
{
	if (IsValidPayphoneID(payphone))
	{
		PlayerData[playerid][pPayphone] = payphone;

		Payphones[payphone][phOccupied] = true;
		Payphones[payphone][phCaller] = INVALID_PLAYER_ID;

		UpdatePayphoneText(payphone);
	}
}

UpdatePayphoneText(id)
{
	new
		string[64];

	if (!Payphones[id][phExists]) return 0;

	if (IsPlayerConnected(Payphones[id][phCaller])) {
		format(string, sizeof(string), "ID: %i\nNumber: %i\n{FF0000}Ringing (/answer)", id, Payphones[id][phNumber]);
	}
	else if (Payphones[id][phOccupied]) {
		format(string, sizeof(string), "ID: %i\nNumber: %i\n{FF5030}Occupied", id, Payphones[id][phNumber]);
	}
	else {
		format(string, sizeof(string), "ID: %i\nNumber: %i\n{00ff00}Available (/call)", id, Payphones[id][phNumber]);
	}

	UpdateDynamic3DTextLabelText(Payphones[id][phText], COLOR_GREY, string);
	return 1;
}

UpdatePayphone(id)
{
	if (!Payphones[id][phExists]) return 0;

	DestroyDynamicObject(Payphones[id][phObject]);
	DestroyDynamic3DTextLabel(Payphones[id][phText]);

	Payphones[id][phObject] = CreateDynamicObject(1216, Payphones[id][phX], Payphones[id][phY], Payphones[id][phZ], 0.0, 0.0, Payphones[id][phA], Payphones[id][phWorld], Payphones[id][phInterior]);
	Payphones[id][phText] = CreateDynamic3DTextLabel("Payphone", COLOR_GREY, Payphones[id][phX], Payphones[id][phY], Payphones[id][phZ] + 0.5, 5.0, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 0, Payphones[id][phWorld], Payphones[id][phInterior]);

	UpdatePayphoneText(id);
	return 1;
}
CallNumber(playerid, number, payphone = -1)
{
	if (PlayerData[playerid][pCalling] > 0)
	{
		return SendErrorMessage(playerid, "You are already on a call.");
	}
	else if (PlayerData[playerid][pPhone] == number)
	{
		return SendErrorMessage(playerid, "You can't dial your own number.");
	}
	else
	{
		new targetid = GetPhonePlayerID(number);

		if (IsValidPayphoneID(payphone))
		{
			ShowActionBubble(playerid, "* %s inserts a coin and picks up the payphone.", GetRPName(playerid));
			AssignPayphone(playerid, payphone);
		}
		else
		{
			ShowActionBubble(playerid, "* %s takes out their phone and dials a number.", GetRPName(playerid));
		}

		if (IsPlayerConnected(targetid))
		{
			if (PlayerData[targetid][pTogglePhone])
			{
				return SendClientMessage(playerid, COLOR_GREY, "* The phone is switched off. The number would automatically forward to voicemail. *");
			}
			else if (PlayerData[targetid][pCalling] > 0)
			{
				return SendClientMessage(playerid, COLOR_GREY, "* The other line is currently busy. *");
			}
			else
			{
				PlayerData[playerid][pCalling] = 1;
				PlayerData[playerid][pCaller] = targetid;

				PlayerData[targetid][pCalling] = 1;
				PlayerData[targetid][pCaller] = playerid;

				if (IsValidPayphoneID(payphone))
				{
					SendInfoMessage(targetid, "Payphone (%i) is attempting to call you (use /answer to answer).", Payphones[payphone][phNumber]);
				}
				else
				{
					SendInfoMessage(targetid, "Number %i is attempting to call you (use /answer to answer).", PlayerData[playerid][pPhone]);
				}
				ShowActionBubble(targetid, "* %s's phone starts to ring.", GetRPName(targetid));
				HandlePhoneRing(targetid);
			}
		}
		else
		{
			new id = GetPhonePayphoneID(number);

			if (IsValidPayphoneID(id) && !Payphones[id][phOccupied])
			{
				CallPayphone(playerid, id);
			}
			else
			{
				SetTimerEx("OnPhoneResponse", 3000, false, "ii", playerid, number);
			}
			PlayerData[playerid][pCalling] = 1;
		}

		SetPlayerCellphoneAction(playerid, true);
		HandlePhoneDial(playerid);

		SendInfoMessage(playerid, "You have dialed number: %i. Please wait for a connection...", number);
		PlayerPlaySound(playerid, 16001, 0.0, 0.0, 0.0);
	}
	return 1;
}

ListContacts(playerid)
{
	if (PlayerData[playerid][pPhone] > 0)
	{
		mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "SELECT * FROM `rp_contacts` WHERE Phone = %i", PlayerData[playerid][pPhone]);
		mysql_tquery(connectionID, queryBuffer, "OnPlayerListContacts", "i", playerid);
	}
}

OpenPhone(playerid)
{
	new strHead[128];
	if (PlayerData[playerid][pPhone] > 0)
	{
		format(strHead,sizeof(strHead),"{FFFFFF}Phone: %i",PlayerData[playerid][pPhone]);
		Dialog_Show(playerid, PhoneMenu, DIALOG_STYLE_LIST, strHead, "Call a number\nSend a message\nContact list\nMusic\nBank\nSettings", "Select", "Cancel");
	}
}
forward OnPlayerTextPlayer(playerid, text[]);
public OnPlayerTextPlayer(playerid, text[])
{
	new
		contact[MAX_PLAYER_NAME];
	new rows, fields;
	cache_get_data(rows, fields, connectionID);
	if (!rows)
	{
		return SendErrorMessage(playerid, "You don't have that name in your contacts");
	}
	else
	{
		new
			number;
		number = cache_get_field_content_int(0, "Number");
		cache_get_field_content(0, "Contact", contact);
		SendTextMessage(playerid, number, text);
	}
	return 1;
}

forward OnPlayerCallContact(playerid);
public OnPlayerCallContact(playerid)
{
	new
		contact[MAX_PLAYER_NAME];
	new rows, fields;
	cache_get_data(rows, fields, connectionID);

	if (!rows)
	{
		return SendErrorMessage(playerid, "You don't have that name in your contacts");
	}
	else
	{
		new
			number;
		number = cache_get_field_content_int(0, "Number");
		cache_get_field_content(0, "Contact", contact);
		CallNumber(playerid, number);
	}
	return 1;
}//Dialog_Show(playerid, PhoneSMStext, DIALOG_STYLE_INPUT, strHead, "Please type your message:", "Send", "Cancel");

forward OnPlayerTextContact(playerid);
public OnPlayerTextContact(playerid)
{
	new
		contact[MAX_PLAYER_NAME];

	new rows, fields;
	cache_get_data(rows, fields, connectionID);

	if (!rows)
	{
		return 0;
	}
	else
	{
		new
			number;

		number = cache_get_field_content_int(0, "Number");
		cache_get_field_content(0, "Contact", contact);

		PlayerData[playerid][pPhoneSMS] = number;

		new strHead[64];
		format(strHead, sizeof(strHead), "{FFFFFF}SMS to %i", number);

		Dialog_Show(playerid, PhoneSMStext, DIALOG_STYLE_INPUT, strHead, "Please type your message:", "Send", "Cancel");
	}
	return 1;
}

forward OnPlayerListContacts(playerid);
public OnPlayerListContacts(playerid)
{
	new
		contact[MAX_PLAYER_NAME],
		string[1024],
		number;

	new rows, fields;
	cache_get_data(rows, fields, connectionID);
	strcat(string, "Add Contact");

	for (new i = 0; i < rows; i ++)
	{
		cache_get_field_content(i, "Contact", contact);
		number = cache_get_field_content_int(i, "Number");
		format(string, sizeof(string), "%s\n%s (%i)", string, contact, number);

		gListedItems[playerid][i] = cache_get_field_content_int(i, "ID");
	}
	Dialog_Show(playerid, Contacts, DIALOG_STYLE_LIST, "{FFFFFF}My contacts", string, "Select", "Cancel");
}





publish GivePlayerCash(playerid, amount)
{
	if(PlayerData[playerid][pLogged])
	{
		PlayerData[playerid][pCash] = PlayerData[playerid][pCash] + amount;
		if(amount < 0)
		{
		    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET money_spent = money_spent + %i WHERE uid = %i", -amount, PlayerData[playerid][pID]);
		    mysql_tquery(connectionID, queryBuffer);

		    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "SELECT uid FROM "#TABLE_USERS" WHERE uid = %i AND money_spent >= 500000", PlayerData[playerid][pID]);
		    mysql_tquery(connectionID, queryBuffer, "OnPlayerCheckRich", "i", playerid);
		}
		else if(amount > 0)
		{
		    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET money_earned = money_earned + %i WHERE uid = %i", amount, PlayerData[playerid][pID]);
		    mysql_tquery(connectionID, queryBuffer);

		    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "SELECT uid FROM "#TABLE_USERS" WHERE uid = %i AND money_earned >= 500000", PlayerData[playerid][pID]);
		    mysql_tquery(connectionID, queryBuffer, "OnPlayerCheckHighRoller", "i", playerid);
		}

		mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET cash = cash + %i WHERE uid = %i", amount, PlayerData[playerid][pID]);
		mysql_tquery(connectionID, queryBuffer);
	}
	return 1;
}



forward IsPlayerLoggedIn(playerid);
public IsPlayerLoggedIn(playerid)
{
	return PlayerData[playerid][pLogged];
}

forward IsPlayerScripter(playerid);
public IsPlayerScripter(playerid)
{
	return PlayerData[playerid][pDeveloper];
}

forward IsPlayerFormerAdmin(playerid);
public IsPlayerFormerAdmin(playerid)
{
	return PlayerData[playerid][pFormerAdmin];
}

forward IsPlayerAdminLevel(playerid, level);
public IsPlayerAdminLevel(playerid, level)
{
	return PlayerData[playerid][pAdmin] >= level;
}

forward IsPlayerInFaction(playerid, type);
public IsPlayerInFaction(playerid, type)
{
	return GetPlayerFaction(playerid) == type;
}

forward GetPlayerData(playerid, pEnum:var);
public GetPlayerData(playerid, pEnum:var)
{
	return PlayerData[playerid][var];
}

forward SetPlayerData(playerid, pEnum:var, amount);
public SetPlayerData(playerid, pEnum:var, amount)
{
	PlayerData[playerid][var] = amount;
}

forward GetPlayerUID(playerid);
public GetPlayerUID(playerid)
{
	return PlayerData[playerid][pID];
}

forward mysql_connection_handle(type);
public mysql_connection_handle(type)
{
	if(type == 0)
		return connectionID;
	else if(type == 1)
		return connectionID;

	return 0;
}

// ---------------------------------------



// ---------------------------------------

FriskPlayer(playerid, targetid)
{
	SendClientMessageEx(playerid, COLOR_NAVYBLUE, "_____ %s's Items _____", GetRPName(targetid));

	if(PlayerData[targetid][pCash] < 100000)
	{
	    SendClientMessageEx(playerid, COLOR_GREY2, "Cash: $%i", PlayerData[targetid][pCash]);
	}
	else
	{
	    SendClientMessage(playerid, COLOR_GREY2, "Cash: $100000+");
	}

	if(PlayerData[targetid][pPhone])
	{
	    SendClientMessage(playerid, COLOR_GREY2, "Mobile phone");
	}
	if(PlayerData[targetid][pPrivateRadio])
	{
	    SendClientMessage(playerid, COLOR_GREY2, "Private radio");
	}
    if(PlayerData[targetid][pSpraycans])
	{
	    SendClientMessageEx(playerid, COLOR_GREY2, "Spraycans (%i)", PlayerData[targetid][pSpraycans]);
	}
	if(PlayerData[targetid][pBoombox])
	{
	    SendClientMessage(playerid, COLOR_GREY2, "Boombox");
	}
	if(PlayerData[targetid][pMP3Player])
	{
	    SendClientMessage(playerid, COLOR_GREY2, "MP3 player");
	}
	if(PlayerData[targetid][pPhonebook])
	{
	    SendClientMessage(playerid, COLOR_GREY2, "Phonebook");
	}
	if(PlayerData[targetid][pPoliceScanner])
	{
	    SendClientMessage(playerid, COLOR_GREY2, "Police scanner");
	}
	if(PlayerData[targetid][pMaterials] > 0)
	{
	    SendClientMessageEx(playerid, COLOR_GREY2, "Materials (%i)", PlayerData[targetid][pMaterials]);
	}
	if(PlayerData[targetid][pFirstAid] > 0)
	{
	    SendClientMessageEx(playerid, COLOR_GREY2, "First aid (%i)", PlayerData[targetid][pFirstAid]);
	}
	if(PlayerData[targetid][pBodykits] > 0)
	{
	    SendClientMessageEx(playerid, COLOR_GREY2, "Bodywork kits (%i)", PlayerData[targetid][pBodykits]);
	}
	if(PlayerData[targetid][pRimkits] > 0)
	{
	    SendClientMessageEx(playerid, COLOR_GREY2, "Rimkits (%i)", PlayerData[targetid][pRimkits]);
	}
    if(PlayerData[targetid][pWeed])
	{
	    SendClientMessageEx(playerid, COLOR_RED, "Weed (%ig)", PlayerData[targetid][pWeed]);
	}
	if(PlayerData[targetid][pCocaine])
	{
	    SendClientMessageEx(playerid, COLOR_RED, "Crack (%ig)", PlayerData[targetid][pCocaine]);
	}
	if(PlayerData[targetid][pHeroin])
	{
	    SendClientMessageEx(playerid, COLOR_RED, "Heroin (%ig)", PlayerData[targetid][pHeroin]);
	}
	if(PlayerData[targetid][pPainkillers])
	{
	    SendClientMessageEx(playerid, COLOR_RED, "Painkillers (%i)", PlayerData[targetid][pPainkillers]);
	}
	if(PlayerData[targetid][pSeeds])
	{
	    SendClientMessageEx(playerid, COLOR_RED, "Marijuana seeds (%i)", PlayerData[targetid][pSeeds]);
	}
	if(PlayerData[targetid][pEphedrine])
	{
	    SendClientMessageEx(playerid, COLOR_RED, "Chems (%i)", PlayerData[targetid][pEphedrine]);
	}
	switch(PlayerData[targetid][pSmuggleDrugs])
	{
	    case 1: SendClientMessageEx(playerid, COLOR_RED, "Seeds package");
	    case 2: SendClientMessageEx(playerid, COLOR_RED, "Crack package");
	    case 3: SendClientMessageEx(playerid, COLOR_RED, "Chems package");
	}

	for(new i = 0; i < 13; i ++)
	{
	    if(PlayerData[targetid][pWeapons][i] > 0)
	    {
	        SendClientMessageEx(playerid, COLOR_RED, "%s", GetWeaponNameEx(PlayerData[targetid][pWeapons][i]));
		}
	}

    ShowActionBubble(playerid, "* %s searches for illegal items on %s.", GetRPName(playerid), GetRPName(targetid));
}

GetHospitalName(type)
{
    new hospital[32];
    switch (type)
    {
        case HOSPITAL_ALLSAINTS:  strcat(hospital, "All Saints General");
        case HOSPITAL_COUNTY:     strcat(hospital, "County General");
        case HOSPITAL_FMDHQ:      strcat(hospital, "FMD HQ");
        case HOSPITAL_VIPLOUNGE:  strcat(hospital, "VIP Lounge");
        case HOSPITAL_SAN_FIERRO: strcat(hospital, "Saint Fierro");
        default:                  strcat(hospital, "None");
    }
    return hospital;
}

GetWantedLevel(playerid)
{
    return PlayerData[playerid][pWantedLevel];
}

stock GetPlayerWarnings(playerid)
{
    return PlayerData[playerid][pWarnings];
}

GetPlayerJailTypeStr(playerid)
{
    new jailtype[32];
	switch(PlayerData[playerid][pJailType])
	{
		case 0:  jailtype = "None";
	    case 1:  jailtype = "OOC jailed";
		case 2:  jailtype = "OOC prisoned";
		case 3:  jailtype = "IC prisoned";
		default: jailtype = "Unknown";
	}
    return jailtype;
}

stock GetPlayerReportWarns(playerid)
{
    return PlayerData[playerid][pReportWarns];
}

DisplayStats(playerid, targetid = INVALID_PLAYER_ID)
{
    if (targetid == INVALID_PLAYER_ID) targetid = playerid;
    new name[24];
    new faction[48];
    new facrank[32];
    new gang[32];
    new gangrank[32];
    new gangcrew[32];
    new division[32];
    new insurance[32];
    new Float:health;
    new Float:armor;
    new job[32];
    new secondjob[32];

    if (playerid == MAX_PLAYERS)
    {
        strcpy(name, PlayerData[playerid][pUsername]);
    }
    else
    {
        strcat(name, GetRPName(playerid));
    }

    insurance = GetHospitalName(PlayerData[playerid][pInsurance]);

    if (PlayerData[playerid][pFaction] >= 0)
    {
        if (!strcmp(FactionInfo[PlayerData[playerid][pFaction]][fShortName], "None", true))
        {
            strcpy(faction, FactionInfo[PlayerData[playerid][pFaction]][fName]);
        }
        else
        {
            strcpy(faction, FactionInfo[PlayerData[playerid][pFaction]][fShortName]);
        }

        format(facrank, sizeof(facrank), "%s (%i)", FactionRanks[PlayerData[playerid][pFaction]][PlayerData[playerid][pFactionRank]], PlayerData[playerid][pFactionRank]);

        if (PlayerData[playerid][pDivision] >= 0)
        {
            strcpy(division, FactionDivisions[PlayerData[playerid][pFaction]][PlayerData[playerid][pDivision]]);
        }
        else
        {
            division = "None";
        }
    }
    else
    {
        faction = "None";
        facrank = "N/A";
        division = "None";
    }

    if (PlayerData[playerid][pGang] >= 0)
    {
        strcpy(gang, GangInfo[PlayerData[playerid][pGang]][gName]);
        format(gangrank, sizeof(gangrank), "%s (%i)", GangRanks[PlayerData[playerid][pGang]][PlayerData[playerid][pGangRank]], PlayerData[playerid][pGangRank]);
        if (PlayerData[playerid][pCrew] >= 0)
        {
            strcpy(gangcrew, GangCrews[PlayerData[playerid][pGang]][PlayerData[playerid][pCrew]]);
        }
        else
        {
            gangcrew = "None";
        }
    }
    else
    {
        gang = "None";
        gangrank = "N/A";
        gangcrew = "None";
    }

    if (playerid == MAX_PLAYERS)
    {
        health = PlayerData[playerid][pHealth];
        armor = PlayerData[playerid][pArmor];
    }
    else
    {
        GetPlayerHealth(playerid, health);
        GetPlayerArmour(playerid, armor);
    }

    if (PlayerData[playerid][pJob] != JOB_NONE)
    {
        format(job, sizeof(job), "%s (%i)", GetJobName(PlayerData[playerid][pJob]), GetJobLevel(playerid, PlayerData[playerid][pJob]));
    }
    else
    {
        job = "None";
    }

    if (PlayerData[playerid][pSecondJob] != JOB_NONE)
    {
        format(secondjob, sizeof(secondjob), "%s (%i)", GetJobName(PlayerData[playerid][pSecondJob]), GetJobLevel(playerid, PlayerData[playerid][pSecondJob]));
    }
    else
    {
        secondjob = "None";
    }
    new totalwealth = PlayerData[playerid][pCash] + PlayerData[playerid][pBank];

    foreach(new i : House)
    {
        if (HouseInfo[i][hExists] && PlayerData[playerid][pID] == HouseInfo[i][hOwnerID])
        {
            totalwealth += HouseInfo[i][hCash];
        }
    }

    foreach(new i : Business)
    {
        if (BusinessInfo[i][bExists] && PlayerData[playerid][pID] == BusinessInfo[i][bOwnerID])
        {
            totalwealth += BusinessInfo[i][bCash];
        }
    }

    new title[256];
    format(title, sizeof(title), "{FF9900}%s - %s [%s]", GetDateTime(), name, GetPlayerSerialNumber(playerid));

    new content[4096];
    format(content, sizeof(content), "{FFFFFF}Level: {33CCFF}%i{FFFFFF} - XP: {33CCFF}%s/%s{FFFFFF}"\
                                     " - Next level cost: {33CCFF}%s{FFFFFF} - Hours: {33CCFF}%s{FFFFFF} - Double XP: {33CCFF}%i",
           PlayerData[playerid][pLevel], FormatNumber(PlayerData[playerid][pEXP]),
           FormatNumber((PlayerData[playerid][pLevel] * 4)), FormatCash((PlayerData[playerid][pLevel] + 1) * 5000),
           FormatNumber(PlayerData[playerid][pHours]), PlayerData[playerid][pDoubleXP]);
    format(content, sizeof(content), "%s\n{FFFFFF}Age:{33CCFF} %i (%s) {FFFFFF}- Cookies:{33CCFF} %s {FFFFFF}- Phone:{33CCFF} %i {FFFFFF}- Radio:{33CCFF} %i Khz {FFFFFF}- Married To: {33CCFF}%s",
           content, PlayerData[playerid][pAge], GetPlayerGenderStr(playerid), FormatNumber(GetPlayerCookies(playerid)),
           PlayerData[playerid][pPhone], PlayerData[playerid][pChannel], PlayerData[playerid][pMarriedName]);
    format(content, sizeof(content), "%s\n{FFFFFF}Total Wealth:{33CCFF} %s (Cash %s, Bank %s) {FFFFFF}\nPaycheck:{33CCFF} %s (Playing Time: %i/60 min)",
           content, FormatCash(totalwealth), FormatCash(PlayerData[playerid][pCash]), FormatCash(PlayerData[playerid][pBank]),
           FormatCash(PlayerData[playerid][pPaycheck]), PlayerData[playerid][pMinutes]);

    format(content, sizeof(content), "%s\n\n{FFFFFF}Insured:{33CCFF} %s {FFFFFF}- HP:{33CCFF} %.0f (Spawn: %.0f) {FFFFFF}- Armor:{33CCFF} %.0f (Spawn: %.0f)",
           content, insurance, health, PlayerData[playerid][pSpawnHealth], armor, PlayerData[playerid][pSpawnArmor]);

    format(content, sizeof(content), "%s\n{FFFFFF}WantedLevel:{33CCFF} %d {FFFFFF}- Notoriety:{33CCFF} %s {FFFFFF}- Crimes:{33CCFF} %s {FFFFFF}- Arrests:{33CCFF} %s",
           content, GetWantedLevel(playerid), FormatNumber(PlayerData[playerid][pNotoriety]),
           FormatNumber(PlayerData[playerid][pCrimes]), FormatNumber(PlayerData[playerid][pArrested]));


    format(content, sizeof(content), "%s\n\n{FFFFFF}Jobs:{33CCFF} %s, %s", content, job, secondjob);
    if (PlayerData[playerid][pGang] >= 0 && PlayerData[playerid][pFaction] >= 0)
    {
        format(content, sizeof(content), "%s\n{FFFFFF}Membership:{00FF00} %s %s (Crew: %s) {FFFFFF}-{0000FF} %s %s (Division: %s)",
            content, gang, gangrank, gangcrew, faction, facrank, division);
    }
    else if (PlayerData[playerid][pGang] >= 0)
    {
        format(content, sizeof(content), "%s\n{FFFFFF}Membership:{00FF00} %s %s (Crew: %s)",
            content, gang, gangrank, gangcrew);
    }
    else if (PlayerData[playerid][pFaction] >= 0)
    {
        format(content, sizeof(content), "%s\n{FFFFFF}Membership:{0000FF} %s %s (Division: %s)",
            content, faction, facrank, division);
    }
    else
    {
        format(content, sizeof(content), "%s\n{FFFFFF}Membership:{C8C8C8} None", content);
    }
    format(content, sizeof(content), "%s\n{FFFFFF}Donator: %s ", content, GetVIPRankEx(PlayerData[playerid][pDonator]));
    if (PlayerData[playerid][pDonator])
    {
        format(content, sizeof(content), "%s\n{FFFFFF}- Exipry Date: {33CCFF}%s",
               content, TimestampToString(PlayerData[playerid][pVIPTime], 4));

        new time = PlayerData[playerid][pVIPCooldown] - gettime();
        if (time > 3600)
        {
            format(content, sizeof(content), "%s {FFFFFF}- Invite:{C8C8C8} available after %i hour(s).", time / 3600);
        }
        else if (time > 0)
        {
            format(content, sizeof(content), "%s {FFFFFF}- Invite:{C8C8C8} available after %i minute(s).", time / 60);
        }
        else
        {
            format(content, sizeof(content), "%s {FFFFFF}- Invite:{00FF00} Ready", content);
        }
    }

    format(content, sizeof(content), "%s\n\n{FFFFFF}Upgrade points:{33CCFF} %i {FFFFFF}- Drug Addict:{33CCFF} %i/3 {FFFFFF}- Trader Skill:{33CCFF} %i/3",
           content, PlayerData[playerid][pUpgradePoints], PlayerData[playerid][pAddictUpgrade], PlayerData[playerid][pTraderUpgrade]);
    format(content, sizeof(content), "%s\n{FFFFFF}Asset Skill:{33CCFF} %i/4  {FFFFFF}- Labor Skill:{33CCFF} %i/5 {FFFFFF}- Inventory Skill:{33CCFF} %i/5",
           content, PlayerData[playerid][pAssetUpgrade], PlayerData[playerid][pLaborUpgrade], PlayerData[playerid][pInventoryUpgrade]);

    format(content, sizeof(content), "%s\n\n{FFFFFF}Warnings:{33CCFF} %i {FFFFFF}- DM Warns:{33CCFF} %i {FFFFFF}- Report warns:{33CCFF} %i {FFFFFF}- Weapon Restricted:{33CCFF} %i hours",
           content, GetPlayerWarnings(playerid), PlayerData[playerid][pDMWarnings],
           GetPlayerReportWarns(playerid), PlayerData[playerid][pWeaponRestricted]);
    if (IsAdmin(targetid) && playerid != MAX_PLAYERS)
    {
        new interior = (playerid == MAX_PLAYERS) ? (PlayerData[playerid][pInterior]) : (GetPlayerInterior(playerid));
        new vw = (playerid == MAX_PLAYERS) ? (PlayerData[playerid][pWorld]) : (GetPlayerVirtualWorld(playerid));
        new fps = (playerid == MAX_PLAYERS) ? (0) : (PlayerData[playerid][pFPS]);

        format(content, sizeof(content), "%s\n{FFFFFF}Interior:{33CCFF} %i {FFFFFF}- Virtual:{33CCFF} %i {FFFFFF}- FPS:{33CCFF} %i {FFFFFF}- AFK:{33CCFF} %s {FFFFFF}- Jail:{33CCFF} %s (%s sec)",
               content, interior, vw, fps, (playerid != MAX_PLAYERS && IsPlayerAFK(playerid) ? ("Yes") : ("No")),
               GetPlayerJailTypeStr(playerid), FormatNumber(PlayerData[playerid][pJailTime]));

        format(content, sizeof(content), "%s\n{FFFFFF}Reports:{33CCFF} %s {FFFFFF}- Help Requests:{33CCFF} %s {FFFFFF}- Newbie Replies:{33CCFF} %s",
               content, FormatNumber(PlayerData[playerid][pReports]), FormatNumber(PlayerData[playerid][pHelpRequests]),
               FormatNumber(PlayerData[playerid][pNewbies]));
    }
    else if (PlayerData[playerid][pJailType] != 0)
    {
        format(content, sizeof(content), "%s\n{FFFFFF}Jail:{33CCFF} %s (%s sec)",
               content, GetPlayerJailTypeStr(playerid), FormatNumber(PlayerData[playerid][pJailTime]));
    }

    Dialog_Show(targetid, 0 , DIALOG_STYLE_MSGBOX, title, content, "Ok", "");
}

DisplayInventory(playerid, targetid = INVALID_PLAYER_ID)
{
    new string[800];
	if(targetid == INVALID_PLAYER_ID) targetid = playerid;

	SendClientMessageEx(targetid, COLOR_DARKGREEN, "___________________________________________________________________________________");

	format(string, sizeof(string), "{008080}Inventory of: {FFFFFF}%s {008080}| Time: {FFFFFF}%s", GetPlayerNameEx(playerid), GetDateTime(0));
	SendClientMessageEx(targetid, COLOR_WHITE, string);

	format(string, sizeof(string), "Weed: %i/%ig | Crack: %i/%ig | Heroin: %i/%ig | Painkillers: %i/%i | Seeds: %i/%i", PlayerData[playerid][pWeed], GetPlayerCapacity(playerid, CAPACITY_WEED),
        PlayerData[playerid][pCocaine], GetPlayerCapacity(playerid, CAPACITY_COCAINE), PlayerData[playerid][pHeroin], GetPlayerCapacity(playerid, CAPACITY_HEROIN), PlayerData[playerid][pPainkillers], GetPlayerCapacity(playerid, CAPACITY_PAINKILLERS), PlayerData[playerid][pSeeds], GetPlayerCapacity(playerid, CAPACITY_SEEDS));
	SendClientMessageEx(targetid, COLOR_WHITE, string);

	format(string, sizeof(string), "{008080}Materials: %s/%s | Chemicals: %i/%ig | Muriatic acid: %i/10 | Baking soda: %i/3", FormatNumber(PlayerData[playerid][pMaterials]), FormatNumber(GetPlayerCapacity(playerid, CAPACITY_MATERIALS)),
		PlayerData[playerid][pEphedrine], GetPlayerCapacity(playerid, CAPACITY_EPHEDRINE), PlayerData[playerid][pMuriaticAcid], PlayerData[playerid][pBakingSoda]);
	SendClientMessageEx(targetid, COLOR_WHITE, string);

	format(string, sizeof(string), "Fishing rod: %s | Fish bait: %i/20 | Boombox: %s | MP3 player: %s | Phonebook: %s", (PlayerData[playerid][pFishingRod]) ? ("Yes") : ("No"), PlayerData[playerid][pFishingBait], (PlayerData[playerid][pBoombox]) ? ("Yes") : ("No"), (PlayerData[playerid][pMP3Player]) ? ("Yes") : ("No"), (PlayerData[playerid][pPhonebook]) ? ("Yes") : ("No"));
	SendClientMessageEx(targetid, COLOR_WHITE, string);

	format(string, sizeof(string), "{008080}Drivers license: %s | Cigars: %s | Spraycans: %i/20 | Bombs: %i/3", (PlayerData[playerid][pCarLicense]) ? ("Yes") : ("No"), FormatNumber(PlayerData[playerid][pCigars]), PlayerData[playerid][pSpraycans], PlayerData[playerid][pBombs]);
	SendClientMessageEx(targetid, COLOR_WHITE, string);

	format(string, sizeof(string), "Private Radio: %s | Mobile phone: %s | First aid kits: %i/20 | Police scanner: %s", (PlayerData[playerid][pPrivateRadio]) ? ("Yes") : ("No"), (PlayerData[playerid][pPhone]) ? ("Yes") : ("No"), PlayerData[playerid][pFirstAid], (PlayerData[playerid][pPoliceScanner]) ? ("Yes") : ("No"));
	SendClientMessageEx(targetid, COLOR_WHITE, string);

	format(string, sizeof(string), "{008080}Gasoline: %i/%iL | Bodykits: %i/10 | Rimkits: %i/5 | Rope: %i/10 | Watch: %s | GPS: %s", PlayerData[playerid][pGasCan], GetPlayerCapacity(playerid, CAPACITY_GAZCAN), PlayerData[playerid][pBodykits], PlayerData[playerid][pRimkits], PlayerData[playerid][pRope], (PlayerData[playerid][pWatch]) ? ("Yes") : ("No"), (PlayerData[playerid][pGPS]) ? ("Yes") : ("No"));
	SendClientMessageEx(targetid, COLOR_WHITE, string);

	format(string, sizeof(string), "Diamond: %s | Skates: %s | Crowbar: %i/5", FormatNumber(PlayerData[playerid][pDiamonds]),  (PlayerData[playerid][pSkates]) ? ("Yes") : ("No"), PlayerData[playerid][pCrowbar]);
	SendClientMessageEx(targetid, COLOR_WHITE, string);

	SendClientMessageEx(targetid, COLOR_DARKGREEN, "___________________________________________________________________________________");
	return 1;
}


ShowDialogToPlayer(playerid, dialogid)
{
	new string[4096];

	switch(dialogid)
	{
	    case DIALOG_SETTINGS2:
	    {
			format(string, sizeof(string), "Info\tStatus\n" \
				"PM\t%s\n" \
		        "VIP\t%s\n" \
		        "Faction\t%s\n" \
		        "Gang\t%s\n" \
		        "Spawn Camera\t%s\n" \
		        "HUD\t%s\n" \
				"Vehicle Camera\t%s\n" \
		        "<< Back",
		        (PlayerData[playerid][pTogglePM]== 1) ? ("{ff0000}Off") : ("{00FF00}On"),
		        (PlayerData[playerid][pToggleVIP]== 1) ? ("{ff0000}Off") : ("{00FF00}On"),
		        (PlayerData[playerid][pToggleFaction]== 1) ? ("{ff0000}Off") : ("{00FF00}On"),
		        (PlayerData[playerid][pToggleGang]== 1) ? ("{ff0000}Off") : ("{00FF00}On"),
		        (PlayerData[playerid][pToggleCam]== 1) ? ("{ff0000}Off") : ("{00FF00}On"),
		        (PlayerData[playerid][pToggleHUD]== 1) ? ("{ff0000}Off") : ("{00FF00}On"),
				(PlayerData[playerid][pToggleVehCam] == 1) ? ("{ff0000}Off") : ("{00FF00}On"));
			Dialog_Show(playerid, DIALOG_SETTINGS2, DIALOG_STYLE_TABLIST_HEADERS, "Settings", string, "Tog", "Close");

	    }
		case DIALOG_SETTINGS:
		{
			format(string, sizeof(string), "Info\tStatus\n" \
				"Textdraws\t%s\n" \
		        "OOC\t%s\n" \
		        "Global\t%s\n" \
		        "Phone\t%s\n" \
		        "Whisper\t%s\n" \
		        "Newbie\t%s\n" \
		        "PrivateRadio\t%s\n" \
		        "Radio\t%s\n" \
		        "Streams\t%s\n" \
		        "News\t%s\n" \
		        "Next >>",
		        (PlayerData[playerid][pToggleTextdraws]== 1) ? ("{ff0000}Off") : ("{00FF00}On"),
		        (PlayerData[playerid][pToggleOOC]== 1) ? ("{ff0000}Off") : ("{00FF00}On"),
		        (PlayerData[playerid][pToggleGlobal]== 1) ? ("{ff0000}Off") : ("{00FF00}On"),
		        (PlayerData[playerid][pTogglePhone]== 1) ? ("{ff0000}Off") : ("{00FF00}On"),
		        (PlayerData[playerid][pToggleWhisper]== 1) ? ("{ff0000}Off") : ("{00FF00}On"),
		        (PlayerData[playerid][pToggleNewbie]== 1) ? ("{ff0000}Off") : ("{00FF00}On"),
		        (PlayerData[playerid][pTogglePR]== 1) ? ("{ff0000}Off") : ("{00FF00}On"),
		        (PlayerData[playerid][pToggleRadio]== 1) ? ("{ff0000}Off") : ("{00FF00}On"),
		        (PlayerData[playerid][pToggleMusic]== 1) ? ("{ff0000}Off") : ("{00FF00}On"),
		        (PlayerData[playerid][pToggleNews]== 1) ? ("{ff0000}Off") : ("{00FF00}On"));
			Dialog_Show(playerid, DIALOG_SETTINGS, DIALOG_STYLE_TABLIST_HEADERS, "Settings", string, "Tog", "Close");
		}
		case DIALOG_POST_APPLICATION:
		{
	 		format(string, sizeof(string), "Name:\n\
											Date of Birth:\n\
											Are you male or female:\n\
											Where are you from:\n\
											Where do you currently live:\n\
											Experience((150 words)):\n\
											Why do you want to join((150 words)):\n");
			Dialog_Show(playerid, DIALOG_POST_APPLICATION, DIALOG_STYLE_LIST, "PD Application ((IC))", string, "Submit", "Cancel");
		}
		case DIALOG_HELP:
		{
		    Dialog_Show(playerid, DIALOG_HELP, DIALOG_STYLE_LIST, "List of Commands", "Chat\nGeneral\nUpgrades\nOthers\nGang\nFaction\nVIP\nJob", "Select", "Close");
		}
	    case DIALOG_STATS:
	    {
	        Dialog_Show(playerid, DIALOG_STATS, DIALOG_STYLE_LIST, "My Statistics", "Stats\nInventory", "Select", "Cancel");
		}
		case DIALOG_FOOD:
		{
			format(string, sizeof(string), "Sprunk ($50)\nCigar($35)\nHot Dog($25)\nRope ($20)\nChocolate($15)");
			Dialog_Show(playerid, DIALOG_FOOD, DIALOG_STYLE_LIST, "Select an item", string, "Buy", "Cancel");
		}
	    case DIALOG_BUYVEHICLENEW:
	    {
	        Dialog_Show(playerid, DIALOG_BUYVEHICLENEW, DIALOG_STYLE_LIST, "Vehicle Menu", "Browse as Model\nBrowse as List", "Select", "");
		}
		case DIALOG_NEWBIE:
		{
			Dialog_Show(playerid, DIALOG_NEWBIE, DIALOG_STYLE_INPUT, "Ask Newbie Question", "Please input your question\nPlease bare in mind only script/server related questions will be answered.", "Send", "Cancel");
		}


		case DIALOG_ATM:
		{
		    format(string, sizeof(string), "What would you like to do today? (Your account balance is %s.)", FormatCash(PlayerData[playerid][pBank]));
	        Dialog_Show(playerid, DIALOG_ATM, DIALOG_STYLE_LIST, string, "Cash deposit\nCash withdraw", "Select", "Cancel");
		}
		case DIALOG_ATMDEPOSIT:
		{
		    format(string, sizeof(string), "How much would you like to deposit? (Your account balance is %s.)", FormatCash(PlayerData[playerid][pBank]));
	        Dialog_Show(playerid, DIALOG_ATMDEPOSIT, DIALOG_STYLE_INPUT, "ATM Deposit", string, "Select", "Cancel");
		}
		case DIALOG_ATMWITHDRAW:
		{
		    format(string, sizeof(string), "How much would you like to withdraw? (Your account balance is %s.)", FormatCash(PlayerData[playerid][pBank]));
	        Dialog_Show(playerid, DIALOG_ATMWITHDRAW, DIALOG_STYLE_INPUT, "ATM Withdraw", string, "Select", "Cancel");
		}
		case DIALOG_BUYCLOTHINGTYPE:
		{
		    Dialog_Show(playerid, DIALOG_BUYCLOTHINGTYPE, DIALOG_STYLE_LIST, "Choose a browsing method.", "Browse by Model\nBrowse by List", "Select", "Back");
		}
		case DIALOG_BUYCLOTHING:
		{
		    new index = -1;

            for(new i = 0; i < sizeof(clothingArray); i ++)
            {
                if(!strcmp(clothingArray[i][clothingType], clothingTypes[PlayerData[playerid][pCategory]]))
                {
                    if(index == -1)
                    {
                        index = i;
                    }

                    format(string, sizeof(string), "%s\n%s", string, clothingArray[i][clothingName]);
                }
            }

            PlayerData[playerid][pClothingIndex] = index;
            Dialog_Show(playerid, DIALOG_BUYCLOTHING, DIALOG_STYLE_LIST, "Choose an item in order to preview it.", string, "Select", "Back");
		}
		case DIALOG_BUYCLOTHES:
		{
			new businessid = GetInsideBusiness(playerid);

			if(businessid >= 0 && BusinessInfo[businessid][bType] == BUSINESS_CLOTHES)
			{
			    format(string, sizeof(string), "%s's %s [%i products]", BusinessInfo[businessid][bOwner], bizInteriors[BusinessInfo[businessid][bType]][intType], BusinessInfo[businessid][bProducts]);

				if(PlayerData[playerid][pDonator] > 0) {
					Dialog_Show(playerid, DIALOG_BUYCLOTHES, DIALOG_STYLE_INPUT, string, "NOTE: New clothes are free for VIP members.\n\nPlease input the ID of the skin you wish to purchase.\n(( List of skins: http://wiki.sa-mp.com/wiki/Skins:All ))", "Submit", "Cancel");
				} else {
					Dialog_Show(playerid, DIALOG_BUYCLOTHES, DIALOG_STYLE_INPUT, string, "NOTE: New clothes costs $2,000.\n\nPlease input the ID of the skin you wish to purchase.\n(( List of skins: http://wiki.sa-mp.com/wiki/Skins:All ))", "Submit", "Cancel");
				}
			}
		}

 		case DIALOG_FACTIONPAY1:
		{
		    string = "#\tRank\tPaycheck";

		    for(new i = 0; i < FactionInfo[PlayerData[playerid][pFactionEdit]][fRankCount]; i ++)
		    {
		        format(string, sizeof(string), "%s\n%i\t%s\t{00AA00}%s{FFFFFF}", string, i, FactionRanks[PlayerData[playerid][pFactionEdit]][i], FormatCash(FactionInfo[PlayerData[playerid][pFactionEdit]][fPaycheck][i]));
			}
			new header[128];
			format(header, sizeof(header), "%s - {FFD700}$%i available/$%i budget", FactionInfo[PlayerData[playerid][pFactionEdit]][fName], FormatCash(FactionInfo[PlayerData[playerid][pFactionEdit]][fBudget] - GetTotalFactionPay(PlayerData[playerid][pFactionEdit])), FormatCash(FactionInfo[PlayerData[playerid][pFactionEdit]][fBudget]));
			Dialog_Show(playerid, DIALOG_FACTIONPAY1, DIALOG_STYLE_TABLIST_HEADERS, header, string, "Change", "Cancel");
		}
		case DIALOG_PHONEBOOK:
		{
		    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "SELECT * FROM phonebook ORDER BY name ASC LIMIT %i, %i", (PlayerData[playerid][pPage] - 1) * MAX_LISTED_NUMBERS, MAX_LISTED_NUMBERS);
			mysql_tquery(connectionID, queryBuffer, "OnQueryFinished", "ii", THREAD_VIEW_PHONEBOOK, playerid);
		}
		case DIALOG_LANDBUILDTYPE:
		{
		    Dialog_Show(playerid, DIALOG_LANDBUILDTYPE, DIALOG_STYLE_LIST, "Choose your browsing method.", "Browse by Model\nBrowse by List", "Select", "Back");
		}
  		case DIALOG_LANDBUILD1:
		{
		    for(new i = 0; i < sizeof(landCategories); i ++)
		    {
		        format(string, sizeof(string), "%s\n%s", string, landCategories[i]);
		    }

		    Dialog_Show(playerid, DIALOG_LANDBUILD1, DIALOG_STYLE_LIST, "Choose a category to browse.", string, "Select", "Back");
		}
		case DIALOG_LANDBUILD2:
		{
		    new index = -1;

            for(new i = 0; i < sizeof(landArray); i ++)
            {
                if(!strcmp(landArray[i][fCategory], landCategories[PlayerData[playerid][pCategory]]))
                {
                    if(index == -1)
                    {
                        index = i;
                    }

                    format(string, sizeof(string), "%s\n%s (%s)", string, landArray[i][fName], FormatCash(landArray[i][fPrice]));
                }
            }

            PlayerData[playerid][pFurnitureIndex] = index;
            Dialog_Show(playerid, DIALOG_LANDBUILD2, DIALOG_STYLE_LIST, "Choose an item in order to preview it.", string, "Select", "Back");
		}
		case DIALOG_LANDMENU:
		{
		    new
		        landid = GetNearbyLand(playerid);

			mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "SELECT COUNT(*) FROM landobjects WHERE landid = %i", LandInfo[landid][lID]);
			mysql_tquery(connectionID, queryBuffer, "OnQueryFinished", "ii", THREAD_LAND_MAINMENU, playerid);
		}
		case DIALOG_LANDOBJECTMENU:
		{
	        if(IsGateObject(PlayerData[playerid][pSelected]))
	        {
		        Dialog_Show(playerid, DIALOG_LANDOBJECTMENU, DIALOG_STYLE_LIST, "Choose how you want to edit this object.", "Edit object\nEdit gate destination\nDuplicate object\nSell object", "Select", "Back");
	        }
			else
			{
                Dialog_Show(playerid, DIALOG_LANDOBJECTMENU, DIALOG_STYLE_LIST, "Choose how you want to edit this object.", "Edit object\nDuplicate object\nSell object", "Select", "Back");
	        }
		}
		case DIALOG_LANDOBJECTS:
		{
		    new landid = GetNearbyLand(playerid);

		    if(landid >= 0 && HasLandPerms(playerid, landid))
		    {
				mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "SELECT * FROM landobjects WHERE landid = %i ORDER BY id DESC LIMIT %i, %i", LandInfo[landid][lID], (PlayerData[playerid][pPage] - 1) * MAX_LISTED_OBJECTS, MAX_LISTED_OBJECTS);
   				mysql_tquery(connectionID, queryBuffer, "OnQueryFinished", "ii", THREAD_LIST_LANDOBJECTS, playerid);
			}
		}
		
		case DIALOG_GANGSTASH:
		{
		    format(string, sizeof(string), "Weapons\nKevlar Vest\nDrugs\nClothes\nCrafting\nMaterials (%d/%d)\nCash ($%d/$%d)", GangInfo[PlayerData[playerid][pGang]][gMaterials], GetGangStashCapacity(PlayerData[playerid][pGang], STASH_CAPACITY_MATERIALS), GangInfo[PlayerData[playerid][pGang]][gCash], GetGangStashCapacity(PlayerData[playerid][pGang], STASH_CAPACITY_CASH));
		    Dialog_Show(playerid, DIALOG_GANGSTASH, DIALOG_STYLE_LIST, "Gang Stash", string, "Select", "Cancel");
		}
		case DIALOG_GANGSTASHVEST:
		{
		    format(string, sizeof(string), "Withdraw (R%i+)\nChange Rank", GangInfo[PlayerData[playerid][pGang]][gVestRank]);
			Dialog_Show(playerid, DIALOG_GANGSTASHVEST, DIALOG_STYLE_LIST, "Gang stash | Kevlar Vest (Costs 200 materials.)", string, "Select", "Back");
		}
		case DIALOG_GANGSTASHWEAPONS1:
		{
		    new gangstring[1260];
		    gangstring = "Amount\tName\tRank\t";
		    format(gangstring, sizeof(gangstring), "%s\n\
				[%i]\t 9mm\t (R%i+)\n\
				[%i]\t Sdpistol\t (R%i+)\n\
				[%i]\t Deagle\t (R%i+)\n\
				[%i]\t Shotgun\t (R%i+)\n\
				[%i]\t Tec-9\t (R%i+)\n\
				[%i]\t Micro Uzi\t (R%i+)\n\
				[%i]\t MP5\t (R%i+)\n\
				[%i]\t AK-47\t (R%i+)\n\
				[%i]\t Rifle\t (R%i+)\n\
				[%i]\t M4\t (R%i+)\n\
				[%i]\t SPAS12\t (R%i+)\n\
				[%i]\t Sniper\t (R%i+)",
				gangstring,
		        GangInfo[PlayerData[playerid][pGang]][gWeapons][GANGWEAPON_9MM], GangInfo[PlayerData[playerid][pGang]][gWeaponRanks][GANGWEAPON_9MM],
				GangInfo[PlayerData[playerid][pGang]][gWeapons][GANGWEAPON_SDPISTOL], GangInfo[PlayerData[playerid][pGang]][gWeaponRanks][GANGWEAPON_SDPISTOL],
				GangInfo[PlayerData[playerid][pGang]][gWeapons][GANGWEAPON_DEAGLE], GangInfo[PlayerData[playerid][pGang]][gWeaponRanks][GANGWEAPON_DEAGLE],
				GangInfo[PlayerData[playerid][pGang]][gWeapons][GANGWEAPON_SHOTGUN], GangInfo[PlayerData[playerid][pGang]][gWeaponRanks][GANGWEAPON_SHOTGUN],
				GangInfo[PlayerData[playerid][pGang]][gWeapons][GANGWEAPON_TEC9], GangInfo[PlayerData[playerid][pGang]][gWeaponRanks][GANGWEAPON_TEC9],
				GangInfo[PlayerData[playerid][pGang]][gWeapons][GANGWEAPON_UZI], GangInfo[PlayerData[playerid][pGang]][gWeaponRanks][GANGWEAPON_UZI],
				GangInfo[PlayerData[playerid][pGang]][gWeapons][GANGWEAPON_MP5], GangInfo[PlayerData[playerid][pGang]][gWeaponRanks][GANGWEAPON_MP5],
				GangInfo[PlayerData[playerid][pGang]][gWeapons][GANGWEAPON_AK47], GangInfo[PlayerData[playerid][pGang]][gWeaponRanks][GANGWEAPON_AK47],
				GangInfo[PlayerData[playerid][pGang]][gWeapons][GANGWEAPON_RIFLE], GangInfo[PlayerData[playerid][pGang]][gWeaponRanks][GANGWEAPON_RIFLE],
				GangInfo[PlayerData[playerid][pGang]][gWeapons][GANGWEAPON_M4], GangInfo[PlayerData[playerid][pGang]][gWeaponRanks][GANGWEAPON_M4],
				GangInfo[PlayerData[playerid][pGang]][gWeapons][GANGWEAPON_SPAS12], GangInfo[PlayerData[playerid][pGang]][gWeaponRanks][GANGWEAPON_SPAS12],
				GangInfo[PlayerData[playerid][pGang]][gWeapons][GANGWEAPON_SNIPER], GangInfo[PlayerData[playerid][pGang]][gWeaponRanks][GANGWEAPON_SNIPER]);

		    Dialog_Show(playerid, DIALOG_GANGSTASHWEAPONS1, DIALOG_STYLE_TABLIST_HEADERS, "Gang stash | Weapons", gangstring, "Select", "Back");
		}

		case DIALOG_GANGSTASHDRUGS1:
		{
		    format(string, sizeof(string), "Weed (%i/%ig)\nCrack (%i/%ig)\nHeroin (%i/%ig)\nPainkillers (%i/%i)",
				GangInfo[PlayerData[playerid][pGang]][gWeed], GetGangStashCapacity(PlayerData[playerid][pGang], STASH_CAPACITY_WEED), GangInfo[PlayerData[playerid][pGang]][gCocaine], GetGangStashCapacity(PlayerData[playerid][pGang], STASH_CAPACITY_COCAINE), GangInfo[PlayerData[playerid][pGang]][gHeroin], GetGangStashCapacity(PlayerData[playerid][pGang], STASH_CAPACITY_HEROIN), GangInfo[PlayerData[playerid][pGang]][gPainkillers], GetGangStashCapacity(PlayerData[playerid][pGang], STASH_CAPACITY_PAINKILLERS));
		    Dialog_Show(playerid, DIALOG_GANGSTASHDRUGS1, DIALOG_STYLE_LIST, "Gang stash | Drugs", string, "Select", "Back");
		}
		case DIALOG_GANGSTASHDRUGS2:
		{
		    if(PlayerData[playerid][pSelected] == ITEM_WEED) {
		        Dialog_Show(playerid, DIALOG_GANGSTASHDRUGS2, DIALOG_STYLE_LIST, "Gang stash | Weed", "Withdraw\nDeposit", "Select", "Back");
			} else if(PlayerData[playerid][pSelected] == ITEM_COCAINE) {
			    Dialog_Show(playerid, DIALOG_GANGSTASHDRUGS2, DIALOG_STYLE_LIST, "Gang stash | Crack", "Withdraw\nDeposit", "Select", "Back");
			} else if(PlayerData[playerid][pSelected] == ITEM_HEROIN) {
		        Dialog_Show(playerid, DIALOG_GANGSTASHDRUGS2, DIALOG_STYLE_LIST, "Gang stash | Heroin", "Withdraw\nDeposit", "Select", "Back");
			} else if(PlayerData[playerid][pSelected] == ITEM_PAINKILLERS) {
			    Dialog_Show(playerid, DIALOG_GANGSTASHDRUGS2, DIALOG_STYLE_LIST, "Gang stash | Painkillers", "Withdraw\nDeposit", "Select", "Back");
			}
		}
		case DIALOG_GANGSTASHCRAFT:
		{
		    format(string, sizeof(string), "Gang stash | Crafting (Your safe has %i materials.)", GangInfo[PlayerData[playerid][pGang]][gMaterials]);
		    Dialog_Show(playerid, DIALOG_GANGSTASHCRAFT, DIALOG_STYLE_TABLIST_HEADERS, string, "#\tWeapon\tCost\n1\t9mm\t750 materials\n2\tSdpistol\t1,000 materials\n3\tShotgun\t3,000 materials\n4\tMicro SMG\t4,500 materials\n5\tTec-9\t5,500 materials\n6\tRifle\t10,000 materials", "Craft", "Back");
		}
		case DIALOG_GANGSTASHMATS:
		{
		    format(string, sizeof(string), "Withdraw (%i/%i)\nDeposit", GangInfo[PlayerData[playerid][pGang]][gMaterials], GetGangStashCapacity(PlayerData[playerid][pGang], STASH_CAPACITY_MATERIALS));
			Dialog_Show(playerid, DIALOG_GANGSTASHMATS, DIALOG_STYLE_LIST, "Gang stash | Materials", string, "Select", "Back");
		}
		case DIALOG_GANGSTASHCASH:
		{
		    format(string, sizeof(string), "Withdraw ($%i/$%i)\nDeposit", GangInfo[PlayerData[playerid][pGang]][gCash], GetGangStashCapacity(PlayerData[playerid][pGang], STASH_CAPACITY_CASH));
  			Dialog_Show(playerid, DIALOG_GANGSTASHCASH, DIALOG_STYLE_LIST, "Gang stash | Cash", string, "Select", "Back");
		}
		case DIALOG_GANGWITHDRAW:
		{
		    if(PlayerData[playerid][pSelected] == ITEM_WEED) {
		        format(string, sizeof(string), "How much weed would you like to withdraw? (The safe contains %i/%i grams.)", GangInfo[PlayerData[playerid][pGang]][gWeed], GetGangStashCapacity(PlayerData[playerid][pGang], STASH_CAPACITY_WEED));
			} else if(PlayerData[playerid][pSelected] == ITEM_COCAINE) {
			    format(string, sizeof(string), "How much crack would you like to withdraw? (The safe contains %i/%i grams.)", GangInfo[PlayerData[playerid][pGang]][gCocaine], GetGangStashCapacity(PlayerData[playerid][pGang], STASH_CAPACITY_COCAINE));
			} else if(PlayerData[playerid][pSelected] == ITEM_HEROIN) {
		        format(string, sizeof(string), "How much Heroin would you like to withdraw? (The safe contains %i/%i grams.)", GangInfo[PlayerData[playerid][pGang]][gHeroin], GetGangStashCapacity(PlayerData[playerid][pGang], STASH_CAPACITY_HEROIN));
			} else if(PlayerData[playerid][pSelected] == ITEM_PAINKILLERS) {
			    format(string, sizeof(string), "How much painkillers would you like to withdraw? (The safe contains %i/%i.)", GangInfo[PlayerData[playerid][pGang]][gPainkillers], GetGangStashCapacity(PlayerData[playerid][pGang], STASH_CAPACITY_PAINKILLERS));
			} else if(PlayerData[playerid][pSelected] == ITEM_MATERIALS) {
		        format(string, sizeof(string), "How much materials would you like to withdraw? (The safe contains %i/%i.)", GangInfo[PlayerData[playerid][pGang]][gMaterials], GetGangStashCapacity(PlayerData[playerid][pGang], STASH_CAPACITY_MATERIALS));
			} else if(PlayerData[playerid][pSelected] == ITEM_CASH) {
			    format(string, sizeof(string), "How much cash would you like to withdraw? (The safe contains $%i/$%i.)", GangInfo[PlayerData[playerid][pGang]][gCash], GetGangStashCapacity(PlayerData[playerid][pGang], STASH_CAPACITY_CASH));
			}
			Dialog_Show(playerid, DIALOG_GANGWITHDRAW, DIALOG_STYLE_INPUT, "Gang stash | Withdraw", string, "Submit", "Back");
		}
		case DIALOG_GANGDEPOSIT:
		{
		    if(PlayerData[playerid][pSelected] == ITEM_WEED) {
		        format(string, sizeof(string), "How much weed would you like to deposit? (The safe contains %i/%i grams.)", GangInfo[PlayerData[playerid][pGang]][gWeed], GetGangStashCapacity(PlayerData[playerid][pGang], STASH_CAPACITY_WEED));
			} else if(PlayerData[playerid][pSelected] == ITEM_COCAINE) {
			    format(string, sizeof(string), "How much crack would you like to deposit? (The safe contains %i/%i grams.)", GangInfo[PlayerData[playerid][pGang]][gCocaine], GetGangStashCapacity(PlayerData[playerid][pGang], STASH_CAPACITY_COCAINE));
			} else if(PlayerData[playerid][pSelected] == ITEM_HEROIN) {
		        format(string, sizeof(string), "How much Heroin would you like to deposit? (The safe contains %i/%i grams.)", GangInfo[PlayerData[playerid][pGang]][gHeroin], GetGangStashCapacity(PlayerData[playerid][pGang], STASH_CAPACITY_HEROIN));
			} else if(PlayerData[playerid][pSelected] == ITEM_PAINKILLERS) {
			    format(string, sizeof(string), "How much painkillers would you like to deposit? (The safe contains %i/%i.)", GangInfo[PlayerData[playerid][pGang]][gPainkillers], GetGangStashCapacity(PlayerData[playerid][pGang], STASH_CAPACITY_PAINKILLERS));
			} else if(PlayerData[playerid][pSelected] == ITEM_MATERIALS) {
		        format(string, sizeof(string), "How much materials would you like to deposit? (The safe contains %i/%i.)", GangInfo[PlayerData[playerid][pGang]][gMaterials], GetGangStashCapacity(PlayerData[playerid][pGang], STASH_CAPACITY_MATERIALS));
			} else if(PlayerData[playerid][pSelected] == ITEM_CASH) {
			    format(string, sizeof(string), "How much cash would you like to deposit? (The safe contains $%i/$%i.)", GangInfo[PlayerData[playerid][pGang]][gCash], GetGangStashCapacity(PlayerData[playerid][pGang], STASH_CAPACITY_CASH));
		    }
			Dialog_Show(playerid, DIALOG_GANGDEPOSIT, DIALOG_STYLE_INPUT, "Gang stash | Deposit", string, "Submit", "Back");
		}
		case DIALOG_GANGARMSPRICES:
		{

			format(string, sizeof(string), "#\tWeapon\tPrice\tCost\n1\tMicro Uzi\t$%i\t500 materials\n2\tTec-9\t$%i\t500 materials\n3\tMP5\t$%i\t1000 materials\n4\tDesert Eagle\t$%i\t2000 materials\n5\tMolotov\t$%i\t5000 materials\n6\tAK-47\t$%i\t3000 materials\n7\tM4\t$%i\t4000 materials\n8\tSniper\t$%i\t6500 materials\n9\tSawnoff Shotgun\t$%i\t3000 materials",
   			GangInfo[PlayerData[playerid][pGang]][gArmsPrices][0], GangInfo[PlayerData[playerid][pGang]][gArmsPrices][1], GangInfo[PlayerData[playerid][pGang]][gArmsPrices][2], GangInfo[PlayerData[playerid][pGang]][gArmsPrices][3], GangInfo[PlayerData[playerid][pGang]][gArmsPrices][4], GangInfo[PlayerData[playerid][pGang]][gArmsPrices][5], GangInfo[PlayerData[playerid][pGang]][gArmsPrices][6], GangInfo[PlayerData[playerid][pGang]][gArmsPrices][7], GangInfo[PlayerData[playerid][pGang]][gArmsPrices][8]);
			Dialog_Show(playerid, DIALOG_GANGARMSPRICES, DIALOG_STYLE_TABLIST_HEADERS, "Choose a weapon price to edit.", string, "Change", "Back");
		}
		case DIALOG_GANGARMSDEALER:
		{
		    Dialog_Show(playerid, DIALOG_GANGARMSDEALER, DIALOG_STYLE_LIST, "Arms dealer", "Buy Guns\nEdit", "Select", "Cancel");
		}
		case DIALOG_GANGARMSWEAPONS:
		{
		    new
		        title[48];

		    format(title, sizeof(title), "Gang arms dealer (Materials available: %i.)", GangInfo[PlayerData[playerid][pDealerGang]][gArmsMaterials]);

		    format(string, sizeof(string), "#\tWeapon\tPrice\tCost\n1\tMicro Uzi\t$%i\t500 materials\n2\tTec-9\t$%i\t500 materials\n3\tMP5\t$%i\t1000 materials\n4\tDesert Eagle\t$%i\t2000 materials\n5\tMolotov\t$%i\t5000 materials\n6\tAK-47\t$%i\t3000 materials\n7\tM4\t$%i\t4000 materials\n8\tSniper\t$%i\t6500 materials\n9\tSawnoff Shotgun\t$%i\t3000 materials",
		        GangInfo[PlayerData[playerid][pDealerGang]][gArmsPrices][0], GangInfo[PlayerData[playerid][pDealerGang]][gArmsPrices][1], GangInfo[PlayerData[playerid][pDealerGang]][gArmsPrices][2], GangInfo[PlayerData[playerid][pDealerGang]][gArmsPrices][3], GangInfo[PlayerData[playerid][pDealerGang]][gArmsPrices][4], GangInfo[PlayerData[playerid][pDealerGang]][gArmsPrices][5], GangInfo[PlayerData[playerid][pDealerGang]][gArmsPrices][6], GangInfo[PlayerData[playerid][pDealerGang]][gArmsPrices][7],
				GangInfo[PlayerData[playerid][pDealerGang]][gArmsPrices][8]);
			Dialog_Show(playerid, DIALOG_GANGARMSWEAPONS, DIALOG_STYLE_TABLIST_HEADERS, title, string, "Buy", "Back");
		}
		case DIALOG_GANGARMSEDIT:
		{
			format(string, sizeof(string), "Arms dealer (Materials available: %i.)", GangInfo[PlayerData[playerid][pGang]][gArmsMaterials]);
			Dialog_Show(playerid, DIALOG_GANGARMSEDIT, DIALOG_STYLE_LIST, string, "Edit prices\nDeposit mats\nWithdraw mats", "Select", "Back");
		}
		case GangStashDepositMats:
		{
			format(string, sizeof(string), "How much materials would you like to deposit? (This arms dealer contains %i materials.)", GangInfo[PlayerData[playerid][pGang]][gArmsMaterials]);
			Dialog_Show(playerid, GangStashDepositMats, DIALOG_STYLE_INPUT, "Arms dealer | Deposit", string, "Submit", "Back");
		}
		case GangStashWithdrawMats:
		{
			format(string, sizeof(string), "How much materials would you like to withdraw? (This arms dealer contains %i materials.)", GangInfo[PlayerData[playerid][pGang]][gArmsMaterials]);
			Dialog_Show(playerid, GangStashWithdrawMats, DIALOG_STYLE_INPUT, "Arms dealer | Withdraw", string, "Submit", "Back");
		}

		case DIALOG_CRACKTRUNK:
		{
		    if(VehicleInfo[PlayerData[playerid][pCocaineFrom]][vWeed]/20 > 0) format(string, sizeof(string), "%s\nWeed (%ig)", string, VehicleInfo[PlayerData[playerid][pCocaineFrom]][vWeed]/20);
            if(VehicleInfo[PlayerData[playerid][pCocaineFrom]][vCocaine]/20 > 0) format(string, sizeof(string), "%s\nCrack (%ig)", string, VehicleInfo[PlayerData[playerid][pCocaineFrom]][vCocaine]/20);
            if(VehicleInfo[PlayerData[playerid][pCocaineFrom]][vHeroin]/20 > 0) format(string, sizeof(string), "%s\nHeroin (%ig)", string, VehicleInfo[PlayerData[playerid][pCocaineFrom]][vHeroin]/20);
            if(VehicleInfo[PlayerData[playerid][pCocaineFrom]][vPainkillers]/20 > 0) format(string, sizeof(string), "%s\nPainkillers (%ig)", string, VehicleInfo[PlayerData[playerid][pCocaineFrom]][vPainkillers]/20);
            if(VehicleInfo[PlayerData[playerid][pCocaineFrom]][vMaterials]/20 > 0) format(string, sizeof(string), "%s\nMaterials (%i)", string, VehicleInfo[PlayerData[playerid][pCocaineFrom]][vMaterials]/20);
            if(VehicleInfo[PlayerData[playerid][pCocaineFrom]][vCash]/20 > 0) format(string, sizeof(string), "%s\nCash ($%i)", string, VehicleInfo[PlayerData[playerid][pCocaineFrom]][vCash]/20);

            for(new x = 0; x < 5; x ++)
			{
			    if(VehicleInfo[PlayerData[playerid][pCocaineFrom]][vWeapons][x] != 0)
        		{
        		    format(string, sizeof(string), "%s\n%s", string, GetWeaponNameEx(VehicleInfo[PlayerData[playerid][pCocaineFrom]][vWeapons][x]));
                }
            }

            Dialog_Show(playerid, DIALOG_CRACKTRUNK, DIALOG_STYLE_LIST, "Choose ONE item to take from the trunk.", string, "Take", "Cancel");
		}
		case DIALOG_RULES:
		{
		    Dialog_Show(playerid, DIALOG_RULES, DIALOG_STYLE_LIST, "List of Server Rules", "No third-party modifications such as cheats\nNo exploiting\nNo non-RP advertisements\nNo death-match\nNo spawn-killing\nNo revenge-killing\nNo non-RP car raming.\nNo heli-blading\nNo meta-gaming\nNo money farming\nNo lying to administrators\nRobbery Policy\nScamming Policy\nList of all rules may be available at %s", "Close", "", GetServerWebsite());
		}
		case DIALOG_LOCATE:
		{
		    Dialog_Show(playerid, DIALOG_LOCATE, DIALOG_STYLE_LIST, "GPS - Select Destination", "Job Locations\nNearest Businesses\nGeneral Locations\nFind Turfs\nMore Locations\nMy Houses\nMy Businesses", "Select", "Close");
		}
		case DIALOG_FACTIONEQUIPMENT:
		{
			new lockerid = GetNearbyLocker(playerid);
	 		string = "Weapon\tPrice\n";
            if(LockerInfo[lockerid][locKevlar][0]) { format(string, sizeof(string), "%sKevlar Vest\t$%i\n", string, LockerInfo[lockerid][locKevlar][1]); }
            if(LockerInfo[lockerid][locMedKit][0]) { format(string, sizeof(string), "%sMedkit\t$%i\n", string, LockerInfo[lockerid][locMedKit][1]); }
            if(LockerInfo[lockerid][locNitestick][0]) { format(string, sizeof(string), "%sNitestick\t$%i\n", string, LockerInfo[lockerid][locNitestick][1]); }
            if(LockerInfo[lockerid][locMace][0]) { format(string, sizeof(string), "%sMace\t$%i\n", string, LockerInfo[lockerid][locMace][1]); }
            if(LockerInfo[lockerid][locDeagle][0]) { format(string, sizeof(string), "%sDeagle\t$%i\n", string, LockerInfo[lockerid][locDeagle][1]); }
            if(LockerInfo[lockerid][locShotgun][0]) { format(string, sizeof(string), "%sShotgun\t$%i\n", string, LockerInfo[lockerid][locShotgun][1]); }
            if(LockerInfo[lockerid][locMP5][0]) { format(string, sizeof(string), "%sMP5\t$%i\n", string, LockerInfo[lockerid][locMP5][1]); }
            if(LockerInfo[lockerid][locM4][0]) { format(string, sizeof(string), "%sM4\t$%i\n", string, LockerInfo[lockerid][locM4][1]); }
            if(LockerInfo[lockerid][locSpas12][0]) { format(string, sizeof(string), "%sSPAS-12\t$%i\n", string, LockerInfo[lockerid][locSpas12][1]); }
            if(LockerInfo[lockerid][locSniper][0]) { format(string, sizeof(string), "%sSniper\t$%i\n", string, LockerInfo[lockerid][locSniper][1]); }
            if(LockerInfo[lockerid][locCamera][0]) { format(string, sizeof(string), "%sCamera\t$%i\n", string, LockerInfo[lockerid][locCamera][1]); }
            if(LockerInfo[lockerid][locFireExt][0]) { format(string, sizeof(string), "%sFire Extinguisher\t$%i\n", string, LockerInfo[lockerid][locFireExt][1]); }
            if(LockerInfo[lockerid][locPainKillers][0]) { format(string, sizeof(string), "%sPainkillers\t$%i\n", string, LockerInfo[lockerid][locPainKillers][1]); }
			Dialog_Show(playerid, DIALOG_FACTIONEQUIPMENT, DIALOG_STYLE_TABLIST_HEADERS, "Locker", string, "Select", "Cancel");
		}
		case DIALOG_CREATEQUIZ:
		{
		    if(CreateQuiz == -1)
		    {
		        CreateQuiz = 0;
		    	Dialog_Show(playerid, DIALOG_CREATEQUIZ, DIALOG_STYLE_INPUT, "Create A Quiz - Enter Question", "What should the question be? (displayed globally)", "Submit", "Back");
			}
			if(CreateQuiz == 1)
			{
			    Dialog_Show(playerid, DIALOG_CREATEQUIZ, DIALOG_STYLE_INPUT, "Create A Quiz - Enter Answer", "What should the answer be? (displayed once answered)", "Submit", "Back");
			}
		}
		case DIALOG_DELETEOBJECT:
		{
			format(string, sizeof(string), "Object %i selected\n{FFFFFF}Would you really like to {FF0000}delete{FFFFFF} it?", PlayerData[playerid][pSelected]);
  			Dialog_Show(playerid, DIALOG_DELETEOBJECT, DIALOG_STYLE_MSGBOX, "Delete Mode - Dynamic Object Selected", string, "Yes", "No");
		}
        case DIALOG_PAINTBALL:
        {
            string =  "Name\tType\tCurrent Players\n";
            format(string, sizeof(string), "%sDeathmatch Arena\tFFA\t%i\n", string, GetArenaPlayers(1));
            format(string, sizeof(string), "%sLVPD Arena\tDM\t%i\n", string, GetArenaPlayers(2));
            format(string, sizeof(string), "%sTeam Deathmatch Arena\tTDM\t%i\n", string, GetArenaPlayers(3));
            format(string, sizeof(string), "%sDeagle Arena\t1Shot\t%i\n", string, GetArenaPlayers(4));
            format(string, sizeof(string), "%sSniper Arena\t1Shot\t%i\n", string, GetArenaPlayers(5));
            Dialog_Show(playerid, DIALOG_PAINTBALL, DIALOG_STYLE_TABLIST_HEADERS, "Paintball", string, "Select", "Cancel");
        }
		
	}

	return 1;
}
forward IntroKick(playerid);
public IntroKick(playerid)
{
	if(IsPlayerConnected(playerid) && !PlayerData[playerid][pLogged] && !IsPlayerSpawned(playerid)) 
    {
	    KickPlayer(playerid, "Login timeout", INVALID_PLAYER_ID, BAN_VISIBILITY_NONE);
	}
}

GetArenaPlayers(arena)
{
	new players;
	foreach(new i : Player)
	{
	    if(PlayerData[i][pPaintball] == arena)
	    {
	        players++;
	    }
	}
	return players;
}
SetPlayerToSpawn(playerid)
{
	if(GetPlayerState(playerid) == PLAYER_STATE_SPECTATING)
	{
	    SetSpawnInfo(playerid, NO_TEAM, PlayerData[playerid][pSkin], PlayerData[playerid][pPosX], PlayerData[playerid][pPosY], PlayerData[playerid][pPosZ], PlayerData[playerid][pPosA], 0, 0, 0, 0, 0, 0);
		TogglePlayerSpectating(playerid, 0);
	}
	else
	{
	    if(IsPlayerInAnyVehicle(playerid))
	    {
	        new
	            Float:x,
	            Float:y,
	            Float:z;
			GetPlayerPos(playerid, x, y, z);
			SetPlayerPos(playerid, x, y, z + 5.0);
	    }

		switch(GetPlayerState(playerid))
		{
		    case PLAYER_STATE_NONE, PLAYER_STATE_WASTED:
		    {
			    SpawnPlayer(playerid);
			}
			default:
			{
			    OnPlayerSpawn(playerid);
			}
      	}
	}

	PlayerData[playerid][pACTime] = gettime() + 2;
}

SetPlayerToFacePlayer(playerid, targetid)
{
	new
	    Float:px,
	    Float:py,
	    Float:pz,
	    Float:tx,
	    Float:ty,
	    Float:tz;

	GetPlayerPos(targetid, tx, ty, tz);
	GetPlayerPos(playerid, px, py, pz);
	SetPlayerFacingAngle(playerid, 180.0 - atan2(px - tx, py - ty));
}

forward SavePlayerVariables(playerid);
public SavePlayerVariables(playerid)
{
	if(PlayerData[playerid][pLogged] && !PlayerData[playerid][pAdminDuty] && !PlayerData[playerid][pAcceptedHelp] && !PlayerData[playerid][pUndercover][0])
	{
	    if(GetPlayerState(playerid) != PLAYER_STATE_SPECTATING && !IsPlayerInRangeOfPoint(playerid, 2.0, 0.0, 0.0, 0.0) && !IsPlayerInEvent(playerid) && PlayerData[playerid][pPaintball] == 0 && !PlayerData[playerid][pAcceptedHelp] && PlayerData[playerid][pDueling] == INVALID_PLAYER_ID && PlayerData[playerid][pPreviewHouse] == -1 && !IsInDealership(playerid))
		{
		    SavePlayerWeapons(playerid);

            GetPlayerCameraPos(playerid, PlayerData[playerid][pCameraX], PlayerData[playerid][pCameraY], PlayerData[playerid][pCameraZ]);
			GetPlayerPos(playerid, PlayerData[playerid][pPosX], PlayerData[playerid][pPosY], PlayerData[playerid][pPosZ]);
	        GetPlayerFacingAngle(playerid, PlayerData[playerid][pPosA]);

			if(!PlayerData[playerid][pHHCheck])
			{
		        GetPlayerHealth(playerid, PlayerData[playerid][pHealth]);
		        GetPlayerArmour(playerid, PlayerData[playerid][pArmor]);
			}

	        PlayerData[playerid][pInterior] = GetPlayerInterior(playerid);
	        PlayerData[playerid][pWorld] = GetPlayerVirtualWorld(playerid);
		}

		mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET camera_x = '%f', camera_y = '%f', camera_z = '%f', pos_x = '%f', pos_y = '%f', pos_z = '%f', pos_a = '%f', interior = %i, world = %i, health = '%f', armor = '%f', minutes = %i, warnings = %i, injured = %i, hospital = %i, upgradepoints = %i, spawnhealth = '%f', spawnarmor = '%f', jailtype = %i, jailtime = %i WHERE uid = %i", PlayerData[playerid][pCameraX], PlayerData[playerid][pCameraY],
			PlayerData[playerid][pCameraZ], PlayerData[playerid][pPosX], PlayerData[playerid][pPosY], PlayerData[playerid][pPosZ], PlayerData[playerid][pPosA], PlayerData[playerid][pInterior], PlayerData[playerid][pWorld], PlayerData[playerid][pHealth], PlayerData[playerid][pArmor], PlayerData[playerid][pMinutes], PlayerData[playerid][pWarnings], PlayerData[playerid][pInjured], PlayerData[playerid][pHospital], PlayerData[playerid][pUpgradePoints], PlayerData[playerid][pSpawnHealth],
			PlayerData[playerid][pSpawnArmor], PlayerData[playerid][pJailType], PlayerData[playerid][pJailTime], PlayerData[playerid][pID]);
		mysql_tquery(connectionID, queryBuffer);

		mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET newbiemuted = %i, helpmuted = %i, admuted = %i, livemuted = %i, globalmuted = %i, reportmuted = %i, reportwarns = %i, fightstyle = %i, toggletextdraws = %i, toggleooc = %i, togglephone = %i, toggleadmin = %i, togglehelper = %i, togglenewbie = %i, togglewt = %i, togglevip = %i WHERE uid = %i", PlayerData[playerid][pNewbieMuted], PlayerData[playerid][pHelpMuted], PlayerData[playerid][pAdMuted],
			PlayerData[playerid][pLiveMuted], PlayerData[playerid][pGlobalMuted], PlayerData[playerid][pReportMuted], PlayerData[playerid][pReportWarns], PlayerData[playerid][pFightStyle], PlayerData[playerid][pToggleTextdraws], PlayerData[playerid][pToggleOOC], PlayerData[playerid][pTogglePhone], PlayerData[playerid][pToggleAdmin], PlayerData[playerid][pToggleHelper], PlayerData[playerid][pToggleNewbie], PlayerData[playerid][pTogglePR],
			PlayerData[playerid][pToggleVIP], PlayerData[playerid][pID]);
		mysql_tquery(connectionID, queryBuffer);


		new querry[952];
		strcat(querry,"UPDATE "#TABLE_USERS" SET ");
		strcat(querry,"toggleradio = %i, togglepoint = %i, toggleturfs = %i, togglepm = %i, togglemusic = %i, ");
		strcat(querry,"togglefaction = %i, togglenews = %i, toggleglobal = %i, togglecam = %i, togglehud = %i, ");
		strcat(querry,"weedtime = %i, weedgrams = %i, showturfs = %i, showlands = %i, watchon = %i, gpson = %i,");
		strcat(querry,"pizzacooldown = %i, detectivecooldown = %i , phonebook = %i,");
		strcat(querry,"crackcooldown = %i, duty = %i, bandana = %i WHERE uid = %i");

		mysql_format(connectionID, queryBuffer, sizeof(queryBuffer),querry, PlayerData[playerid][pToggleRadio],
			PlayerData[playerid][pTogglePoints], PlayerData[playerid][pToggleTurfs], PlayerData[playerid][pToggleMusic], PlayerData[playerid][pTogglePM], PlayerData[playerid][pToggleFaction],
			PlayerData[playerid][pToggleNews], PlayerData[playerid][pToggleGlobal], PlayerData[playerid][pToggleCam], PlayerData[playerid][pToggleHUD], PlayerData[playerid][pWeedTime],
			PlayerData[playerid][pWeedGrams], PlayerData[playerid][pShowTurfs], PlayerData[playerid][pShowLands], PlayerData[playerid][pWatchOn], PlayerData[playerid][pGPSOn], GetPizzaCoolDown(playerid),
			PlayerData[playerid][pDetectiveCooldown], PlayerData[playerid][pPhonebook], PlayerData[playerid][pCocaineCooldown], PlayerData[playerid][pDuty], PlayerData[playerid][pBandana], PlayerData[playerid][pID]);
		mysql_tquery(connectionID, queryBuffer);

		mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET togglereports = %i, togglewhisper = %i, togglebug = %i, newbiemutetime = %i, reportmutetime = %i, globalmutetime = %i, adminhide = %i, totalpatients = %i, totalfires = %i, scanneron = %i, rarecooldown = %i, bugged = %i, buggedby = '%s' WHERE uid = %i",
		    PlayerData[playerid][pToggleReports], PlayerData[playerid][pToggleWhisper], PlayerData[playerid][pToggleBug], PlayerData[playerid][pNewbieMuteTime], PlayerData[playerid][pReportMuteTime], PlayerData[playerid][pGlobalMuteTime], PlayerData[playerid][pAdminHide], PlayerData[playerid][pTotalPatients], PlayerData[playerid][pTotalFires], PlayerData[playerid][pScannerOn], PlayerData[playerid][pRareTime], PlayerData[playerid][pBugged],PlayerData[playerid][pBuggedBy],PlayerData[playerid][pID]);
		mysql_tquery(connectionID, queryBuffer);

		mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET weed = %d, cocaine = %d, heroin = %d, materials = %d, rope = %d, spraycans = %d WHERE uid = %i",
			PlayerData[playerid][pWeed], PlayerData[playerid][pCocaine], PlayerData[playerid][pHeroin], PlayerData[playerid][pMaterials], PlayerData[playerid][pRope], PlayerData[playerid][pSpraycans], PlayerData[playerid][pID]);
		mysql_tquery(connectionID, queryBuffer);

		mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET togglevehicle = %d WHERE uid = %d", PlayerData[playerid][pToggleVehCam], PlayerData[playerid][pID]);
		mysql_tquery(connectionID, queryBuffer);

		mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET gunlicense = %d, housealarm = %i where uid = %d", PlayerData[playerid][pGunLicense], PlayerData[playerid][pHouseAlarm], PlayerData[playerid][pID]);
		mysql_tquery(connectionID, queryBuffer);

		mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET chatstyle = %i WHERE uid = %i", PlayerData[playerid][pChatstyle], PlayerData[playerid][pID]);
		mysql_tquery(connectionID, queryBuffer);

		mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET spawntype = %i, spawnhouse = %i WHERE uid = %i", PlayerData[playerid][pSpawnSelect], PlayerData[playerid][pSpawnHouse], PlayerData[playerid][pID]);
		mysql_tquery(connectionID, queryBuffer);

	}
}

SavePlayerWeapons(playerid)
{
	if(PlayerData[playerid][pLogged] && !IsPlayerInEvent(playerid) && PlayerData[playerid][pPaintball] == 0 && PlayerData[playerid][pDueling] == INVALID_PLAYER_ID)
	{
		// Saving weapons.
	    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET \
																					`weapon_0` = %i, \
																					`weapon_1` = %i, \
																					`weapon_2` = %i, \
																					`weapon_3` = %i, \
																					`weapon_4` = %i, \
																					`weapon_5` = %i, \
																					`weapon_6` = %i, \
																					`weapon_7` = %i, \
																					`weapon_8` = %i, \
																					`weapon_9` = %i, \
																					`weapon_10` = %i, \
																					`weapon_11` = %i, \
																					`weapon_12` = %i \
																					WHERE `uid` = %i",
	        																		PlayerData[playerid][pWeapons][0],
																					PlayerData[playerid][pWeapons][1],
																					PlayerData[playerid][pWeapons][2],
																					PlayerData[playerid][pWeapons][3],
																					PlayerData[playerid][pWeapons][4],
																					PlayerData[playerid][pWeapons][5],
																					PlayerData[playerid][pWeapons][6],
																					PlayerData[playerid][pWeapons][7],
																					PlayerData[playerid][pWeapons][8],
																					PlayerData[playerid][pWeapons][9],
																					PlayerData[playerid][pWeapons][10],
																					PlayerData[playerid][pWeapons][11],
																					PlayerData[playerid][pWeapons][12],
																					PlayerData[playerid][pID]);
		mysql_tquery(connectionID, queryBuffer);
		mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET ammo_0 = %i, ammo_1 = %i, ammo_2 = %i, ammo_3 = %i, ammo_4 = %i, ammo_5 = %i, ammo_6 = %i, ammo_7 = %i, ammo_8 = %i, ammo_9 = %i, ammo_10 = %i, ammo_11 = %i, ammo_12 = %i WHERE uid = %i",
			PlayerData[playerid][pAmmo][0], PlayerData[playerid][pAmmo][1], PlayerData[playerid][pAmmo][2], PlayerData[playerid][pAmmo][3], PlayerData[playerid][pAmmo][4], PlayerData[playerid][pAmmo][5], PlayerData[playerid][pAmmo][6], PlayerData[playerid][pAmmo][7], PlayerData[playerid][pAmmo][8], PlayerData[playerid][pAmmo][9], PlayerData[playerid][pAmmo][10], PlayerData[playerid][pAmmo][11], PlayerData[playerid][pGunsAmmo][12], PlayerData[playerid][pID]);
		mysql_tquery(connectionID, queryBuffer);
	}
}

SendPaycheck(playerid)
{
    // Paycheck amounts are temporary until a job system is put in place.

	PlayerData[playerid][pPaycheck] += min(PlayerData[playerid][pLevel], 21) * 250;
	new str[2000], coordsstring[286];
    new paycheck = PlayerData[playerid][pPaycheck];
    new interest, rate;
    new tax = (paycheck / 100) * GetTaxPercent();
    new rent = 0, renting = -1; // temp
    new total = paycheck - tax;

    // If the player is a VIP, adjust his interest rate accordingly.
   	if(PlayerData[playerid][pDonator] == 0)
	{
		rate = 1;
	}
	if(PlayerData[playerid][pDonator] == 1)
	{
		rate = 3;
	}
	if(PlayerData[playerid][pDonator] == 2)
	{
		rate = 6;
	}
	if(PlayerData[playerid][pDonator] == 3)
	{
		rate = 8;
	}

	//Calculate the interest due.
	interest = (PlayerData[playerid][pBank] / 1000) * rate;

	//If the calculated interest is above $25000, then we need to shut that shit down and set the interest to $25,000 to avoid the previous exploit.
	if(interest > 25000)
	{
	    interest = 25000;
	}

	total += interest;

 	if(PlayerData[playerid][pRentingHouse])
	{
		foreach(new i : House)
		{
		    if(HouseInfo[i][hExists] && HouseInfo[i][hID] == PlayerData[playerid][pRentingHouse] && HouseInfo[i][hRentPrice] > 0)
		    {
		        rent = HouseInfo[i][hRentPrice];
		        renting = i;
			}
		}
	}

    format(coordsstring, sizeof(coordsstring), "_____________ Paycheck _______________\n");
	strcat(str, coordsstring);
	format(coordsstring, sizeof(coordsstring), "Paycheck: {33CC33}+%s\n", FormatCash(paycheck));
	strcat(str, coordsstring);
	if(PlayerData[playerid][pFaction] >= 0 && FactionInfo[PlayerData[playerid][pFaction]][fPaycheck][PlayerData[playerid][pFactionRank]] > 0)
	{
	    format(coordsstring, sizeof(coordsstring), "Faction Pay: {33CC33}+%s\n", FormatCash(FactionInfo[PlayerData[playerid][pFaction]][fPaycheck][PlayerData[playerid][pFactionRank]]));
	    total += FactionInfo[PlayerData[playerid][pFaction]][fPaycheck][PlayerData[playerid][pFactionRank]];
		strcat(str, coordsstring);
	}

	format(coordsstring, sizeof(coordsstring), "Interest: {33CC33}+%s {C8C8C8}(rate: %.1f) (max: $25,000)\n", FormatCash(interest), floatdiv(float(rate), 10));
	strcat(str, coordsstring);
	format(coordsstring, sizeof(coordsstring), "Income Tax: {FF6347}-%s {C8C8C8}(%i percent)\n", FormatCash(tax), GetTaxPercent());
	strcat(str, coordsstring);
	if(renting != -1)
	{
		if(total >= rent || PlayerData[playerid][pBank] >= rent)
		{
		    if(total >= rent)
	    	{
	        	total -= rent;
			}
			else
			{
		    	PlayerData[playerid][pBank] -= rent;
			}

			format(coordsstring, sizeof(coordsstring), "Rent Paid: {FF6347}-%s\n", FormatCash(rent));
			strcat(str, coordsstring);
			HouseInfo[renting][hCash] += rent;

			mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE houses SET cash = %i WHERE id = %i", HouseInfo[renting][hCash], HouseInfo[renting][hID]);
			mysql_tquery(connectionID, queryBuffer);
		}
		else
		{
		    rent = -1;
		}
	}
	switch(PlayerData[playerid][pDonator])
	{
		case 1:
		{
			format(coordsstring, sizeof(coordsstring), "VIP Bonus: $1,500\n");
			total+= 1500;
		}
		case 2:
		{
		   format(coordsstring, sizeof(coordsstring), "VIP Bonus: $2,000\n");
		   total+= 2000;
		}
		case 3:
		{
		   format(coordsstring, sizeof(coordsstring), "VIP Bonus: $2,500\n");
		   total+= 2500;
		}
	}
	strcat(str, coordsstring);
    if(PlayerData[playerid][pFaction] != -1)
    {
        new faction_payment =  1000 + PlayerData[playerid][pFactionRank] * 200;
        total += faction_payment;
        format(coordsstring, sizeof(coordsstring), "Faction Payment: $%d\n", faction_payment);
    }
	strcat(str, coordsstring);
	format(coordsstring, sizeof(coordsstring), "Old Balance: %s\n", FormatCash(PlayerData[playerid][pBank]));
	strcat(str, coordsstring);
	format(coordsstring, sizeof(coordsstring), "______________________________________\n");
	strcat(str, coordsstring);
	format(coordsstring, sizeof(coordsstring), "New Balance: %s", FormatCash(PlayerData[playerid][pBank] + total));
	strcat(str, coordsstring);
	SendClientMessageEx(playerid, COLOR_AQUA, "You have played %i/25 minutes this hour and earned your paycheck.", PlayerData[playerid][pMinutes]);
	ShowPlayerFooter(playerid, "~y~Payday ~w~ Paycheck");
	Dialog_Show(playerid, DIALOG_NONE, DIALOG_STYLE_MSGBOX, "Paycheck", str, "Okay", "");
	if(rent == -1)
	{
	    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET rentinghouse = 0 WHERE uid = %i", PlayerData[playerid][pID]);
		mysql_tquery(connectionID, queryBuffer);

		PlayerData[playerid][pRentingHouse] = 0;
	    SendClientMessage(playerid, COLOR_RED, "You couldn't afford to pay rent and were evicted as a result.");
	}
	AddToTaxVault(tax);

	if(IsDoubleXPEnabled() || PlayerData[playerid][pDoubleXP] > 0)
		PlayerData[playerid][pEXP] += 2;
	else
	    PlayerData[playerid][pEXP]++;

	if(PlayerData[playerid][pGang] >= 0)
	{
	    GiveGangPoints(PlayerData[playerid][pGang], 1);
	}

    PlayerData[playerid][pHours]++;
  //  GivePlayerCookies(playerid, 3);
//    SendClientMessageEx(playerid, COLOR_AQUA, "You've received {00aa00}'3 Cookies'{33CCFF} for playing 1 hour.");
    PlayerData[playerid][pBank] += total;
    GivePlayerRankPoints(playerid, 10 * PlayerData[playerid][pMinutes]);
    PlayerData[playerid][pMinutes] = 0;
    PlayerData[playerid][pPaycheck] = 0;
    // reward player (ToiletDuck)
    if(IsHourRewardEnabled())
    {

		switch(PlayerData[playerid][pHours])
		{
		    case 2:
			{
			    SendClientMessageEx(playerid, COLOR_LIGHTRED, "You may now possess/use weapons!");
			    SendClientMessageEx(playerid, COLOR_GLOBAL, " You have reached 2 Playing hours (/phrewards) to check all the Playing hours rewards!");

			}
		    case 8:
		    {
		        SendClientMessageEx(playerid, COLOR_YELLOW, "_______________________________________________________________________");
		        SendClientMessageEx(playerid, COLOR_GLOBAL, "* _-= %s Automate Playing Hours Reward =-_ *", GetServerName());
		        SendClientMessageEx(playerid, COLOR_GLOBAL, " You receive 10 First aid Kit and 1 Rim Kit for spending 8 Hours of Time in Playing");
		        SendClientMessageEx(playerid, COLOR_YELLOW, "_______________________________________________________________________");
		        PlayerData[playerid][pFirstAid] += 10;
		        PlayerData[playerid][pRimkits] += 1;
		    }
		    case 25:
		    {
		        SendClientMessageEx(playerid, COLOR_YELLOW, "_______________________________________________________________________");
		        SendClientMessageEx(playerid, COLOR_GLOBAL, "* _-= %s Automate Playing Hours Reward =-_ *", GetServerName());
		        SendClientMessageEx(playerid, COLOR_GLOBAL, " You receive 15 Cookies for spending 25 Hours of Time in Playing ");
		        SendClientMessageEx(playerid, COLOR_YELLOW, "_______________________________________________________________________");

                GivePlayerCookies(playerid, 15); //rewardplay
		    }
		    case 48:
			{
			    SendClientMessageEx(playerid, COLOR_YELLOW, "_______________________________________________________________________");
		        SendClientMessageEx(playerid, COLOR_GLOBAL, "* _-= %s Automate Playing Hours Reward =-_ *", GetServerName());
		        SendClientMessageEx(playerid, COLOR_GLOBAL, " You receive 5 Upgrade Points and 1 Exp Token for spending 48 Hours of Time in Playing");
		        SendClientMessageEx(playerid, COLOR_YELLOW, "_______________________________________________________________________");
		        PlayerData[playerid][pUpgradePoints] += 5;
				PlayerData[playerid][pEXP] += 1;
			}
		    case 60:
		    {
		        SendClientMessageEx(playerid, COLOR_YELLOW, "_______________________________________________________________________");
		        SendClientMessageEx(playerid, COLOR_GLOBAL, "* _-= %s Automate Playing Hours Reward =-_ *", GetServerName());
		        SendClientMessageEx(playerid, COLOR_GLOBAL, " You receive 50g Narcotic Drugs and 50,000 Materials for spending 60 Hours of Time in Playing");
		        SendClientMessageEx(playerid, COLOR_YELLOW, "_______________________________________________________________________");
				PlayerData[playerid][pWeed] += 50;
				PlayerData[playerid][pCocaine] += 50;
				PlayerData[playerid][pMaterials] += 50000;

		    }
		    case 85:
		    {
		        SendClientMessageEx(playerid, COLOR_YELLOW, "_______________________________________________________________________");
		        SendClientMessageEx(playerid, COLOR_GLOBAL, "* _-= %s Automate Playing Hours Reward =-_ *", GetServerName());
		        SendClientMessageEx(playerid, COLOR_GLOBAL, " You receive $100,000 of Cash and 2 Exp Token for spending 85 Hours of Time in Playing");
		        SendClientMessageEx(playerid, COLOR_YELLOW, "_______________________________________________________________________");
		        GivePlayerCash(playerid, 100000);
				PlayerData[playerid][pEXP] += 2;
		    }
		    case 100:
		    {
		        SendClientMessageEx(playerid, COLOR_YELLOW, "_______________________________________________________________________");
		        SendClientMessageEx(playerid, COLOR_GLOBAL, "* _-= %s Automate Playing Hours Reward =-_ *", GetServerName());
		        SendClientMessageEx(playerid, COLOR_GLOBAL, " You receive 20 Cookies for spending 100 Hours of Time in Playing");
		        SendClientMessageEx(playerid, COLOR_YELLOW, "_______________________________________________________________________");

                GivePlayerCookies(playerid, 20);
		    }
		    case 120:
		    {
		        SendClientMessageEx(playerid, COLOR_YELLOW, "_______________________________________________________________________");
		        SendClientMessageEx(playerid, COLOR_GLOBAL, "* _-= %s Automate Playing Hours Reward =-_ *", GetServerName());
		        SendClientMessageEx(playerid, COLOR_GLOBAL, " You receive 7 Days Silver VIP for spending 120 Hours of Time in Playing");
		        SendClientMessageEx(playerid, COLOR_YELLOW, "_______________________________________________________________________");
				if(PlayerData[playerid][pDonator] < 1)
				{
					new days = 7;
					PlayerData[playerid][pDonator] = 1;
					PlayerData[playerid][pVIPTime] = gettime() + (days * 86400);
					PlayerData[playerid][pVIPCooldown] = 0;
				}
		    }
		    case 180:
			{
			    SendClientMessageEx(playerid, COLOR_YELLOW, "_______________________________________________________________________");
		        SendClientMessageEx(playerid, COLOR_GLOBAL, "* _-= %s Automate Playing Hours Reward =-_ *", GetServerName());
		        SendClientMessageEx(playerid, COLOR_GLOBAL, " You receive 7 Days Gold VIP for spending 180 Hours of Time in Playing");
		        SendClientMessageEx(playerid, COLOR_YELLOW, "_______________________________________________________________________");
				if(PlayerData[playerid][pDonator] < 2)
				{
					new days = 7;
					PlayerData[playerid][pDonator] = 2;
					PlayerData[playerid][pVIPTime] = gettime() + (days * 86400);
					PlayerData[playerid][pVIPCooldown] = 0;
				}
			}
		    case 260:
		    {
		        SendClientMessageEx(playerid, COLOR_YELLOW, "_______________________________________________________________________");
		        SendClientMessageEx(playerid, COLOR_GLOBAL, "* _-= %s Automate Playing Hours Reward =-_ *", GetServerName());
		        SendClientMessageEx(playerid, COLOR_GLOBAL, " You receive 2 Exp Tokens, 2 Rim Kits, 15 First aid Kit for spending 260 Hours of Time in Playing");
		        SendClientMessageEx(playerid, COLOR_YELLOW, "_______________________________________________________________________");
		        PlayerData[playerid][pEXP] += 2;
		        PlayerData[playerid][pFirstAid] += 15;
		        PlayerData[playerid][pRimkits] += 2;
		    }
		    case 300:
		    {
		        SendClientMessageEx(playerid, COLOR_YELLOW, "_______________________________________________________________________");
		        SendClientMessageEx(playerid, COLOR_GLOBAL, "* _-= %s Automate Playing Hours Reward =-_ *", GetServerName());
		        SendClientMessageEx(playerid, COLOR_GLOBAL, " You receive 7 Days Legendary VIP Voucher, 1 Rim Kit, 3 Exp Tokens for spending 300 Hours of Time in Playing");
		        SendClientMessageEx(playerid, COLOR_YELLOW, "_______________________________________________________________________");
		        PlayerData[playerid][pEXP] += 3;
				if(PlayerData[playerid][pDonator] < 3)
				{
					new days=7;
					PlayerData[playerid][pDonator] = 3;
					PlayerData[playerid][pVIPTime] = gettime() + (days * 86400);
					PlayerData[playerid][pVIPCooldown] = 0;
				}
		        PlayerData[playerid][pRimkits] += 3;
		    }
		}
	}
    if(PlayerData[playerid][pHours] % 50 == 0)
    {
        PlayerData[playerid][pAge]++;
        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET age = %i WHERE uid = %i", PlayerData[playerid][pAge], PlayerData[playerid][pID]);
        mysql_tquery(connectionID, queryBuffer);
        if(PlayerData[playerid][pGender] == 1)
        {
            SendClientMessageToAllEx(COLOR_AQUA, "[Today's Birthday] %s have made it into another year and now he have %d years.", GetRPName(playerid), PlayerData[playerid][pAge]);
        }
        else
        {
            SendClientMessageToAllEx(COLOR_AQUA, "[Today's Birthday] %s have made it into another year and now she have %d years.", GetRPName(playerid), PlayerData[playerid][pAge]);
        }
    }
	if(PlayerData[playerid][pWeaponRestricted] > 0)
	{
		PlayerData[playerid][pWeaponRestricted]--;
	}
	if((!IsDoubleXPEnabled()) && PlayerData[playerid][pDoubleXP] > 0)
	{
	    PlayerData[playerid][pDoubleXP]--;

	    if(PlayerData[playerid][pDoubleXP] > 0)
	        SendClientMessageEx(playerid, COLOR_YELLOW, "Your double XP token expires in %i more hours.", PlayerData[playerid][pDoubleXP]);
		else
		    SendClientMessage(playerid, COLOR_YELLOW, "Your double XP token has expired.");
	}

	if(PlayerData[playerid][pHours] >= 20)
	{
		AwardAchievement(playerid, ACH_Regular);
	}
	if(PlayerData[playerid][pHours] >= 40)
	{
	    AwardAchievement(playerid, ACH_Addicted);
	}

    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET minutes = 0, hours = hours + 1, exp = %i, bank = %i, paycheck = 0, weaponrestricted = %i, doublexp = %i WHERE uid = %i", PlayerData[playerid][pEXP], PlayerData[playerid][pBank], PlayerData[playerid][pWeaponRestricted], PlayerData[playerid][pDoubleXP], PlayerData[playerid][pID]);
    mysql_tquery(connectionID, queryBuffer);
    IncreaseTotalHours();
	CallRemoteFunction("OnPlayerPayDay", "ii", playerid, total );

}

LoadGatesAndCells()
{

    gPDGates[0] = CreateDynamicObject(968, 1544.639892, -1631.008666, 13.252797, 0.000000, 90.000000, 90.000000);
    gPDGates[1] = CreateDynamicObject(980, 1588.042602, -1638.079956, 14.602818, 0.000000, 0.000000, 0.000000);

	// FBI exterior
	gFBIGates[0] = CreateDynamicObject(985, 321.255279, -1488.601318, 25.281988, 0.000000, 0.000000, -35.299957);
	gFBIGates[1] = CreateDynamicObject(985, 283.590423, -1542.835083, 25.281988, 0.000000, 0.000000, -34.899955);

    for(new idx=0;idx<sizeof(gGates); idx++)
    {
        gGates[idx][gateObject] = CreateDynamicObject(gGates[idx][gateModelId],gGates[idx][gateX], gGates[idx][gateY], gGates[idx][gateZ],
                gGates[idx][gateRX], gGates[idx][gateRY], gGates[idx][gateRZ]);
    }
	/*gPrisonCells[0] = CreateDynamicObject(19302,1205.69995117,-1328.09997559,797.00000000,0.00000000,0.00000000,90.00000000);
	gPrisonCells[1] = CreateDynamicObject(19302,1205.69995117,-1331.30004883,797.00000000,0.00000000,0.00000000,90.00000000);
	gPrisonCells[2] = CreateDynamicObject(19302,1205.69995117,-1331.30004883,800.50000000,0.00000000,0.00000000,90.00000000);
	gPrisonCells[3] = CreateDynamicObject(19302,1205.69995117,-1328.09997559,800.50000000,0.00000000,0.00000000,90.00000000);
	gPrisonCells[4] = CreateDynamicObject(19302,1215.30004883,-1328.09997559,797.00000000,0.00000000,0.00000000,90.00000000);
	gPrisonCells[5] = CreateDynamicObject(19302,1215.30004883,-1331.30004883,797.00000000,0.00000000,0.00000000,90.00000000);
	gPrisonCells[6] = CreateDynamicObject(19302,1215.30004883,-1331.30004883,800.50000000,0.00000000,0.00000000,90.00000000);
	gPrisonCells[7] = CreateDynamicObject(19302,1215.30004883,-1328.09997559,800.50000000,0.00000000,0.00000000,90.00000000);
	gPrisonCells[8] = CreateDynamicObject(19302,1215.30004883,-1334.50000000,797.00000000,0.00000000,0.00000000,90.00000000);
	gPrisonCells[9] = CreateDynamicObject(19302,1215.29980469,-1337.69921875,797.00000000,0.00000000,0.00000000,90.00000000);
	gPrisonCells[10] = CreateDynamicObject(19302,1215.30004883,-1340.90002441,797.00000000,0.00000000,0.00000000,90.00000000);
	gPrisonCells[11] = CreateDynamicObject(19302,1215.30004883,-1340.90002441,800.50000000,0.00000000,0.00000000,90.00000000);
	gPrisonCells[12] = CreateDynamicObject(19302,1215.30004883,-1337.69995117,800.50000000,0.00000000,0.00000000,90.00000000);
	gPrisonCells[13] = CreateDynamicObject(19302,1215.30004883,-1334.50000000,800.50000000,0.00000000,0.00000000,90.00000000);
	gPrisonCells[14] = CreateDynamicObject(19302,1205.69995117,-1334.50000000,800.50000000,0.00000000,0.00000000,90.00000000);
	gPrisonCells[15] = CreateDynamicObject(19302,1205.69995117,-1337.69995117,800.50000000,0.00000000,0.00000000,90.00000000);
	gPrisonCells[16] = CreateDynamicObject(19302,1205.69995117,-1340.90002441,800.50000000,0.00000000,0.00000000,90.00000000);
	gPrisonCells[17] = CreateDynamicObject(19302,1205.69995117,-1334.50000000,797.00000000,0.00000000,0.00000000,90.00000000);
	gPrisonCells[18] = CreateDynamicObject(19302,1205.69995117,-1337.69995117,797.00000000,0.00000000,0.00000000,90.00000000);
	gPrisonCells[19] = CreateDynamicObject(19302,1205.69995117,-1340.90002441,797.00000000,0.00000000,0.00000000,90.00000000);
	gPrisonCells[20] = CreateDynamicObject(19302,1215.30004883,-1344.09997559,800.50000000,0.00000000,0.00000000,90.00000000);
	gPrisonCells[21] = CreateDynamicObject(19302,1215.30004883,-1344.09997559,797.00000000,0.00000000,0.00000000,90.00000000);
	gPrisonCells[22] = CreateDynamicObject(19302,1205.69995117,-1344.09997559,800.50000000,0.00000000,0.00000000,90.00000000);
	gPrisonCells[23] = CreateDynamicObject(19302,1205.69995117,-1344.09997559,797.00000000,0.00000000,0.00000000,90.00000000);

	for(new i = 0; i < 24; i ++)
	{
		SetDynamicObjectMaterial(gPrisonCells[i], 0, 19302, "pd_jail_door02", "pd_jail_door02", 0xFF000000);
	}*/
}

LoadPickupsAndText()
{
	for(new i = 0; i < sizeof(g_RepairShops); i ++)
	{
		CreateDynamicMapIcon(g_RepairShops[i][0], g_RepairShops[i][1], g_RepairShops[i][2], 63, 0, .worldid = 0, .interiorid = 0);		
		CreateDynamicPickup(1239, 1, g_RepairShops[i][0], g_RepairShops[i][1], g_RepairShops[i][2]);
		CreateDynamic3DTextLabel("{ffff00}Repair Shop\n{ffffff}Cost: $500\n/enter to repair your vehicle.", COLOR_GREY, g_RepairShops[i][0], g_RepairShops[i][1], g_RepairShops[i][2], 20.0);
	}

	CreateDynamic3DTextLabel("Press Y to use weights", COLOR_GREY, 772.4859, 5.3462, 999.9802, 10.0);
	CreateDynamic3DTextLabel("Press Y to use treadmill", COLOR_GREY, 773.5106, -2.8392, 1000.1479, 10.0);


    //VIP
    CreateDynamic3DTextLabel("[VIP Locker]\n{FFFFFF}Type /viplocker to open the locker.\nType /clothes to change your clothes.\nType /getboombox to get free boombox.", COLOR_YELLOW, 1988.5000, -1255.9500, 2690.8100, 10.0);
	CreateDynamicPickup(1239, 1, 1988.5000, -1255.9500, 2690.8100);
	gVIPHealth = CreateDynamicPickup(1240, 1, 1988.5000, -1252.0000, 2690.8100, .worldid = 7, .interiorid = 3);
	gVIPArmor  = CreateDynamicPickup(1242, 1, 1988.5000, -1259.2000, 2690.8100, .worldid = 7, .interiorid = 3);

 	// Materials pickup 1
	CreateDynamic3DTextLabel("Materials pickup 1\nCost: $50\n/getmats to begin.", COLOR_YELLOW, 1423.4292,-1319.1487,13.5547, 20.0);
	CreateDynamic3DTextLabel("Materials pickup 2\nCost: $50\n/getmats to begin.", COLOR_YELLOW, 2393.4885, -2008.5726, 13.3467, 20.0);
	// boat run
	CreateDynamic3DTextLabel("Marina Materiasl Depot\nCost: $50\n/getmats to begin.", COLOR_YELLOW, 714.5344, -1565.1694, 1.76807, 40.0);
	CreateDynamicPickup(1318, 1, 714.5344, -1565.1694, 1.7680);

	// plane run
	CreateDynamic3DTextLabel("LSI Materials Depot\nCost: $50\n/getmats to begin.", COLOR_YELLOW, 2112.3240,-2432.8130,13.5469, 40.0);
	CreateDynamicPickup(1318, 1, 2112.3240, -2432.8130, 13.5469);

	//Lumberjack
	CreateDynamic3DTextLabel("{DDFF00}Oak {FFFFFF}tree\n{C1C1C1}To get started, go to the tree",COLOR_WHITE,-1931.063354,-2360.959228,30.820381+0.6,4.0);
	CreateDynamic3DTextLabel("{DDFF00}Oak {FFFFFF}tree\n{C1C1C1}To get started, go to the tree",COLOR_WHITE,-1914.466308,-2369.007685,29.804220+0.6,4.0);
	CreateDynamic3DTextLabel("{DDFF00}Oak {FFFFFF}tree\n{C1C1C1}To get started, go to the tree",COLOR_WHITE,-1903.706787,-2361.488769,31.170394+0.6,4.0);
	CreateDynamic3DTextLabel("{DDFF00}Spruce {FFFFFF}tree\n{C1C1C1}To get started, go to the tree",COLOR_WHITE,-1934.799438,-2243.597412,65.4831+0.6,4.0);
	CreateDynamic3DTextLabel("{DDFF00}Spruce {FFFFFF}tree\n{C1C1C1}To get started, go to the tree",COLOR_WHITE,-1917.573364,-2251.707519,65.8043+0.6,4.0);
	CreateDynamic3DTextLabel("[SIDE JOB]\nLumberjack Job\n Location: Angel Pine",COLOR_YELLOW,-1991.550659, -2389.910644, 30.625000+0.6,4.0);

	// Hospital exit
	CreateDynamic3DTextLabel("(( /exit ))", COLOR_GREY2, -2330.0376,111.4688,-5.3942, 20.0);
	CreateDynamic3DTextLabel("(( /exit ))", COLOR_GREY2, 1595.2653,-1688.3323,5.8906, 20.0, .worldid = 32);
	
	// /healme
	CreateDynamicPickup(1240, 23, -2299.6079, 123.6063, -5.3468);
	CreateDynamic3DTextLabel("/healme \nTo cure your disease",COLOR_LIGHTRED,-2299.6079,123.6063,-5.3468+0.6,4.0);

	CreateDynamic3DTextLabel("County General\nCost: $2000\n/buyinsurance to spawn here.", COLOR_DOCTOR, -2323.3250,110.9966,-5.3942, 10.0, .worldid = HOSPITAL_COUNTY);
	CreateDynamicPickup(1240, 1, -2323.3250,110.9966,-5.3942, .worldid = HOSPITAL_COUNTY);

	CreateDynamic3DTextLabel("San Fierro Medic Center\nCost: $4000\n/buyinsurance to spawn here.", COLOR_DOCTOR, -2323.3250,110.9966,-5.3942, 10.0, .worldid = HOSPITAL_SAN_FIERRO);
	CreateDynamicPickup(1240, 1, -2323.3250,110.9966,-5.3942, .worldid = HOSPITAL_SAN_FIERRO);

	CreateDynamic3DTextLabel("All Saints Hospital\nCost: $2000\n/buyinsurance to spawn here.", COLOR_DOCTOR, -2323.3250,110.9966,-5.3942, 10.0, .worldid = HOSPITAL_ALLSAINTS);
	CreateDynamicPickup(1240, 1, -2323.3250,110.9966,-5.3942, .worldid = HOSPITAL_ALLSAINTS);

	CreateDynamic3DTextLabel("Loading dock\n/load and pick a load\nto begin delivery.", COLOR_YELLOW, 1766.9261,-2048.9807,13.8355, 10.0);
	CreateDynamicPickup(1239, 1, 1766.9261,-2048.9807,13.8355);

	CreateDynamic3DTextLabel("Garbage Pickup\n/garbage\nto begin delivery.", COLOR_YELLOW, 2404.9758, -2070.3882, 13.5469, 10.0);
	CreateDynamicPickup(1239, 1, 2404.9758, -2070.3882, 13.5469);

	// DMV
	CreateDynamic3DTextLabel("Drivers test\nCost: $500\n/taketest to begin.", COLOR_YELLOW, -2033.2953, -117.4508, 1035.1719, 10.0);
	CreateDynamicPickup(1239, 1, -2033.2953, -117.4508, 1035.1719);

	//SF Paintball
	CreateDynamic3DTextLabel("Paintball arena\n/paintball to play paintball!", COLOR_YELLOW, -1549.7334,1165.4608,7.1875, 10.0);
	CreateDynamicPickup(1254, 1, -1549.7334,1165.4608,7.1875);

	//Ls Paintball
	CreateDynamic3DTextLabel("Paintball arena\n/paintball to play paintball!", COLOR_YELLOW, 1311.7522,-1367.2715,13.53, 10.0);
	CreateDynamicPickup(1254, 1, 1311.7522,-1367.2715,13.53);

	// Craft Table For Mafia
    CreateDynamicPickup(1239, 1, 1332.7495, 1568.4010, 1030.9145);
    CreateDynamic3DTextLabel("Craft table\ntype /gsellgun to sell a weapon.", COLOR_YELLOW, 1332.7495, 1568.4010, 1030.9145, 10.0);

	// ChangeName
	CreateDynamic3DTextLabel("Name changes\nCost: $7500/level\n/changename to request one\n/join to join any job.", COLOR_YELLOW, 1396.207641,-4.224958,1000.853515, 10.0);
	CreateDynamicPickup(1239, 1, 1396.207641,-4.224958,1000.853515);
	CreateActor(17, 1394.506591, -4.163287, 1000.853515, 269.89);

	// Milker
	CreateDynamic3DTextLabel("Milker Job\ntype /buybocket to buy a bocket.", COLOR_YELLOW, 1034.360595, -281.772613, 73.998100, 10.0);
	CreateDynamic3DTextLabel("Milker Job\ntype /milk to start the milking.", COLOR_YELLOW, 1067.486083, -304.230407, 74.008110, 3.0);
    CreateDynamic3DTextLabel("Milker Job\ntype /milk to start the milking.", COLOR_YELLOW, 1066.052612, -299.234252, 74.008110, 3.0);
    CreateDynamic3DTextLabel("Milker Job\ntype /milk to start the milking.", COLOR_YELLOW, 1063.673095, -295.457275, 74.008110, 3.0);
    CreateDynamic3DTextLabel("Milker Job\ntype /milk to start the milking.", COLOR_YELLOW, 1071.917480, -295.437622, 74.008110, 3.0);
    CreateDynamic3DTextLabel("Milker Job\ntype /milk to start the milking.", COLOR_YELLOW, 1075.167724, -302.154174, 74.008110, 3.0);
    CreateDynamic3DTextLabel("Milker Job\ntype /milk to start the milking.", COLOR_YELLOW, 1079.390014, -309.615386, 74.008110, 3.0);
    CreateDynamic3DTextLabel("Milker Job\ntype /milk to start the milking.", COLOR_YELLOW, 1081.445556, -304.313812, 74.008110, 3.0);
    CreateDynamic3DTextLabel("Milker Job\ntype /milk to start the milking.", COLOR_YELLOW, 1071.877929, -308.532379, 74.008110, 3.0);
    CreateDynamic3DTextLabel("Milker Job\ntype /milk to start the milking.", COLOR_YELLOW, 1068.574829, -313.870330, 74.008110, 3.0);
    CreateDynamic3DTextLabel("Milker Job\ntype /milk to start the milking.", COLOR_YELLOW, 1062.901489, -308.476959, 74.008110, 3.0);
	CreateDynamic3DTextLabel("Milkman\ntype /sellmilk to sell your milk.",   COLOR_YELLOW, 1082.199340, -365.259033, 74.074180, 10.0);

	CreateDynamic3DTextLabel("Ticket Pay\n/paytickets to pay your vehicle tickets.", COLOR_YELLOW, 1186.8889,-1795.3860,13.5703, 10.0);
	CreateDynamicPickup(1239, 1, 1186.8889,-1795.3860,13.5703);

	// Recycle
	CreateDynamic3DTextLabel("Recycle Job\ntype /recycle to start the recycling.", COLOR_YELLOW, 1085.245849, -1679.167358, 14.371733, 3.0);
	CreateDynamic3DTextLabel("Recycle Job\ntype /recycle to start the recycling.", COLOR_YELLOW, 1103.737426, -1679.169555, 14.371709, 3.0);
	CreateDynamic3DTextLabel("Recycle Job\ntype /recycle to start the recycling.", COLOR_YELLOW, 1101.022216, -1665.741699, 14.582563, 3.0);
	CreateDynamic3DTextLabel("Recycle Job\ntype /recycle to start the recycling.", COLOR_YELLOW, 1082.896606, -1665.740356, 14.582584, 3.0);
	CreateDynamic3DTextLabel("Recycle Job\ntype /recycle to start the recycling.", COLOR_YELLOW, 1103.897094, -1672.897460, 14.470188, 3.0);
	CreateDynamic3DTextLabel("Recycle Job\ntype /recycle to start the recycling.", COLOR_YELLOW, 1090.654052, -1672.906982, 14.470069, 3.0);

	CreateDynamic3DTextLabel("Drug smuggling\nCost: $100\n/getcrate to begin smuggling.", COLOR_YELLOW, 2205.9263,1581.7888,999.9827, 10.0);
	CreateDynamicPickup(1279, 1, 2205.9263,1581.7888,999.9827);

	CreateDynamic3DTextLabel("Heroin cookoff\nRequires chems\n/cookheroin to begin cooking.", COLOR_YELLOW, 1.2179, 2.8095, 999.4284, 10.0, .interiorid = 2, .worldid = 10);
	CreateDynamicPickup(1577, 1, 1.2179, 2.8095, 999.4284, .interiorid = 2, .worldid = 10);

	//CreateDynamic3DTextLabel("Banking commands\n/bankhelp for more help.", COLOR_YELLOW, 1667.4260, -972.6691, 683.6873, 10.0);
	//CreateDynamicPickup(1239, 1, 1667.4260, -972.6691, 683.6873);

    CreateDynamic3DTextLabel("Banking help\nStand here to collect your pay.\n/bankhelp for a list of commands.", COLOR_YELLOW, 1667.4180, -972.4201, 683.6855, 10.0);
	gPaycheck = CreateDynamicPickup(1274, 1, 1667.4180, -972.4201, 683.6855);

	gEphedrineStockText = CreateDynamic3DTextLabel("Chems\nStock: 100\n/getchems [amount]", COLOR_YELLOW, -942.1650,1847.1581,5.0051, 10.0);
	CreateDynamicPickup(1577, 1, -942.1650, 1847.1581, 5.0051);

	gSeedsStockText = CreateDynamic3DTextLabel("Marijuana seeds\nStock: 100\n/getseeds [amount]", COLOR_YELLOW, 321.8347, 1117.1797, 1083.8828, 10.0);
	CreateDynamicPickup(1578, 1, 321.8347, 1117.1797, 1083.8828);

	gCocaineText = CreateDynamic3DTextLabel("Crack\nStock: 100\n/getcrack [amount]", COLOR_YELLOW, 2342.7766, -1187.0839, 1027.9766, 10.0);
    CreateDynamicPickup(1575, 1, 2342.7766, -1187.0839, 1027.9766);
	
//	CreateDynamic3DTextLabel("/clothes\nto change your skin.", COLOR_YELLOW, 1826.3379, -1308.8324, 1131.7552, 15.0);

    gParachutes[0] = CreateDynamicPickup(371, 1, 1542.9038, -1353.0352, 329.4744); // Star tower
	gParachutes[1] = CreateDynamicPickup(371, 1, 315.9415, 1010.6052, 1953.0031); // Andromada interior
	// Hospital garage doors
	
	CreateDynamicObject(10149, 1150.004394, -1345.316284, 14.201147, 0.000000, 0.000000, 270.000000);
    CreateDynamicObject(10149, 2007.520874, -1408.116088, 16.992187, 0.000000, 0.000000, 0.000000);
    CreateDynamic3DTextLabel("/deliverpatient\nto drop off a patient.", COLOR_DOCTOR, 1140.5344, -1326.5345, 13.6328, 10.0);
    CreateDynamicPickup(1240, 1, 1140.5344, -1326.5345, 13.6328);
    CreateDynamic3DTextLabel("/deliverpatient\nto drop off a patient.", COLOR_DOCTOR, 2007.6256, -1410.2455, 16.9922, 10.0);
    CreateDynamicPickup(1240, 1, 2007.6256, -1410.2455, 16.9922);
    CreateDynamic3DTextLabel("/deliverpatient\nto drop off a patient.", COLOR_DOCTOR, -2684.1162, 626.1478, 14.0291, 10.0);
    CreateDynamicPickup(1240, 1, -2684.1162, 626.1478, 14.0291);
    CreateDynamic3DTextLabel("/deliverpatient\nto drop off a patient.", COLOR_DOCTOR, -2664.0845, 638.4924, 66.0938, 10.0);
    CreateDynamicPickup(1240, 1, -2664.0845, 638.4924, 66.0938);

    CreateDynamicPickup(1240, 1, 1161.8879,-1358.6638,31.3811); // allsaints roof
    CreateDynamic3DTextLabel("/deliverpatient\nto drop off a patient.", COLOR_DOCTOR, 1161.8879,-1358.6638,31.3811, 10.0);
	CreateDynamicPickup(1240, 1, 2070.4307,-1422.8580,48.3315); // county roof
	CreateDynamic3DTextLabel("/deliverpatient\nto drop off a patient.", COLOR_DOCTOR, 2070.4307,-1422.8580,48.331, 10.0);
	CreateDynamicPickup(1240, 1, 1510.7773,-2151.7322,13.7483); // fmd hq
	CreateDynamic3DTextLabel("/deliverpatient\nto drop off a patient.", COLOR_DOCTOR, 1510.7773,-2151.7322,13.7483, 10.0);
	CreateDynamicPickup(1240, 1, 1480.4819,-2166.9712,35.2578); // hq roof
	CreateDynamic3DTextLabel("/deliverpatient\nto drop off a patient.", COLOR_DOCTOR, 1480.4819,-2166.9712,35.2578, 10.0);
	CreateDynamicPickup(1240, 1, 1539.1060,-2167.2058,35.2578); // hq roof 2
	CreateDynamic3DTextLabel("/deliverpatient\nto drop off a patient.", COLOR_DOCTOR, 1539.1060,-2167.2058,35.2578, 10.0);


	new string[430];
	for(new i = 0; i < sizeof(staticEntrances); i ++)
	{
	    format(string, sizeof(string), "{afafaf}[{33CCFF}%s{afafaf}]\nPress '{ff0000}y{afafaf}' to enter.", staticEntrances[i][eName]);

	    CreateDynamicPickup(19132, 1, staticEntrances[i][ePosX], staticEntrances[i][ePosY], staticEntrances[i][ePosZ]);
	    CreateDynamic3DTextLabel(string, COLOR_GREY1, staticEntrances[i][ePosX], staticEntrances[i][ePosY], staticEntrances[i][ePosZ], 10.0);

	    if(staticEntrances[i][eMapIcon])
	    {
	        CreateDynamicMapIcon(staticEntrances[i][ePosX], staticEntrances[i][ePosY], staticEntrances[i][ePosZ], staticEntrances[i][eMapIcon], 0);
		}
	}
	for (new i = 0; i < sizeof(arrBoothPositions); i ++) {
	    CreateDynamic3DTextLabel("[Shooting Range]\n{FFFFFF}Press 'F' to use this booth.", COLOR_AQUA, arrBoothPositions[i][0], arrBoothPositions[i][1], arrBoothPositions[i][2], 15.0, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 0, -1, 7);
	}

	for(new i = 0; i < sizeof(atmMachines); i ++)
	{
	    CreateDynamicObject(19324, atmMachines[i][atmX], atmMachines[i][atmY], atmMachines[i][atmZ], 0.0, 0.0, atmMachines[i][atmA]);
	    CreateDynamic3DTextLabel("ATM machine\n/atm to operate.", COLOR_YELLOW, atmMachines[i][atmX], atmMachines[i][atmY], atmMachines[i][atmZ] + 0.4, 10.0);
	}
	for(new i = 0; i < sizeof(arrestPoints); i ++)
	{
	    CreateDynamic3DTextLabel("/arrest\nto arrest a suspect.", COLOR_YELLOW, arrestPoints[i][0], arrestPoints[i][1], arrestPoints[i][2], 7.0);
	    CreateDynamicPickup(1247, 1, arrestPoints[i][0], arrestPoints[i][1], arrestPoints[i][2]);
	}

	for(new i = 0; i < sizeof(minerPositions); i ++)
	{
	    CreateDynamic3DTextLabel("/mine\nto begin mining.", COLOR_GREEN, minerPositions[i][0], minerPositions[i][1], minerPositions[i][2], 25.0);
	}

}


RefreshTime()
{
	new hour, minute, string[12];

	gettime(hour, minute);

    format(string, sizeof(string), "%02d:%02d", hour, minute);
	TextDrawSetString(TimeTD, string);
}

GetBankRobbers()
{
	new count;

    for(new i = 0; i < MAX_BANK_ROBBERS; i ++)
	{
    	if(RobberyInfo[rRobbers][i] != INVALID_PLAYER_ID)
	    {
	        count++;
		}
	}

	return count;
}

AddToBankRobbery(playerid)
{
    for(new i = 0; i < MAX_BANK_ROBBERS; i ++)
	{
    	if(RobberyInfo[rRobbers][i] == INVALID_PLAYER_ID)
	    {
	        RobberyInfo[rRobbers][i] = playerid;
	        PlayerData[playerid][pRobCash] = 0;
	        break;
		}
	}
}

RemoveFromBankRobbery(playerid)
{
    for(new i = 0; i < MAX_BANK_ROBBERS; i ++)
	{
    	if(RobberyInfo[rRobbers][i] == playerid)
	    {
	        RobberyInfo[rRobbers][i] = INVALID_PLAYER_ID;
		}
	}

	if(!GetBankRobbers())
	{
	  	ResetRobbery();
	}
	else if(RobberyInfo[rPlanning] && RobberyInfo[rRobbers][0] == INVALID_PLAYER_ID)
	{
	    for(new i = 1; i < MAX_BANK_ROBBERS; i ++)
	    {
	        if(RobberyInfo[rRobbers][i] != INVALID_PLAYER_ID)
	        {
	            RobberyInfo[rRobbers][0] = RobberyInfo[rRobbers][i];
	            RobberyInfo[rRobbers][i] = INVALID_PLAYER_ID;
	            SendClientMessageEx(RobberyInfo[rRobbers][0], COLOR_AQUA, "You are now the leader of this bank heist!");
	            break;
			}
		}
	}

	PlayerData[playerid][pRobCash] = 0;
	PlayerData[playerid][pCP] = CHECKPOINT_NONE;

	RemovePlayerAttachedObject(playerid, 8);
	RemovePlayerAttachedObject(playerid, 9);
	PlayerPlaySound(playerid, 3402, 0.0, 0.0, 0.0);
	DisablePlayerCheckpoint(playerid);

	return 0;
}

IsPlayerInBankRobbery(playerid)
{
	if(RobberyInfo[rPlanning] || RobberyInfo[rStarted])
	{
		for(new i = 0; i < MAX_BANK_ROBBERS; i ++)
		{
	    	if(RobberyInfo[rRobbers][i] == playerid)
		    {
		        return 1;
			}
		}
	}

	return 0;
}


ResetRobbery()
{
    if(RobberyInfo[rStarted])
	{
		SendClientMessageToAllEx(COLOR_AQUA, "Breaking News: The bank robbery is now finished. %s was stolen from the bank.", FormatCash(RobberyInfo[rStolen]));
	}
	if(IsValidDynamicObject(RobberyInfo[rObjects][0]))
	{
		DestroyDynamicObject(RobberyInfo[rObjects][0]);
	}
	if(IsValidDynamicObject(RobberyInfo[rObjects][1]))
	{
		DestroyDynamicObject(RobberyInfo[rObjects][1]);
	}

	for(new i = 0; i < 5; i ++)
	{
	    DestroyDynamic3DTextLabel(RobberyInfo[rText][i]);
	    RobberyInfo[rText][i] = Text3D:INVALID_3DTEXT_ID;
	}

	for(new i = 0; i < MAX_BANK_ROBBERS; i ++)
	{
	    RobberyInfo[rRobbers][i] = INVALID_PLAYER_ID;
	}

    RobberyInfo[rTime] = 8;
    RobberyInfo[rPlanning] = 0;
    RobberyInfo[rStarted] = 0;
    RobberyInfo[rStolen] = 0;
    RobberyInfo[rObjects][0] = CreateDynamicObject(19799, 1678.248901, -988.194702, 671.695007, 0.000000, 0.000000, 0.000000);
    RobberyInfo[rObjects][1] = INVALID_OBJECT_ID;
}



GetAvailableAttachedSlot(playerid)
{
	for(new i = 0; i < 5; i ++)
	{
	    if(!IsPlayerAttachedObjectSlotUsed(playerid, i))
	    {
	        return i;
		}
	}

	return -1;
}

CancelTaxiRide(playerid) // playerid is the driver of the taxi.
{
	new
		passengerid = PlayerData[playerid][pTaxiPassenger],
		bill = PlayerData[playerid][pTaxiBill],
		earned = PlayerData[playerid][pTaxiBill],
		string[20];

	if(PlayerData[playerid][pLaborUpgrade] != 0)
	{
	    earned += percent(earned, PlayerData[playerid][pLaborUpgrade]);
	}

	SendClientMessageEx(passengerid, COLOR_AQUA, "This ride costed you {FF6347}$%i{33CCFF}.", bill);
	SendClientMessageEx(playerid, COLOR_AQUA, "You earned {00AA00}$%i{33CCFF} for this ride.", earned);

	format(string, sizeof(string), "~r~-$%i", bill);
	GameTextForPlayer(passengerid, string, 5000, 1);

	format(string, sizeof(string), "~g~+$%i", earned);
	GameTextForPlayer(playerid, string, 5000, 1);

	GivePlayerCash(passengerid, -bill);
	AddToPaycheck(playerid, earned);

	PlayerData[playerid][pTaxiPassenger] = INVALID_PLAYER_ID;
	PlayerData[playerid][pTaxiBill] = 0;
	PlayerData[playerid][pTaxiTime] = 0;
}

SetFreezePos(playerid, Float:x, Float:y, Float:z)
{
    if(PlayerData[playerid][pFreezeTimer] >= 0)
	{
		KillTimer(PlayerData[playerid][pFreezeTimer]);
	}

    PlayerData[playerid][pFreezeTimer] = SetTimerEx("UnfreezePlayer", 3000, false, "i", playerid);
	SetPlayerPos(playerid, x, y, z);

    TogglePlayerControllableEx(playerid, false);
    //GameTextForPlayer(playerid, "~w~Loading objects...", 3000, 3);
    ShowFreezeTextdraw(playerid);
}

IsPlayerChatActive(playerid)
{
	foreach(new i : Player)
	{
	    if(chattingWith[playerid]{i})
	    {
	        return 1;
		}
	}

	return 0;
}

PlayerHasJob(playerid, job)
{
    return (PlayerData[playerid][pJob] == job || PlayerData[playerid][pSecondJob] == job);
}

ResetPlayerWeaponsEx(playerid)
{
	ResetPlayerWeapons(playerid);
	SetPlayerArmedWeapon(playerid, 0);

	for(new i = 0; i < 13; i ++)
	{
	    PlayerData[playerid][pWeapons][i] = 0;
	    PlayerData[playerid][pTempWeapons][i] = 0;
	    PlayerData[playerid][pAmmo][i] = 0;
	}

	PlayerData[playerid][pACTime] = gettime() + 2;
}

RemovePlayerWeapon(playerid, weaponid)
{
	// Reset the player's weapons.
	ResetPlayerWeapons(playerid);
	// Set the armed slot to zero.
	SetPlayerArmedWeapon(playerid, 0);
	// Set the weapon in the slot to zero.
	PlayerData[playerid][pACTime] = gettime() + 2;
	PlayerData[playerid][pWeapons][GetWeaponSlot(weaponid)] = 0;
	PlayerData[playerid][pTempWeapons][GetWeaponSlot(weaponid)] = 0;
	PlayerData[playerid][pAmmo][GetWeaponSlot(weaponid)] = 0;
	// Set the player's weapons.
	SetPlayerWeapons(playerid);
	// Save them to prevent rollbacks.
	SavePlayerWeapons(playerid);
}

GivePlayerWeaponEx(playerid, weaponid, bool:temp = false)
{
	if(1 <= weaponid <= 46)
	{
	    if(temp)
		{
			PlayerData[playerid][pTempWeapons][GetWeaponSlot(weaponid)] = weaponid;
			GivePlayerWeapon(playerid, weaponid, 29999);
	    }
		else
		{
			PlayerData[playerid][pWeapons][GetWeaponSlot(weaponid)] = weaponid;
			SetPlayerWeapons(playerid);
		}

		if(GetPlayerState(playerid) == PLAYER_STATE_DRIVER)
		{
		    SetPlayerArmedWeapon(playerid, 0);
		}
		else if(GetPlayerState(playerid) == PLAYER_STATE_PASSENGER)
		{
			switch(weaponid)
			{
		    	case 22, 23, 25, 28..34:
		    	{
		    	    SetPlayerArmedWeapon(playerid, weaponid);
			    }
			    default:
			    {
		    	    SetPlayerArmedWeapon(playerid, 0);
				}
			}
		}
		else
		{
		    SetPlayerArmedWeapon(playerid, weaponid);
		}

		SavePlayerWeapons(playerid);

		PlayerData[playerid][pACTime] = gettime() + 2;
	}
}
GetScriptWeapon(playerid)
{
	new weaponid = GetPlayerWeapon(playerid);

	if(PlayerHasWeapon(playerid, weaponid))
	{
	    return weaponid;
	}

	return 0;
}

PlayerHasWeapon(playerid, weaponid, bool:temp = false)
{
	switch(weaponid)
	{
	    case 0, 2, 40, 46:
	    {
	        return 1;
		}
	}

	if(weaponid == 23 && (PlayerData[playerid][pTazer] || (IsLawEnforcement(playerid) || GetPlayerFaction(playerid) == FACTION_GOVERNMENT)))
	{
	    return 1;
	}

	if((temp) && PlayerData[playerid][pTempWeapons][GetWeaponSlot(weaponid)] == weaponid)
	{
	    return 1;
	}

	return PlayerData[playerid][pWeapons][GetWeaponSlot(weaponid)] == weaponid;
}
SetPlayerWeapons(playerid)
{
	if(!IsPlayerInEvent(playerid) && PlayerData[playerid][pPaintball] == 0 && PlayerData[playerid][pDueling] == INVALID_PLAYER_ID)
	{
		new weaponid = GetPlayerWeapon(playerid);

		ResetPlayerWeapons(playerid);
        
        if(PlayerData[playerid][pJailType] || PlayerData[playerid][pWeaponRestricted])
        {
            return;
        }
		for(new i = 0; i < 13; i ++)
		{
		    if(PlayerData[playerid][pWeapons][i] > 0)
		    {
		        if(i == 2 && PlayerData[playerid][pTazer])
		        {
		            GivePlayerWeaponEx(playerid, 23, true);
		            continue;
   	      	}

				if(16 <= PlayerData[playerid][pWeapons][i] <= 18)
			        GivePlayerWeapon(playerid, PlayerData[playerid][pWeapons][i], 1);
			    else
					GivePlayerWeapon(playerid, PlayerData[playerid][pWeapons][i], 29999);
			}
		}

		switch(GetPlayerState(playerid))
		{
		    case PLAYER_STATE_DRIVER:
		    {
		        SetPlayerArmedWeapon(playerid, 0);
			}
			case PLAYER_STATE_PASSENGER:
			{
			    switch(weaponid)
			    {
			        case 22, 23, 25, 28..34:
			        {
			            SetPlayerArmedWeapon(playerid, weaponid);
					}
					default:
					{
					    SetPlayerArmedWeapon(playerid, 0);
					}
				}
			}
			default:
			{
			    SetPlayerArmedWeapon(playerid, weaponid);
		    }
		}
	}
}


SetPlayerClothing(playerid)
{
	// Reset any clothing that the player has on them.
	for(new i = 0; i < MAX_PLAYER_CLOTHING; i ++)
	{
	    if(ClothingInfo[playerid][i][cExists] && ClothingInfo[playerid][i][cAttached])
	    {
	        RemovePlayerAttachedObject(playerid, ClothingInfo[playerid][i][cAttachedIndex]);
		}
	}

	// Now, we reapply the clothing to the player.
	for(new i = 0; i < MAX_PLAYER_CLOTHING; i ++)
	{
	    if(ClothingInfo[playerid][i][cExists] && ClothingInfo[playerid][i][cAttached])
		{
		    if(ClothingInfo[playerid][i][cAttachedIndex] == -1)
		    {
			    ClothingInfo[playerid][i][cAttachedIndex] = GetAvailableAttachedSlot(playerid);
			}

		    if(ClothingInfo[playerid][i][cAttachedIndex] >= 0)
		    {
		        SetPlayerAttachedObject(playerid, ClothingInfo[playerid][i][cAttachedIndex], ClothingInfo[playerid][i][cModel], ClothingInfo[playerid][i][cBone], ClothingInfo[playerid][i][cPosX], ClothingInfo[playerid][i][cPosY], ClothingInfo[playerid][i][cPosZ], ClothingInfo[playerid][i][cRotX], ClothingInfo[playerid][i][cRotY], ClothingInfo[playerid][i][cRotZ], ClothingInfo[playerid][i][cScaleX], ClothingInfo[playerid][i][cScaleY], ClothingInfo[playerid][i][cScaleZ]);
			}
			else
			{
			    // Clothing wasn't attached... slots are probably all full.
			    ClothingInfo[playerid][i][cAttached] = 0;

			    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE clothing SET attached = 0 WHERE id = %i", ClothingInfo[playerid][i][cID]);
			    mysql_tquery(connectionID, queryBuffer);
			}
		}
	}

	PlayerData[playerid][pAwaitingClothing] = 0;
}

SetPlayerInPaintball(playerid, type)
{
    if (PlayerData[playerid][pPaintball] == 0)
    {
        SavePlayerVariables(playerid);
        ResetPlayerWeapons(playerid);
    }
    if (type == 1)
    {
        new rand = random(sizeof(paintballFSpawns));
        SetPlayerPos(playerid, paintballFSpawns[rand][0], paintballFSpawns[rand][1], paintballFSpawns[rand][2]);
        SetPlayerFacingAngle(playerid, paintballFSpawns[rand][3]);
        SetPlayerInterior(playerid, 18);
        SetPlayerVirtualWorld(playerid, 1000);
        SetCameraBehindPlayer(playerid);

        SetPlayerHealth(playerid, 100.0);
        SetPlayerArmour(playerid, 100.0);

        GivePlayerWeaponEx(playerid, 24, true);
        GivePlayerWeaponEx(playerid, 27, true);
        GivePlayerWeaponEx(playerid, 29, true);
        GivePlayerWeaponEx(playerid, 31, true);
        GivePlayerWeaponEx(playerid, 34, true);

        PlayerData[playerid][pPaintball] = 1;
    }
    if (type == 2)
    {
        new rand = random(sizeof(paintballLVPD));
        SetPlayerPos(playerid, paintballLVPD[rand][0], paintballLVPD[rand][1], paintballLVPD[rand][2]);
        SetPlayerFacingAngle(playerid, paintballLVPD[rand][3]);
        SetPlayerInterior(playerid, 3);
        SetPlayerVirtualWorld(playerid, 1000);
        SetCameraBehindPlayer(playerid);

        SetPlayerHealth(playerid, 100.0);
        SetPlayerArmour(playerid, 100.0);

        GivePlayerWeaponEx(playerid, 24, true);
        GivePlayerWeaponEx(playerid, 27, true);
        GivePlayerWeaponEx(playerid, 29, true);
        GivePlayerWeaponEx(playerid, 31, true);
        GivePlayerWeaponEx(playerid, 34, true);

        PlayerData[playerid][pPaintball] = 2;
    }
    else if (type == 3)
    {
        SetPlayerPos(playerid, paintballTSpawns[pbNext][0], paintballTSpawns[pbNext][1], paintballTSpawns[pbNext][2]);
        SetPlayerFacingAngle(playerid, paintballTSpawns[pbNext][3]);
        SetPlayerInterior(playerid, 18);
        SetPlayerVirtualWorld(playerid, 1001);
        SetCameraBehindPlayer(playerid);

        SetPlayerHealth(playerid, 100.0);
        SetPlayerArmour(playerid, 100.0);

        GivePlayerWeaponEx(playerid, 24, true);
        GivePlayerWeaponEx(playerid, 27, true);
        GivePlayerWeaponEx(playerid, 29, true);
        GivePlayerWeaponEx(playerid, 31, true);
        GivePlayerWeaponEx(playerid, 34, true);

        PlayerData[playerid][pPaintball] = 3;
        PlayerData[playerid][pPaintballTeam] = pbNext;
        if (!pbNext)
        {
            pbNext = 1;
        }
        else
        {
            pbNext = 0;
        }
    }
    else if (type == 4)
    {
        new rand = random(sizeof(paintballDSpawns));
        SetPlayerPos(playerid, paintballDSpawns[rand][0], paintballDSpawns[rand][1], paintballDSpawns[rand][2]);
        SetPlayerFacingAngle(playerid, paintballDSpawns[rand][3]);
        SetPlayerInterior(playerid, 0);
        SetPlayerVirtualWorld(playerid, 1000);
        SetCameraBehindPlayer(playerid);

        GangZoneShowForPlayer(playerid, zone_paintball[0], 0xFFFF0096);

        SetPlayerHealth(playerid, 25.0);
        SetPlayerArmour(playerid, 0.0);

        GivePlayerWeaponEx(playerid, 24, true);

        PlayerData[playerid][pPaintball] = 4;
    }
    else if (type == 5)
    {
        new rand = random(sizeof(paintballSSpawns));
        SetPlayerPos(playerid, paintballSSpawns[rand][0], paintballSSpawns[rand][1], paintballSSpawns[rand][2]);
        SetPlayerFacingAngle(playerid, paintballSSpawns[rand][3]);
        SetPlayerInterior(playerid, 0);
        SetPlayerVirtualWorld(playerid, 1001);
        SetCameraBehindPlayer(playerid);

        GangZoneShowForPlayer(playerid, zone_paintball[1], 0xFFFF0096);

        SetPlayerHealth(playerid, 38.0);
        SetPlayerArmour(playerid, 0.0);

        GivePlayerWeaponEx(playerid, 34, true);

        PlayerData[playerid][pPaintball] = 5;
    }
}


SetPlayerInHospital(playerid, time = 15, type = -1)
{
    PlayerData[playerid][pHospitalType] = (type == -1) ? (random(2) + 1) : (type);
    PlayerData[playerid][pHospitalTime] = time;
    PlayerData[playerid][pHospital] = 1;

    TogglePlayerControllableEx(playerid, 0);
 	GameTextForPlayer(playerid, "~w~Recovering...", 1500, 3);
    new rand = random( sizeof( SpawnBolnica ) );
	SetPlayerVirtualWorld(playerid, 75);
	SetPlayerPos( playerid, SpawnBolnica[ rand ][ 0 ], SpawnBolnica[ rand ][ 1 ], SpawnBolnica[ rand ][ 2 ] );
	SetPlayerFacingAngle( playerid, 90.000 );
	ApplyAnimation(playerid, "SWAT", "gnstwall_injurd", 4.1, 1, 0, 0, 0, 0);
	//ApplyAnimation( playerid, "BEACH", "bather", 4.0, 1, 0, 0, 0, 0 );
    SetPlayerCameraPos(playerid, -2280.1226, 105.9459, -3.6012);
	SetPlayerCameraLookAt(playerid, -2279.2388, 105.4819, -3.9212);
}

SetPlayerInJail(playerid)
{

	if(PlayerData[playerid][pJailType] == 1) // OOC jail
	{
        new rand = random(sizeof(AdminPrisonFloat));
        SetPlayerPos(playerid, AdminPrisonFloat[rand][0], AdminPrisonFloat[rand][1], AdminPrisonFloat[rand][2]);

		SetPlayerFacingAngle(playerid, 0.0000);
		SetPlayerInterior(playerid, 69);
		SetPlayerVirtualWorld(playerid, 99999);
		SetCameraBehindPlayer(playerid);
		SetPlayerSkin(playerid, 50);
	}
	else if(PlayerData[playerid][pJailType] == 2) // OOC prison
	{
        new rand = random(sizeof(AdminPrisonFloat));
        SetPlayerPos(playerid, AdminPrisonFloat[rand][0], AdminPrisonFloat[rand][1], AdminPrisonFloat[rand][2]);
		SetPlayerFacingAngle(playerid, 36.0000);
		SetPlayerInterior(playerid, 69);
		SetPlayerVirtualWorld(playerid, 99999);
		SetCameraBehindPlayer(playerid);
	}
	else if(PlayerData[playerid][pJailType] == 3) // IC prison
	{
	    new index = random(sizeof(cellSpawns));

		SetFreezePos(playerid, cellSpawns[index][0], cellSpawns[index][1], cellSpawns[index][2]);
		SetPlayerFacingAngle(playerid, cellSpawns[index][3]);
		SetPlayerInterior(playerid, 2);
		SetPlayerVirtualWorld(playerid, GetStaticEntranceWorld("Police department"));
		SetCameraBehindPlayer(playerid);
		SetPlayerSkin(playerid, 50);
	}
}


TeleportToVehicle(playerid, vehicleid)
{
	new
	    Float:x,
	    Float:y,
	    Float:z,
		Float:a,
		interior,
		garageid;

	GetVehiclePos(vehicleid, x, y, z);
	GetVehicleZAngle(vehicleid, a);

	if((garageid = GetVehicleGarage(vehicleid)) >= 0)
	{
 		interior = garageInteriors[GarageInfo[garageid][gType]][intID];
	}

	TeleportToCoords(playerid, x + 1, y + 1, z + 1, a, interior, GetVehicleVirtualWorld(vehicleid));
}

TeleportToPlayer(playerid, targetid, bool:vehicle = true)
{
	new
	    Float:x,
	    Float:y,
	    Float:z,
		Float:a;

	GetPlayerPos(targetid, x, y, z);
	GetPlayerFacingAngle(targetid, a);
	new interior = GetPlayerInterior(targetid);
	TeleportToCoords(playerid, x + 1, y + 1, z, a, interior, GetPlayerVirtualWorld(targetid), (interior!=0), vehicle);
}

TeleportToCoords(playerid, Float:x, Float:y, Float:z, Float:angle, interiorid, worldid, bool:freeze = false, bool:vehicle = true)
{
	new vehicleid = GetPlayerVehicleID(playerid);

	if((vehicle) && GetPlayerState(playerid) == PLAYER_STATE_DRIVER)
	{
	    foreach(new i : Player)
	    {
	        if(IsPlayerInVehicle(i, vehicleid))
	        {
	            SetPlayerInterior(i, interiorid);
	            SetPlayerVirtualWorld(i, worldid);
			}
	    }

        SetVehiclePos(vehicleid, x, y, z);
     	SetVehicleZAngle(vehicleid, angle);
	    SetVehicleVirtualWorld(vehicleid, worldid);
	    LinkVehicleToInterior(vehicleid, interiorid);
	
		if(freeze)
		{
			SetTimerEx("VehicleUnfreeze", 3000, false, "iifffii", playerid, GetPlayerVehicleID(playerid), x, y, z, interiorid, worldid);
			ShowFreezeTextdraw(playerid);
			TogglePlayerControllableEx(playerid, 0);
		}
	}
	else
	{
		if(freeze)
		{
			SetFreezePos(playerid, x, y, z);
		}
		else
		{
	    	SetPlayerPos(playerid, x, y, z);
		}
	    SetPlayerFacingAngle(playerid, angle);
		SetPlayerInterior(playerid, interiorid);
		SetPlayerVirtualWorld(playerid, worldid);
		SetCameraBehindPlayer(playerid);
	}

	new houseid;
	if((houseid = GetInsideHouse(playerid)) >= 0)
	{
		if(HouseInfo[houseid][hLights] == 1)
        {
            TextDrawHideForPlayer(playerid, houseLights);
        }
        else
        {
            TextDrawShowForPlayer(playerid, houseLights);
		}
	}
}

ShowLandsOnMap(playerid, enable)
{
	foreach(new i : Land)
	{
	    if(LandInfo[i][lExists])
	    {
		    if(enable) {
 				GangZoneShowForPlayer(playerid, LandInfo[i][lGangZone], COLOR_LAND);
			} else {
		    	GangZoneHideForPlayer(playerid, LandInfo[i][lGangZone]);
			}
		}
	}

	PlayerData[playerid][pShowLands] = enable;
}

CancelZoneCreation(playerid)
{
    for(new i = 0; i < 4; i ++)
    {
        DestroyDynamicPickup(PlayerData[playerid][pZonePickups][i]);
        PlayerData[playerid][pZonePickups][i] = -1;
	}

	GangZoneDestroy(PlayerData[playerid][pZoneID]);

	PlayerData[playerid][pZoneID] = -1;
	PlayerData[playerid][pZoneCreation] = 0;
    PlayerData[playerid][pMinX] = 0.0;
    PlayerData[playerid][pMinY] = 0.0;
    PlayerData[playerid][pMaxX] = 0.0;
    PlayerData[playerid][pMaxY] = 0.0;
}

ResetCooking(playerid)
{
    PlayerData[playerid][pCookHeroin] = 0;
	PlayerData[playerid][pCookGrams] = 0;
	PlayerData[playerid][pCookTime] = 0;
}

ResetPlayer(playerid)
{
    TextDrawHideForPlayer(playerid, welcomenew);
    if(IsPlayerInEvent(playerid))
	{
        EventKickPlayer(playerid);
		ResetPlayerWeapons(playerid);
	}
	if(PlayerData[playerid][pPaintball] > 0)
	{
	    ResetPlayerWeapons(playerid);
		PlayerData[playerid][pPaintball] = 0;
		PlayerData[playerid][pPaintballTeam] = -1;
	}
	if(PlayerData[playerid][pHospital])
	{
	    GameTextForPlayer(playerid, " ", 100, 3);

	    PlayerData[playerid][pHospital] = 0;
	    PlayerData[playerid][pHospitalTime] = 0;
	}	
	if(PlayerData[playerid][pTazedTime] > 0)
	{
	    ClearAnimations(playerid, 1);
	    TogglePlayerControllableEx(playerid, 1);
	}
	if(PlayerData[playerid][pCuffed])
	{
	    TogglePlayerControllableEx(playerid, 1);
	    SetPlayerSpecialAction(playerid, SPECIAL_ACTION_NONE);
	}
	if(GetPlayerSpecialAction(playerid) == SPECIAL_ACTION_CARRY)
	{
	    SetPlayerSpecialAction(playerid, SPECIAL_ACTION_NONE);
	}
	if(PlayerData[playerid][pLiveBroadcast] != INVALID_PLAYER_ID)
	{
	    PlayerData[PlayerData[playerid][pLiveBroadcast]][pLiveBroadcast] = INVALID_PLAYER_ID;
	    PlayerData[playerid][pLiveBroadcast] = INVALID_PLAYER_ID;
	}
	if(PlayerData[playerid][pPlantedBomb])
	{
	    DestroyDynamicObject(PlayerData[playerid][pBombObject]);
	    PlayerData[playerid][pBombObject] = INVALID_OBJECT_ID;
	    PlayerData[playerid][pPlantedBomb] = 0;
	}
	if(PlayerData[playerid][pFreezeTimer] >= 0)
	{
	    KillTimer(PlayerData[playerid][pFreezeTimer]);
	    TogglePlayerControllableEx(playerid, 1);
		PlayerData[playerid][pFreezeTimer] = -1;
	}
	if(PlayerData[playerid][pDueling] != INVALID_PLAYER_ID)
	{
		PlayerData[PlayerData[playerid][pDueling]][pDueling] = INVALID_PLAYER_ID;
		PlayerData[playerid][pDueling] = INVALID_PLAYER_ID;
	}
	if(RobberyInfo[rPlanning] || RobberyInfo[rStarted])
	{
		RemoveFromBankRobbery(playerid);
	}

	foreach(new i : Player)
	{
	    if(PlayerData[i][pDraggedBy] == playerid)
	    {
	        PlayerData[i][pDraggedBy] = INVALID_PLAYER_ID;
		}
	}
	StopWorkout(playerid);
	if (PlayerData[playerid][pRangeBooth] != -1)
		Booth_Leave(playerid);
	PlayerData[playerid][pInTurf] = -1;
	InsideShamal[playerid]= INVALID_VEHICLE_ID;
    totalDamages[playerid] = 0;
	PlayerData[playerid][pInjured] = 0;
	PlayerData[playerid][pAcceptedHelp] = 0;
	PlayerData[playerid][pChatstyle] = 0;
	PlayerData[playerid][pSpeedTime] = 0;
	PlayerData[playerid][pSweeping] = 0;
	PlayerData[playerid][pSweepTime] = 0;
	PlayerData[playerid][pSweepEarnings] = 0;
	PlayerData[playerid][pTazer] = 0;
	PlayerData[playerid][pTazedTime] = 0;
	PlayerData[playerid][pCuffed] = 0;
	PlayerData[playerid][pTied] = 0;
	PlayerData[playerid][pDraggedBy] = INVALID_PLAYER_ID;
	PlayerData[playerid][pDelivered] = 0;
	PlayerData[playerid][pContractTaken] = INVALID_PLAYER_ID;
    PlayerData[playerid][pPoisonTime] = 0;
    PlayerData[playerid][pCocaineTrunk] = INVALID_VEHICLE_ID;
    PlayerData[playerid][pPreviewHouse] = -1;
    PlayerData[playerid][pPreviewType] = 0;
    PlayerData[playerid][pPreviewTime] = 0;
    PlayerData[playerid][pHHCheck] = 0;
 	CancelActiveCheckpoint(playerid);
 	CancelBreakIn(playerid);
	PlayerData[playerid][pRepairShop] = -1;
	PlayerData[playerid][pRepairTime] = 0;
 	RemovePlayerAttachedObject(playerid, 9);
	CallRemoteFunction("OnPlayerReset", "i", playerid);
}

CancelBreakIn(playerid)
{
	if(PlayerData[playerid][pLockBreak] != INVALID_VEHICLE_ID)
	{
	    new
	        damage[4];

		SetVehicleParams(PlayerData[playerid][pLockBreak], VEHICLE_ALARM, false);
		GetVehicleDamageStatus(PlayerData[playerid][pLockBreak], damage[0], damage[1], damage[2], damage[3]);
		UpdateVehicleDamageStatus(PlayerData[playerid][pLockBreak], damage[0], 0, damage[2], damage[3]);

    	DestroyDynamic3DTextLabel(PlayerData[playerid][pLockText]);
		KillTimer(PlayerData[playerid][pLockTimer]);

		PlayerData[playerid][pLockText] = Text3D:INVALID_3DTEXT_ID;
		PlayerData[playerid][pLockBreak] = INVALID_VEHICLE_ID;
	}
}

forward garbagewait(playerid);
public garbagewait(playerid)
{
	ShowPlayerFooter(playerid, "Garbage Loaded....~n~Proceed to the next checkpoint.");
    TogglePlayerControllableEx(playerid, 1);
}
forward truckerwait(playerid);
public truckerwait(playerid)
{
	ShowPlayerFooter(playerid, "Truck was Loaded....~n~Deliver it to the destination business.");
	new truckindex = GetTruckIndex(playerid);
	if(truckindex == -1){
		CancelTruckDelivery(playerid);
		SendClientMessageEx(playerid, COLOR_RED, "TRUCKER: Delivery canceled as you are not in a valid Truck");
	}else{
			
		SetPlayerCheckpoint(playerid, truckersGoods[truckindex][pTDPosX], truckersGoods[truckindex][pTDPosY], truckersGoods[truckindex][pTDPosZ], 5.0);
		PlayerData[playerid][pCP] = CHECKPOINT_TRUCKDELIVERY;
		SendClientMessageEx(playerid, COLOR_AQUA, "The truck was loaded with %s, deliver it to the desitination business(%d)",GoodsTypeString[truckersGoods[truckindex][pGoodType]],truckersGoods[truckindex][pBizID]);		
		TogglePlayerControllableEx(playerid, 1);
	}
}
CancelActiveCheckpoint(playerid)
{
    if(PlayerData[playerid][pDrivingTest])
	{
	    SetVehicleToRespawn(PlayerData[playerid][pTestVehicle]);
	}
	if(GetPlayerSpecialAction(playerid) == SPECIAL_ACTION_CARRY)
	{
	    SetPlayerSpecialAction(playerid, SPECIAL_ACTION_NONE);
	    RemovePlayerAttachedObject(playerid, 9);
    }

    DisablePlayerCheckpoint(playerid);

    CallRemoteFunction("OnPlayerClearCheckPoint", "i", playerid);

	PlayerData[playerid][pCP] = CHECKPOINT_NONE;
	PlayerData[playerid][pSmuggleMats] = 0;
	PlayerData[playerid][pSmuggleDrugs] = 0;
	PlayerData[playerid][pDrivingTest] = 0;
	PlayerData[playerid][pTestVehicle] = INVALID_VEHICLE_ID;
	PlayerData[playerid][pTestCP] = 0;
    PlayerData[playerid][pShipment] = -1;
    PlayerData[playerid][pGarbage] = 0;
}


PlayLoginMusic(playerid)
{
	PlayAudioStreamForPlayer(playerid, GetIntroMusicUrl());
	return 1;
}





ShowCopClothingMenu(playerid)
{
	new models[sizeof(copClothing)];

	for(new i = 0; i < sizeof(copClothing); i ++) {
	    models[i] = copClothing[i][cModel];
	}

	ShowPlayerSelectionMenu(playerid, MODEL_SELECTION_COPCLOTHING, "LEO Clothing", models, sizeof(models));
}

IsMafiaWeapon(weaponid)
{
 	switch(weaponid) 
 	{
		case  8: return true; // Katana 
		case 24: return true; // Desert Eagle 
		case 29: return true; // MP5 
		case 30: return true; // AK-47 
		case 31: return true; // M4 
		case 27: return true; // Combat Shotgun 
		case 34: return true; // Sniper Rifle
    }
	return false;
}

GetCraftWeaponPrice(playerid, weaponid)
{
	new cost = -1;

	switch(weaponid)
	{
	    case  2: cost =   200; // Golf Club
		case  5: cost =   200; // Baseball Bat
		case  6: cost =   200; // Shovel
		case  7: cost =   200; // Pool Cue
		case  8: cost = 20000; // Katana
		case 10: cost =    50; // Purple Dildo
		case 14: cost =    50; // Flowers
		case 15: cost =   200; // Cane
	    case 22: cost =   500; // 9mm
	    case 23: cost =   750; // Silenced 9mm
	    case 24: cost =  5000; // Desert Eagle
	    case 25: cost =  2000; // Shotgun
	    case 28: cost =  3500; // Micro SMG/Uzi
	    case 29: cost =  5000; // MP5
	    case 30: cost =  8000; // AK-47
	    case 31: cost = 10000; // M4
		case 32: cost =  4500; // Tec-9	
	    case 33: cost =  8000; // Country Rifle
	    case 34: cost = 15000; // Sniper Rifle
	}
	
	if(PlayerData[playerid][pDonator] == 3)
	{
		
		switch(weaponid)
		{
	    	case 27: cost = 12000; // Combat Shotgun			
	    	case 34: cost = 12000; // Sniper Rifle
		}
	}
	
	return cost;
}

GetGStashCraftWeaponPrice(weaponid)
{
	new cost = -1;

	switch(weaponid)
	{
	    case 22: cost =   750; // 9mm
	    case 23: cost =  1000; // Silenced 9mm
	    case 25: cost =  3000; // Shotgun
	    case 28: cost =  4500; // Micro SMG/Uzi
		case 32: cost =  5500; // Tec-9	
	    case 33: cost = 10000; // Country Rifle
	}	
	return cost;
}

SellWeapon(playerid, targetid, weaponid, price = 0)
{
	new cost = GetCraftWeaponPrice(playerid, weaponid);

	if(cost == -1)
	{
		return SendClientMessageEx(playerid, COLOR_AQUA, "You cannot craft this weapon {FF6347}%s{33CCFF}.", GetWeaponNameEx(weaponid));
	}

    if(PlayerData[playerid][pMaterials] >= cost)
    {
		PlayerData[playerid][pMaterials] -= cost;
    	PlayerData[playerid][pLastSell] = gettime();
        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET materials = %i WHERE uid = %i", PlayerData[playerid][pMaterials], PlayerData[playerid][pID]);
		mysql_tquery(connectionID, queryBuffer);

		if(targetid == playerid)
		{
		    SendClientMessageEx(playerid, COLOR_AQUA, "You have crafted yourself a {FF6347}%s{33CCFF}.", GetWeaponNameEx(weaponid));
		    ShowActionBubble(playerid, "* %s puts together some materials and crafts themselves a %s.", GetRPName(playerid), GetWeaponNameEx(weaponid));
		}
		else
		{
			ShowActionBubble(playerid, "* %s puts together some materials and crafts a %s for %s.", GetRPName(playerid), GetWeaponNameEx(weaponid), GetRPName(targetid));
			SendClientMessageEx(playerid, COLOR_AQUA, "You have sold %s a {FF6347}%s{33CCFF} for {00AA00}%s{33CCFF}.", GetRPName(targetid), GetWeaponNameEx(weaponid), FormatCash(price));
			SendClientMessageEx(targetid, COLOR_AQUA, "%s has sold you a {FF6347}%s{33CCFF} for {00AA00}%s{33CCFF}.", GetRPName(playerid), GetWeaponNameEx(weaponid), FormatCash(price));
			GivePlayerCash(playerid, price);
			GivePlayerCash(targetid, -price);
		}

        if(weaponid >= 22)
		{
			IncreaseJobSkill(playerid, JOB_ARMSDEALER);
		}

		GivePlayerWeaponEx(targetid, weaponid);
		
		GiveNotoriety(playerid, 5);
		SendClientMessageEx(playerid, COLOR_AQUA, "You have gained 5 notoriety for trafficking, you now have %d.", PlayerData[playerid][pNotoriety]);
		GiveNotoriety(targetid, 5);	
		SendClientMessageEx(targetid, COLOR_AQUA, "You have gained 5 notoriety for trafficking, you now have %d.", PlayerData[targetid][pNotoriety]);
		
		return 1;
	}
	else
	{
	    SendClientMessage(targetid, COLOR_GREY, "That player has ran out of materials.");
	}

	return 0;
}

Namechange(playerid, oldname[], newname[])
{
	if(!PlayerData[playerid][pUndercover][0])
	{
	    foreach(new i : House)
	    {
	        if(HouseInfo[i][hExists] && !strcmp(HouseInfo[i][hOwner], oldname, false))
	        {
	            strcpy(HouseInfo[i][hOwner], newname, MAX_PLAYER_NAME);
	            ReloadHouse(i);
	        }
	    }

		foreach(new i : Garage)
	    {
	        if(GarageInfo[i][gExists] && !strcmp(GarageInfo[i][gOwner], oldname, false))
	        {
	            strcpy(GarageInfo[i][gOwner], newname, MAX_PLAYER_NAME);
	            ReloadGarage(i);
	        }
	    }

     	foreach(new i : Business)
	    {
	        if(BusinessInfo[i][bExists] && !strcmp(BusinessInfo[i][bOwner], oldname, false))
	        {
	            strcpy(BusinessInfo[i][bOwner], newname, MAX_PLAYER_NAME);
	            ReloadBusiness(i);
	        }
	    }

	    foreach(new i : Land)
	    {
	        if(LandInfo[i][lExists] && !strcmp(LandInfo[i][lOwner], oldname, false))
	        {
	            strcpy(LandInfo[i][lOwner], newname, MAX_PLAYER_NAME);
	            ReloadLand(i);
	        }
	    }

	    foreach(new i: Vehicle)
	    {
	        if(VehicleInfo[i][vID] && !strcmp(VehicleInfo[i][vOwner], oldname, false))
	        {
	            strcpy(VehicleInfo[i][vOwner], newname, MAX_PLAYER_NAME);
	        }
	    }

		// Updating queries.
	    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE houses SET owner = '%s' WHERE owner = '%s'", newname, oldname);
	    mysql_tquery(connectionID, queryBuffer);

	    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE garages SET owner = '%s' WHERE owner = '%s'", newname, oldname);
	    mysql_tquery(connectionID, queryBuffer);

	    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE businesses SET owner = '%s' WHERE owner = '%s'", newname, oldname);
	    mysql_tquery(connectionID, queryBuffer);

	    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE vehicles SET owner = '%s' WHERE owner = '%s'", newname, oldname);
	    mysql_tquery(connectionID, queryBuffer);

	    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE lands SET owner = '%s' WHERE owner = '%s'", newname, oldname);
	    mysql_tquery(connectionID, queryBuffer);

	    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET username = '%s' WHERE uid = %i", newname, PlayerData[playerid][pID]);
	    mysql_tquery(connectionID, queryBuffer);

		strcpy(PlayerData[playerid][pUsername], newname, MAX_PLAYER_NAME);

	    SetPlayerName(playerid, newname);
	    SavePlayerVariables(playerid);
	}
}
/*
IsAVIPVehicle(vehicleid)
{
	switch(GetVehicleModel(vehicleid))
	{
	    case
		402,411,415,424,429,434,446,451,452,453,454,460,469,471,473,
		477,480,484,487,493,494,502,503,504,506,511,512,513,519,522,
		541,553,568,593,595,603: return 1;
	}
	return 0;
}
*/
IsAPlane(vehicleid)
{
    switch(GetVehicleModel(vehicleid))
    {
        case 460, 464, 476, 511..513, 519, 520, 553, 577, 592, 593: return 1;
    }
    return 0;
}

IsAHelicopter(vehicleid)
{
    switch(GetVehicleModel(vehicleid))
    {
        case 417, 425, 447, 465, 469, 487, 488, 497, 501, 548, 563: return 1;
    }

    return 0;
}

IsABoat(vehicleid)
{
    switch(GetVehicleModel(vehicleid))
    {
        case 430, 446, 452..454, 472, 473, 484, 493, 595: return 1;
    }

    return 0;
}

IsSurfVehicle(vehicleid)
{
    switch(GetVehicleModel(vehicleid))
    {
        case 406, 408, 422, 430, 432, 433, 441, 444, 446, 452..455, 460, 464, 470, 472, 473, 476, 478, 481, 484, 490, 493, 509..513, 519, 520, 528, 537, 538, 543, 553, 554, 556, 557, 569, 570, 577, 578, 590, 592..595, 600, 605, 607, 608: return 1;
	}

    return 0;
}

VehicleHasDoors(vehicleid)
{
	switch (GetVehicleModel(vehicleid))
	{
		case 400..424, 426..429, 431..440, 442..445, 451, 455, 456, 458, 459, 466, 467, 470, 474, 475, 477..480, 482, 483, 486, 489, 490..492, 494..496, 498..500, 502..508, 514..518, 524..529, 533..536, 540..547, 549..552, 554..562, 565..568, 573, 575, 576, 578..580, 582, 585, 587..589, 596..605, 609:
			return 1;
	}
	return 0;
}

IsEmergencyFaction(playerid)
{
	switch(GetPlayerFaction(playerid))
	{
	    case FACTION_POLICE, FACTION_FEDERAL, FACTION_MEDIC, FACTION_ARMY:
	        return 1;
	}

	return 0;
}

IsLawEnforcement(playerid)
{
	return GetPlayerFaction(playerid) == FACTION_POLICE || GetPlayerFaction(playerid) == FACTION_FEDERAL || GetPlayerFaction(playerid) == FACTION_ARMY;
}
IsACop(playerid)
{
	return IsLawEnforcement(playerid);
}

IsGateModel(modelid)
{
    switch(modelid)
    {
        case 8957, 7891, 3037, 19861, 19864, 19912, 971, 975, 980, 985, 19870, 988:
        {
            return 1;
        }
    }

	return 0;
}
IsDoorModel(modelid)
{
    switch(modelid)
    {
        case 19802, 2930, 2911, 1567, 1491, 1492, 1493, 1494, 1495, 1496, 1497, 1498, 1499, 1500, 1501, 1502, 1504, 1505, 1506, 1507, 1523, 8957, 7891, 3109, 3089, 3061, 3037, 3029, 2970, 2949, 2948,2947, 2946, 2944, 977:
        {
            return 1;
        }
    }

	return 0;
}
IsGateObject(objectid)
{
    new
		modelid = Streamer_GetIntData(STREAMER_TYPE_OBJECT, objectid, E_STREAMER_MODEL_ID);

	if((modelid) && IsGateModel(modelid))
	{
	    return 1;
	}

	return 0;
}

IsDoorObject(objectid)
{
	new
		modelid = Streamer_GetIntData(STREAMER_TYPE_OBJECT, objectid, E_STREAMER_MODEL_ID);

	if((modelid) && !IsGateObject(objectid))
	{
		for(new i = 0; i < sizeof(landArray); i ++)
		{
	    	if(!strcmp(landArray[i][fCategory], "Doors & Gates") && landArray[i][fModel] == modelid)
	    	{
		        return 1;
			}
		}
	}

	return 0;
}

GetNearbyLocation(playerid, Float:radii)
{
	for(new i = 0; i < MAX_LOCATIONS; i ++)
	{
	    if(LocationInfo[i][locExists] && IsPlayerInRangeOfPoint(playerid, radii, LocationInfo[i][locPosX], LocationInfo[i][locPosY], LocationInfo[i][locPosZ]) && GetPlayerInterior(playerid) == 0 && GetPlayerVirtualWorld(playerid) == 0)
	    {
	        return i;
		}
	}

	return -1;
}
GetNearbyAtm(playerid)
{
	for (new i = 0; i < MAX_ATMS; i ++)
	{
	    if (ATM[i][atmExists] && IsPlayerNearPoint(playerid, 2.0, ATM[i][atmSpawn][0], ATM[i][atmSpawn][1], ATM[i][atmSpawn][2], ATM[i][atmInterior], ATM[i][atmWorld]))
	    {
	        return i;
		}
	}
	return -1;
}

SetupGang(gangid, name[])
{
	strcpy(GangInfo[gangid][gName], name, 32);
	strcpy(GangInfo[gangid][gMOTD], "None", 128);
	strcpy(GangInfo[gangid][gLeader], "No-one", MAX_PLAYER_NAME);

	GangInfo[gangid][gSetup] = 1;
	GangInfo[gangid][gIsMafia] = 0;
	GangInfo[gangid][gLeaderUID] = 0;
	GangInfo[gangid][gColor] = 0xFFFFFF00;
	GangInfo[gangid][gStrikes] = 0;
	GangInfo[gangid][gLevel] = 1;
	GangInfo[gangid][gPoints] = 0;
	GangInfo[gangid][gTurfTokens] = 0;
	GangInfo[gangid][gStashX] = 0.0;
	GangInfo[gangid][gStashY] = 0.0;
	GangInfo[gangid][gStashZ] = 0.0;
	GangInfo[gangid][gStashInterior] = 0;
	GangInfo[gangid][gStashWorld] = 0;
	GangInfo[gangid][gCash] = 0;
	GangInfo[gangid][gMaterials] = 0;
	GangInfo[gangid][gWeed] = 0;
	GangInfo[gangid][gCocaine] = 0;
	GangInfo[gangid][gHeroin] = 0;
	GangInfo[gangid][gPainkillers] = 0;
    GangInfo[gangid][gArmsDealer] = 0;
    GangInfo[gangid][gDrugDealer] = 0;
    GangInfo[gangid][gArmsX] = 0.0;
    GangInfo[gangid][gArmsY] = 0.0;
    GangInfo[gangid][gArmsZ] = 0.0;
    GangInfo[gangid][gDrugX] = 0.0;
    GangInfo[gangid][gDrugY] = 0.0;
    GangInfo[gangid][gDrugZ] = 0.0;
    GangInfo[gangid][gArmsWorld] = 0;
    GangInfo[gangid][gDrugWorld] = 0;
    GangInfo[gangid][gDrugWeed] = 0;
    GangInfo[gangid][gDrugCocaine] = 0;
    GangInfo[gangid][gDrugHeroin] = 0;
    GangInfo[gangid][gArmsMaterials] = 0;
    GangInfo[gangid][gAlliance] = -1;
    GangInfo[gangid][gPickup] = -1;
    GangInfo[gangid][gActors][0] = INVALID_ACTOR_ID;
    GangInfo[gangid][gActors][1] = INVALID_ACTOR_ID;
    GangInfo[gangid][gText][0] = Text3D:INVALID_3DTEXT_ID;
    GangInfo[gangid][gText][1] = Text3D:INVALID_3DTEXT_ID;
    GangInfo[gangid][gText][2] = Text3D:INVALID_3DTEXT_ID;

    GangInfo[gangid][gWeaponRanks][GANGWEAPON_9MM] = 1;
	GangInfo[gangid][gWeaponRanks][GANGWEAPON_SDPISTOL] = 1;
	GangInfo[gangid][gWeaponRanks][GANGWEAPON_DEAGLE] = 2;
	GangInfo[gangid][gWeaponRanks][GANGWEAPON_SHOTGUN] = 1;
//	GangInfo[gangid][gWeaponRanks][GANGWEAPON_SPAS12] = 4;
//	GangInfo[gangid][gWeaponRanks][GANGWEAPON_SAWNOFF] = 4;
	GangInfo[gangid][gWeaponRanks][GANGWEAPON_TEC9] = 1;
	GangInfo[gangid][gWeaponRanks][GANGWEAPON_UZI] = 1;
	GangInfo[gangid][gWeaponRanks][GANGWEAPON_MP5] = 2;
	GangInfo[gangid][gWeaponRanks][GANGWEAPON_AK47] = 3;
//	GangInfo[gangid][gWeaponRanks][GANGWEAPON_M4] = 4;
	GangInfo[gangid][gWeaponRanks][GANGWEAPON_RIFLE] = 2;
//	GangInfo[gangid][gWeaponRanks][GANGWEAPON_SNIPER] = 5;
//	GangInfo[gangid][gWeaponRanks][GANGWEAPON_MOLOTOV] = 5;

	for(new i = 0; i < 7; i ++)
    {
        strcpy(GangRanks[gangid][i], "Unspecified", 32);
	}

	for(new i = 0; i < 12; i ++)
	{
	    if(i < 3)
	    {
	        GangInfo[gangid][gDrugPrices][i] = 0;
		}

		GangInfo[gangid][gArmsPrices][i] = 0;
	}

	for(new i = 0; i < MAX_GANG_SKINS; i ++)
	{
        GangInfo[gangid][gSkins][i] = 0;
	}

	mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "INSERT INTO gangs (id, name) VALUES(%i, '%e')", gangid, name);
	mysql_tquery(connectionID, queryBuffer);
}


AddATMMachine(Float:x, Float:y, Float:z, Float:angle, interior, world)
{
	new
	    id = GetNextATMID();

	if (id != -1)
	{
	    ATM[id][atmExists] = 1;
	    ATM[id][atmSpawn][0] = x;
	    ATM[id][atmSpawn][1] = y;
	    ATM[id][atmSpawn][2] = z;
	    ATM[id][atmSpawn][3] = angle;
	    ATM[id][atmInterior] = interior;
	    ATM[id][atmWorld] = world;
	    ATM[id][atmObject] = INVALID_OBJECT_ID;
	    ATM[id][atmText] = INVALID_3DTEXT_ID;

	    UpdateATM(id);

		format(queryBuffer, sizeof(queryBuffer), "INSERT INTO rp_atms (atmInterior) VALUES(%i)", interior);
		mysql_tquery(connectionID, queryBuffer, "OnATMAdded", "i", id);
	}
	return id;
}
IsValidATMID(id)
{
	return (id >= 0 && id < MAX_ATMS) && ATM[id][atmExists];
}
GetNextATMID()
{
    for (new i = 0; i < MAX_ATMS; i ++)
	{
	    if (!ATM[i][atmExists])
	    {
	        return i;
		}
	}
	return -1;
}

SaveATM(id)
{
	static
	    queryString[192];

	if (!ATM[id][atmExists]) return 0;

	format(queryString, sizeof(queryString), "UPDATE rp_atms SET atmX = %.4f, atmY = %.4f, atmZ = %.4f, atmA = %.4f, atmInterior = %i, atmWorld = %i WHERE atmID = %i",
	    ATM[id][atmSpawn][0],
	    ATM[id][atmSpawn][1],
	    ATM[id][atmSpawn][2],
	    ATM[id][atmSpawn][3],
	    ATM[id][atmInterior],
	    ATM[id][atmWorld],
	    ATM[id][atmID]
	);
	return mysql_tquery(connectionID, queryString);
}

UpdateATM(id)
{
	if (!ATM[id][atmExists])
	{
	    return 0;
	}
	DestroyDynamic3DTextLabel(ATM[id][atmText]);
	DestroyDynamicObject(ATM[id][atmObject]);
	ATM[id][atmObject] = CreateDynamicObject(19324, ATM[id][atmSpawn][0], ATM[id][atmSpawn][1], ATM[id][atmSpawn][2], 0.0, 0.0, ATM[id][atmSpawn][3], ATM[id][atmWorld], ATM[id][atmInterior]);
	ATM[id][atmText] = CreateDynamic3DTextLabel("ATM machine\n/atm to operate.", COLOR_YELLOW, ATM[id][atmSpawn][0], ATM[id][atmSpawn][1], ATM[id][atmSpawn][2] + 0.9, 5.0, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 0, ATM[id][atmWorld], ATM[id][atmInterior]);
	return 1;
}
ReloadGang(gangid)
{
	if(GangInfo[gangid][gSetup])
	{
	    new string[128], color;

	    DestroyDynamic3DTextLabel(GangInfo[gangid][gText][0]);
	    DestroyDynamic3DTextLabel(GangInfo[gangid][gText][1]);
	    DestroyDynamic3DTextLabel(GangInfo[gangid][gText][2]);

	    DestroyDynamicPickup(GangInfo[gangid][gPickup]);
	    DestroyActor(GangInfo[gangid][gActors][0]);
	    DestroyActor(GangInfo[gangid][gActors][1]);

		if(GangInfo[gangid][gColor] == -1 || GangInfo[gangid][gColor] == -256)
		{
			color = 0xC8C8C8FF;
		}
		else if(GangInfo[gangid][gIsMafia])
		{
			color = 0x3F3F3FFF;
		}
		else
		{
		    color = GangInfo[gangid][gColor];
		}
	    if(GangInfo[gangid][gStashX] != 0.0 && GangInfo[gangid][gStashY] != 0.0 && GangInfo[gangid][gStashZ] != 0.0)
	    {
	        format(string, sizeof(string), "{%06x}%s Locker{C8C8C8}\nLevel %i ", color >>> 8, GangInfo[gangid][gName], GangInfo[gangid][gLevel]);

            GangInfo[gangid][gText][0] = CreateDynamic3DTextLabel(string, COLOR_ORANGE, GangInfo[gangid][gStashX], GangInfo[gangid][gStashY], GangInfo[gangid][gStashZ], 10.0, .worldid = GangInfo[gangid][gStashWorld], .interiorid = GangInfo[gangid][gStashInterior]);
            GangInfo[gangid][gPickup] = CreateDynamicPickup(1239, 1, GangInfo[gangid][gStashX], GangInfo[gangid][gStashY], GangInfo[gangid][gStashZ], .worldid = GangInfo[gangid][gStashWorld], .interiorid = GangInfo[gangid][gStashInterior]);
	    }
	}
}
GiveGangPoints(gangid, amount)
{
	if(GangInfo[gangid][gSetup])
	{
        GangInfo[gangid][gPoints] = GangInfo[gangid][gPoints] + amount;

        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_GANGS" SET points = %i WHERE id = %i", GangInfo[gangid][gPoints], gangid);
        mysql_tquery(connectionID, queryBuffer);
	}
}

RemoveGang(gangid)
{
	if(GangInfo[gangid][gAlliance] >= 0)
	{
	    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_GANGS" SET alliance = -1 WHERE id = %i", gangid);
	    mysql_tquery(connectionID, queryBuffer);

	    GangInfo[GangInfo[gangid][gAlliance]][gAlliance] = -1;
	}
	foreach(new i : Player)
	{
	    if(PlayerData[i][pGang] == gangid)
	    {
	        SendClientMessageEx(i, COLOR_LIGHTRED, "The gang you were apart of has been deleted by an administrator.");
	        PlayerData[i][pGang] = -1;
	        PlayerData[i][pGangRank] = 0;
	    }
	}
	for(new i = 0; i < MAX_GANG_CREWS; i ++)
	{
		GangCrews[gangid][i][0] = 0;
	}

	DestroyDynamic3DTextLabel(GangInfo[gangid][gText][0]);
    DestroyDynamic3DTextLabel(GangInfo[gangid][gText][1]);
    DestroyDynamic3DTextLabel(GangInfo[gangid][gText][2]);
    DestroyDynamicPickup(GangInfo[gangid][gPickup]);
    DestroyActor(GangInfo[gangid][gActors][0]);
    DestroyActor(GangInfo[gangid][gActors][1]);

    GangInfo[gangid][gSetup] = 0;
	GangInfo[gangid][gIsMafia] = 0;
    GangInfo[gangid][gName] = 0;
    GangInfo[gangid][gMOTD] = 0;
    GangInfo[gangid][gLeaderUID] = 0;
    GangInfo[gangid][gLeader] = 0;
	GangInfo[gangid][gColor] = 0;
	GangInfo[gangid][gStrikes] = 0;
	GangInfo[gangid][gLevel] = 0;
	GangInfo[gangid][gPoints] = 0;
	GangInfo[gangid][gTurfTokens] = 0;
	GangInfo[gangid][gStashX] = 0.0;
	GangInfo[gangid][gStashY] = 0.0;
	GangInfo[gangid][gStashZ] = 0.0;
	GangInfo[gangid][gStashInterior] = 0;
	GangInfo[gangid][gStashWorld] = 0;
	GangInfo[gangid][gCash] = 0;
	GangInfo[gangid][gMaterials] = 0;
	GangInfo[gangid][gWeed] = 0;
	GangInfo[gangid][gCocaine] = 0;
	GangInfo[gangid][gHeroin] = 0;
	GangInfo[gangid][gPainkillers] = 0;
	GangInfo[gangid][gArmsDealer] = 0;
    GangInfo[gangid][gDrugDealer] = 0;
    GangInfo[gangid][gArmsX] = 0.0;
    GangInfo[gangid][gArmsY] = 0.0;
    GangInfo[gangid][gArmsZ] = 0.0;
    GangInfo[gangid][gDrugX] = 0.0;
    GangInfo[gangid][gDrugY] = 0.0;
    GangInfo[gangid][gDrugZ] = 0.0;
    GangInfo[gangid][gArmsWorld] = 0;
    GangInfo[gangid][gDrugWorld] = 0;
    GangInfo[gangid][gDrugWeed] = 0;
    GangInfo[gangid][gDrugCocaine] = 0;
    GangInfo[gangid][gDrugHeroin] = 0;
    GangInfo[gangid][gArmsMaterials] = 0;
    GangInfo[gangid][gPickup] = -1;
    GangInfo[gangid][gActors][0] = INVALID_ACTOR_ID;
    GangInfo[gangid][gActors][1] = INVALID_ACTOR_ID;
    GangInfo[gangid][gText][0] = Text3D:INVALID_3DTEXT_ID;
    GangInfo[gangid][gText][1] = Text3D:INVALID_3DTEXT_ID;
    GangInfo[gangid][gText][2] = Text3D:INVALID_3DTEXT_ID;
	GangInfo[gangid][gAlliance] = -1;

    for(new i = 0; i < 7; i ++)
    {
        strcpy(GangRanks[gangid][i], "Unspecified", 32);
	}

	for(new i = 0; i < 14; i ++)
	{
		GangInfo[gangid][gWeapons][i] = 0;
	}

	for(new i = 0; i < MAX_GANG_SKINS; i ++)
	{
	    GangInfo[gangid][gSkins][i] = 0;
	}

	ClearGangPoints(gangid);
	ClearGangTurfs(gangid);

	for(new i = 0 ; i < MAX_VEHICLES ; i++)
	{
	    if(VehicleInfo[i][vID] > 0 && VehicleInfo[i][vGang] == gangid)
	    {
			mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "DELETE FROM vehicles WHERE id = %i", VehicleInfo[i][vID]);
			mysql_tquery(connectionID, queryBuffer);

			DespawnVehicle(i, false);
	    }
	}

	mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "DELETE FROM gangs WHERE id = %i", gangid);
	mysql_tquery(connectionID, queryBuffer);

	mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "DELETE FROM gangranks WHERE id = %i", gangid);
	mysql_tquery(connectionID, queryBuffer);

	mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "DELETE FROM gangskins WHERE id = %i", gangid);
	mysql_tquery(connectionID, queryBuffer);

	mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "DELETE FROM crews WHERE id = %i", gangid);
	mysql_tquery(connectionID, queryBuffer);

    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE points SET capturedgang = -1 WHERE capturedgang = %i", gangid);
	mysql_tquery(connectionID, queryBuffer);

	mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE turfs SET capturedgang = -1 WHERE capturedgang = %i", gangid);
	mysql_tquery(connectionID, queryBuffer);

	mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET gang = -1, gangrank = 0 WHERE gang = %i", gangid);
	mysql_tquery(connectionID, queryBuffer);
}

GetGangVehicles(gangid)
{
	new count;

	foreach(new i: Vehicle)
	{
	    if(VehicleInfo[i][vID] > 0 && VehicleInfo[i][vGang] == gangid)
	    {
	        count++;
		}
	}

	return count;
}

GetGangVehicleLimit(gangid)
{
	switch(GangInfo[gangid][gLevel])
	{
	    case 1: return 8;
	    case 2: return 10;
	    case 3: return 15;
	}

	return 0;
}

GetGangMemberLimit(gangid)
{
	switch(GangInfo[gangid][gLevel])
	{
	    case 1: return 30;
	    case 2: return 30;
	    case 3: return 30;
	}

	return 0;
}

GetFactionMemberLimit(factionid)
{
	switch(FactionInfo[factionid][fType])
	{
	    case 1: return 30;
	}

	return 0;
}

GetGangSkinCount(gangid)
{
	new count;

	for(new i = 0; i < MAX_GANG_SKINS; i ++)
	{
	    if(GangInfo[gangid][gSkins][i] != 0)
	    {
	        count++;
		}
	}

	return count;
}

GetSpawnedVehicles(playerid)
{
	new count;

    foreach(new i: Vehicle)
	{
	    if(IsVehicleOwner(playerid, i))
	    {
	        count++;
		}
	}

	return count;
}

GetVehicleGarage(vehicleid)
{
 	foreach(new i : Garage)
	{
	    if(GarageInfo[i][gExists] && GarageInfo[i][gWorld] == GetVehicleVirtualWorld(vehicleid))
	    {
	        return i;
		}
	}

	return -1;
}

ResetVehicleObjects(vehicleid)
{
    if(IsValidDynamicObject(vehicleSiren[vehicleid]))
	{
	    DestroyDynamicObject(vehicleSiren[vehicleid]);
	    vehicleSiren[vehicleid] = INVALID_OBJECT_ID;
	}
	if(IsValidDynamic3DTextLabel(DonatorCallSign[vehicleid]))
	{
	    DestroyDynamic3DTextLabel(DonatorCallSign[vehicleid]);
		DonatorCallSign[vehicleid] = Text3D:INVALID_3DTEXT_ID;
	}
	if(IsValidDynamic3DTextLabel(vehicleCallsign[vehicleid]))
	{
	    DestroyDynamic3DTextLabel(vehicleCallsign[vehicleid]);
		vehicleCallsign[vehicleid] = Text3D:INVALID_3DTEXT_ID;
	}
 	if(VehicleInfo[vehicleid][vNeonEnabled])
	{
		if(IsValidDynamicObject(VehicleInfo[vehicleid][vObjects][0]))
		{
		    DestroyDynamicObject(VehicleInfo[vehicleid][vObjects][0]);
		    VehicleInfo[vehicleid][vObjects][0] = INVALID_OBJECT_ID;
		}
		if(IsValidDynamicObject(VehicleInfo[vehicleid][vObjects][1]))
		{
		    DestroyDynamicObject(VehicleInfo[vehicleid][vObjects][1]);
		    VehicleInfo[vehicleid][vObjects][1] = INVALID_OBJECT_ID;
		}
 	}

 	adminVehicle{vehicleid} = false;
}

DestroyVehicleEx(vehicleid)
{
	if(IsValidVehicle(vehicleid))
	{
		ResetVehicleObjects(vehicleid);
	}

	return DestroyVehicle(vehicleid);
}

GetNearbyVehicle(playerid)
{
	new Float:x, Float:y, Float:z;

	foreach(new i: Vehicle)
	{
	    if(IsVehicleStreamedIn(i, playerid))
	    {
	        GetVehiclePos(i, x, y, z);

	        if(IsPlayerInRangeOfPoint(playerid, 3.5, x, y, z))
	        {
	            return i;
			}
		}
	}

	return INVALID_VEHICLE_ID;
}

GetVehicleRelativePos(vehicleid, &Float:x, &Float:y, &Float:z, Float:xoff= 0.0, Float:yoff= 0.0, Float:zoff= 0.0)
{
    new Float:rot;
    GetVehicleZAngle(vehicleid, rot);
    rot = 360 - rot;
    GetVehiclePos(vehicleid, x, y, z);
    x = floatsin(rot, degrees) * yoff + floatcos(rot, degrees) * xoff + x;
    y = floatcos(rot, degrees) * yoff - floatsin(rot, degrees) * xoff + y;
    z = zoff + z;
}

IsPlayerAtVehicleDoor(playerid, vehicleid, type)
{
 	new
	    Float:vx,
	    Float:vy,
	    Float:vz,
	    Float:va,
	    Float:x,
	    Float:y,
	    Float:z,
		Float:a;

	GetVehicleModelInfo(GetVehicleModel(vehicleid), VEHICLE_MODEL_INFO_FRONTSEAT, x, y, z);

	if(type == DOOR_DRIVER) {
		GetVehicleRelativePos(vehicleid, vx, vy, vz, -x * 2, y, z);
	} else {
	    GetVehicleRelativePos(vehicleid, vx, vy, vz, x * 2, y, z);
	}

    GetPlayerFacingAngle(playerid, a);
    GetVehicleZAngle(vehicleid, va);

    if(IsPlayerInRangeOfPoint(playerid, 1.0, vx, vy, vz))
    {
        return 1;
	}

	return 0;
}

GetVehicleBoot(vehicleid, &Float:x, &Float:y, &Float:z)
{
	if(IsValidVehicle(vehicleid))
	{
		new
			Float:pos[7];

		GetVehicleModelInfo(GetVehicleModel(vehicleid), VEHICLE_MODEL_INFO_SIZE, pos[0], pos[1], pos[2]);
		GetVehiclePos(vehicleid, pos[3], pos[4], pos[5]);
		GetVehicleZAngle(vehicleid, pos[6]);

		x = pos[3] - (floatsqroot(pos[1] + pos[1]) * floatsin(-pos[6], degrees));
		y = pos[4] - (floatsqroot(pos[1] + pos[1]) * floatcos(-pos[6], degrees));
 		z = pos[5];
		return 1;
	}

	x = 0.0;
	y = 0.0;
	z = 0.0;

	return 0;
}

IsPlayerInRangeOfBoot(playerid, vehicleid)
{
	new
		Float:x,
		Float:y,
		Float:z;

	GetVehicleBoot(vehicleid, x, y, z);

	return (GetPlayerVirtualWorld(playerid) == GetVehicleVirtualWorld(vehicleid)) && IsPlayerInRangeOfPoint(playerid, 3.0, x, y, z);
}

IsVehicleBeingPicked(vehicleid)
{
    foreach(new i : Player)
	{
	    if(PlayerData[i][pLockBreak] == vehicleid)
	    {
	        return 1;
		}
	}

	return 0;
}

IsVehicleOwner(playerid, vehicleid)
{
	return (VehicleInfo[vehicleid][vOwnerID] == PlayerData[playerid][pID]);
}

SetVehicleNeon(vehicleid, modelid)
{
	if(18647 <= modelid <= 18652)
	{
	    if(VehicleInfo[vehicleid][vNeonEnabled])
	    {
	        DestroyDynamicObject(VehicleInfo[vehicleid][vObjects][0]);
			DestroyDynamicObject(VehicleInfo[vehicleid][vObjects][1]);
	    }

	    VehicleInfo[vehicleid][vNeon] = modelid;
	    VehicleInfo[vehicleid][vNeonEnabled] = (modelid > 0);

		mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE vehicles SET neon = %i, neonenabled = 1 WHERE id = %i", VehicleInfo[vehicleid][vNeon], VehicleInfo[vehicleid][vID]);
		mysql_tquery(connectionID, queryBuffer);

		ReloadVehicleNeon(vehicleid);
	}
}

ReloadVehicleNeon(vehicleid)
{
	if(VehicleInfo[vehicleid][vID] > 0)
	{
	    DestroyDynamicObject(VehicleInfo[vehicleid][vObjects][0]);
	    DestroyDynamicObject(VehicleInfo[vehicleid][vObjects][1]);

	    if(VehicleInfo[vehicleid][vNeon] && VehicleInfo[vehicleid][vNeonEnabled])
	    {
	        new
				Float:x,
				Float:y,
				Float:z;

			GetVehicleModelInfo(VehicleInfo[vehicleid][vModel], VEHICLE_MODEL_INFO_SIZE, x, y, z);

			VehicleInfo[vehicleid][vObjects][0] = CreateDynamicObject(VehicleInfo[vehicleid][vNeon], 0.0, 0.0, 0.0, 0.0, 0.0, 0.0);
			VehicleInfo[vehicleid][vObjects][1] = CreateDynamicObject(VehicleInfo[vehicleid][vNeon], 0.0, 0.0, 0.0, 0.0, 0.0, 0.0);

			AttachDynamicObjectToVehicle(VehicleInfo[vehicleid][vObjects][0], vehicleid, -x / 2.8, 0.0, -0.6, 0.0, 0.0, 0.0);
			AttachDynamicObjectToVehicle(VehicleInfo[vehicleid][vObjects][1], vehicleid, x / 2.8, 0.0, -0.6, 0.0, 0.0, 0.0);
		}
	}
}

ResyncVehicle(vehicleid)
{
	new
		worldid = GetVehicleVirtualWorld(vehicleid);
	SetVehicleVirtualWorld(vehicleid, cellmax);
	SetVehicleVirtualWorld(vehicleid, worldid);
}

SaveVehicleModifications(vehicleid)
{
	for(new i = 0; i < 14; i ++)
	{
	    VehicleInfo[vehicleid][vMods][i] = GetVehicleComponentInSlot(vehicleid, i);

	    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE vehicles SET mod_%i = %i WHERE id = %i", i + 1, VehicleInfo[vehicleid][vMods][i], VehicleInfo[vehicleid][vID]);
	    mysql_tquery(connectionID, queryBuffer);
	}
}

ReloadVehicle(vehicleid)
{
    if(VehicleInfo[vehicleid][vPaintjob] >= 0)
    {
        ChangeVehiclePaintjob(vehicleid, VehicleInfo[vehicleid][vPaintjob]);
    }
    if(VehicleInfo[vehicleid][vNeon] && VehicleInfo[vehicleid][vNeonEnabled])
	{
		ReloadVehicleNeon(vehicleid);
    }

	for(new i = 0; i < 14; i ++)
	{
	    if(VehicleInfo[vehicleid][vMods][i] >= 1000)
	    {
	        AddVehicleComponent(vehicleid, VehicleInfo[vehicleid][vMods][i]);
		}
	}
    SetVehicleNumberPlate(vehicleid, VehicleInfo[vehicleid][vPlate]);
	ResyncVehicle(VehicleInfo[vehicleid][vID]);
    LinkVehicleToInterior(vehicleid, VehicleInfo[vehicleid][vInterior]);
    SetVehicleVirtualWorld(vehicleid, VehicleInfo[vehicleid][vWorld]);
    SetVehicleHealth(vehicleid, VehicleInfo[vehicleid][vHealth]);
    SetVehicleParams(vehicleid, VEHICLE_DOORS, VehicleInfo[vehicleid][vLocked]);
}

DespawnVehicle(vehicleid, bool:save = true)
{
	if(VehicleInfo[vehicleid][vID] > 0)
	{
	    if(VehicleInfo[vehicleid][vNeonEnabled])
	    {
	        DestroyDynamicObject(VehicleInfo[vehicleid][vObjects][0]);
	        DestroyDynamicObject(VehicleInfo[vehicleid][vObjects][1]);
	    }

		if(save) {
		    new
				Float:health;

		    GetVehicleHealth(vehicleid, health);
		    SaveVehicleModifications(vehicleid);

		    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE vehicles SET fuel = %i, mileage = '%f', health = '%f' WHERE id = %i", GetVehicleFuel(vehicleid), VehicleInfo[vehicleid][vMileage], health, VehicleInfo[vehicleid][vID]);
	    	mysql_tquery(connectionID, queryBuffer);
	    }
        else
        {
            mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE vehicles SET mileage = '%f' WHERE id = %i", VehicleInfo[vehicleid][vMileage], VehicleInfo[vehicleid][vID]);
	    	mysql_tquery(connectionID, queryBuffer);
        }

		DestroyVehicleEx(vehicleid);
		ResetVehicle(vehicleid);
	}
}

ResetVehicle(vehicleid)
{
	strcpy(VehicleInfo[vehicleid][vOwner], "Nobody", MAX_PLAYER_NAME);

	if(VehicleInfo[vehicleid][vTimer] >= 0)
	{
	    KillTimer(VehicleInfo[vehicleid][vTimer]);
	}
    strcpy(VehicleInfo[vehicleid][vPlate], "XYZSR998");
    VehicleInfo[vehicleid][vID] = 0;
	VehicleInfo[vehicleid][vOwnerID] = 0;
	VehicleInfo[vehicleid][vModel] = 0;
	VehicleInfo[vehicleid][vPrice] = 0;
	VehicleInfo[vehicleid][vTickets] = 0;
	VehicleInfo[vehicleid][vLocked] = 0;
	VehicleInfo[vehicleid][vCorp] = -1;
	VehicleInfo[vehicleid][vHealth] = 1000.0;
	VehicleInfo[vehicleid][vPosX] = 0.0;
	VehicleInfo[vehicleid][vPosY] = 0.0;
	VehicleInfo[vehicleid][vPosZ] = 0.0;
	VehicleInfo[vehicleid][vPosA] = 0.0;
	VehicleInfo[vehicleid][vColor1] = 0;
	VehicleInfo[vehicleid][vColor2] = 0;
	VehicleInfo[vehicleid][vPaintjob] = -1;
	VehicleInfo[vehicleid][vInterior] = 0;
	VehicleInfo[vehicleid][vWorld] = 0;
	VehicleInfo[vehicleid][vCash] = 0;
	VehicleInfo[vehicleid][vMaterials] = 0;
	VehicleInfo[vehicleid][vWeed] = 0;
	VehicleInfo[vehicleid][vCocaine] = 0;
	VehicleInfo[vehicleid][vHeroin] = 0;
	VehicleInfo[vehicleid][vPainkillers] = 0;
	VehicleInfo[vehicleid][vWeapons][0] = 0;
	VehicleInfo[vehicleid][vWeapons][1] = 0;
	VehicleInfo[vehicleid][vWeapons][2] = 0;
	VehicleInfo[vehicleid][vWeapons][3] = 0;
	VehicleInfo[vehicleid][vWeapons][4] = 0;
    VehicleInfo[vehicleid][vGang] = -1;
	VehicleInfo[vehicleid][vFaction] = -1;
    VehicleInfo[vehicleid][vFGDivision] = -1;
	VehicleInfo[vehicleid][vVIP] = 0;
	VehicleInfo[vehicleid][vJob] = JOB_NONE;
	VehicleInfo[vehicleid][vObjects][0] = INVALID_OBJECT_ID;
	VehicleInfo[vehicleid][vObjects][1] = INVALID_OBJECT_ID;
	VehicleInfo[vehicleid][vTimer] = -1;
	VehicleInfo[vehicleid][vRank] = 0;
	VehicleInfo[vehicleid][vMileage] = 0.0;

	VehicleInfo[vehicleid][vForSale] = false;
	VehicleInfo[vehicleid][vForSalePrice] = 0;

	if(VehicleInfo[vehicleid][vForSaleLabel] != Text3D:INVALID_3DTEXT_ID) DestroyDynamic3DTextLabel(VehicleInfo[vehicleid][vForSaleLabel]);
	VehicleInfo[vehicleid][vForSaleLabel] = Text3D:INVALID_3DTEXT_ID;

	for(new i = 0; i < 14; i ++)
	{
	    VehicleInfo[vehicleid][vMods][i] = 0;
	}

	ResetVehicleObjects(vehicleid);
}

IsPointInLand(landid, Float:x, Float:y)
{
	if((LandInfo[landid][lMinX] <= x <= LandInfo[landid][lMaxX]) && (LandInfo[landid][lMinY] <= y <= LandInfo[landid][lMaxY]))
	{
	    return 1;
	}

	return 0;
}


GangZoneCreateEx(Float:minx, Float:miny, Float:maxx, Float:maxy)
{
	return GangZoneCreate((minx > maxx) ? (maxx) : (minx), (miny > maxy) ? (maxy) : (miny), (minx > maxx) ? (minx) : (maxx), (miny > maxy) ? (miny) : (maxy));
}

HasLandPerms(playerid, landid)
{
	return IsLandOwner(playerid, landid) || PlayerData[playerid][pLandPerms] == landid;
}

IsLandOwner(playerid, landid)
{
	return (LandInfo[landid][lOwnerID] == PlayerData[playerid][pID]);
}

SetLandOwner(landid, playerid)
{
	if(playerid == INVALID_PLAYER_ID)
	{
	    strcpy(LandInfo[landid][lOwner], "Nobody", MAX_PLAYER_NAME);
	    LandInfo[landid][lOwnerID] = 0;
	}
	else
	{
	    GetPlayerName(playerid, LandInfo[landid][lOwner], MAX_PLAYER_NAME);
	    LandInfo[landid][lOwnerID] = PlayerData[playerid][pID];
	}

	mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE lands SET ownerid = %i, owner = '%s' WHERE id = %i", LandInfo[landid][lOwnerID], LandInfo[landid][lOwner], LandInfo[landid][lID]);
	mysql_tquery(connectionID, queryBuffer);

	ReloadLand(landid);
}

GetLandId(sql_id)
{
	foreach(new i : Land)
	{
	    if(LandInfo[i][lExists] && LandInfo[i][lID] == sql_id)
	    {
			return i;
		}
	}
	return -1;
}

GetLandObjectID(sql_id)
{
    for(new i = 0, j = Streamer_GetUpperBound(STREAMER_TYPE_OBJECT); i <= j; i ++)
    {
        if(IsValidDynamicObject(i) && Streamer_GetExtraInt(i, E_OBJECT_TYPE) == E_OBJECT_LAND && Streamer_GetExtraInt(i, E_OBJECT_INDEX_ID) == sql_id)
        {
            return i;
		}
	}

	return INVALID_OBJECT_ID;
}

GetLandObjectCapacity(level)
{
	switch(level)
	{
	    case 1: return 100;
	    case 2: return 150;
	    case 3: return 200;
	    case 4: return 250;
	    case 5: return 300;
	}

	return 0;
}

RemoveLandObject(objectid)
{
    if(IsValidDynamicObject(objectid) && Streamer_GetExtraInt(objectid, E_OBJECT_TYPE) == E_OBJECT_LAND)
	{
 		new
	        id = Streamer_GetExtraInt(objectid, E_OBJECT_INDEX_ID);

	    DeleteLandObject(objectid);

	    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "DELETE FROM landobjects WHERE id = %i", id);
	    mysql_tquery(connectionID, queryBuffer);
	}
}

DeleteLandObject(objectid)
{
	if(IsValidDynamicObject(objectid) && Streamer_GetExtraInt(objectid, E_OBJECT_TYPE) == E_OBJECT_LAND)
	{
    	new Text3D:textid = Text3D:Streamer_GetExtraInt(objectid, E_OBJECT_3DTEXT_ID);

        if(IsValidDynamic3DTextLabel(textid))
        {
            DestroyDynamic3DTextLabel(textid);
        }
        DestroyDynamicObject(objectid);
	}
}

RemoveAllLandObjects(landid)
{
    if(LandInfo[landid][lExists])
	{
	    for(new i = 0, j = Streamer_GetUpperBound(STREAMER_TYPE_OBJECT); i <= j; i ++)
	    {
	        if(IsValidDynamicObject(i) && Streamer_GetExtraInt(i, E_OBJECT_TYPE) == E_OBJECT_LAND && Streamer_GetExtraInt(i, E_OBJECT_EXTRA_ID) == LandInfo[landid][lID])
	        {
				new Text3D:textid = Text3D:Streamer_GetExtraInt(i, E_OBJECT_3DTEXT_ID);

				if(IsValidDynamic3DTextLabel(textid))
				{
					DestroyDynamic3DTextLabel(textid);
				}

				DestroyDynamicObject(i);
			}
		}

		mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "DELETE FROM landobjects WHERE landid = %i", LandInfo[landid][lID]);
		mysql_tquery(connectionID, queryBuffer);
		UpdateLandText(landid);
	}
}

stock GetPlayerFreeVehicleId(playerid)
{
	for(new i; i < MAX_VEHICLES; ++i)
	{
		if(VehicleInfo[i][vModel] == 0) return i;
	}
	return -1;
}

SendQuestionToStaff(color, text[])
{
	foreach(new x: Player)
	{
		if(PlayerData[x][pHelper] >= 1 || PlayerData[x][pAdmin] >= 1)
		{
		    SendClientMessageEx(x, color, text);
		}
	}
}


MySqlEscape(const string[])
{
	new entry[256];
	mysql_real_escape_string(string, entry, connectionID);
	return entry;
}

forward Float:player_get_speed(playerid);
public Float:player_get_speed(playerid)
{
	new
		Float: fVelocity[3];

	GetVehicleVelocity(GetPlayerVehicleID(playerid), fVelocity[0], fVelocity[1], fVelocity[2]);
	return floatsqroot((fVelocity[0] * fVelocity[0]) + (fVelocity[1] * fVelocity[1]) + (fVelocity[2] * fVelocity[2])) * 100;
}




ReloadLandObject(objectid, labels)
{
	if(IsValidDynamicObject(objectid) && Streamer_GetExtraInt(objectid, E_OBJECT_TYPE) == E_OBJECT_LAND)
	{
	    new
	        id = Streamer_GetExtraInt(objectid, E_OBJECT_INDEX_ID);

	    DeleteLandObject(objectid);

	    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "SELECT * FROM landobjects WHERE id = %i", id);
	    mysql_tquery(connectionID, queryBuffer, "OnQueryFinished", "ii", THREAD_LOAD_LANDOBJECTS, labels);
	}
}

ReloadAllLandObjects(landid)
{
    if(LandInfo[landid][lExists])
	{
	    for(new i = 0, j = Streamer_GetUpperBound(STREAMER_TYPE_OBJECT); i <= j; i ++)
	    {
	        if(IsValidDynamicObject(i) && Streamer_GetExtraInt(i, E_OBJECT_TYPE) == E_OBJECT_LAND && Streamer_GetExtraInt(i, E_OBJECT_EXTRA_ID) == LandInfo[landid][lID])
	        {
             	DeleteLandObject(i);
			}
		}

		mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "SELECT * FROM landobjects WHERE landid = %i", LandInfo[landid][lID]);
		mysql_tquery(connectionID, queryBuffer, "OnQueryFinished", "ii", THREAD_LOAD_LANDOBJECTS, LandInfo[landid][lLabels]);
	}
}

ReloadLand(landid)
{
	if(LandInfo[landid][lExists])
	{
	    DestroyDynamicArea(LandInfo[landid][lArea]);
	    GangZoneDestroy(LandInfo[landid][lGangZone]);
	    DestroyDynamic3DTextLabel(LandInfo[landid][lTextdraw]);

	    LandInfo[landid][lArea] = CreateDynamicRectangle(LandInfo[landid][lMinX], LandInfo[landid][lMinY], LandInfo[landid][lMaxX], LandInfo[landid][lMaxY]);
	    LandInfo[landid][lGangZone] = GangZoneCreateEx(LandInfo[landid][lMinX], LandInfo[landid][lMinY], LandInfo[landid][lMaxX], LandInfo[landid][lMaxY]);
	    LandInfo[landid][lTextdraw] = CreateDynamic3DTextLabel("Land", COLOR_GREY, LandInfo[landid][lHeightX], LandInfo[landid][lHeightY], LandInfo[landid][lHeightZ], 10.0);
		UpdateLandText(landid);
	    foreach(new i : Player)
	    {
	        if(PlayerData[i][pShowLands])
	        {
	            GangZoneShowForPlayer(i, LandInfo[landid][lGangZone], (LandInfo[landid][lOwnerID] > 0) ? (0xFF6347AA) : (0x33CC33AA));
			}
		}
	}
}

GetNearbyLand(playerid)
{
    if(GetPlayerInterior(playerid) == 0 && GetPlayerVirtualWorld(playerid) == 0)
	{
		foreach(new i : Land)
		{
			if(LandInfo[i][lExists] && IsPlayerInDynamicArea(playerid, LandInfo[i][lArea]))
			{
			    return i;
			}
		}
	}

	return -1;
}

hook OP_LeaveDynamicArea(playerid, areaid)
{
	if(gettime() - PlayerData[playerid][pLastDeath] > 10 && (areaid == area_paintball[0] || areaid == area_paintball[1]))
	{
	    if(PlayerData[playerid][pPaintball] == 3 || PlayerData[playerid][pPaintball] == 4)
	    {
	    	SendClientMessage(playerid, COLOR_RED, "You were poisoned to death for leaving the arena. (Use /exit)");
	    	SetPlayerHealth(playerid, 0.0);
		}
	}
	return 1;
}

GetNearbyEntranceEx(playerid)
{
	return GetNearbyEntrance(playerid) == -1 ? GetInsideEntrance(playerid) : GetNearbyEntrance(playerid);
}

GetNearbyEntrance(playerid)
{
	foreach(new i : Entrance)
	{
	    if(EntranceInfo[i][eExists] && IsPlayerInRangeOfPoint(playerid, EntranceInfo[i][eRadius], EntranceInfo[i][ePosX], EntranceInfo[i][ePosY], EntranceInfo[i][ePosZ]) && GetPlayerInterior(playerid) == EntranceInfo[i][eOutsideInt] && GetPlayerVirtualWorld(playerid) == EntranceInfo[i][eOutsideVW])
	    {
	        return i;
		}
	}

	return -1;
}

GetGangHQ(gangid)
{
	foreach(new i : Entrance)
	{
	    if(EntranceInfo[i][eExists] &&  EntranceInfo[i][eGang] == gangid &&  EntranceInfo[i][eWorld] == 35000 + gangid)
	    {
	        return i;
		}
	}

	return -1;
}


RemoveEntrance(entranceid)
{
	DestroyDynamic3DTextLabel(EntranceInfo[entranceid][eText]);
	DestroyDynamicPickup(EntranceInfo[entranceid][ePickup]);

	mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "DELETE FROM entrances WHERE id = %i", EntranceInfo[entranceid][eID]);
	mysql_tquery(connectionID, queryBuffer);

	EntranceInfo[entranceid][eExists] = 0;
	EntranceInfo[entranceid][eID] = 0;
	EntranceInfo[entranceid][eOwnerID] = 0;
	Iter_Remove(Entrance, entranceid);
}

GetInsideEntrance(playerid)
{
	foreach(new i : Entrance)
	{
	    if(EntranceInfo[i][eExists] && IsPlayerInRangeOfPoint(playerid, 100.0, EntranceInfo[i][eIntX], EntranceInfo[i][eIntY], EntranceInfo[i][eIntZ]) && GetPlayerInterior(playerid) == EntranceInfo[i][eInterior] && GetPlayerVirtualWorld(playerid) == EntranceInfo[i][eWorld])
	    {
	        return i;
		}
	}

	return -1;
}

SetEntranceOwner(entranceid, playerid)
{
	if(playerid == INVALID_PLAYER_ID)
	{
	    strcpy(EntranceInfo[entranceid][eOwner], "Nobody", MAX_PLAYER_NAME);
	    EntranceInfo[entranceid][eOwnerID] = 0;
	}
	else
	{
	    GetPlayerName(playerid, EntranceInfo[entranceid][eOwner], MAX_PLAYER_NAME);
	    EntranceInfo[entranceid][eOwnerID] = PlayerData[playerid][pID];
	}

	mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE entrances SET ownerid = %i, owner = '%s' WHERE id = %i", EntranceInfo[entranceid][eOwnerID], EntranceInfo[entranceid][eOwner], EntranceInfo[entranceid][eID]);
	mysql_tquery(connectionID, queryBuffer);

	ReloadEntrance(entranceid);
}

ReloadEntrance(entranceid)
{
	if(EntranceInfo[entranceid][eExists])
	{
	    new
	        string[128];

		DestroyDynamic3DTextLabel(EntranceInfo[entranceid][eText]);
		DestroyDynamicPickup(EntranceInfo[entranceid][ePickup]);
		DestroyDynamicMapIcon(EntranceInfo[entranceid][eMapIconID]);

		if(EntranceInfo[entranceid][eLabel])
		{
			new color;
			if(EntranceInfo[entranceid][eColor] == -256)
			{
                color = 0xC8C8C8FF;
				color = EntranceInfo[entranceid][eColor];
			}
			else
			{
			    color = EntranceInfo[entranceid][eColor];
			}
			if(EntranceInfo[entranceid][eOwnerID])
			{
			    format(string, sizeof(string), "{ffff00}[{%06x}%s{ffff00}]{afafaf}\nOwner: %s\nPress 'y' to go inside.", color >>> 8, EntranceInfo[entranceid][eName], EntranceInfo[entranceid][eOwner]);
			}
			else
			{
			    if(EntranceInfo[entranceid][eType] == 1)
			        format(string, sizeof(string), "%s\n{AFAFAF}/offerduel to duel.", EntranceInfo[entranceid][eName]);
			    else if(EntranceInfo[entranceid][eType] == 2)
			        format(string, sizeof(string), "%s\n{AFAFAF}/repaircar to repair your vehicle.", EntranceInfo[entranceid][eName]);
			    else
		        	format(string, sizeof(string), "{ffff00}[{%06x}%s{ffff00}]\n{AFAFAF}Press 'y' to go inside.", color >>> 8, EntranceInfo[entranceid][eName]);
			}

			EntranceInfo[entranceid][eText] = CreateDynamic3DTextLabel(string, COLOR_WHITE, EntranceInfo[entranceid][ePosX], EntranceInfo[entranceid][ePosY], (EntranceInfo[entranceid][eIcon] == 19902) ? (EntranceInfo[entranceid][ePosZ] + 0.1) : (EntranceInfo[entranceid][ePosZ]), 10.0, .worldid = EntranceInfo[entranceid][eOutsideVW], .interiorid = EntranceInfo[entranceid][eOutsideInt]);

        }

		EntranceInfo[entranceid][ePickup] = CreateDynamicPickup(EntranceInfo[entranceid][eIcon], 1, EntranceInfo[entranceid][ePosX], EntranceInfo[entranceid][ePosY], (EntranceInfo[entranceid][eIcon] == 19902) ? (EntranceInfo[entranceid][ePosZ] - 1.0) : (EntranceInfo[entranceid][ePosZ]), .worldid = EntranceInfo[entranceid][eOutsideVW], .interiorid = EntranceInfo[entranceid][eOutsideInt]);

		if(EntranceInfo[entranceid][eMapIcon])
		{
		    EntranceInfo[entranceid][eMapIconID] = CreateDynamicMapIcon(EntranceInfo[entranceid][ePosX], EntranceInfo[entranceid][ePosY], EntranceInfo[entranceid][ePosZ], EntranceInfo[entranceid][eMapIcon], 0, .worldid = EntranceInfo[entranceid][eOutsideVW], .interiorid = EntranceInfo[entranceid][eOutsideInt]);
		}
	}
}

IsEntranceOwner(playerid, entranceid)
{
	return (EntranceInfo[entranceid][eOwnerID] == PlayerData[playerid][pID]);
}


IsGarageOwner(playerid, garageid)
{
	return (GarageInfo[garageid][gOwnerID] == PlayerData[playerid][pID]);
}

GetNearbyGarageEx(playerid)
{
	return GetNearbyGarage(playerid) == -1 ? GetInsideGarage(playerid) : GetNearbyGarage(playerid);
}

GetNearbyGarage(playerid)
{
 	foreach(new i : Garage)
	{
	    if(GarageInfo[i][gExists] && IsPlayerInRangeOfPoint(playerid, 4.0, GarageInfo[i][gPosX], GarageInfo[i][gPosY], GarageInfo[i][gPosZ]))
	    {
	        return i;
		}
	}

	return -1;
}

GetInsideGarage(playerid)
{
 	foreach(new i : Garage)
	{
	    if(GarageInfo[i][gExists] && IsPlayerInRangeOfPoint(playerid, 50.0, garageInteriors[GarageInfo[i][gType]][intVX], garageInteriors[GarageInfo[i][gType]][intVY], garageInteriors[GarageInfo[i][gType]][intVZ]) && GetPlayerInterior(playerid) == garageInteriors[GarageInfo[i][gType]][intID] && GetPlayerVirtualWorld(playerid) == GarageInfo[i][gWorld])
	    {
	        return i;
		}
	}

	return -1;
}

ReloadGarage(garageid)
{
	if(GarageInfo[garageid][gExists])
	{
	    new string[128];

		DestroyDynamic3DTextLabel(GarageInfo[garageid][gText]);
		DestroyDynamicPickup(GarageInfo[garageid][gPickup]);

        if(GarageInfo[garageid][gOwnerID] == 0)
        {
	        format(string, sizeof(string), "[{ADADAD}Garage{54878D}]\nPrice: {00AA00}%s{54878D}\nSize: %s\nCapacity: %i cars", FormatCash(GarageInfo[garageid][gPrice]), garageInteriors[GarageInfo[garageid][gType]][intName], GarageInfo[garageid][gType] + 1);
		}
		else
		{
		    format(string, sizeof(string), "[{ADADAD}Garage{54878D}]\nOwner: %s\nSize: %s\nCapacity: %i cars", GarageInfo[garageid][gOwner], garageInteriors[GarageInfo[garageid][gType]][intName], GarageInfo[garageid][gType] + 1);
		}

		GarageInfo[garageid][gText] = CreateDynamic3DTextLabel(string, 0x54878DFF, GarageInfo[garageid][gPosX], GarageInfo[garageid][gPosY], GarageInfo[garageid][gPosZ] + 0.1, 10.0);
        GarageInfo[garageid][gPickup] = CreateDynamicPickup(1316, 1, GarageInfo[garageid][gPosX], GarageInfo[garageid][gPosY], GarageInfo[garageid][gPosZ]);
	}
}

SetGarageOwner(garageid, playerid)
{
	if(playerid == INVALID_PLAYER_ID)
	{
	    strcpy(GarageInfo[garageid][gOwner], "Nobody", MAX_PLAYER_NAME);
	    GarageInfo[garageid][gOwnerID] = 0;
	}
	else
	{
	    GetPlayerName(playerid, GarageInfo[garageid][gOwner], MAX_PLAYER_NAME);
	    GarageInfo[garageid][gOwnerID] = PlayerData[playerid][pID];
	}

	GarageInfo[garageid][gTimestamp] = gettime();

	mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE garages SET timestamp = %i, ownerid = %i, owner = '%s' WHERE id = %i", GarageInfo[garageid][gTimestamp], GarageInfo[garageid][gOwnerID], GarageInfo[garageid][gOwner], GarageInfo[garageid][gID]);
	mysql_tquery(connectionID, queryBuffer);

	ReloadGarage(garageid);
}

static const vehicleStashCapacities[][] = {
	// Cash      Mats      W      C     M     P   W
	{ 250000,   50000,   250,   250,  100,   50,  3}, // level 1
	{ 500000,  100000,   500,   500,  250,  100,  4}, // level 2
	{1000000,  250000,  1000,   750,  500,  200,  5}  // level 3
};

GetVehicleStashCapacity(vehicleid, item)
{

	if(VehicleInfo[vehicleid][vTrunk] > 0)
	{
		return vehicleStashCapacities[VehicleInfo[vehicleid][vTrunk] - 1][item];
	}

	return 0;
}

static const gangStashCapacities[][] = {
	    // Cash      Mats  Weed    C     M     P    W
		{1000000,  250000, 1000, 1000, 1000,  50,  50},
		{2000000,  500000, 2000, 2000, 2000, 100, 100},
		{3000000, 1000000, 3000, 3000, 3000, 250, 200}
	};

GetGangStashCapacity(gangid, item)
{
	return gangStashCapacities[GangInfo[gangid][gLevel] - 1][item];
}




IsValidModel(modelid)
{
    static modeldat[] =
	{
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -128,
        -515899393, -134217729, -1, -1, 33554431, -1, -1, -1, -14337, -1, -33,
      	127, 0, 0, 0, 0, 0, -8388608, -1, -1, -1, -16385, -1, -1, -1, -1, -1,
       -1, -1, -33, -1, -771751937, -1, -9, -1, -1, -1, -1, -1, -1, -1, -1, -1,
       -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
       -1, -1, -1, -1, -1, -1, -1, -1, 33554431, -25, -1, -1, -1, -1, -1, -1,
       -1073676289, -2147483648, 34079999, 2113536, -4825600, -5, -1, -3145729,
       -1, -16777217, -63, -1, -1, -1, -1, -201326593, -1, -1, -1, -1, -1,
       -257, -1, 1073741823, -133122, -1, -1, -65, -1, -1, -1, -1, -1, -1,
       -2146435073, -1, -1, -1, -1, -1, -1, -1, -1, -1, 1073741823, -64, -1,
       -1, -1, -1, -2635777, 134086663, 0, -64, -1, -1, -1, -1, -1, -1, -1,
       -536870927, -131069, -1, -1, -1, -1, -1, -1, -1, -1, -16384, -1,
       -33554433, -1, -1, -1, -1, -1, -1610612737, 524285, -128, -1,
       2080309247, -1, -1, -1114113, -1, -1, -1, 66977343, -524288, -1, -1, -1,
       -1, -2031617, -1, 114687, -256, -1, -4097, -1, -4097, -1, -1,
       1010827263, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -32768, -1, -1, -1, -1, -1,
       2147483647, -33554434, -1, -1, -49153, -1148191169, 2147483647,
       -100781080, -262145, -57, 134217727, -8388608, -1, -1, -1, -1, -1, -1,
       -1, -1, -1, -1, -1, -1, -1, -1, -1048577, -1, -449, -1017, -1, -1, -1,
       -1, -1, -1, -1, -1, -1, -1, -1, -1835009, -2049, -1, -1, -1, -1, -1, -1,
       -8193, -1, -536870913, -1, -1, -1, -1, -1, -87041, -1, -1, -1, -1, -1,
       -1, -209860, -1023, -8388609, -2096897, -1, -1048577, -1, -1, -1, -1,
       -1, -1, -897, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1610612737,
       -3073, -28673, -1, -1, -1, -1537, -1, -1, -13, -1, -1, -1, -1, -1985,
       -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1056964609, -1, -1, -1,
       -1, -1, -1, -1, -2, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
       -236716037, -1, -1, -1, -1, -1, -1, -1, -536870913, 3, 0, 0, 0, 0, 0, 0,
       0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
       0, 0, 0, 0, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
       -1, -1, -1, -1, -1, -2097153, -2109441, -1, 201326591, -4194304, -1, -1,
       -241, -1, -1, -1, -1, -1, -1, 7, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
       0, -32768, -1, -1, -1, -2, -671096835, -1, -8388609, -66323585, -13,
       -1793, -32257, -247809, -1, -1, -513, 16252911, 0, 0, 0, -131072,
       33554383, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
       0, 0, 0, 0, 0, 0, 0, 0, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
       -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 8356095, 0, 0, 0, 0, 0,
       0, -256, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
       -268435449, -1, -1, -2049, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
       92274627, -65536, -2097153, -268435457, 591191935, 1, 0, -16777216, -1,
       -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 127
	};

	if((modelid >= 0) && ((modelid / 32) < sizeof (modeldat)) && (modeldat[modelid / 32] & (1 << (modelid % 32))))
  	{
   	    return 1;
	}

	if((18632 <= modelid <= 19999) || (11682 <= modelid <= 11753))
	{
	    return 1;
	}

 	return 0;
}

IsPlayerOnline(const name[], &id = INVALID_PLAYER_ID)
{
	foreach(new i : Player)
	{
	    if(!strcmp(GetPlayerNameEx(i), name, true) && PlayerData[i][pLogged])
	    {
	        id = i;
	        return 1;
		}
	}

	id = INVALID_PLAYER_ID;
	return 0;
}



IsVehicleInGarage(vehicleid, garageid)
{
	new
	    Float:x,
	    Float:y,
	    Float:z;

	GetVehiclePos(vehicleid, x, y, z);

	return IsPointInRangeOfPoint(x, y, z, 50.0, garageInteriors[GarageInfo[garageid][gType]][intVX], garageInteriors[GarageInfo[garageid][gType]][intVY], garageInteriors[GarageInfo[garageid][gType]][intVZ]) && GetVehicleVirtualWorld(vehicleid) == GarageInfo[garageid][gWorld];
}

IsPlayerInMiningArea(playerid)
{
    for(new i = 0; i < sizeof(minerPositions); i ++)
	{
	    if(IsPlayerInRangeOfPoint(playerid, 4.0, minerPositions[i][0], minerPositions[i][1], minerPositions[i][2]))
	    {
	    	return 1;
	    }
	}

	return 0;
}

IsPlayerAtFoodPlace(playerid)
{
    if(IsPlayerInRangeOfPoint(playerid, 12.0, 1174.0956, -936.1318, 42.8307) || IsPlayerInRangeOfPoint(playerid, 12.0, 1514.9395, -1031.0515, 23.7966) || IsPlayerInRangeOfPoint(playerid, 12.0, 1202.5309, -1275.9502, 13.3616) || IsPlayerInRangeOfPoint(playerid, 12.0, 1418.1516, -1721.0294, 13.5469)) {
        return 1;
	} else if(IsPlayerInRangeOfPoint(playerid, 12.0, 339.2676, -1771.2668, 5.1687) || IsPlayerInRangeOfPoint(playerid, 12.0, 1023.6545, -1332.1298, 13.3842) || IsPlayerInRangeOfPoint(playerid, 12.0, 1189.3583, -1706.9924, 13.5755) || IsPlayerInRangeOfPoint(playerid, 12.0, 2083.0374, -1760.8845, 13.5625)) {
	    return 1;
	} else if(IsPlayerInRangeOfPoint(playerid, 12.0, 2264.8145, -1309.9031, 23.9844))
	{
	    return 1;
	}
	return 0;
}


stock IsPlayerAtFuelStation(playerid)
{
    if(IsPlayerInRangeOfPoint(playerid, 12.0, 1004.0070, -939.3102, 42.1797) || IsPlayerInRangeOfPoint(playerid, 12.0, 1944.3260, -1772.9254, 13.3906) || IsPlayerInRangeOfPoint(playerid, 12.0, -90.5515, -1169.4578, 2.4079) || IsPlayerInRangeOfPoint(playerid, 12.0, -1609.7958, -2718.2048, 48.5391)) {
        return 1;
	} else if(IsPlayerInRangeOfPoint(playerid, 12.0, -2029.4968, 156.4366, 28.9498) || IsPlayerInRangeOfPoint(playerid, 12.0, -2408.7590, 976.0934, 45.4175) || IsPlayerInRangeOfPoint(playerid, 12.0, -2243.9629, -2560.6477, 31.8841) || IsPlayerInRangeOfPoint(playerid, 12.0, -1676.6323, 414.0262, 6.9484)) {
	    return 1;
	} else if(IsPlayerInRangeOfPoint(playerid, 12.0, 2202.2349, 2474.3494, 10.5258) || IsPlayerInRangeOfPoint(playerid, 12.0, 614.9333, 1689.7418, 6.6968) || IsPlayerInRangeOfPoint(playerid, 12.0, -1328.8250, 2677.2173, 49.7665) || IsPlayerInRangeOfPoint(playerid, 12.0, 70.3882, 1218.6783, 18.5165)) {
	    return 1;
	} else if(IsPlayerInRangeOfPoint(playerid, 12.0, 654.9641, -559.7485, 16.5015) || IsPlayerInRangeOfPoint(playerid, 12.0, 654.9617, -570.4176, 16.5015) || IsPlayerInRangeOfPoint(playerid, 12.0, 1382.9899, 461.9903, 20.1245) || IsPlayerInRangeOfPoint(playerid, 12.0, 1380.9395, 457.2494, 19.9260)) {
	    return 1;
	} else if(IsPlayerInRangeOfPoint(playerid, 12.0, 1944.9109,-1583.2743,13.7161) || IsPlayerInRangeOfPoint(playerid, 12.0, 1943.8992,-1588.6217,13.7161)) {
	    return 1;
	} else if((IsAPlane(GetPlayerVehicleID(playerid)) || IsAHelicopter(GetPlayerVehicleID(playerid))) && IsPlayerInRangeOfPoint(playerid, 20.0, 1439.7886, -2445.6777, 13.5547)) {
	    return 1;
	} else if((IsABoat(GetPlayerVehicleID(playerid))) && IsPlayerInRangeOfPoint(playerid, 10.0, 133.461380, -1815.096557, 3.989328) || IsPlayerInRangeOfPoint(playerid, 10.0, 138.547210, -1815.308593, 3.989328) || IsPlayerInRangeOfPoint(playerid, 10.0, 144.042800, -1815.534912, 3.989328)) {
	    return 1;
	}

	return 0;
}

IsPlayerAtFishingPlace(playerid)
{
    if(IsPlayerInRangeOfPoint(playerid, 1.0, 403.8266, -2088.7598, 7.8359) || IsPlayerInRangeOfPoint(playerid, 1.0, 398.7553, -2088.7490, 7.8359) || IsPlayerInRangeOfPoint(playerid, 1.0, 396.2197, -2088.6692, 7.8359) || IsPlayerInRangeOfPoint(playerid, 1.0, 391.1094, -2088.7976, 7.8359)) {
		return 1;
	} else if(IsPlayerInRangeOfPoint(playerid, 1.0, 383.4157, -2088.7849, 7.8359) || IsPlayerInRangeOfPoint(playerid, 1.0, 374.9598, -2088.7979, 7.8359) || IsPlayerInRangeOfPoint(playerid, 1.0, 369.8107, -2088.7927, 7.8359) || IsPlayerInRangeOfPoint(playerid, 1.0, 367.3637, -2088.7925, 7.8359)) {
	    return 1;
	} else if(IsPlayerInRangeOfPoint(playerid, 1.0, 362.2244, -2088.7981, 7.8359) || IsPlayerInRangeOfPoint(playerid, 1.0, 354.5382, -2088.7979, 7.8359)) {
	    return 1;
	}

	return 0;
}

SetMusicStream(type, extraid, url[])
{
	switch(type)
	{
	    case MUSIC_MP3PLAYER:
	    {
	        if(isnull(url) && PlayerData[extraid][pStreamType] == type)
	        {
	            StopAudioStreamForPlayer(extraid);
	            PlayerData[extraid][pStreamType] = MUSIC_NONE;
	        }
	        else
	        {
	            PlayAudioStreamForPlayer(extraid, url);
	            PlayerData[extraid][pStreamType] = type;
	        }
		}
		case MUSIC_BOOMBOX:
		{
		    foreach(new i : Player)
		    {
		        if(PlayerData[i][pBoomboxListen] == extraid)
		        {
				    if(isnull(url) && PlayerData[i][pStreamType] == type)
				    {
				        StopAudioStreamForPlayer(i);
			            PlayerData[i][pStreamType] = MUSIC_NONE;
			        }
			        else if(PlayerData[i][pStreamType] == MUSIC_NONE || PlayerData[i][pStreamType] == MUSIC_BOOMBOX)
			        {
			            PlayAudioStreamForPlayer(i, url);
			            PlayerData[i][pStreamType] = type;
			        }
				}
			}

			strcpy(PlayerData[extraid][pBoomboxURL], url, 128);
		}
		case MUSIC_VEHICLE:
		{
		    foreach(new i : Player)
		    {
		        if(IsPlayerInVehicle(i, extraid))
		        {
				    if(isnull(url) && PlayerData[i][pStreamType] == type)
				    {
		        		StopAudioStreamForPlayer(i);
	            		PlayerData[i][pStreamType] = MUSIC_NONE;
			        }
	    		    else if(PlayerData[i][pStreamType] == MUSIC_NONE || PlayerData[i][pStreamType] == MUSIC_VEHICLE)
			        {
	    		        PlayAudioStreamForPlayer(i, url);
	           		 	PlayerData[i][pStreamType] = type;
					}
				}
			}

			strcpy(vehicleStream[extraid], url, 128);
		}
	}
}

DestroyWeedPlant(playerid)
{
	if(PlayerData[playerid][pWeedPlanted])
	{
	    DestroyDynamicObject(PlayerData[playerid][pWeedObject]);

	    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET weedplanted = 0, weedtime = 0, weedgrams = 0, weed_x = 0.0, weed_y = 0.0, weed_z = 0.0, weed_a = 0.0 WHERE uid = %i", PlayerData[playerid][pID]);
	    mysql_tquery(connectionID, queryBuffer);

	    PlayerData[playerid][pWeedPlanted] = 0;
	    PlayerData[playerid][pWeedTime] = 0;
	    PlayerData[playerid][pWeedGrams] = 0;
	    PlayerData[playerid][pWeedX] = 0.0;
	    PlayerData[playerid][pWeedY] = 0.0;
	    PlayerData[playerid][pWeedZ] = 0.0;
	    PlayerData[playerid][pWeedA] = 0.0;
	}
}

DestroyBoombox(playerid)
{
	if(PlayerData[playerid][pBoomboxPlaced])
	{
    	DestroyDynamicObject(PlayerData[playerid][pBoomboxObject]);
		DestroyDynamic3DTextLabel(PlayerData[playerid][pBoomboxText]);

		PlayerData[playerid][pBoomboxObject] = INVALID_OBJECT_ID;
		PlayerData[playerid][pBoomboxText] = Text3D:INVALID_3DTEXT_ID;
        PlayerData[playerid][pBoomboxPlaced] = 0;
        PlayerData[playerid][pBoomboxURL] = 0;
	}
}

GetNearbyBoombox(playerid)
{
	foreach(new i : Player)
	{
	    if(PlayerData[i][pBoomboxPlaced] && IsPlayerInRangeOfDynamicObject(playerid, PlayerData[i][pBoomboxObject], 30.0))
	    {
	        return i;
		}
	}

	return INVALID_PLAYER_ID;
}

Log_Write(table[], const text[], {Float,_}:...)
{
	static
  	    args,
	    str[1024];

	if((args = numargs()) <= 2)
	{
	    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "INSERT INTO %e VALUES(null, NOW(), '%e')", table, text);
	    mysql_tquery(connectionID, queryBuffer);
	}
	else
	{
		while(--args >= 2)
		{
			#emit LCTRL 	5
			#emit LOAD.alt 	args
			#emit SHL.C.alt 2
			#emit ADD.C 	12
			#emit ADD
			#emit LOAD.I
			#emit PUSH.pri
		}
		#emit PUSH.S 		text
		#emit PUSH.C 		192
		#emit PUSH.C 		str
		#emit LOAD.S.pri 	8
		#emit ADD.C 		4
		#emit PUSH.pri
		#emit SYSREQ.C 		format
		#emit LCTRL 		5
		#emit SCTRL 		4

		mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "INSERT INTO %e VALUES(null, NOW(), '%e')", table, str);
	    mysql_tquery(connectionID, queryBuffer);

		#emit RETN
	}
	return 1;
}

SendFactionMessage(factionid, color, const text[], {Float,_}:...)
{
	static
  	    args,
	    str[192];

	if((args = numargs()) <= 3)
	{
	    foreach(new i : Player)
	    {
	        if(PlayerData[i][pLogged] && PlayerData[i][pFaction] == factionid)
	        {
	    		SendClientMessage(i, color, text);
			}
		}
	}
	else
	{
		while(--args >= 3)
		{
			#emit LCTRL 	5
			#emit LOAD.alt 	args
			#emit SHL.C.alt 2
			#emit ADD.C 	12
			#emit ADD
			#emit LOAD.I
			#emit PUSH.pri
		}
		#emit PUSH.S 	text
		#emit PUSH.C 	192
		#emit PUSH.C 	str
		#emit PUSH.S	8
		#emit SYSREQ.C 	format
		#emit LCTRL 	5
		#emit SCTRL 	4

		foreach(new i : Player)
	    {
	        if(PlayerData[i][pLogged] && PlayerData[i][pFaction] == factionid)
	        {
	    		SendClientMessage(i, color, str);
			}
		}

		#emit RETN
	}
	return 1;
}

SendGangMessage(gangid, color, const text[], {Float,_}:...)
{
	static
  	    args,
	    str[192];

	if((args = numargs()) <= 3)
	{
	    foreach(new i : Player)
	    {
	        if(PlayerData[i][pLogged] && PlayerData[i][pGang] == gangid)
	        {
	    		SendClientMessage(i, color, text);
			}
		}
	}
	else
	{
		while(--args >= 3)
		{
			#emit LCTRL 	5
			#emit LOAD.alt 	args
			#emit SHL.C.alt 2
			#emit ADD.C 	12
			#emit ADD
			#emit LOAD.I
			#emit PUSH.pri
		}
		#emit PUSH.S 	text
		#emit PUSH.C 	192
		#emit PUSH.C 	str
		#emit PUSH.S	8
		#emit SYSREQ.C 	format
		#emit LCTRL 	5
		#emit SCTRL 	4

		foreach(new i : Player)
	    {
	        if(PlayerData[i][pLogged] && PlayerData[i][pGang] == gangid)
	        {
	    		SendClientMessage(i, color, str);
			}
		}

		#emit RETN
	}
	return 1;
}

SendLawEnforcementMessage(color, const text[], {Float,_}:...)
{
    static sizeArgsInBytes, args, str[192];

    if ((args = numargs()) <= 2)
    {
        foreach(new i : Player)
        {
            if (PlayerData[i][pLogged] && IsLawEnforcement(i))
            {
                SendClientMessage(i, color, text);
            }
        }
    }
    else
    {
        sizeArgsInBytes = (1 + args) * 4;
        while (--args >= 2)
        {
            #emit LCTRL     5
            #emit LOAD.alt  args
            #emit SHL.C.alt 2
            #emit ADD.C     12
            #emit ADD
            #emit LOAD.I
            #emit PUSH.pri
        }
        #emit PUSH.S    text
        #emit PUSH.C    192
        #emit PUSH.C    str
        // Push the number of parameters passed (in bytes) to the function.
        #emit PUSH      sizeArgsInBytes
        #emit SYSREQ.C  format
        #emit LCTRL     5
        #emit SCTRL     4

        foreach(new i : Player)
        {
            if (PlayerData[i][pLogged] && IsLawEnforcement(i))
            {
                SendClientMessage(i, color, str);
            }
        }

        #emit RETN
    }
    return 1;
}

SendGraphicMessage(color, string2[])
{
	foreach(new i : Player)
	{
		if(IsPlayerConnected(i) && PlayerData[i][pLogged])
		{
			if(PlayerData[i][pGraphic] >= 1 || PlayerData[i][pAdmin] >= 5)
			{
				SendClientMessage(i, color, string2);
			}
        }
	}
}

SendFMMessage(color, string2[])
{
	foreach(new i : Player)
	{
		if(IsPlayerConnected(i) &&  PlayerData[i][pLogged])
		{
			if(PlayerData[i][pFactionMod] >= 1 || PlayerData[i][pGameAffairs] || PlayerData[i][pAdmin] >= 7)
			{
				SendClientMessage(i, color, string2);
			}
		}
	}
}

SendGMMessage(color, string2[])
{
	foreach(new i : Player)
	{
		if(IsPlayerConnected(i) && PlayerData[i][pLogged])
		{
			if(PlayerData[i][pGangMod] >= 1 || PlayerData[i][pGameAffairs] || PlayerData[i][pAdmin] >= 7)
			{
				SendClientMessage(i, color, string2);
			}
		}
	}
}

SendHMMessage(color, string2[])
{
    foreach(new i : Player)
    {
        if (IsPlayerConnected(i) && PlayerData[i][pLogged])
        {
            if (PlayerData[i][pHelperManager] >= 1 || PlayerData[i][pGameAffairs] || IsAdmin(i, LEAD_HEAD_ADMIN))
            {
                SendClientMessage(i, color, string2);
            }
        }
    }
}

SendAPMessage(color, string2[])
{
	foreach(new i : Player)
	{
		if(IsPlayerConnected(i) && PlayerData[i][pLogged])
		{
			if(PlayerData[i][pAdminPersonnel] >= 1 || PlayerData[i][pAdmin] >= MANAGEMENT)
			{
				SendClientMessage(i, color, string2);
			}
		}
	}
}

SendWDMessage(color, string2[])
{
	foreach(new i : Player)
	{
		if(IsPlayerConnected(i) && PlayerData[i][pLogged])
		{
			if(PlayerData[i][pWebDev] >= 1 || PlayerData[i][pAdmin] >= MANAGEMENT)
			{
				SendClientMessage(i, color, string2);
			}
		}
	}
}

SendDGAMessage(color, string2[])
{
	foreach(new i : Player)
	{
		if(IsPlayerConnected(i) && PlayerData[i][pLogged])
		{
			if(PlayerData[i][pGameAffairs] >= 1 || PlayerData[i][pAdmin] >= MANAGEMENT)
			{
				SendClientMessage(i, color, string2);
			}
		}
	}
}

//----------------------------------------------------------

SendAdminMessage(color, const text[], {Float,_}:...)
{
	static
  	    args,
	    str[192];

	if((args = numargs()) <= 2)
	{
	    foreach(new i : Player)
	    {
	        if(PlayerData[i][pLogged] && PlayerData[i][pAdmin] > 0)
	        {
	    		SendClientMessage(i, color, text);
			}
		}

	}
	else
	{
		while(--args >= 2)
		{
			#emit LCTRL 	5
			#emit LOAD.alt 	args
			#emit SHL.C.alt 2
			#emit ADD.C 	12
			#emit ADD
			#emit LOAD.I
			#emit PUSH.pri
		}
		#emit PUSH.S 		text
		#emit PUSH.C 		192
		#emit PUSH.C 		str
		#emit LOAD.S.pri 	8
		#emit ADD.C 		4
		#emit PUSH.pri
		#emit SYSREQ.C 		format
		#emit LCTRL 		5
		#emit SCTRL 		4

		foreach(new i : Player)
	    {
	        if(PlayerData[i][pLogged] && PlayerData[i][pAdmin] > 0)
	        {
	    		SendClientMessage(i, color, str);
			}
		}

		#emit RETN
	}
	return 1;
}

SendHelperMessage(color, const text[], {Float,_}:...)
{
	static
  	    args,
	    str[192];

	if((args = numargs()) <= 2)
	{
	    foreach(new i : Player)
	    {
			if(PlayerData[i][pLogged] && PlayerData[i][pHelper] > 0)
	        {
	    		SendClientMessage(i, color, text);
			}
		}
	}
	else
	{
		while(--args >= 2)
		{
			#emit LCTRL 	5
			#emit LOAD.alt 	args
			#emit SHL.C.alt 2
			#emit ADD.C 	12
			#emit ADD
			#emit LOAD.I
			#emit PUSH.pri
		}
		#emit PUSH.S 		text
		#emit PUSH.C 		192
		#emit PUSH.C 		str
		#emit LOAD.S.pri 	8
		#emit ADD.C 		4
		#emit PUSH.pri
		#emit SYSREQ.C 		format
		#emit LCTRL 		5
		#emit SCTRL 		4

		foreach(new i : Player)
	    {
	        if(PlayerData[i][pLogged] && PlayerData[i][pHelper] > 0)
	        {
	    		SendClientMessage(i, color, str);
			}
		}

		#emit RETN
	}
	return 1;
}

SendTurfMessage(turfid, color, const text[], {Float,_}:...)
{
	static
  	    args,
	    str[192];

	if((args = numargs()) <= 3)
	{
	    foreach(new i : Player)
	    {
	        if(PlayerData[i][pLogged] && GetNearbyTurf(i) == turfid && PlayerData[i][pToggleTurfs] == 0)
	        {
	    		SendClientMessage(i, color, text);
			}
		}
	}
	else
	{
		while(--args >= 3)
		{
			#emit LCTRL 	5
			#emit LOAD.alt 	args
			#emit SHL.C.alt 2
			#emit ADD.C 	12
			#emit ADD
			#emit LOAD.I
			#emit PUSH.pri
		}
		#emit PUSH.S 	text
		#emit PUSH.C 	192
		#emit PUSH.C 	str
		#emit PUSH.S	8
		#emit SYSREQ.C 	format
		#emit LCTRL 	5
		#emit SCTRL 	4

		foreach(new i : Player)
	    {
	        if(PlayerData[i][pLogged] && GetNearbyTurf(i) == turfid && PlayerData[i][pToggleTurfs] == 0)
	        {
	    		SendClientMessage(i, color, str);
			}
		}

		#emit RETN
	}
	return 1;
}

SendStaffMessage(color, const text[], {Float,_}:...)
{
	static
  	    args,
	    str[192];

	if((args = numargs()) <= 2)
	{
	    foreach(new i : Player)
	    {
	        if(PlayerData[i][pLogged] && (PlayerData[i][pAdmin] > 0 || PlayerData[i][pHelper] > 0))
	        {
	    		SendClientMessage(i, color, text);
			}
		}

	}
	else
	{
		while(--args >= 2)
		{
			#emit LCTRL 	5
			#emit LOAD.alt 	args
			#emit SHL.C.alt 2
			#emit ADD.C 	12
			#emit ADD
			#emit LOAD.I
			#emit PUSH.pri
		}
		#emit PUSH.S 		text
		#emit PUSH.C 		192
		#emit PUSH.C 		str
		#emit LOAD.S.pri 	8
		#emit ADD.C 		4
		#emit PUSH.pri
		#emit SYSREQ.C 		format
		#emit LCTRL 		5
		#emit SCTRL 		4

		foreach(new i : Player)
	    {
	        if(PlayerData[i][pLogged] && (PlayerData[i][pAdmin] > 0 || PlayerData[i][pHelper] > 0))
	        {
	    		SendClientMessage(i, color, str);
			}
		}

		#emit RETN
	}
	return 1;
}

SendClientMessageToAllEx(color, const text[], {Float,_}:...)
{
	static
  	    args,
	    str[192];

	if((args = numargs()) <= 2)
	{
	    foreach(new i : Player)
	    {
	        if(PlayerData[i][pLogged])
	        {
			    SendClientMessage(i, color, text);
			}
		}
	}
	else
	{
		while(--args >= 2)
		{
			#emit LCTRL 	5
			#emit LOAD.alt 	args
			#emit SHL.C.alt 2
			#emit ADD.C 	12
			#emit ADD
			#emit LOAD.I
			#emit PUSH.pri
		}
		#emit PUSH.S 		text
		#emit PUSH.C 		192
		#emit PUSH.C 		str
		#emit LOAD.S.pri 	8
		#emit ADD.C 		4
		#emit PUSH.pri
		#emit SYSREQ.C 		format
		#emit LCTRL 		5
		#emit SCTRL 		4

		foreach(new i : Player)
	    {
	        if(PlayerData[i][pLogged])
	        {
			    SendClientMessage(i, color, str);
			}
		}

		#emit RETN
	}
	return 1;
}

SendProximityFadeMessage(playerid, Float:radius, const text[], color1, color2, color3, color4, color5)
{
    foreach(new i : Player)
    {
	    if(IsPlayerNearPlayer(i, playerid, radius / 16))
		{
            SendClientMessage(i, color1, text);
        }
		else if(IsPlayerNearPlayer(i, playerid, radius / 8))
		{
            SendClientMessage(i, color2, text);
        }
		else if(IsPlayerNearPlayer(i, playerid, radius / 4))
		{
            SendClientMessage(i, color3, text);
        }
		else if(IsPlayerNearPlayer(i, playerid, radius / 2))
		{
            SendClientMessage(i, color4, text);
        }
		else if(IsPlayerNearPlayer(i, playerid, radius))
		{
            SendClientMessage(i, color5, text);
        }
        else if(PlayerData[i][pListen])
        {
            SendClientMessage(i, color5, text);
        }
	}
	return 1;
}
SendProximityMessage(playerid, Float:radius, color, const text[], {Float,_}:...)
{
	static
  	    args,
	    str[192];

	if((args = numargs()) <= 4)
	{
	    foreach(new i : Player)
		{
	        if(IsPlayerNearPlayer(i, playerid, radius) || PlayerData[i][pListen])
	        {
	            SendClientMessage(i, color, text);
			}
		}
	}
	else
	{
		while(--args >= 4)
		{
			#emit LCTRL 	5
			#emit LOAD.alt 	args
			#emit SHL.C.alt 2
			#emit ADD.C 	12
			#emit ADD
			#emit LOAD.I
			#emit PUSH.pri
		}
		#emit PUSH.S 		text
		#emit PUSH.C 		192
		#emit PUSH.C 		str
		#emit LOAD.S.pri    8
		#emit CONST.alt     4
		#emit SUB
		#emit PUSH.pri
		#emit SYSREQ.C 		format
		#emit LCTRL 		5
		#emit SCTRL 		4

		foreach(new i : Player)
		{
	        if(IsPlayerNearPlayer(i, playerid, radius) || PlayerData[i][pListen])
	        {
	            SendClientMessage(i, color, str);
			}
		}

		#emit RETN
	}
	return 1;
}

forward Countdown(playerid, count);
public Countdown(playerid, count)
{
	foreach(new i : Player)
	{
	    if(IsPlayerInEvent(i))
	    {
	        switch(count)
	        {
	        	case 3:
				{
					GameTextForPlayer(i, "~g~3", 1500, 3);
					PlayerPlaySound(i, 1056, 0.0, 0.0, 0.0);
				}
				case 2:
				{
                    GameTextForPlayer(i, "~g~2", 1500, 3);
					PlayerPlaySound(i, 1056, 0.0, 0.0, 0.0);
				}
				case 1:
				{
                    GameTextForPlayer(i, "~g~1", 1500, 3);
					PlayerPlaySound(i, 1056, 0.0, 0.0, 0.0);
				}
				case 0:
				{
                    GameTextForPlayer(i, "~g~Go! Go! Go!", 2000, 3);
					PlayerPlaySound(i, 1057, 0.0, 0.0, 0.0);
				}
			}
		}
	}

	count--;

	if(count >= 0)
	{
 		SetTimerEx("Countdown", 1000, false, "ii", playerid, count);
	}
}

forward GrandTheftAutoV(playerid, step, Float:x, Float:y, Float:z, Float:angle, Float:cx, Float:cy, Float:cz);
public GrandTheftAutoV(playerid, step, Float:x, Float:y, Float:z, Float:angle, Float:cx, Float:cy, Float:cz)
{
	if(PlayerData[playerid][pLogged])
	{
		SetPlayerCameraLookAt(playerid, x, y, z);

		switch(step)
		{
		    case 1:
		    {
    			SetPlayerCameraPos(playerid, x, y, z + 100.0);
				PlayerPlaySound(playerid, 16200, 0.0, 0.0, 0.0);
				SetTimerEx("GrandTheftAutoV", 1000, false, "iifffffff", playerid, 2, x, y, z, angle, cx, cy, cz);
			}
			case 2:
			{
				SetPlayerCameraPos(playerid, x, y, z + 50.0);
				PlayerPlaySound(playerid, 16200, 0.0, 0.0, 0.0);
				SetTimerEx("GrandTheftAutoV", 1000, false, "iifffffff", playerid, 3, x, y, z, angle, cx, cy, cz);
			}
			case 3:
			{
				SetPlayerCameraPos(playerid, x, y, z + 25.0);
				PlayerPlaySound(playerid, 16200, 0.0, 0.0, 0.0);
		  		SetTimerEx("GrandTheftAutoV", 1000, false, "iifffffff", playerid, 4, x, y, z, angle, cx, cy, cz);
			}
			case 4:
			{
				InterpolateCameraPos(playerid, cx, cy, cz + 25.0, cx, cy, cz, 1000);
				InterpolateCameraLookAt(playerid, x + 4.0 * floatsin(-angle, degrees), y + 4.0 * floatcos(-angle, degrees), z, x, y, z + 0.6, 1000);
				SetTimerEx("GrandTheftAutoV", 1500, false, "iifffffff", playerid, 5, x, y, z, angle, cx, cy, cz);
			}
			case 5:
			{
			    SetCameraBehindPlayer(playerid);
			    TogglePlayerControllableEx(playerid, 1);
			    PlayerData[playerid][pLoginCamera] = 0;
			}
		}
	}
}

forward DestroyLockText(playerid);
public DestroyLockText(playerid)
{
	if(IsValidDynamic3DTextLabel(PlayerData[playerid][pLockText]))
	{
	    DestroyDynamic3DTextLabel(PlayerData[playerid][pLockText]);
		PlayerData[playerid][pLockText] = Text3D:INVALID_3DTEXT_ID;
	}
}



forward StreamedCheck(playerid, Float:x, Float:y, Float:z, interior, world);
public StreamedCheck(playerid, Float:x, Float:y, Float:z, interior, world)
{
	foreach(new i : Entrance)
	{
    	if(EntranceInfo[i][eExists] && EntranceInfo[i][eFreeze] && IsPointInRangeOfPoint(x, y, z, 100.0, EntranceInfo[i][eIntX], EntranceInfo[i][eIntY], EntranceInfo[i][eIntZ]) && interior == EntranceInfo[i][eInterior] && world == EntranceInfo[i][eWorld])
		{
			SetFreezePos(playerid, x, y, z);
			return 1;
		}
	}

	for(new i = 0; i < sizeof(staticEntrances); i ++)
	{
	    if(staticEntrances[i][eFreeze] && IsPointInRangeOfPoint(x, y, z, 100.0, staticEntrances[i][eIntX], staticEntrances[i][eIntY], staticEntrances[i][eIntZ]) && world == staticEntrances[i][eWorld])
		{
            SetFreezePos(playerid, x, y, z);
			return 1;
		}
	}

	return 0;
}

forward UnfreezeNewbie(playerid);
public UnfreezeNewbie(playerid)
{
    TogglePlayerControllableEx(playerid, 1);
}

forward VehicleUnfreeze(playerid, vehicleid, Float:x, Float:y, Float:z, interior, world);
public VehicleUnfreeze(playerid, vehicleid, Float:x, Float:y, Float:z, interior, world)
{
    if(GetPlayerState(playerid) == PLAYER_STATE_DRIVER && IsPlayerInRangeOfPoint(playerid, 100.0, x, y, z) && GetPlayerInterior(playerid) == interior && GetPlayerVirtualWorld(playerid) == world)
	{
		SetVehiclePos(vehicleid, x, y, z);
	}
	PlayerTextDrawHide(playerid, LoadingObjects0[playerid]);
	PlayerTextDrawHide(playerid, LoadingObjects1[playerid]);
	PlayerTextDrawHide(playerid, LoadingObjects2[playerid]);
	PlayerTextDrawHide(playerid, LoadingObjects3[playerid]);
	PlayerTextDrawHide(playerid, LoadingObjects4[playerid]);
	PlayerTextDrawHide(playerid, LoadingObjects5[playerid]);
	TogglePlayerControllableEx(playerid, 1);
}

forward UnfreezePlayer(playerid);
public UnfreezePlayer(playerid)
{
    TogglePlayerControllableEx(playerid, 1);
    PlayerData[playerid][pFreezeTimer] = -1;
    PlayerTextDrawHide(playerid, LoadingObjects0[playerid]);
    PlayerTextDrawHide(playerid, LoadingObjects1[playerid]);
    PlayerTextDrawHide(playerid, LoadingObjects2[playerid]);
    PlayerTextDrawHide(playerid, LoadingObjects3[playerid]);
    PlayerTextDrawHide(playerid, LoadingObjects4[playerid]);
    PlayerTextDrawHide(playerid, LoadingObjects5[playerid]);
}

forward DestroyWater(objectid);
public DestroyWater(objectid)
{
	DestroyDynamicObject(objectid);
}

forward SecondTimer();
public SecondTimer()
{
	new hour, minute, boomboxid, string[128];

	gettime(hour, minute);

	if((gGMX) && mysql_unprocessed_queries(connectionID) == 0)
	{
	    SendRconCommand("exit");
	}

	foreach(new i : Player)
	{
  		//SetPlayerTime(i, hour, minute);

		if(PlayerData[i][pLogged] && !PlayerData[i][pKicked])
		{

			if(GetPlayerWeapon(i) == WEAPON_BOMB)
			{
				BanPlayerPermanent(i, "Weapon Crasher (bomb)");
			}
		    if(GetPlayerSurfingVehicleID(i) != INVALID_PLAYER_ID && GetPlayerState(i) == PLAYER_STATE_ONFOOT && !IsSurfVehicle(GetPlayerSurfingVehicleID(i)) && !PlayerData[i][pAdminDuty] && GetVehicleSpeed(GetPlayerSurfingVehicleID(i)) > 40)
		    {
		        new
		            Float:x,
		            Float:y,
		            Float:z;

		        SendProximityMessage(i, 20.0, COLOR_PURPLE, "* %s slipped off the top of the vehicle.", GetRPName(i));
		        GetPlayerPos(i, x, y, z);
		        SetPlayerPos(i, x + 1, y, z + 3.0);
		        ApplyAnimation(i, "PED", "BIKE_fallR", 4.1, 0, 1, 1, 0, 0);
			}
			if (PlayerData[i][pSpeedTime] > 0)
			{
			    PlayerData[i][pSpeedTime]--;
			}
		    if(PlayerData[i][pShipment] >= 0)
			{
				if((GetPlayerState(i) == PLAYER_STATE_DRIVER) && (GetVehicleModel(GetPlayerVehicleID(i)) != 414 && GetVehicleModel(GetPlayerVehicleID(i)) != 498))
				{
			    	PlayerData[i][pShipment] = -1;
			    	SendClientMessage(i, COLOR_GREY, "Shipment cancelled. You went into another vehicle.");
				}
		    }
		    if(GetPlayerSpecialAction(i) == SPECIAL_ACTION_DRINK_BEER || GetPlayerSpecialAction(i) == SPECIAL_ACTION_DRINK_WINE)
		    {
		        if(GetPlayerDrunkLevel(i) > 7000)
		        {
		            AwardAchievement(i, ACH_PartyHard);
		        }
		    }
    		if(PlayerData[i][pRepairTime] > 0)
			{
				PlayerData[i][pRepairTime]--;

				if(PlayerData[i][pRepairTime] <= 0)
				{
					if(GetPlayerState(i) == PLAYER_STATE_DRIVER)
					{
						new vehicleid = GetPlayerVehicleID(i);
						
						foreach(new e : Player)
						{
							if(IsPlayerInVehicle(e, vehicleid))
							{
								SetCameraBehindPlayer(e);
							}
						}

						SetVehiclePos(vehicleid, g_RepairShops[PlayerData[i][pRepairShop]][7], g_RepairShops[PlayerData[i][pRepairShop]][8], g_RepairShops[PlayerData[i][pRepairShop]][9]);
						SetVehicleZAngle(vehicleid, g_RepairShops[PlayerData[i][pRepairShop]][10]);
						SetCameraBehindPlayer(i);

						RepairVehicle(vehicleid);
						GameTextForPlayer(i, "~g~Vehicle Repaired", 5000, 1);
						TogglePlayerControllableEx(i, 1);
					}

					PlayerData[i][pRepairShop] = -1;
				}
			}

		    if(!PlayerData[i][pToggleTextdraws])
		    {
			    if(PlayerData[i][pGPSOn])
				{
					new zonename[256];
					format(zonename,sizeof(zonename),"%s", GetPlayerZoneName(i));
					if(strcmp(zonename,"Interior")!=0)
						PlayerTextDrawSetString(i, PlayerData[i][pGPSText], zonename);
					else PlayerTextDrawSetString(i, PlayerData[i][pGPSText], "");
				}
			}

		    if(NetStats_PacketLossPercent(i) > 20.0 && gettime() - PlayerData[i][pLastDesync] > 120)
	        {
	            GameTextForPlayer(i, "You are desynced. Please relog once you see this message.", 10000, 6);
	            PlayerData[i][pLastDesync] = gettime();
	        }
		    if(IsPlayerInTutorial(i))
		    {
		        TogglePlayerControllableEx(i, 0);
		    }
			if(PlayerData[i][pAwaitingClothing])
			{
			    SetPlayerClothing(i);
			}
			if(PlayerData[i][pDraggedBy] != INVALID_PLAYER_ID)
			{
	    		TeleportToPlayer(i, PlayerData[i][pDraggedBy]);
			}
			if(PlayerData[i][pDonator] > 0 && gettime() > PlayerData[i][pVIPTime])
			{
			    PlayerData[i][pDonator] = 0;
			    PlayerData[i][pVIPTime] = 0;
			    PlayerData[i][pSecondJob] = -1;

			    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET vippackage = 0, viptime = 0, secondjob = -1 WHERE uid = %i", PlayerData[i][pID]);
			    mysql_tquery(connectionID, queryBuffer);

			    SendClientMessage(i, COLOR_LIGHTRED, "Your VIP subscription has expired. You are no longer a VIP.");
			}
			if(PlayerData[i][pDonator] < 2 && PlayerData[i][pSecondJob] != JOB_NONE)
			{
			    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET secondjob = -1 WHERE uid = %i", PlayerData[i][pID]);
			    mysql_tquery(connectionID, queryBuffer);

			    PlayerData[i][pSecondJob] = JOB_NONE;
			    SendClientMessage(i, COLOR_LIGHTRED, "Your second job has been removed as you aren't a Gold+ VIP.");
			}
			if(PlayerData[i][pHHCheck])
			{
			    if(PlayerData[i][pHHTime] > 0)
			    {
			        new health = GetPlayerHealthEx(i);

			        if(health == PlayerData[i][pHHRounded])
			        {
			            PlayerData[i][pHHCount]++;
			        }

				    SetPlayerHealth(i, random(100) + 1);

				    PlayerData[i][pHHTime]--;
				    PlayerData[i][pHHRounded] = health;
				}
				else
				{
				    if(IsPlayerPaused(i))
					{
					    SendAdminMessage(COLOR_YELLOW, "AdmWarning: %s[%i] failed the health hack check as they tabbed.", GetRPName(i), i);
					}
				    else if(PlayerData[i][pHHCount] > 0)
				    {
					    SendAdminMessage(COLOR_YELLOW, "AdmWarning: %s[%i] is possibly health hacking with a %i percent chance.", GetRPName(i), i, PlayerData[i][pHHCount] * 20);
				    }
				    else
				    {
				        SendAdminMessage(COLOR_YELLOW, "AdmWarning: %s[%i] does not appear to be health hacking.", GetRPName(i), i);
				    }

				    if(NetStats_PacketLossPercent(i) > 10.0)
				    {
				        SendAdminMessage(COLOR_YELLOW, "AdmWarning: %s[%i] is desynced and has a packet loss of %.1f percent.", GetRPName(i), i, NetStats_PacketLossPercent(i));
					}

				    SetPlayerHealth(i, PlayerData[i][pHealth]);
				    PlayerData[i][pHHCheck] = 0;
				}
			}
			if(PlayerData[i][pReceivingAid] && !PlayerData[i][pHHCheck])
			{
				new
				    Float:health;

				GetPlayerHealth(i, health);

				if((health + 1.0) > 100.0)
				{
				    SetPlayerHealth(i, 100.0);
				    PlayerData[i][pReceivingAid] = 0;
				}
				else
				{
				    SetPlayerHealth(i, health + 1.0);
				}
			}
			if(PlayerData[i][pInjured] )
			{
			    new vehicleid = GetPlayerVehicleID(i);

                if(IsPlayerInAnyVehicle(i) && !(VehicleInfo[vehicleid][vFaction] > -1 && FactionInfo[VehicleInfo[vehicleid][vFaction]][fType] == FACTION_MEDIC))
                {
                    new
                        Float:x,
                        Float:y,
                        Float:z;
                    GetPlayerPos(i, x, y, z);
                    SetPlayerPos(i, x, y, z + 0.5);
                    ClearAnimations(i);
                }
			}
			if(PlayerData[i][pTazedTime] > 0)
			{
			    PlayerData[i][pTazedTime]--;

			    if(!PlayerData[i][pTazedTime])
			    {
			        ClearAnimations(i, 1);

			        if(!PlayerData[i][pCuffed])
			        {
				        TogglePlayerControllableEx(i, 1);
					}
			    }
			}
			if(PlayerData[i][pFishTime] > 0)
			{
			    PlayerData[i][pFishTime]--;

				if(!IsPlayerAtFishingPlace(i))
				{
				    ClearAnimations(i, 1);
				    RemovePlayerAttachedObject(i, 9);
				    PlayerData[i][pFishTime] = 0;
				}
			    else if(PlayerData[i][pFishTime] <= 0 && IsPlayerAtFishingPlace(i))
			    {
	          		new rand = Random(1, 100);

					if(1 <= rand <= 20)
	    			{
	 	   				SendClientMessage(i, COLOR_GREY, "You reeled in your line and caught nothing...");
					}
					else if(21 <= rand <= 30)
					{
	    				new amount = 50 + random(100);

		    			SendClientMessageEx(i, COLOR_AQUA, "You reeled in your line and caught a used wallet with {00AA00}$%i{33CCFF} inside.", amount);
						GivePlayerCash(i, amount);
					}
					else if(98 <= rand <= 99)
					{
					    new amount = random(2000) + 1000;

					    SendClientMessageEx(i, COLOR_AQUA, "You reeled in your line and caught a rare 18th century coin valued at {00AA00}$%i{33CCFF}!", amount);
						GivePlayerCash(i, amount);
					}
					else
					{
					    new weight, level = GetJobLevel(i, JOB_FISHERMAN);

					    if(PlayerData[i][pUsedBait]) {
							weight = random(40) + (level * 10);
					    } else {
					        weight = random(15) + (level * 10);
	    		        }

	    		        SendClientMessageEx(i, COLOR_AQUA, "You reeled in your line and caught an Anchovy weighing %i g!", weight);
						PlayerData[i][pFishWeight] += weight;

						mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET fishweight = %i WHERE uid = %i", PlayerData[i][pFishWeight], PlayerData[i][pID]);
						mysql_tquery(connectionID, queryBuffer);

						IncreaseJobSkill(i, JOB_FISHERMAN);

	    		        if(PlayerData[i][pFishWeight] >= 1500)
	    		        {
	    		            SendClientMessage(i, COLOR_YELLOW, "You have too much fish. You can continue fishing once you sell your load.");
	    		        }
					}

					ClearAnimations(i, 1);
					RemovePlayerAttachedObject(i, 9);
			    }
			}
			if(PlayerData[i][pJailType] > 0)
			{
			    PlayerData[i][pJailTime]--;

			    if(PlayerData[i][pJailTime] <= 0)
			    {
			        ResetPlayerWeaponsEx(i);

			        SendClientMessage(i, COLOR_GREY2, "Your jail sentence has expired.");
			        SetPlayerPos(i, 1544.4407, -1675.5522, 13.5584);
					SetPlayerFacingAngle(i, 90.0000);
					SetPlayerInterior(i, 0);
					SetPlayerVirtualWorld(i, 0);
					SetCameraBehindPlayer(i);

					PlayerData[i][pJailType] = 0;
			        PlayerData[i][pJailTime] = 0;
				}
			}
			if(PlayerData[i][pEditType] > 0 && IsValidDynamicObject(PlayerData[i][pEditObject]) && !IsPlayerInRangeOfDynamicObject(i, PlayerData[i][pEditObject], 50.0))
			{
				if(PlayerData[i][pEditType] == EDIT_LAND_OBJECT)
				{
	   				ReloadLandObject(PlayerData[i][pEditObject], LandInfo[PlayerData[i][pObjectLand]][lLabels]);
	   				SendClientMessage(i, COLOR_GREY2, "You left the editing area. Editing mode has been disabled.");
				}
				else if(PlayerData[i][pEditType] == EDIT_LAND_OBJECT_PREVIEW)
				{
	   				SendClientMessage(i, COLOR_GREY2, "You left the editing area. Furniture previewing cancelled.");
	   				DestroyDynamicObject(PlayerData[i][pEditObject]);
				}

				CancelEdit(i);

				PlayerData[i][pEditType] = 0;
			   	PlayerData[i][pEditObject] = INVALID_OBJECT_ID;
			}
			if(PlayerData[i][pHospital] && PlayerData[i][pHospitalTime])
			{
				PlayerData[i][pHospitalTime]--;

				if(PlayerData[i][pHospitalTime] == 0)
				{
				    if(PlayerData[i][pInsurance] > 0)
				    {
				        AwardAchievement(i, ACH_Obamacare);
				    }

				    SetFreezePos(i, -2297.6084,111.1512,-5.3336);//hospitalspawn
					SetPlayerFacingAngle(i, 89.7591);
					SetPlayerInterior(i, 1);
					SetPlayerVirtualWorld(i, PlayerData[i][pHospitalType]);
					SetCameraBehindPlayer(i);
				   	ClearAnimations(i, 1);
					ApplyAnimation(i, "CARRY", "crry_prtial", 4.0, 0, 0, 0, 0, 0, 1);

					if(!(GetPlayerFaction(i) == FACTION_POLICE || GetPlayerFaction(i) == FACTION_MEDIC))
					{
						GivePlayerCash(i, -500);
						GameTextForPlayer(i, "~w~Discharged~n~~r~-$500", 5000, 1);
					}

					SetPlayerDrunkLevel(i, 0);

					if(PlayerData[i][pDelivered])
					{
					    if(GetPlayerFaction(i) == FACTION_POLICE || GetPlayerFaction(i) == FACTION_MEDIC)
					        SendClientMessage(i, COLOR_DOCTOR, "You have not been billed for your stay. You also keep all of your weapons!");
					    else
							SendClientMessage(i, COLOR_DOCTOR, "You have been billed $500 for your stay. You also keep all of your weapons!");

						PlayerData[i][pDelivered] = 0;
					}
					else
					{
                        if(GetPlayerFaction(i) == FACTION_POLICE || GetPlayerFaction(i) == FACTION_MEDIC)
                            SendClientMessage(i, COLOR_DOCTOR, "You have not been billed for your stay. Your weapons have been confiscated by staff.");
						else
							SendClientMessage(i, COLOR_DOCTOR, "You have been billed $500 for your stay. Your weapons have been confiscated by staff.");

						SendClientMessage(i, COLOR_LIGHTRED, "(( You have lost 30 minutes of your memory. ))");
					   	ClearAnimations(i, 1);
						ApplyAnimation(i, "CARRY", "crry_prtial", 4.0, 0, 0, 0, 0, 0, 1);

					}
					new hospital[32];
					switch(PlayerData[i][pHospitalType])
					{
					    case HOSPITAL_COUNTY: strcat(hospital, "All Saints General");
					    case HOSPITAL_ALLSAINTS: strcat(hospital, "County General");
					    case HOSPITAL_FMDHQ: strcat(hospital, "FMD HQ");
					    case HOSPITAL_VIPLOUNGE: strcat(hospital, "VIP Lounge");
					    case HOSPITAL_SAN_FIERRO: strcat(hospital, "Saint Fierro");
					}
					foreach(new x : Player)
					{
						if(IsLawEnforcement(x) && PlayerData[i][pWantedLevel] > 0)
						{
						    SendClientMessageEx(x, COLOR_YELLOW, "LSFMD: Wanted suspect %s[%i] was last spotted at the %s hospital!", GetRPName(i), i, hospital);
					      }
					}
					SetPlayerHealth(i, PlayerData[i][pSpawnHealth]);
					SetScriptArmour(i, PlayerData[i][pSpawnArmor]);
				   	ClearAnimations(i, 1);
					ApplyAnimation(i, "CARRY", "crry_prtial", 4.0, 0, 0, 0, 0, 0, 1);

					PlayerData[i][pHospital] = 0;
		            PlayerData[i][pHospitalTime] = 0;
		        }
		        else
		        {
		            GameTextForPlayer(i, "~w~Recovering...", 1500, 3);
		            //SetPlayerDrunkLevel(i, 50000);
				}
			}
			
			
			if(PlayerData[i][pTaxiPassenger] != INVALID_PLAYER_ID)
			{
			    if((GetVehicleModel(GetPlayerVehicleID(i)) != 420 && GetVehicleModel(GetPlayerVehicleID(i)) != 438) || !IsPlayerInVehicle(PlayerData[i][pTaxiPassenger], GetPlayerVehicleID(i)) || PlayerData[i][pTaxiFare] == 0 || PlayerData[PlayerData[i][pTaxiPassenger]][pCash] < PlayerData[i][pTaxiBill])
			    {
			        CancelTaxiRide(i);
			    }
			    else
			    {
			        PlayerData[i][pTaxiTime]++;

			        if(PlayerData[i][pTaxiTime] >= 15)
			        {
			            PlayerData[i][pTaxiTime] = 0;
			            PlayerData[i][pTaxiBill] += PlayerData[i][pTaxiFare];
					}

					format(string, sizeof(string), "~n~~n~~n~~n~~n~~n~~n~~g~Taxi Meter:~w~ $%i", PlayerData[i][pTaxiBill]);
					GameTextForPlayer(i, string, 3000, 3);
			    }
			}
			if(PlayerData[i][pMuted] > 0)
			{
			    PlayerData[i][pMuted]--;

			    if(PlayerData[i][pMuted] <= 0)
			    {
			        SendClientMessage(i, COLOR_GREY, "You are no longer muted.");
				}
			}
			if(PlayerData[i][pSpamTime] > 0)
			{
			    PlayerData[i][pSpamTime]--;
			}
			if(PlayerData[i][pVehicleCount] > 0)
			{
			    PlayerData[i][pVehicleCount]--;
			}
			if(PlayerData[i][pMechanicCall] > 0)
			{
			    PlayerData[i][pMechanicCall]--;
			}
			if(PlayerData[i][pTaxiCall] > 0)
			{
			    PlayerData[i][pTaxiCall]--;
			}
			if(PlayerData[i][pEmergencyCall] > 0)
			{
			    PlayerData[i][pEmergencyCall]--;
			}
			if(PlayerData[i][pDetectiveCooldown] > 0)
			{
       			PlayerData[i][pDetectiveCooldown]--;
			}
            if(PlayerData[i][pThiefCooldown] > 0)
			{
       			PlayerData[i][pThiefCooldown]--;
			}
			if(PlayerData[i][pCocaineCooldown] > 0)
			{
       			PlayerData[i][pCocaineCooldown]--;
			}
			if(PlayerData[i][pRapidFire] > 0)
			{
        		PlayerData[i][pRapidFire]--;
			}
			if(PlayerData[i][pGodmode] > 0)
			{
        		PlayerData[i][pGodmode]--;
			}
			if(PlayerData[i][pPreviewHouse] >= 0)
			{
			    PlayerData[i][pPreviewTime]--;

			    if(PlayerData[i][pPreviewTime] <= 0 && GetPlayerInterior(i) == houseInteriors[PlayerData[i][pPreviewType]][intID])
			    {
                    SetPlayerPos(i, HouseInfo[PlayerData[i][pPreviewHouse]][hIntX], HouseInfo[PlayerData[i][pPreviewHouse]][hIntY], HouseInfo[PlayerData[i][pPreviewHouse]][hIntZ]);
					SetPlayerFacingAngle(i, HouseInfo[PlayerData[i][pPreviewHouse]][hIntA]);
					SetPlayerInterior(i, HouseInfo[PlayerData[i][pPreviewHouse]][hInterior]);
					SetPlayerVirtualWorld(i, HouseInfo[PlayerData[i][pPreviewHouse]][hWorld]);
					SetCameraBehindPlayer(i);

					PlayerData[i][pPreviewHouse] = -1;
				    PlayerData[i][pPreviewType] = 0;
				    PlayerData[i][pPreviewTime] = 0;

			        SendClientMessage(i, COLOR_WHITE, "You are no longer previewing the interior as the time period ran out.");
			    }
			}

			if(PlayerData[i][pCocaineTrunk] != INVALID_VEHICLE_ID)
			{
			    if(!IsPlayerInRangeOfBoot(i, PlayerData[i][pCocaineTrunk]))
			    {
			        SendClientMessage(i, COLOR_GREY, "You are no longer cracking the trunk as you left your spot.");
			        PlayerData[i][pCocaineTrunk] = INVALID_VEHICLE_ID;
			    }
			    else if(VehicleInfo[PlayerData[i][pCocaineTrunk]][vLocked])
			    {
			        SendClientMessage(i, COLOR_GREY, "You are no longer cracking the trunk as the vehicle is now locked.");
			        PlayerData[i][pCocaineTrunk] = INVALID_VEHICLE_ID;
			    }
			    else
			    {
			    	PlayerData[i][pCocaineTime]--;

					if(PlayerData[i][pCocaineTime] <= 0)
					{
					    new count;

					    for(new x = 0; x < 5; x ++)
					    {
					        if(VehicleInfo[PlayerData[i][pCocaineTrunk]][vWeapons][x] != 0)
					        {
					            count++;
					        }
					    }

						if(count == 0 && VehicleInfo[PlayerData[i][pCocaineTrunk]][vCocaine] == 0 && VehicleInfo[PlayerData[i][pCocaineTrunk]][vHeroin] == 0 && VehicleInfo[PlayerData[i][pCocaineTrunk]][vWeed] == 0 && VehicleInfo[PlayerData[i][pCocaineTrunk]][vPainkillers] == 0 && VehicleInfo[PlayerData[i][pCocaineTrunk]][vMaterials] == 0 && VehicleInfo[PlayerData[i][pCocaineTrunk]][vCash] == 0)
						{
						    SendProximityMessage(i, 20.0, COLOR_PURPLE, "* %s cracks open the trunk of the %s and finds nothing.", GetRPName(i), GetVehicleName(PlayerData[i][pCocaineTrunk]));
						}
						else
						{
                            PlayerData[i][pCocaineFrom] = PlayerData[i][pCocaineTrunk];
                            ShowDialogToPlayer(i, DIALOG_CRACKTRUNK);
						}
						PlayerData[i][pCocaineTrunk] = INVALID_VEHICLE_ID;
					}
					else
					{
					    format(string, sizeof(string), "~w~Cracking trunk... ~r~%i", PlayerData[i][pCocaineTime]);
					    GameTextForPlayer(i, string, 2000, 3);
					}
				}
			}
			if(PlayerData[i][pLootTime] > 0)
			{
			    PlayerData[i][pLootTime]--;

			    if(IsPlayerInBankRobbery(i) && PlayerData[i][pLootTime] <= 0)
			    {
			        new amount = random(500) + 500;

			        ClearAnimations(i, 1);

			        PlayerData[i][pRobCash] += amount;
			        PlayerData[i][pCP] = CHECKPOINT_ROBBERY;
			        PlayerData[i][pLastLoad] = gettime();

					format(string, sizeof(string), "~g~+$%i", amount);
					GameTextForPlayer(i, string, 5000, 1);

			        SendClientMessageEx(i, COLOR_AQUA, "You have looted {00AA00}$%i{33CCFF} and now have $%i. You can keep looting or deliver the cash to the {FF6347}marker{33CCFF}.", amount, PlayerData[i][pRobCash]);
					SetPlayerCheckpoint(i, 1429.9939, 1066.9581, 9.8938, 3.0);
			    }
			    else if((PlayerData[i][pRobbingBiz] >= 0 && PlayerData[i][pRobbingBiz] == GetInsideBusiness(i)) && PlayerData[i][pLootTime] <= 0)
			    {
			        new amount = random(300) + 100;

			        ClearAnimations(i, 1);

			        PlayerData[i][pRobCash] += amount;
			        PlayerData[i][pCP] = CHECKPOINT_ROBBERY;
			        PlayerData[i][pLastLoad] = gettime();

					format(string, sizeof(string), "~g~+$%i", amount);
					GameTextForPlayer(i, string, 5000, 1);

			        SendClientMessageEx(i, COLOR_AQUA, "You have looted {00AA00}$%i{33CCFF} and now have $%i. You can keep looting or deliver the cash to the {FF6347}marker{33CCFF} (/stoprobbery).", amount, PlayerData[i][pRobCash]);
					SetPlayerCheckpoint(i, 1429.9939, 1066.9581, 9.8938, 3.0);
					if(PlayerData[i][pRobCash] < 2000)
					{
					    ApplyAnimation(i, "BOMBER", "BOM_Plant_Loop", 4.1, 1, 0, 0, 0, 0, 1);
						GameTextForPlayer(i, "~w~Looting business vault...", 5000, 3);
					    PlayerData[i][pLootTime] = 5;
					}
					else
					{
					    callcmd::stoprobbery(i, "/1");
					}
			    }
			}
			
			if((PlayerData[i][pToggleMusic]) || (PlayerData[i][pBoomboxListen] != INVALID_PLAYER_ID && GetNearbyBoombox(i) != PlayerData[i][pBoomboxListen]))
			{
				PlayerData[i][pBoomboxListen] = INVALID_PLAYER_ID;

				if(PlayerData[i][pStreamType] == MUSIC_BOOMBOX)
				{
				    StopAudioStreamForPlayer(i);
				    PlayerData[i][pStreamType] = MUSIC_NONE;
				}
			}
			if((!PlayerData[i][pToggleMusic]) && ((boomboxid = GetNearbyBoombox(i)) != INVALID_PLAYER_ID && PlayerData[i][pBoomboxListen] != boomboxid))
			{
			    PlayerData[i][pBoomboxListen] = boomboxid;

			    if(PlayerData[i][pStreamType] == MUSIC_NONE)
			    {
			        PlayAudioStreamForPlayer(i, PlayerData[boomboxid][pBoomboxURL]);
			        PlayerData[i][pStreamType] = MUSIC_BOOMBOX;
			    }
			}
            if(PlayerData[i][pPickPlant] != INVALID_PLAYER_ID)
            {
                PlayerData[i][pPickTime]--;

                if(PlayerData[i][pPickTime] <= 0)
                {
                    new planterid = PlayerData[i][pPickPlant];

                    if(!IsPlayerConnected(planterid) || !PlayerData[planterid][pLogged] || !PlayerData[planterid][pWeedPlanted])
                    {
                        SendClientMessage(i, COLOR_GREY, "This plant is no longer available to pick.");
					}
					else if(!IsPlayerInRangeOfPoint(i, 3.0, PlayerData[planterid][pWeedX], PlayerData[planterid][pWeedY], PlayerData[planterid][pWeedZ]))
					{
					    SendClientMessage(i, COLOR_GREY, "Picking failed. You left the area of the plant.");
					}
					else if(GetPlayerSpecialAction(i) != SPECIAL_ACTION_DUCK)
					{
					    SendClientMessage(i, COLOR_GREY, "Picking failed. You must stay crouched when picking a plant.");
					}
					else
					{
					    PlayerData[i][pWeed] += PlayerData[planterid][pWeedGrams];

						mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET weed = %i WHERE uid = %i", PlayerData[i][pWeed], PlayerData[i][pID]);
						mysql_tquery(connectionID, queryBuffer);

						SendClientMessageEx(i, COLOR_AQUA, "You have harvested %i grams of weed from this plant.", PlayerData[planterid][pWeedGrams]);
					    DestroyWeedPlant(planterid);
					}

					PlayerData[i][pPickPlant] = INVALID_PLAYER_ID;
					PlayerData[i][pPickTime] = 0;
				}
			}
			if(PlayerData[i][pCookHeroin] > 0)
			{
                PlayerData[i][pCookTime]--;

                if(PlayerData[i][pCookTime] <= 0)
                {
                    if(!IsPlayerInRangeOfPoint(i, 5.0, 1.2179, 2.8095, 999.4284))
                    {
                        SendClientMessage(i, COLOR_GREY, "Cooking failed. You have left the cooking spot.");
                        ResetCooking(i);
                    }
                    else if(PlayerData[i][pEphedrine] <= 0)
                    {
                        SendClientMessage(i, COLOR_GREY, "Cooking failed. You have ran out of chemicals.");
                        ResetCooking(i);
					}
					else if(PlayerData[i][pHeroin] + 2 > GetPlayerCapacity(i, CAPACITY_HEROIN))
                    {
                        SendClientMessage(i, COLOR_GREY, "Cooking failed. You have ran out of inventory space for Heroin.");
                        ResetCooking(i);
					}
					else
					{
						GameTextForPlayer(i, "~g~+2~w~ grams of Heroin", 3000, 3);

						PlayerData[i][pEphedrine] -= 1;
						PlayerData[i][pHeroin] += 2;
						PlayerData[i][pCookGrams] += 2;

						if((PlayerData[i][pCookGrams] % 4) == 0)
						{
						    PlayerData[i][pMuriaticAcid]--;
						}

						mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET ephedrine = %i, heroin = %i, muriaticacid = %i WHERE uid = %i", PlayerData[i][pEphedrine], PlayerData[i][pHeroin], PlayerData[i][pMuriaticAcid], PlayerData[i][pID]);
						mysql_tquery(connectionID, queryBuffer);

						if(!PlayerData[i][pEphedrine])
						{
						    SendClientMessageEx(i, COLOR_LIGHTRED, "You ran out of chemicals therefore ending your cookoff. You made %i grams of Heroin from %i grams of chemicals.", PlayerData[i][pCookGrams], PlayerData[i][pCookGrams] / 2);
							ResetCooking(i);
					    }
					    else if(!PlayerData[i][pMuriaticAcid])
						{
						    SendClientMessageEx(i, COLOR_LIGHTRED, "You ran out of muriatic acid therefore ending your cookoff. You made %i grams of Heroin from %i grams of chems.", PlayerData[i][pCookGrams], PlayerData[i][pCookGrams] / 2);
							ResetCooking(i);
					    }
					    else if(PlayerData[i][pHeroin] >= GetPlayerCapacity(i, CAPACITY_HEROIN))
	                    {
	                        SendClientMessageEx(i, COLOR_LIGHTRED, "You ran out of inventory space for heroin therefore ending your cookoff. You made %i grams of heroin from %i grams of chems.", PlayerData[i][pCookGrams], PlayerData[i][pCookGrams] / 2);
							ResetCooking(i);
					    }
					    else
					    {
					        PlayerData[i][pCookTime] = 15;
						}
                    }
                }
			}
			if(PlayerData[i][pDrugsUsed] >= 4)
			{
			    PlayerData[i][pDrugsTime]--;

			    if(PlayerData[i][pDrugsTime] <= 0)
			    {
			        SendClientMessage(i, COLOR_GREY, "You are no longer stoned.");
			        SetPlayerWeather(i, GetDBWeatherID());

					SetPlayerTime(i, gWorldTime, 0);
			        SetPlayerDrunkLevel(i, 500);

			        PlayerData[i][pDrugsUsed] = 0;
			        PlayerData[i][pDrugsTime] = 0;
			    }
			    else
			    {
			        SetPlayerWeather(i, -66);
			        SetPlayerTime(i, 12, 0);
			        SetPlayerDrunkLevel(i, 40000);
				}
			}
			if(PlayerData[i][pPoisonTime] > 0)
			{
			    new
			        Float:health;
			    GetPlayerHealth(i, health);
			    SetPlayerHealth(i, health - 3.0 < 1.0 ? 1.0 : health - 3.0);
			    PlayerData[i][pPoisonTime]--;
			}

			if(PlayerData[i][pGang] >= 0 && !PlayerData[i][pBandana])
			{
				new id;

				if((id = GetNearbyTurf(i)) >= 0 && IsActiveTurf(id))
				{
				    new color;
				 	if(GangInfo[PlayerData[i][pGang]][gColor] == -1 || GangInfo[PlayerData[i][pGang]][gColor] == -256)
					{
						color = 0xC8C8C8FF;
					}
					else
					{
					    color = GangInfo[PlayerData[i][pGang]][gColor];
					}
					PlayerData[i][pBandana] = 1;
					SendClientMessage(i, COLOR_WHITE, "Your bandana was enabled automatically as you entered a turf in an active war.");
					new stringa[120];
					format(stringa, sizeof(stringa), "{%06x}%s", color >>> 8, GangInfo[PlayerData[i][pGang]][gName]);
			        fRepfamtext[i] = CreateDynamic3DTextLabel(stringa, COLOR_WHITE, 0.0, 0.0, -0.3, 20.0, .attachedplayer = i, .testlos = 1);
				}
			}

		}
	}

	for(new i = 0; i < MAX_ACTORS; i ++)
	{
	    if(IsValidActor(i))
	    {
	        new
	            Float:x,
	            Float:y,
	            Float:z;
	        GetActorPos(i, x, y, z);
	        SetActorPos(i, x, y, z);
	    }
	}

    format(string, sizeof(string), "Chemicals\nStock: %i\nPrice: $60/gram\n/getchems [amount]", gEphedrineStock);
    UpdateDynamic3DTextLabelText(gEphedrineStockText, COLOR_YELLOW, string);
	format(string, sizeof(string), "Marijuana seeds\nStock: %i\nPrice: $60/seed\n/getseeds [amount]", gSeedsStock);
	UpdateDynamic3DTextLabelText(gSeedsStockText, COLOR_YELLOW, string);
	format(string, sizeof(string), "Crack\nStock: %i\nPrice: $60/gram\n/getcrack [amount]", gCocaineStock);
    UpdateDynamic3DTextLabelText(gCocaineText, COLOR_YELLOW, string);
}
forward LastAlertPayCheck(playerid);
public LastAlertPayCheck(playerid)
{
	if(PayCheckCode[playerid] != 0)
	{
    	ShowPlayerFooter(playerid, "~w~Type /signcheck");
    	SendClientMessage(playerid, COLOR_WHITE, "You have one minute left before your paycheck code expires. Please type /signcheck to get your paycheck.");
        SetTimerEx("DestroyCheck", 60000, false, "i", playerid);
	}
}
forward DestroyCheck(playerid);
public DestroyCheck(playerid)
{
	if(PayCheckCode[playerid] != 0)
	{
    	PayCheckCode[playerid] = 0;
    	SendClientMessage(playerid, COLOR_WHITE, "Your paycheck code expired. Please remember to use /signcheck next time.");
	}
}

hook OnServerHeartBeat(timestamp)
{
	foreach(new i : Player)
	{
		if(PlayerData[i][pLogged] && !PlayerData[i][pKicked])
		{
            CallRemoteFunction("OnPlayerHeartBeat", "i", i);
            
            foreach(new j : Player)
            {
                if(PlayerData[j][pLogged] && !PlayerData[j][pKicked])
                {
                    CallRemoteFunction("OnTwoPlayersHeartBeat", "ii", i, j);                    
                }
            }
        }
    }
	return 1;
}

hook OnNewMinute(timestamp)
{
	RefreshTime();

	if(GetGangInviteCooldown())
	{
		for(new x = 0; x < MAX_GANGS; x++)
		{
		    if(GangInfo[x][gInvCooldown] > 0)
		    {
                GangInfo[x][gInvCooldown]--;
		    }
		}
	}
	
	foreach(new i : Player)
	{
		if(PlayerData[i][pWeedPlanted] && PlayerData[i][pWeedTime] > 0)
		{
			PlayerData[i][pWeedTime]--;

			if((PlayerData[i][pWeedTime] % 2) == 0)
			{
				PlayerData[i][pWeedGrams]++;
			}
		}
		if(PlayerData[i][pLogged] && !IsPlayerAFK(i))
		{
			//new amount = 35 * min(PlayerData[i][pLevel], 21);
			//AddToPaycheck(i, amount);

			PlayerData[i][pMinutes]++;
		}
	}

	
	for(new i = 0; i < MAX_REPORTS; i ++)
	{
		if(ReportInfo[i][rExists] && ReportInfo[i][rTime] > 0)
		{
			ReportInfo[i][rTime]--;

			if(ReportInfo[i][rTime] <= 0 && ReportInfo[i][rAccepted] == 0)
			{
				SendClientMessage(ReportInfo[i][rReporter], COLOR_GREY, "Your report has expired. You can make an admin request on our discord if you still need help.");
				ReportInfo[i][rExists] = 0;
			}
		}
	}
	return 1;
}

hook OnNewHour(timestamp, hour)
{
	SendClientMessageToAllEx(COLOR_WHITE, "%s: The time is now {AFAFAF}%02d:00{FFFFFF}.", GetServerName(), hour);
	
	autoWeather();

	new budget;
	for(new i = 0; i < MAX_FACTIONS; i ++)
	{
		if(FactionInfo[i][fType] != FACTION_NONE)
		{
			budget += FactionInfo[i][fBudget] - GetTotalFactionPay(i);
		}
	}
	AddToTaxVault(-budget);

	switch(hour)
	{
		case 0, 4, 8, 12, 16, 18:
		{
			for(new i = 0; i < MAX_GANGS; i ++)
			{
				if(GangInfo[i][gSetup] && GangInfo[i][gTurfTokens] < 10)
				{
					GangInfo[i][gTurfTokens]++;

					mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_GANGS" SET turftokens = turftokens + 1 WHERE id = %i", i);
					mysql_tquery(connectionID, queryBuffer);
				}
			}

			for(new i = 0; i < MAX_FACTIONS; i ++)
			{
				if((FactionInfo[i][fType] == FACTION_POLICE || FactionInfo[i][fType] == FACTION_FEDERAL || FactionInfo[i][fType] == FACTION_ARMY) && FactionInfo[i][fTurfTokens] < 3)
				{
					FactionInfo[i][fTurfTokens]++;

					mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_FACTIONS" SET turftokens = turftokens + 1 WHERE id = %i", i);
					mysql_tquery(connectionID, queryBuffer);
				}
			}
		}
	}

	foreach(new i : Player)
	{
		if(PlayerData[i][pLogged] && !PlayerData[i][pKicked])
		{
			if(GetAFKTime(i) > 900)
			{
				SendClientMessage(i, COLOR_LIGHTRED, "You didn't receive a paycheck this hour as you were AFK for more than 15 minutes.");
			}
			else if(PlayerData[i][pMinutes] < 25)
			{
				SendClientMessage(i, COLOR_LIGHTRED, "You are ineligible for a paycheck as you played less than 25 minutes this hour.");
			}
			else
			{
				new code = Random(100000, 999999);
				PayCheckCode[i] = code;

				SendClientMessage(i, COLOR_GREY,"_______________________________________________________________");
				SendClientMessage(i, COLOR_WHITE,"Information for tax on paychecks: {33CCFF}/taxhelp");
				SendClientMessage(i, COLOR_GREY,"_______________________________________________________________");
				SendClientMessage(i, COLOR_WHITE,"Sign the check to receive your paycheck.");
				SendClientMessage(i, COLOR_AQUA, "Type /signcheck");
				SendClientMessage(i, COLOR_WHITE,"You have 5 minutes to sign the check before it becomes invalid.");
				SendClientMessage(i, COLOR_GREY,"_______________________________________________________________");

				GameTextForPlayer(i, "~w~Type /signcheck", 2500, 1);
				SetTimerEx("LastAlertPayCheck", 240000, false, "i", i);
			}
			if(GetPlayerFaction(i) == FACTION_GOVERNMENT)
			{
				SendClientMessageEx(i, COLOR_YELLOW2, "%s were taken out of the tax vault for every faction's paycheck.", FormatCash(budget));
			}
			if(PlayerData[i][pReportMuted])
			{
				PlayerData[i][pReportMuted]--;

				if(PlayerData[i][pReportMuted] <= 0)
				{
					PlayerData[i][pReportMuted] = 0;
					PlayerData[i][pReportWarns] = 0;

					SendClientMessage(i, COLOR_YELLOW, "Your report mute has automatically been lifted.");
				}
			}
		}
	}

	if(RobberyInfo[rTime] > 0)
	{
		RobberyInfo[rTime]--;
	}

	SetWorldTime(hour);

	gWorldTime = hour;

	gCharityHealth = 0;
	gCharityArmor = 0;
	return 1;
}


forward InjuredTimer();
public InjuredTimer()
{
	foreach(new i : Player)
	{
	    if(PlayerData[i][pLogged] && PlayerData[i][pInjured] && GetVehicleModel(GetPlayerVehicleID(i)) != 416)
		{
  			new
     			Float:health;
	    	GetPlayerHealth(i, health);
		    SetPlayerHealth(i, health - 1.0);
		}
	}
}

task MileageTimer[1000]()
{
	foreach(new i: Vehicle)
	{
	    if((GetVehicleDriver(i)) != INVALID_PLAYER_ID)
	    {
		  	VehicleInfo[i][vMileage] += (GetVehicleSpeed(i, SPEED_UNIT_KMPH) * 0.00009722222);
 		}
	}
}


forward RandomFire(check);
public RandomFire(check)
{
	new count, index, announced, rand = random(10);

	if(!IsFireActive())
	{
	    if(check)
	    {
			foreach(new i : Player)
			{
			    if(GetPlayerFaction(i) == FACTION_MEDIC)
		    	{
		        	count++;
	        	}
	    	}
	    }
	    else
	    {
	        count = 3;
	    }

	    if(count >= 3)
	    {
	        for(new i = 0; i < sizeof(randomFireSpawns); i ++)
	        {
	            if(randomFireSpawns[i][fireIndex] == rand)
	            {
	                if(!announced)
	                {
	                    foreach(new x : Player)
	                    {
	                        if(IsPlayerInRangeOfPoint(x, 30.0, randomFireSpawns[i][fireX], randomFireSpawns[i][fireY], randomFireSpawns[i][fireZ]))
	                        {
	                            SendClientMessage(x, COLOR_PURPLE, "* An explosion can be heard. Smoke is rising from a building nearby.");
	                        }
	                        if(GetPlayerFaction(x) == FACTION_MEDIC)
	                        {
	                            PlayerData[x][pCP] = CHECKPOINT_MISC;
	                            SetPlayerCheckpoint(x, randomFireSpawns[i][fireX], randomFireSpawns[i][fireY], randomFireSpawns[i][fireZ], 3.0);
	                            SendClientMessageEx(x, COLOR_DOCTOR, "* All units, a fire has been reported in %s. Please head to the beacon on your map. *", GetZoneName(randomFireSpawns[i][fireX], randomFireSpawns[i][fireY], randomFireSpawns[i][fireZ]));
							}
	                    }

						announced = 1;
					}

	                gFireObjects[index] = CreateDynamicObject(18691, randomFireSpawns[i][fireX], randomFireSpawns[i][fireY], randomFireSpawns[i][fireZ], 0.0, 0.0, randomFireSpawns[i][fireA], .streamdistance = 50.0);
	                gFireHealth[index++] = 50.0;
	            }
	        }

	        gFires = index;
	    }
	}
}






forward ShowRandomCamera(playerid);
public ShowRandomCamera(playerid)
{
    if(PlayerData[playerid][pLogged] == 0)
    {
		TextDrawShowForPlayer(playerid, welcomenew);
		switch(random(2))
		{
		    case 0:
		    {
	    		InterpolateCameraPos(playerid, 1534.284423, -1312.871093, 513.042114, 1561.539794, -1314.386108, 16.426090, 25000);
	    		InterpolateCameraLookAt(playerid, 1534.702758, -1312.993041, 508.061126, 1558.089111, -1313.615966, 19.961624, 10000);
			}
			case 1:
			{
				InterpolateCameraPos(playerid, 1402.380126, -1216.866333, 350.959869, 1660.696655, -1303.045410, 74.042839, 7000);
				InterpolateCameraLookAt(playerid, 1404.336425, -1219.865234, 347.469909, 1657.485961, -1304.525756, 77.578369, 7000);
			}
		}
	}
}

forward DespawnTimer(vehicleid);
public DespawnTimer(vehicleid)
{
	if(VehicleInfo[vehicleid][vOwnerID] > 0 && !IsVehicleOccupied(vehicleid) && !IsVehicleBeingPicked(vehicleid))
	{
	    DespawnVehicle(vehicleid);
	}
	else
	{
	    // ANOTHER TEN MINUTES!
	    VehicleInfo[vehicleid][vTimer] = SetTimerEx("DespawnTimer", 300000, false, "i", vehicleid);
	}
}


forward HTTP_OnMusicFetchResponse(index, response_code, data[]);
public HTTP_OnMusicFetchResponse(index, response_code, data[])
{
    if(response_code == 200)
    {
        new
            buffer[2048],
            string[288],
			count,
			start,
			pos;

		strcpy(buffer, data);

        while((pos = strfind(buffer, "<br/>")) != -1)
        {
            strdel(buffer, pos, pos + 5);

            if(++count == 8)
            {
                strmid(string, buffer, start, pos);
                SendClientMessage(index, COLOR_YELLOW, string);

				start = pos;
                count = 0;
			}
			else
			{
			    if((strlen(buffer) - pos) < 6)
			    {
			        strmid(string, buffer, start, pos);
			        SendClientMessage(index, COLOR_YELLOW, string);
			        break;
			    }

			    strins(buffer, ", ", pos);
            }
        }
    }
    else
    {
        SendClientMessageEx(index, COLOR_RED, "The music database is currently not available. (error %i)", response_code);
    }
}


public OnPlayerExitVehicle(playerid, vehicleid)
{
    if(!IsValidVehicle(vehicleid))
    {
        return 1;
    }
	if(IsJobCar(vehicleid))
		OnPlayerExitJobCar(playerid, vehicleid);
    
	if(isharvesting[playerid] == 1)
	{
	    SendClientMessage(playerid, COLOR_GREY, "You left your vehicle, you cannot complete the job.");
//	    callcmd::ccp(playerid);
        CancelActiveCheckpoint(playerid);
		isharvesting[playerid] = 0;
	}
    if(seatbelt[playerid] == 1)
	{
	    RemovePlayerAttachedObject(playerid, 7);
        ShowActionBubble(playerid, "* %s reaches for their seatbelt, and unbuckles it.", GetRPName(playerid));
		SendClientMessage(playerid, COLOR_WHITE, "You have taken off your seatbelt.");
	}
	return 1;
}

forward OnPlayerUpgradeGarage(playerid, garageid);
public OnPlayerUpgradeGarage(playerid, garageid)
{
	new count, rows = cache_get_row_count(connectionID), vehicleid;

	for(new i = 0; i < rows; i ++)
	{
	    vehicleid = GetVehicleLinkedID(cache_get_field_content_int(0, "id"));

	    if((vehicleid == INVALID_VEHICLE_ID) || (vehicleid != INVALID_VEHICLE_ID && GetVehicleVirtualWorld(vehicleid) == GarageInfo[garageid][gWorld]))
	    {
	        count++;
		}
	}

	if(count)
	{
		SendClientMessage(playerid, COLOR_GREY, "You have despawned vehicles parked in your garage. Park them outside before upgrading.");
	}
	else
	{
	    foreach(new i : Player)
		{
		    if(GetInsideGarage(i) == garageid)
		    {
				SetPlayerPos(i, garageInteriors[GarageInfo[garageid][gType] + 1][intVX], garageInteriors[GarageInfo[garageid][gType] + 1][intVY], garageInteriors[GarageInfo[garageid][gType] + 1][intVZ]);
				SetPlayerFacingAngle(i, garageInteriors[GarageInfo[garageid][gType] + 1][intVA]);
				SetPlayerInterior(i, garageInteriors[GarageInfo[garageid][gType] + 1][intID]);
				SetCameraBehindPlayer(i);
			}
		}

		GarageInfo[garageid][gType]++;
		GarageInfo[garageid][gPrice] = garageInteriors[GarageInfo[garageid][gType]][intPrice];

		GivePlayerCash(playerid, -garageInteriors[GarageInfo[garageid][gType]][intPrice]);
		SendClientMessageEx(playerid, COLOR_GREEN, "You have upgraded your garage's size to %s for %s.", garageInteriors[GarageInfo[garageid][gType]][intName], FormatCash(garageInteriors[GarageInfo[garageid][gType]][intPrice]));

		mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE garages SET type = %i, price = %i WHERE id = %i", GarageInfo[garageid][gType], GarageInfo[garageid][gPrice], GarageInfo[garageid][gID]);
		mysql_tquery(connectionID, queryBuffer);

		Log_Write("log_property", "%s (uid: %i) upgraded their garage (id: %i) to %s size for $%i.", GetPlayerNameEx(playerid), PlayerData[playerid][pID], GarageInfo[garageid][gID], garageInteriors[GarageInfo[garageid][gType]][intName], garageInteriors[GarageInfo[garageid][gType]][intPrice]);
	}
}

publish OnPlayerCheckRich(playerid)
{
	if(cache_get_row_count(connectionID))
	{
	    AwardAchievement(playerid, ACH_ImRich);
	}
}

publish OnPlayerCheckHighRoller(playerid)
{
	if(cache_get_row_count(connectionID))
	{
	    AwardAchievement(playerid, ACH_HighRoller);
	}
}

forward OnPlayerUseCarStorage(playerid);
public OnPlayerUseCarStorage(playerid)
{
	new vehicleid = GetVehicleLinkedID(cache_get_field_content_int(0, "id"));

	if(vehicleid != INVALID_VEHICLE_ID)
	{

		if(IsVehicleOccupied(vehicleid) && GetVehicleDriver(vehicleid) != playerid)
        {
            SendClientMessage(playerid, COLOR_GREY, "This vehicle is occupied.");
        }

        else if(IsVehicleBeingPicked(vehicleid))
        {
            SendClientMessage(playerid, COLOR_GREY, "This vehicle is being broken into!");
        }
        else
        {
            new
				Float:health;

			GetVehicleHealth(vehicleid, health);

            if(health < 600.0)
            {
                SendClientMessage(playerid, COLOR_GREY, "This vehicle is too damaged to be despawned.");
            }
            else
            {
		        SendClientMessageEx(playerid, COLOR_AQUA, "Your {FF6347}%s{33CCFF} which is located in %s has been despawned.", GetVehicleName(vehicleid), GetVehicleZoneName(vehicleid));
				DespawnVehicle(vehicleid);
			}
		}
	}
	else
	{
	    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "SELECT * FROM vehicles WHERE id = %i AND ownerid = %i", cache_get_field_content_int(0, "id"), PlayerData[playerid][pID]);
		mysql_tquery(connectionID, queryBuffer, "OnPlayerSpawnVehicle", "ii", playerid, false);
	}
}

forward OnPlayerAttemptResetUpgrades(playerid);
public OnPlayerAttemptResetUpgrades(playerid)
{
	if(PlayerData[playerid][pDonator] == 0 && cache_get_row_int(0, 0) > 3)
	{
 		SendClientMessageEx(playerid, COLOR_GREY, "You own %i/%i vehicle at the moment. Please sell one of them before using this command.", cache_get_row_int(0, 0), GetPlayerAssetLimit(playerid, LIMIT_HOUSES));
	}
	else
	{
	    PlayerData[playerid][pUpgradePoints] = (PlayerData[playerid][pLevel] - 1) * 2;
	    PlayerData[playerid][pInventoryUpgrade] = 0;
	    PlayerData[playerid][pAddictUpgrade] = 0;
	    PlayerData[playerid][pTraderUpgrade] = 0;
	    PlayerData[playerid][pAssetUpgrade] = 0;
	    PlayerData[playerid][pLaborUpgrade] = 0;
	    PlayerData[playerid][pSpawnHealth] = 50.0;
	    PlayerData[playerid][pSpawnArmor] = 0.0;

	    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET upgradepoints = %i, inventoryupgrade = 0, addictupgrade = 0, traderupgrade = 0, assetupgrade = 0, laborupgrade = 0, spawnhealth = '50.0', spawnarmor = '0.0' WHERE uid = %i", PlayerData[playerid][pUpgradePoints], PlayerData[playerid][pID]);
	    mysql_tquery(connectionID, queryBuffer);

	    SendClientMessageEx(playerid, COLOR_GREEN, "You have reset your upgrade points. You now have %i upgrade points available.", PlayerData[playerid][pUpgradePoints]);
	}
}

forward OnPlayerAttemptInviteGang(playerid, targetid);
public OnPlayerAttemptInviteGang(playerid, targetid)
{
    if(cache_get_row_int(0, 0) >= GetGangMemberLimit(PlayerData[playerid][pGang]))
    {
        SendClientMessageEx(playerid, COLOR_GREY, "Your gang can't have more than %i members at its level.", GetGangMemberLimit(PlayerData[playerid][pGang]));
    }
    else
    {
    	PlayerData[targetid][pGangOffer] = playerid;
		PlayerData[targetid][pGangOffered] = PlayerData[playerid][pGang];

		SendClientMessageEx(targetid, COLOR_AQUA, "%s has invited you to join {00AA00}%s{33CCFF} (/accept gang).", GetRPName(playerid), GangInfo[PlayerData[playerid][pGang]][gName]);
		SendClientMessageEx(playerid, COLOR_AQUA, "You have invited %s to join your gang.", GetRPName(targetid));
	}
}

forward OnPlayerAttemptInviteFaction(playerid, targetid);

public OnPlayerAttemptInviteFaction(playerid, targetid)
{
    if (cache_get_row_int(0, 0) >= GetFactionMemberLimit(PlayerData[playerid][pFaction]))
    {
        SendClientMessageEx(playerid, COLOR_GREY, "Your faction can't have more than %i members at its level.", GetFactionMemberLimit(PlayerData[playerid][pFaction]));
    }
    else
    {
        PlayerData[targetid][pFactionOffer] = playerid;
        PlayerData[targetid][pFactionOffered] = PlayerData[playerid][pFaction];

        SendClientMessageEx(targetid, COLOR_AQUA, "%s has invited you to join {00AA00}%s{33CCFF} (/accept faction).", GetRPName(playerid), FactionInfo[PlayerData[playerid][pFaction]][fName]);
        SendClientMessageEx(playerid, COLOR_AQUA, "You have invited %s to join your faction.", GetRPName(targetid));
    }
}

forward OnPlayerAttemptBuyVehicleEx(playerid, offeredby, vehicleid, price);
public OnPlayerAttemptBuyVehicleEx(playerid, offeredby, vehicleid, price)
{
	new count = cache_get_row_int(0, 0);

	if(count >= GetPlayerAssetLimit(playerid, LIMIT_VEHICLES))
	{
	    SendClientMessageEx(playerid, COLOR_GREY, "You currently own %i/%i vehicles. You can't own anymore unless you upgrade your asset perk.", count, GetPlayerAssetLimit(playerid, LIMIT_VEHICLES));
	}
	else
	{
   	 	GetPlayerName(playerid, VehicleInfo[vehicleid][vOwner], MAX_PLAYER_NAME);
	    VehicleInfo[vehicleid][vOwnerID] = PlayerData[playerid][pID];

	    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE vehicles SET ownerid = %i, owner = '%s' WHERE id = %i", VehicleInfo[vehicleid][vOwnerID], VehicleInfo[vehicleid][vOwner], VehicleInfo[vehicleid][vID]);
	    mysql_tquery(connectionID, queryBuffer);

	    if(VehicleInfo[vehicleid][vForSale])
		{
			VehicleInfo[vehicleid][vForSale] = false;
			VehicleInfo[vehicleid][vForSalePrice] = 0;
			DestroyDynamic3DTextLabel(VehicleInfo[vehicleid][vForSaleLabel]);
			VehicleInfo[vehicleid][vForSaleLabel] = Text3D:INVALID_3DTEXT_ID;

            mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE vehicles SET forsale = 0, forsaleprice = 0 WHERE id = %i", VehicleInfo[vehicleid][vID]);
	   		mysql_tquery(connectionID, queryBuffer);
		}

	    GivePlayerCash(offeredby, price);
	    GivePlayerCash(playerid, -price);

	    SendClientMessageEx(playerid, COLOR_AQUA, "* You have accepted %s's vehicle offer and paid %s for their %s.", GetRPName(offeredby), FormatCash(price), GetVehicleName(vehicleid));
	    SendClientMessageEx(offeredby, COLOR_AQUA, "* %s accepted your vehicle offer and paid %s for your %s.", GetRPName(playerid), FormatCash(price), GetVehicleName(vehicleid));
        Log_Write("log_property", "%s (uid: %i) (IP: %s) sold their %s (id: %i) for $%i to %s (uid: %i) (IP: %s)", GetPlayerNameEx(offeredby), PlayerData[offeredby][pID], GetPlayerIP(offeredby), GetVehicleName(vehicleid), VehicleInfo[vehicleid][vID], price, GetPlayerNameEx(playerid), PlayerData[playerid][pID], GetPlayerIP(playerid));
	}
}


forward OnHitmanPassport(playerid, name[], level, skinid);
public OnHitmanPassport(playerid, name[], level, skinid)
{
    if(cache_get_row_count(connectionID))
	{
	    SendClientMessage(playerid, COLOR_GREY, "That name is already taken, please choose another.");
	}
	else
	{
	    strcpy(PlayerData[playerid][pNameChange], name, MAX_PLAYER_NAME);

		PlayerData[playerid][pFreeNamechange] = 2;
		PlayerData[playerid][pChosenLevel] = level;
	    PlayerData[playerid][pChosenSkin] = skinid;

		SendClientMessageEx(playerid, COLOR_AQUA, "You have requested a namechange to {00AA00}%s{33CCFF} for free, please wait for admin approval.", name);
		SendClientMessageEx(playerid, COLOR_AQUA, "Once the namechange has been approved, you will receive your chosen name, level and skin.");

		SendAdminMessage(COLOR_YELLOW, "AdmWarning: %s[%i] is requesting a namechange to %s. (/acceptname %i or /denyname %i)", GetRPName(playerid), playerid, name, playerid, playerid);
	}
}

forward OnPlayerAttemptNameChange(playerid, name[]);
public OnPlayerAttemptNameChange(playerid, name[])
{
	if(cache_get_row_count(connectionID))
	{
	    SendClientMessage(playerid, COLOR_GREY, "That name is already taken, please choose another.");

	    if(PlayerData[playerid][pFreeNamechange])
	    {
	        Dialog_Show(playerid, DIALOG_FREENAMECHANGE, DIALOG_STYLE_INPUT, "Non-RP Name", "An administrator has came to the conclusion that your name is non-RP.\nTherefore you have been given this free namechange in order to correct it.\n\nEnter a name in the Firstname_Lastname format in the box below:", "Submit", "Cancel");
		}
	}
	else
	{
	    strcpy(PlayerData[playerid][pNameChange], name, MAX_PLAYER_NAME);

		if(PlayerData[playerid][pFreeNamechange]) {
			SendClientMessageEx(playerid, COLOR_AQUA, "You have requested a namechange to {00AA00}%s{33CCFF} for free, please wait for admin approval.", name);
		} else {
		    SendClientMessageEx(playerid, COLOR_AQUA, "You have requested a namechange to {00AA00}%s{33CCFF} for %s, please wait for admin approval.", name, FormatCash(PlayerData[playerid][pLevel] * 7500));
		}

		SendAdminMessage(COLOR_YELLOW, "AdmWarning: %s[%i] is requesting a namechange to %s. (/acceptname %i or /denyname %i)", GetRPName(playerid), playerid, name, playerid, playerid);
	}
}

forward OnPlayerRamLandDoor(playerid, objectid, id);
public OnPlayerRamLandDoor(playerid, objectid, id)
{
	if(cache_get_field_content_int(0, "door_opened"))
	{
		SendClientMessage(playerid, COLOR_GREY, "The door is already opened.");
	}
	else
	{
	    new
	        Float:rx,
			Float:ry,
			Float:rz;

		ShowActionBubble(playerid, "* %s rams the door down.", GetRPName(playerid));

        GetDynamicObjectRot(objectid, rx, ry, rz);
        rz -= 90.0;
		SetDynamicObjectRot(objectid, rx, ry, rz);

		mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE landobjects SET rot_z = '%f', door_locked = 0, door_opened = 1 WHERE id = %i", rz, id);
		mysql_tquery(connectionID, queryBuffer);
	}
}

forward OnPlayerLockLandDoor(playerid, id);
public OnPlayerLockLandDoor(playerid, id)
{
	new status = !cache_get_field_content_int(0, "door_locked");

	if(status) {
	    ShowActionBubble(playerid, "* %s locks the door.", GetRPName(playerid));
	} else {
	    ShowActionBubble(playerid, "* %s unlocks the door.", GetRPName(playerid));
	}

	mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE landobjects SET door_locked = %i WHERE id = %i", status, id);
	mysql_tquery(connectionID, queryBuffer);
}

forward OnPlayerUseLandGate(playerid, objectid, id);
public OnPlayerUseLandGate(playerid, objectid, id)
{
	if(!Streamer_GetExtraInt(objectid, E_OBJECT_OPENED))
	{
	    new
         	Float:x = cache_get_field_content_float(0, "move_x"),
 			Float:y = cache_get_field_content_float(0, "move_y"),
 			Float:z = cache_get_field_content_float(0, "move_z");

	    if(x == 0.0 && y == 0.0 && z == 0.0)
	    {
	        SendClientMessage(playerid, COLOR_GREY, "This gate has no destination set.");
	    }
	    else
	    {
			MoveDynamicObject(objectid, x, y, z, 3.0, cache_get_field_content_float(0, "move_rx"), cache_get_field_content_float(0, "move_ry"), cache_get_field_content_float(0, "move_rz"));
			ShowActionBubble(playerid, "* %s uses their remote to open the gate.", GetRPName(playerid));
			Streamer_SetExtraInt(objectid, E_OBJECT_OPENED, 1);
		}
	}
	else
	{
		MoveDynamicObject(objectid, cache_get_field_content_float(0, "pos_x"), cache_get_field_content_float(0, "pos_y"), cache_get_field_content_float(0, "pos_z"), 3.0, cache_get_field_content_float(0, "rot_x"), cache_get_field_content_float(0, "rot_y"), cache_get_field_content_float(0, "rot_z"));
		ShowActionBubble(playerid, "* %s uses their remote to close the gate.", GetRPName(playerid));
		Streamer_SetExtraInt(objectid, E_OBJECT_OPENED, 0);
	}
}

forward OnPlayerUseLandDoor(playerid, objectid, id);
public OnPlayerUseLandDoor(playerid, objectid, id)
{
    if(cache_get_row_int(0, 1))
	{
	    SendClientMessage(playerid, COLOR_GREY, "This door is locked.");
	}
	else
	{
		new
			status = !cache_get_row_int(0, 0),
			Float:rx,
			Float:ry,
			Float:rz;

		GetDynamicObjectRot(objectid, rx, ry, rz);

		if(status) {
		    rz -= 90.0;
		} else {
			rz += 90.0;
		}

		SetDynamicObjectRot(objectid, rx, ry, rz);

		mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE landobjects SET rot_z = '%f', door_opened = %i WHERE id = %i", rz, status, id);
		mysql_tquery(connectionID, queryBuffer);

		if(status)
		    ShowActionBubble(playerid, "* %s opens the door.", GetRPName(playerid));
		else
		    ShowActionBubble(playerid, "* %s closes the door.", GetRPName(playerid));
	}
}

forward OnPlayerAddToPhonebook(playerid, number, name[]);
public OnPlayerAddToPhonebook(playerid, number, name[])
{
	if(cache_get_row_count(connectionID))
	{
	    SendClientMessage(playerid, COLOR_GREY, "That number is already in the phonebook.");
	}
	else
	{
		mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "INSERT INTO phonebook VALUES('%e', %i)", name, number);
		mysql_tquery(connectionID, queryBuffer);

	    SendClientMessageEx(playerid, COLOR_GREEN, "You have added %s with number %i to the phonebook directory.", name, number);
	    Log_Write("log_faction", "%s (uid: %i) added %s with number %i to the phonebook.", GetRPName(playerid), PlayerData[playerid][pID], name, number);
	}

	return 1;
}

forward OnPlayerRemoveFromPhonebook(playerid, number);
public OnPlayerRemoveFromPhonebook(playerid, number)
{
	if(!cache_get_row_count(connectionID))
	{
	    SendClientMessage(playerid, COLOR_GREY, "That number is not in the phonebook.");
	}
	else
	{
	    new name[MAX_PLAYER_NAME];

	    cache_get_row(0, 0, name);

		mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "DELETE FROM phonebook WHERE number = %i", number);
		mysql_tquery(connectionID, queryBuffer);

	    SendClientMessageEx(playerid, COLOR_GREEN, "You have removed %s with number %i from the phonebook directory.", name, number);
	    Log_Write("log_faction", "%s (uid: %i) removed %s with number %i from the phonebook.", GetRPName(playerid), PlayerData[playerid][pID], name, number);
	}

	return 1;
}

forward OnPlayerListInjuries(playerid, targetid);
public OnPlayerListInjuries(playerid, targetid)
{
	new rows = cache_get_row_count(connectionID);

    if(!rows)
	{
	    SendClientMessage(playerid, COLOR_GREY, "That player doesn't have any injuries.");
	}
	else
	{
	    SendClientMessageEx(playerid, COLOR_NAVYBLUE, "______ %s's Injuries ______", GetRPName(targetid));

	    for(new i = 0; i < rows; i ++)
	    {
			SendClientMessageEx(playerid, COLOR_YELLOW, "[%i seconds ago] %s was shot with a %s", gettime() - cache_get_row_int(i, 1), GetRPName(targetid), GetWeaponNameEx(cache_get_row_int(i, 0)));
		}
	}
}
forward OnPlayerOfflineKickGang(playerid, username[]);
public OnPlayerOfflineKickGang(playerid, username[])
{
    if(!cache_get_row_count(connectionID))
	{
	    SendClientMessage(playerid, COLOR_GREY, "The player specified doesn't exist.");
	}
	else if(cache_get_row_int(0, 1) != PlayerData[playerid][pGang])
	{
	    SendClientMessage(playerid, COLOR_GREY, "That player is not apart of your gang.");
	}
	else if(PlayerData[playerid][pGang] >= 0 && cache_get_row_int(0, 0) == GangInfo[PlayerData[playerid][pGang]][gLeaderUID])
	{
	    SendClientMessage(playerid, COLOR_GREY, "You cannot kick gang leader.");
	}
	else if(cache_get_row_int(0, 2) > PlayerData[playerid][pGangRank])
	{
	    SendClientMessage(playerid, COLOR_GREY, "That player has a higher rank than you.");
	}
	else
	{
	    new uid = cache_get_row_int(0, 0), gangid = cache_get_row_int(0, 1), rankid = cache_get_row_int(0, 2);

		Log_Write("log_gang", "%s (uid: %i)  offlinekicked %s (uid: %i) from %s (id: %i) as rank %s (%i).", GetPlayerNameEx(playerid), PlayerData[playerid][pID], username, uid, GangInfo[gangid][gName], gangid, GangRanks[gangid][rankid], rankid);
        //("log_gang", PlayerData[playerid][pGang], "%s (uid: %i)  offlinekicked %s (uid: %i) from %s (id: %i) as rank %s (%i).", GetPlayerNameEx(playerid), PlayerData[playerid][pID], username, uid, GangInfo[gangid][gName], gangid, GangRanks[gangid][rankid], rankid);
		mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET gang = -1, gangrank = 0 WHERE uid = %i", uid);
		mysql_tquery(connectionID, queryBuffer);

		SendClientMessageEx(playerid, COLOR_AQUA, "You have offline kicked %s from your gang.", username);
	}
}


forward OnPlayerOfflineRankGang(playerid, username[], newrank);
public OnPlayerOfflineRankGang(playerid, username[], newrank)
{
    if(!cache_get_row_count(connectionID))
	{
	    SendClientMessage(playerid, COLOR_GREY, "The player specified doesn't exist.");
	}
	else if(cache_get_row_int(0, 1) != PlayerData[playerid][pGang])
	{
	    SendClientMessage(playerid, COLOR_GREY, "That player is not apart of your gang.");
	}
	else if(cache_get_row_int(0, 2) > PlayerData[playerid][pGangRank])
	{
	    SendClientMessage(playerid, COLOR_GREY, "That player has a higher rank than you.");
	}
	else
	{
	    new uid = cache_get_row_int(0, 0), gangid = cache_get_row_int(0, 1), rankid = cache_get_row_int(0, 2);

        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET gangrank = %i WHERE uid = %i", newrank, uid);
		mysql_tquery(connectionID, queryBuffer);
        
		Log_Write("log_gang", "%s (uid: %i) has offline set %s's (uid: %i) rank in %s (id: %i) to %s (%i).", GetPlayerNameEx(playerid), PlayerData[playerid][pID], username, uid, GangInfo[gangid][gName], gangid, GangRanks[gangid][rankid], rankid);
		SendClientMessageEx(playerid, COLOR_AQUA, "You have offline set %s's rank to {00AA00}%s{33CCFF} (%i).", username, GangRanks[gangid][newrank], newrank);

	}
}

forward OnPlayerBuyPhoneNumber(playerid, number);
public OnPlayerBuyPhoneNumber(playerid, number)
{
	if(cache_get_row_count(connectionID))
	{
	    SendClientMessage(playerid, COLOR_GREY, "The specified phone number is already taken.");
	}
	else
	{
	    PlayerData[playerid][pPhone] = number;

	    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET phone = %i WHERE uid = %i", number, PlayerData[playerid][pID]);
	    mysql_tquery(connectionID, queryBuffer);

	    GivePlayerCash(playerid, -10000);
	    GameTextForPlayer(playerid, "~r~-$10,000", 5000, 1);

	    SendClientMessageEx(playerid, COLOR_AQUA, "You paid $10,000 to change your phone number to %i.", number);
	    Log_Write("log_vip", "%s VIP %s (uid: %i) has purchased phone number: %i for $10000.", GetVIPRank(PlayerData[playerid][pDonator]), GetPlayerNameEx(playerid), PlayerData[playerid][pID], number);
	}
}

forward OnPlayerSpawnVehicle(playerid, parked);
public OnPlayerSpawnVehicle(playerid, parked)
{
	if(!cache_get_row_count(connectionID))
	{
	    SendClientMessage(playerid, COLOR_GREY, "The slot specified contains no valid vehicle which you can spawn.");
	}
	else
	{

	    if(GetVehicleLinkedID(cache_get_field_content_int(0, "id")) != INVALID_VEHICLE_ID)
     	{
      		return SendClientMessage(playerid, COLOR_GREY, "This vehicle is spawned already. /findcar to track it.");
	    }
		if(cache_get_field_content_int(0, "carImpounded"))
		{
			return SendClientMessage(playerid, COLOR_GREY, "This vehicle is impounded. You must pay the tickets in DMV.");
		}

	    if(GetSpawnedVehicles(playerid) >= MAX_SPAWNED_VEHICLES && PlayerData[playerid][pDonator] < 3)//vipveh
	    {
	        return SendClientMessageEx(playerid, COLOR_GREY, "You can't have more than %i vehicles spawned at a time.", MAX_SPAWNED_VEHICLES);
	    }
	    new
			modelid = cache_get_field_content_int(0, "modelid"),
			Float:x = cache_get_field_content_float(0, "pos_x"),
			Float:y = cache_get_field_content_float(0, "pos_y"),
			Float:z = cache_get_field_content_float(0, "pos_z"),
			Float:a = cache_get_field_content_float(0, "pos_a"),
			color1 = cache_get_field_content_int(0, "color1"),
			color2 = cache_get_field_content_int(0, "color2"),
			vehicleid;


		vehicleid = CreateVehicle(modelid, x, y, z, a, color1, color2, -1);

		if(vehicleid != INVALID_VEHICLE_ID)
		{
		    ResetVehicle(vehicleid);

		    cache_get_field_content(0, "owner", VehicleInfo[vehicleid][vOwner], connectionID, MAX_PLAYER_NAME);
		    cache_get_field_content(0, "plate", VehicleInfo[vehicleid][vPlate], connectionID, 32);
		    VehicleInfo[vehicleid][vID] = cache_get_field_content_int(0, "id");
		    VehicleInfo[vehicleid][vOwnerID] = cache_get_field_content_int(0, "ownerid");
		    VehicleInfo[vehicleid][vPrice] = cache_get_field_content_int(0, "price");
		    VehicleInfo[vehicleid][vTickets] = cache_get_field_content_int(0, "tickets");
		    VehicleInfo[vehicleid][vLocked] = cache_get_field_content_int(0, "locked");
		    VehicleInfo[vehicleid][vHealth] = cache_get_field_content_float(0, "health");
		    VehicleInfo[vehicleid][vPaintjob] = cache_get_field_content_int(0, "paintjob");
		    VehicleInfo[vehicleid][vInterior] = cache_get_field_content_int(0, "interior");
	        VehicleInfo[vehicleid][vWorld] = cache_get_field_content_int(0, "world");
	        VehicleInfo[vehicleid][vNeon] = cache_get_field_content_int(0, "neon");
	        VehicleInfo[vehicleid][vNeonEnabled] = cache_get_field_content_int(0, "neonenabled");
	        VehicleInfo[vehicleid][vTrunk] = cache_get_field_content_int(0, "trunk");
	        VehicleInfo[vehicleid][vAlarm] = cache_get_field_content_int(0, "alarm");
	        VehicleInfo[vehicleid][vMods][0] = cache_get_field_content_int(0, "mod_1");
	        VehicleInfo[vehicleid][vMods][1] = cache_get_field_content_int(0, "mod_2");
	        VehicleInfo[vehicleid][vMods][2] = cache_get_field_content_int(0, "mod_3");
	        VehicleInfo[vehicleid][vMods][3] = cache_get_field_content_int(0, "mod_4");
	        VehicleInfo[vehicleid][vMods][4] = cache_get_field_content_int(0, "mod_5");
	        VehicleInfo[vehicleid][vMods][5] = cache_get_field_content_int(0, "mod_6");
	        VehicleInfo[vehicleid][vMods][6] = cache_get_field_content_int(0, "mod_7");
	        VehicleInfo[vehicleid][vMods][7] = cache_get_field_content_int(0, "mod_8");
	        VehicleInfo[vehicleid][vMods][8] = cache_get_field_content_int(0, "mod_9");
	        VehicleInfo[vehicleid][vMods][9] = cache_get_field_content_int(0, "mod_10");
	        VehicleInfo[vehicleid][vMods][10] = cache_get_field_content_int(0, "mod_11");
	        VehicleInfo[vehicleid][vMods][11] = cache_get_field_content_int(0, "mod_12");
	        VehicleInfo[vehicleid][vMods][12] = cache_get_field_content_int(0, "mod_13");
	        VehicleInfo[vehicleid][vMods][13] = cache_get_field_content_int(0, "mod_14");
	        VehicleInfo[vehicleid][vCash] = cache_get_field_content_int(0, "cash");
	        VehicleInfo[vehicleid][vMaterials] = cache_get_field_content_int(0, "materials");
	        VehicleInfo[vehicleid][vWeed] = cache_get_field_content_int(0, "weed");
	        VehicleInfo[vehicleid][vCocaine] = cache_get_field_content_int(0, "cocaine");
	        VehicleInfo[vehicleid][vHeroin] = cache_get_field_content_int(0, "heroin");
	        VehicleInfo[vehicleid][vPainkillers] = cache_get_field_content_int(0, "painkillers");
	        VehicleInfo[vehicleid][vWeapons][0] = cache_get_field_content_int(0, "weapon_1");
	        VehicleInfo[vehicleid][vWeapons][1] = cache_get_field_content_int(0, "weapon_2");
	        VehicleInfo[vehicleid][vWeapons][2] = cache_get_field_content_int(0, "weapon_3");
	        VehicleInfo[vehicleid][vWeapons][3] = cache_get_field_content_int(0, "weapon_4");
	        VehicleInfo[vehicleid][vWeapons][4] = cache_get_field_content_int(0, "weapon_5");
	        VehicleInfo[vehicleid][vGang] = -1;
	        VehicleInfo[vehicleid][vFaction] = -1;
	        VehicleInfo[vehicleid][vFGDivision] = -1;
	        VehicleInfo[vehicleid][vJob] = JOB_NONE;
	        VehicleInfo[vehicleid][vRespawnDelay] = -1;
	        VehicleInfo[vehicleid][vModel] = modelid;
		    VehicleInfo[vehicleid][vPosX] = x;
		    VehicleInfo[vehicleid][vPosY] = y;
		    VehicleInfo[vehicleid][vPosZ] = z;
		    VehicleInfo[vehicleid][vPosA] = a;
		    VehicleInfo[vehicleid][vColor1] = color1;
		    VehicleInfo[vehicleid][vColor2] = color2;
		    VehicleInfo[vehicleid][vObjects][0] = INVALID_OBJECT_ID;
		    VehicleInfo[vehicleid][vObjects][1] = INVALID_OBJECT_ID;
		    VehicleInfo[vehicleid][vTimer] = -1;
		    VehicleInfo[vehicleid][vRank] = 0;
		    VehicleInfo[vehicleid][carImpounded] = cache_get_field_content_int(0, "carImpounded");
		    VehicleInfo[vehicleid][carImpoundPrice] = cache_get_field_content_int(0, "carImpoundPrice");
			SetVehicleFuel(vehicleid, cache_get_field_content_int(0, "fuel"));
			adminVehicle{vehicleid} = false;

			VehicleInfo[vehicleid][vForSale] = bool:cache_get_field_content_int(0, "forsale");
			VehicleInfo[vehicleid][vForSalePrice] = cache_get_field_content_int(0, "forsaleprice");

			VehicleInfo[vehicleid][vMileage] = cache_get_field_content_float(0, "mileage");

			if(VehicleInfo[vehicleid][vForSale])
			{
				new forsale[264];
				format(forsale, sizeof(forsale), "FOR SALE\n%s - %s\nPh: %i.", GetVehicleName(vehicleid), FormatCash(VehicleInfo[vehicleid][vForSalePrice]), PlayerData[playerid][pPhone]);
                VehicleInfo[vehicleid][vForSaleLabel] = CreateDynamic3DTextLabel(forsale, COLOR_GREY2, 0.0, 0.0, 0.0, 10.0, INVALID_PLAYER_ID, vehicleid, 1, -1, 0, -1, 30.0);
 			}
            SetVehicleToRespawn(vehicleid);
			ReloadVehicle(vehicleid);


		    if(!parked)
			{
			    SendClientMessageEx(playerid, COLOR_AQUA, "You have spawned your {00AA00}%s{33CCFF} which is located in %s. /findcar to track it.", GetVehicleName(vehicleid), GetVehicleZoneName(vehicleid));
			}
	    }
	}

	return 1;
}

forward OnPlayerAttachCopClothing(playerid, name[], clothingid);
public OnPlayerAttachCopClothing(playerid, name[], clothingid)
{
	strcpy(ClothingInfo[playerid][clothingid][cName], name, 32);

    ClothingInfo[playerid][clothingid][cID] = cache_insert_id(connectionID);
    ClothingInfo[playerid][clothingid][cExists] = 1;
	ClothingInfo[playerid][clothingid][cAttached] = 0;
	ClothingInfo[playerid][clothingid][cAttachedIndex] = -1;

 	SendClientMessageEx(playerid, COLOR_AQUA, "%s added to clothing inventory. /clothing to attach your new item.", name);
}

forward OnPlayerBuyClothingItem(playerid, name[], price, businessid, clothingid);
public OnPlayerBuyClothingItem(playerid, name[], price, businessid, clothingid)
{
    new string[16];

    if(PlayerData[playerid][pTraderUpgrade] > 0)
    {
		price -= percent(price, (PlayerData[playerid][pTraderUpgrade] * 10));
		SendClientMessageEx(playerid, COLOR_YELLOW3, "Trader Perk: Your level %i/3 trader perk reduced the price of this item to $%i.", PlayerData[playerid][pTraderUpgrade], price);
    }

	strcpy(ClothingInfo[playerid][clothingid][cName], name, 32);

    ClothingInfo[playerid][clothingid][cID] = cache_insert_id(connectionID);
    ClothingInfo[playerid][clothingid][cExists] = 1;
	ClothingInfo[playerid][clothingid][cAttached] = 0;
	ClothingInfo[playerid][clothingid][cAttachedIndex] = -1;
    
    if(BusinessInfo[businessid][bProducts] > 0)
    {
 	    BusinessInfo[businessid][bCash] += price;
	    BusinessInfo[businessid][bProducts]--;

        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE businesses SET cash = %i, products = %i WHERE id = %i", BusinessInfo[businessid][bCash], BusinessInfo[businessid][bProducts], BusinessInfo[businessid][bID]);
        mysql_tquery(connectionID, queryBuffer);
    }

	GivePlayerCash(playerid, -price);
 	SendClientMessageEx(playerid, COLOR_AQUA, "%s purchased for {00AA00}$%i{33CCFF}. /clothing to find your new item.", name, price);
	SetPVarInt(playerid, "ColorToy", clothingid);
//	Dialog_Show(playerid, Clothing_MatColor1, DIALOG_STYLE_LIST, "Choose a layer.", "First\nSecond", "Select", "Close");
    format(string, sizeof(string), "~r~-$%i", price);
	GameTextForPlayer(playerid, string, 5000, 1);
}

forward OnPlayerSendTextMessage(playerid, number, msg[]);
public OnPlayerSendTextMessage(playerid, number, msg[])
{
	if(!cache_get_row_count(connectionID))
	{
	    SendClientMessage(playerid, COLOR_GREY, "The number you're trying to reach does not belong to any particular person.");
	}
	else if(cache_get_row_int(0, 1))
	{
	    SendClientMessage(playerid, COLOR_GREY, "That player is currently imprisoned and cannot use their phone.");
 	}
 	else if(cache_get_row_int(0, 2))
 	{
 	    SendClientMessage(playerid, COLOR_GREY, "That player has their mobile phone switched off.");
	}
 	else
	{
	    new
	        username[MAX_PLAYER_NAME];

	    cache_get_row(0, 0, username);

	    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "INSERT INTO texts VALUES(null, %i, %i, '%s', NOW(), '%e')", PlayerData[playerid][pPhone], number, GetPlayerNameEx(playerid), msg);
	    mysql_tquery(connectionID, queryBuffer);

        ShowActionBubble(playerid, "* %s takes out a cellphone and sends a message.", GetRPName(playerid));
	    SendClientMessageEx(playerid, COLOR_YELLOW, "* SMS to %s (%i): %s *", username, number, msg);
	    SendClientMessage(playerid, COLOR_WHITE, "The player who owns the number is offline, but will receive your text when they log in.");

        GivePlayerCash(playerid, -1);
        GameTextForPlayer(playerid, "~w~Text sent!~n~~r~-$1", 5000, 1);
	}
}

forward OnPlayerEvict(playerid, username[]);
public OnPlayerEvict(playerid, username[])
{
	if(!cache_get_row_count(connectionID))
	{
	    return SendClientMessage(playerid, COLOR_GREY, "That player doesn't exist, or is not renting at your home.");
	}
	else
	{
	    foreach(new i : Player)
	    {
	        if(!strcmp(GetPlayerNameEx(i), username) && PlayerData[i][pLogged])
	        {
	            PlayerData[i][pRentingHouse] = 0;
	            SendClientMessage(i, COLOR_RED, "You have been evicted from your home by the owner.");
	        }
	    }

	    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET rentinghouse = 0 WHERE username = '%e'", username);
	    mysql_tquery(connectionID, queryBuffer);

        SendClientMessageEx(playerid, COLOR_WHITE, "You have evicted %s from your property.", username);
	}

	return 1;
}

forward OnListPlayerFlags(playerid, targetid);
public OnListPlayerFlags(playerid, targetid)
{
	new rows = cache_get_row_count(connectionID);

	if(!rows)
	{
	    SendClientMessage(playerid, COLOR_GREY, "This player has no flags listed under their account.");
	}
	else
	{
	    new flaggedby[24], date[24], desc[128];

	    SendClientMessageEx(playerid, COLOR_NAVYBLUE, "_________ %s's Flags _________", GetRPName(targetid));

	    for(new i = 0; i < rows; i ++)
	    {
	        cache_get_field_content(i, "flaggedby", flaggedby);
	        cache_get_field_content(i, "date", date);
	        cache_get_field_content(i, "description", desc);

	        SendClientMessageEx(playerid, COLOR_GREY2, "[%i][%s] %s (from: %s)", i + 1, date, desc, flaggedby);
	    }
	}
}

forward OnVerifyRemoveFlag(playerid, targetid);
public OnVerifyRemoveFlag(playerid, targetid)
{
	if(cache_get_row_count(connectionID))
	{
	    new
			desc[128];

	    cache_get_field_content(0, "description", desc);

	    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "DELETE FROM flags WHERE id = %i", cache_get_field_content_int(0, "id"));
	    mysql_tquery(connectionID, queryBuffer);

	    SendAdminMessage(COLOR_LIGHTRED, "AdmCmd: %s %s has removed %s's flag for '%s'.", GetAdmCmdRank(playerid), GetRPName(playerid), GetRPName(targetid), desc);
	}
}

forward OnVerifyRemoveVehicle(playerid, targetid);
public OnVerifyRemoveVehicle(playerid, targetid)
{
	if(cache_get_row_count(connectionID))
	{
	    new vehicleid = GetVehicleLinkedID(cache_get_field_content_int(0, "id")), modelid = cache_get_field_content_int(0, "modelid");

	    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "DELETE FROM vehicles WHERE id = %i", cache_get_field_content_int(0, "id"));
	    mysql_tquery(connectionID, queryBuffer);

	    if(vehicleid != INVALID_VEHICLE_ID)
	    {
	        DespawnVehicle(vehicleid, false);
		}

	    SendAdminMessage(COLOR_LIGHTRED, "AdmCmd: %s %s has removed %s's %s.", GetAdmCmdRank(playerid), GetRPName(playerid), GetRPName(targetid), GetVehicleNameByModel(modelid));
	    SendClientMessageEx(targetid, COLOR_AQUA, "%s has removed your {FF6347}%s{33CCFF} from your vehicle list.", GetRPName(playerid), GetVehicleNameByModel(modelid));
	}
}
forward OnUpdatePartner(playerid);
public OnUpdatePartner(playerid)
{
    if(cache_get_row_count(connectionID))
	{
	    cache_get_field_content(0, "username", PlayerData[playerid][pMarriedName], connectionID, MAX_PLAYER_NAME);
	}
}
forward OnAdminSetPhoneNumber(playerid, targetid, number);
public OnAdminSetPhoneNumber(playerid, targetid, number)
{
	if(cache_get_row_count(connectionID))
	{
	    SendClientMessage(playerid, COLOR_GREY, "The number specified is already taken.");
	}
	else
	{
	    PlayerData[targetid][pPhone] = number;
	    SendClientMessageEx(playerid, COLOR_WHITE, "You have set %s's phone number to %i.", GetRPName(targetid), number);

	    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET phone = %i WHERE uid = %i", number, PlayerData[targetid][pID]);
	    mysql_tquery(connectionID, queryBuffer);

	    Log_Write("log_admin", "%s (uid: %i) set %s's (uid: %i) phone number to %i", GetPlayerNameEx(playerid), PlayerData[playerid][pID], GetPlayerNameEx(targetid), PlayerData[targetid][pID], number);
	}
}

forward OnAdminChangePassword(playerid, username[], password[]);
public OnAdminChangePassword(playerid, username[], password[])
{
	if(!cache_get_row_count(connectionID))
	{
	    SendClientMessage(playerid, COLOR_GREY, "The player specified doesn't exist.");
	}
	else
	{
        if(IsUIDGodAdmin(cache_get_field_content_int(0, "uid")))
        {
	        SendClientMessage(playerid, COLOR_GREY, "You cannot change password of this admin.");
            return;
        }
	    new
	        hashed[129];

	    WP_Hash(hashed, sizeof(hashed), password);

	    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET password = '%s' WHERE username = '%e'", hashed, username);
	    mysql_tquery(connectionID, queryBuffer);

	    SendAdminMessage(COLOR_LIGHTRED, "AdmCmd: %s %s has changed %s's account password.",GetAdmCmdRank(playerid), GetRPName(playerid), username);
	}
}

forward OnAdminListVehiclesForRemoval(playerid, targetid);
public OnAdminListVehiclesForRemoval(playerid, targetid)
{
    new rows = cache_get_row_count(connectionID);

    if(!rows)
    {
        SendClientMessage(playerid, COLOR_GREY, "This player owns no vehicles.");
	}
	else
	{
		static string[1024];

		string = "#\tModel\tLocation";

		for(new i = 0; i < rows; i ++)
    	{
			new
				vehicleid = GetVehicleLinkedID(cache_get_field_content_int(i, "id"));

			if(vehicleid == INVALID_VEHICLE_ID)
			{
				format(string, sizeof(string), "%s\nn/a\t%s\t%s", string, GetVehicleNameByModel(cache_get_field_content_int(i, "modelid")), (cache_get_field_content_int(i, "interior")) ? ("Garage") : GetZoneName(cache_get_field_content_float(i, "pos_x"), cache_get_field_content_float(i, "pos_y"), cache_get_field_content_float(i, "pos_z")));
			}
			else
			{
				format(string, sizeof(string), "%s\nID %i\t%s\t%s", string, vehicleid, GetVehicleName(vehicleid), GetVehicleZoneName(vehicleid));
			}
		}

		PlayerData[playerid][pRemoveFrom] = targetid;
		Dialog_Show(playerid, DIALOG_REMOVEPVEH, DIALOG_STYLE_TABLIST_HEADERS, "Choose a vehicle to remove.", string, "Select", "Cancel");
	}
}

forward OnAdminListVehicles(playerid, targetid);
public OnAdminListVehicles(playerid, targetid)
{
	new rows = cache_get_row_count(connectionID);

    SendClientMessageEx(playerid, COLOR_NAVYBLUE, "_____ %s's Vehicles _____", GetRPName(targetid));

    for(new i = 0; i < rows; i ++)
    {
		new
			vehicleid = GetVehicleLinkedID(cache_get_field_content_int(i, "id"));

		if(vehicleid == INVALID_VEHICLE_ID)
		{
			SendClientMessageEx(playerid, COLOR_GREY2, "ID: n/a | Model: %s | Location: %s", GetVehicleNameByModel(cache_get_field_content_int(i, "modelid")), (cache_get_field_content_int(i, "interior")) ? ("Garage") : GetZoneName(cache_get_field_content_float(i, "pos_x"), cache_get_field_content_float(i, "pos_y"), cache_get_field_content_float(i, "pos_z")));
		}
		else
		{
			SendClientMessageEx(playerid, COLOR_GREY2, "ID: %i | Model: %s | Location: %s", vehicleid, GetVehicleName(vehicleid), GetVehicleZoneName(vehicleid));
		}
	}
}

forward OnAdminOfflineDM(playerid, username[]);
public OnAdminOfflineDM(playerid, username[])
{
    if (cache_get_row_count(connectionID))
    {
        return SendClientMessage(playerid, COLOR_GREY, "The player specified doesn't exist.");
    }

    if (!IsAdmin(playerid, cache_get_field_content_int(0, "adminlevel")))
    {
        return SendClientMessage(playerid, COLOR_GREY, "The player specified has a higher admin level than you. They cannot be banned.");
    }

    new userid = cache_get_field_content_int(0, "uid");
    new warns  = cache_get_field_content_int(0, "warns");
    new userip[16];
    cache_get_field_content(0, "ip", userip);

    warns++;

    if (warns < 3)
    {
        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET jailtype = 2, jailtime = %i, dmwarnings = %i,"\
            " weaponrestricted = %i, prisonedby = '%e', prisonreason = 'DM' WHERE uid = %i",
            warns * 3600, warns, warns * 4, GetPlayerNameEx(playerid), userid);
		mysql_tquery(connectionID, queryBuffer);

        /*LogPlayerPunishment(playerid, userid, userip,
            "DM", "%s was offline DM warned by %s %s. Prison: %i minutes. Weapon restriction: %i hours. DM (%i/3)",
            username, GetAdminRank(playerid), GetRPName(playerid), warns * 60, warns*4, warns);
		*/
        SendAdminMessage(COLOR_LIGHTRED, "AdmCmd: %s was offline DM Warned & Prisoned for %i minutes by %s %s, reason: DM (%i/3)", username, warns * 60, GetAdmCmdRank(playerid), GetRPName(playerid), warns);
    }
    else
    {
        OfflineBan(userid, username, userip, "DM (3/3 warnings)");

        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET dmwarnings = 0 WHERE uid = %i", userid);
		mysql_tquery(connectionID, queryBuffer);

        /*LogPlayerPunishment(playerid, userid, userip,
            "DM", "%s was offline DM warned by %s %s. DM (3/3)",
            username, GetAdminRank(playerid), GetPlayerNameEx(playerid));
		*/
        SendAdminMessage(COLOR_LIGHTRED, "AdmCmd: %s was offline banned by %s %s, reason: DM (3/3 warnings)", username, GetAdmCmdRank(playerid), GetRPName(playerid));
    }
    return 1;
}

/*forward OnAdminOfflineDM(playerid, username[]);
public OnAdminOfflineDM(playerid, username[])
{
	if(cache_get_row_count(connectionID))
	{
		if(cache_get_field_content_int(0, "adminlevel") > PlayerData[playerid][pAdmin])
		{
		    SendClientMessage(playerid, COLOR_GREY, "The player specified has a higher admin level than you. They cannot be punished.");
		}
		else
		{
		    new userip[16], id = cache_get_field_content_int(0, "uid"), warns = cache_get_field_content_int(0, "warns");

			warns++;

			if(warns < 3)
			{
			    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET jailtype = 2, jailtime = %i, dmwarnings = %i, weaponrestricted = %i, prisonedby = '%s', prisonreason = 'DM' WHERE uid = %i", warns * 3600, warns, warns * 4, GetPlayerNameEx(playerid), id);
			    mysql_tquery(connectionID, queryBuffer);

				Log_Write("log_punishments", "%s (uid: %i) offline prisoned %s (uid: %i) for %i minutes, reason: DM [/dm]", GetPlayerNameEx(playerid), PlayerData[playerid][pID], username, id, warns * 60);
				SendAdminMessage(COLOR_LIGHTRED, "AdmCmd: %s was offline DM Warned & Prisoned for %i minutes by %s %s, reason: DM (%i/3)", username, warns * 60, GetAdmCmdRank(playerid), GetRPName(playerid), warns);
			}
			else
			{
			    cache_get_field_content(0, "ip", ip);
			    OfflineBan(username, ip, "DM (3/3 warnings)");

			    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET dmwarnings = 0 WHERE uid = %i", id);
			    mysql_tquery(connectionID, queryBuffer);

		        Log_Write("log_punishments", "%s (uid: %i) offline banned %s (uid: %i), reason: DM (3/3 warnings)", GetPlayerNameEx(playerid), PlayerData[playerid][pID], username, id);
		        SendAdminMessage(COLOR_LIGHTRED, "AdmCmd: %s was offline banned by %s %s, reason: DM (3/3 warnings)", username, GetAdmCmdRank(playerid), GetRPName(playerid));
			}
		}
	}
	else
	{
	    SendClientMessage(playerid, COLOR_GREY, "The player specified doesn't exist.");
	}
}*/

forward OnAdminCheckNameHistory(playerid, targetid);
public OnAdminCheckNameHistory(playerid, targetid)
{
	new rows = cache_get_row_count(connectionID);

	if(!rows)
	{
	    SendClientMessage(playerid, COLOR_GREY, "This player has no namechange history recorded.");
	}
	else
	{
	    new oldname[MAX_PLAYER_NAME], newname[MAX_PLAYER_NAME], changedby[MAX_PLAYER_NAME], date[24];

		SendClientMessage(playerid, COLOR_NAVYBLUE, "_____ Namechange History _____");

		for(new i = 0; i < rows; i ++)
		{
		    cache_get_field_content(i, "oldname", oldname);
		    cache_get_field_content(i, "newname", newname);
		    cache_get_field_content(i, "changedby", changedby);
		    cache_get_field_content(i, "date", date);

		    SendClientMessageEx(playerid, COLOR_YELLOW, "[%s] %s has changed %s's name to %s.", date, changedby, oldname, newname);
		}
	}
}

forward OnAdminListFlagsForRemoval(playerid, targetid);
public OnAdminListFlagsForRemoval(playerid, targetid)
{
    new rows = cache_get_row_count(connectionID);

	if(!rows)
	{
	    SendClientMessage(playerid, COLOR_GREY, "This player has no flags listed under their account.");
	}
	else
	{
	    static string[4096], flaggedby[24], date[24], desc[128];

	    string = "#\tFlagged by\tDate\tDescription";

	    for(new i = 0; i < rows; i ++)
	    {
	        cache_get_field_content(i, "flaggedby", flaggedby);
	        cache_get_field_content(i, "date", date);
	        cache_get_field_content(i, "description", desc);

	        format(string, sizeof(string), "%s\n%i\t%s\t%s\t%s", string, i + 1, flaggedby, date, desc);
	    }

	    PlayerData[playerid][pRemoveFrom] = targetid;
	    Dialog_Show(playerid, DIALOG_REMOVEFLAG, DIALOG_STYLE_TABLIST_HEADERS, "Choose a flag to remove.", string, "Select", "Cancel");
	}
}

forward OnAdminCreateLocker(playerid, lockerid, factionid, Float:x, Float:y, Float:z, interior, world);
public OnAdminCreateLocker(playerid, lockerid, factionid, Float:x, Float:y, Float:z, interior, world)
{
	LockerInfo[lockerid][lID] = cache_insert_id(connectionID);
	LockerInfo[lockerid][lExists] = 1;
	LockerInfo[lockerid][lFaction] = factionid;
    LockerInfo[lockerid][lPosX] = x;
    LockerInfo[lockerid][lPosY] = y;
    LockerInfo[lockerid][lPosZ] = z;
    LockerInfo[lockerid][lInterior] = interior;
    LockerInfo[lockerid][lWorld] = world;
	LockerInfo[lockerid][lIcon] = 1239;
	LockerInfo[lockerid][lLabel] = 1;

    // CHANGE SQL TOO PLS
    LockerInfo[lockerid][locKevlar] = { 1, 100 };
    LockerInfo[lockerid][locMedKit] = { 1, 50 };
    LockerInfo[lockerid][locNitestick] = { 0, 0 };
    LockerInfo[lockerid][locMace] = { 0, 0 };
    LockerInfo[lockerid][locDeagle] = { 1, 850 };
    LockerInfo[lockerid][locShotgun] = { 1, 1000 };
    LockerInfo[lockerid][locMP5] = { 1, 1500 };
    LockerInfo[lockerid][locM4] = { 1, 2500 };
    LockerInfo[lockerid][locSpas12] = { 1, 3500 };
    LockerInfo[lockerid][locSniper] = { 1, 5000 };
    LockerInfo[lockerid][locCamera] = { 0, 0 };
    LockerInfo[lockerid][locFireExt] = { 0, 0 };
    LockerInfo[lockerid][locPainKillers] = { 0, 0 };

    LockerInfo[lockerid][lText] = Text3D:INVALID_3DTEXT_ID;
    LockerInfo[lockerid][lPickup] = -1;

    ReloadLocker(lockerid);
    SendClientMessageEx(playerid, COLOR_GREEN, "* Locker %i created for %s.", lockerid, FactionInfo[factionid][fName]);
}

forward OnAdminCreateLocation(playerid, location, name[], Float:x, Float:y, Float:z);
public OnAdminCreateLocation(playerid, location, name[], Float:x, Float:y, Float:z)
{
	LocationInfo[location][locID] = cache_insert_id(connectionID);
	LocationInfo[location][locExists] = true;
	strcpy(LocationInfo[location][locName], name, 32);
    LocationInfo[location][locPosX] = x;
    LocationInfo[location][locPosY] = y;
    LocationInfo[location][locPosZ] = z;

    SendClientMessageEx(playerid, COLOR_GREEN, "* Location [%i] %s created at %.1f, %.1f, %.1f.", location, name, x, y, z);
}

forward OnAdminOfflineFlag(playerid, username[], desc[]);
public OnAdminOfflineFlag(playerid, username[], desc[])
{
	if(!cache_get_row_count(connectionID))
	{
	    SendClientMessage(playerid, COLOR_GREY, "The player specified doesn't exist.");
	}
	else
	{
	    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "INSERT INTO flags VALUES(null, %i, '%s', NOW(), '%e')", cache_get_field_content_int(0, "uid"), GetPlayerNameEx(playerid), desc);
		mysql_tquery(connectionID, queryBuffer);

		SendAdminMessage(COLOR_LIGHTRED, "AdmCmd: %s %s offline flagged %s's account for '%s'.",GetAdmCmdRank(playerid), GetRPName(playerid), username, desc);
	}
}

forward OnAdminCheckBanHistory(playerid, username[]);
public OnAdminCheckBanHistory(playerid, username[])
{
	new rows = cache_get_row_count(connectionID);

	if(!rows)
	{
		SendClientMessage(playerid, COLOR_GREY, "This player has no ban history recorded.");
	}
	else
	{
	    new date[24], description[255];

	    for(new i = 0; i < rows; i ++)
	    {
	        cache_get_row(i, 0, date);
	        cache_get_row(i, 1, description);

	        SendClientMessageEx(playerid, COLOR_LIGHTRED, "[%s] %s", date, description);
	    }
	}
}

forward OnAdminCheckLastActive(playerid, username[]);
public OnAdminCheckLastActive(playerid, username[])
{
    if(!cache_get_row_count(connectionID))
	{
	    SendClientMessage(playerid, COLOR_GREY, "The player specified doesn't exist.");
	}
	else
	{
	    new
	        date[40];

     	cache_get_row(0, 0, date);
		SendClientMessageEx(playerid, COLOR_GREEN, "%s last logged in on the %s (server time).", username, date);
	}
}

forward OnAdminSetHelperLevel(playerid, username[], level);
public OnAdminSetHelperLevel(playerid, username[], level)
{
    if(!cache_get_row_count(connectionID))
	{
	    SendClientMessage(playerid, COLOR_GREY, "The player specified doesn't exist.");
	}
	else if((PlayerData[playerid][pAdmin] < GENERAL_MANAGER) && cache_get_row_int(0, 0) > PlayerData[playerid][pHelper] && level < cache_get_row_int(0, 0))
	{
	    SendClientMessage(playerid, COLOR_GREY, "The player specified has a higher helper level than you. They cannot be demoted.");
	}
	else
	{
	    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET helperlevel = %i WHERE username = '%e'", level, username);
	    mysql_tquery(connectionID, queryBuffer);

	    SendStaffMessage(COLOR_LIGHTRED, "AdmCmd: %s %s has offline set %s's helper level to %i.",GetAdmCmdRank(playerid), GetRPName(playerid), username, level);
	    Log_Write("log_admin", "%s (uid: %i) has offline set %s's helper level to %i.", GetPlayerNameEx(playerid), PlayerData[playerid][pID], username, level);
	}
}

forward OnAdminSetAdminLevel(playerid, username[], level);
public OnAdminSetAdminLevel(playerid, username[], level)
{
    if(!cache_get_row_count(connectionID))
	{
	    SendClientMessage(playerid, COLOR_GREY, "The player specified doesn't exist.");
	}
	else if(cache_get_row_int(0, 0) > PlayerData[playerid][pAdmin] && level < cache_get_row_int(0, 0))
	{
	    SendClientMessage(playerid, COLOR_GREY, "The player specified has a higher admin level than you. They cannot be demoted.");
	}
	else
	{
	    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET adminlevel = %i WHERE username = '%e'", level, username);
	    mysql_tquery(connectionID, queryBuffer);

	    if(level == 0)
	    {
   			mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET scripter = 0, gangmod = 0, banappealer = 0, factionmod = 0, helpermanager = 0, webdev = 0, dynamicadmin = 0, adminpersonnel = 0 WHERE username = '%e'", username);
			mysql_tquery(connectionID, queryBuffer);
	    }

	    SendAdminMessage(COLOR_LIGHTRED, "AdmCmd: %s %s has offline set %s's admin level to %i.",GetAdmCmdRank(playerid), GetRPName(playerid), username, level);
	    Log_Write("log_admin", "%s (uid: %i) has offline set %s's admin level to %i.", GetPlayerNameEx(playerid), PlayerData[playerid][pID], username, level);
	}
}

forward OnAdminCreateLand(playerid, landid, price, Float:minx, Float:miny, Float:maxx, Float:maxy, Float:heightx, Float:heighty, Float:heightz);
public OnAdminCreateLand(playerid, landid, price, Float:minx, Float:miny, Float:maxx, Float:maxy, Float:heightx, Float:heighty, Float:heightz)
{
	GetPlayerPos(playerid, heightx, heighty, heightz);
	strcpy(LandInfo[landid][lOwner], "Nobody", MAX_PLAYER_NAME);
	LandInfo[landid][lExists] = 1;
	LandInfo[landid][lID] = cache_insert_id(connectionID);
	LandInfo[landid][lOwnerID] = 0;
	LandInfo[landid][lLevel] = 1;
	LandInfo[landid][lPrice] = price;
	LandInfo[landid][lMinX] = minx;
	LandInfo[landid][lMinY] = miny;
	LandInfo[landid][lMaxX] = maxx;
	LandInfo[landid][lMaxY] = maxy;
	LandInfo[landid][lHeightX] = heightx;
	LandInfo[landid][lHeightY] = heighty;
	LandInfo[landid][lHeightZ] = heightz;
	LandInfo[landid][lSeized] = 0;
	LandInfo[landid][lGangZone] = -1;
    LandInfo[landid][lArea] = -1;
    Iter_Add(Land, landid);

    ReloadLand(landid);
    SendClientMessageEx(playerid, COLOR_GREEN, "* Land %i created successfully.", landid);
}

forward OnAdminCreateEntrance(playerid, entranceid, name[], Float:x, Float:y, Float:z, Float:angle);
public OnAdminCreateEntrance(playerid, entranceid, name[], Float:x, Float:y, Float:z, Float:angle)
{
	strcpy(EntranceInfo[entranceid][eOwner], "Nobody", MAX_PLAYER_NAME);
	strcpy(EntranceInfo[entranceid][eName], name, 40);
	strcpy(EntranceInfo[entranceid][ePassword], "None", 64);

	EntranceInfo[entranceid][eExists] = 1;
	EntranceInfo[entranceid][eID] = cache_insert_id(connectionID);
	EntranceInfo[entranceid][eOwnerID] = 0;
	EntranceInfo[entranceid][eIcon] = 19132;
	EntranceInfo[entranceid][eLocked] = 0;
	EntranceInfo[entranceid][eRadius] = 3.0;
	EntranceInfo[entranceid][ePosX] = x;
	EntranceInfo[entranceid][ePosY] = y;
	EntranceInfo[entranceid][ePosZ] = z;
	EntranceInfo[entranceid][ePosA] = angle;
	EntranceInfo[entranceid][eIntX] = 0.0;
	EntranceInfo[entranceid][eIntY] = 0.0;
	EntranceInfo[entranceid][eIntZ] = 0.0;
	EntranceInfo[entranceid][eIntA] = 0.0;
	EntranceInfo[entranceid][eInterior] = 0;
	EntranceInfo[entranceid][eWorld] = EntranceInfo[entranceid][eID] + 4000000;
	EntranceInfo[entranceid][eOutsideInt] = GetPlayerInterior(playerid);
	EntranceInfo[entranceid][eOutsideVW] = GetPlayerVirtualWorld(playerid);
	EntranceInfo[entranceid][eAdminLevel] = 0;
	EntranceInfo[entranceid][eFaction] = -1;
	EntranceInfo[entranceid][eGang] = -1;
	EntranceInfo[entranceid][eVIP] = 0;
	EntranceInfo[entranceid][eVehicles] = 0;
	EntranceInfo[entranceid][eFreeze] = 0;
	EntranceInfo[entranceid][eLabel] = 1;
	EntranceInfo[entranceid][eType] = 0;
	EntranceInfo[entranceid][eMapIcon] = 0;
	EntranceInfo[entranceid][eText] = Text3D:INVALID_3DTEXT_ID;
	EntranceInfo[entranceid][ePickup] = -1;
	EntranceInfo[entranceid][eMapIconID] = -1;
	EntranceInfo[entranceid][eColor] = -256;
    Iter_Add(Entrance, entranceid);

	mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE entrances SET world = %i WHERE id = %i", EntranceInfo[entranceid][eWorld], EntranceInfo[entranceid][eID]);
	mysql_tquery(connectionID, queryBuffer);

	ReloadEntrance(entranceid);
	SendClientMessageEx(playerid, COLOR_GREEN, "* Entrance %i created successfully.", entranceid);
}

forward OnAdminCreateGangHQ(playerid, entranceid, gangid, Float:x, Float:y, Float:z, Float:angle, Float:ix, Float:iy, Float:iz, Float:ia, interior, vw);
public OnAdminCreateGangHQ(playerid, entranceid, gangid, Float:x, Float:y, Float:z, Float:angle, Float:ix, Float:iy, Float:iz, Float:ia, interior, vw)
{
	strcpy(EntranceInfo[entranceid][eOwner], "Nobody", MAX_PLAYER_NAME);
	strcpy(EntranceInfo[entranceid][eName], GangInfo[gangid][gName], 40);
	strcpy(EntranceInfo[entranceid][ePassword], "None", 64);

	EntranceInfo[entranceid][eExists] = 1;
	EntranceInfo[entranceid][eID] = cache_insert_id(connectionID);
	EntranceInfo[entranceid][eOwnerID] = 0;
	EntranceInfo[entranceid][eIcon] = 19132;
	EntranceInfo[entranceid][eLocked] = 0;
	EntranceInfo[entranceid][eRadius] = 3.0;
	EntranceInfo[entranceid][ePosX] = x;
	EntranceInfo[entranceid][ePosY] = y;
	EntranceInfo[entranceid][ePosZ] = z;
	EntranceInfo[entranceid][ePosA] = angle;
	EntranceInfo[entranceid][eIntX] = ix;
	EntranceInfo[entranceid][eIntY] = iy;
	EntranceInfo[entranceid][eIntZ] = iz;
	EntranceInfo[entranceid][eIntA] = ia;
	EntranceInfo[entranceid][eInterior] = interior;
	EntranceInfo[entranceid][eWorld] = vw;
	EntranceInfo[entranceid][eOutsideInt] = GetPlayerInterior(playerid);
	EntranceInfo[entranceid][eOutsideVW] = GetPlayerVirtualWorld(playerid);
	EntranceInfo[entranceid][eAdminLevel] = 0;
	EntranceInfo[entranceid][eFaction] = -1;
	EntranceInfo[entranceid][eGang] = gangid;
	EntranceInfo[entranceid][eVIP] = 0;
	EntranceInfo[entranceid][eVehicles] = 0;
	EntranceInfo[entranceid][eFreeze] = 0;
	EntranceInfo[entranceid][eLabel] = 1;
	EntranceInfo[entranceid][eType] = 0;
	EntranceInfo[entranceid][eMapIcon] = 0;
	EntranceInfo[entranceid][eText] = Text3D:INVALID_3DTEXT_ID;
	EntranceInfo[entranceid][ePickup] = -1;
	EntranceInfo[entranceid][eMapIconID] = -1;
	EntranceInfo[entranceid][eColor] = -256;
    Iter_Add(Entrance, entranceid);

	ReloadEntrance(entranceid);
	SendClientMessageEx(playerid, COLOR_GREEN, "* GangHQ created successfully.");
}

forward OnAdminCreateGarage(playerid, garageid, type, Float:x, Float:y, Float:z, Float:angle);
public OnAdminCreateGarage(playerid, garageid, type, Float:x, Float:y, Float:z, Float:angle)
{
	strcpy(GarageInfo[garageid][gOwner], "Nobody", MAX_PLAYER_NAME);

	GarageInfo[garageid][gExists] = 1;
	GarageInfo[garageid][gID] = cache_insert_id(connectionID);
	GarageInfo[garageid][gOwnerID] = 0;
	GarageInfo[garageid][gType] = type;
	GarageInfo[garageid][gPrice] = garageInteriors[type][intPrice];
	GarageInfo[garageid][gLocked] = 0;
	GarageInfo[garageid][gPosX] = x;
	GarageInfo[garageid][gPosY] = y;
	GarageInfo[garageid][gPosZ] = z;
	GarageInfo[garageid][gPosA] = angle;
	GarageInfo[garageid][gExitX] = x - 3.0 * floatsin(-angle, degrees);
	GarageInfo[garageid][gExitY] = y - 3.0 * floatsin(-angle, degrees);
	GarageInfo[garageid][gExitZ] = z;
	GarageInfo[garageid][gExitA] = angle - 180.0;
	GarageInfo[garageid][gWorld] = GarageInfo[garageid][gID] + 2000000;
    GarageInfo[garageid][gText] = Text3D:INVALID_3DTEXT_ID;
    GarageInfo[garageid][gPickup] = -1;
	Iter_Add(Garage, garageid);
    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE garages SET world = %i WHERE id = %i", GarageInfo[garageid][gWorld], GarageInfo[garageid][gID]);
	mysql_tquery(connectionID, queryBuffer);

	ReloadGarage(garageid);
	SendClientMessageEx(playerid, COLOR_GREEN, "* Garage %i created successfully.", garageid);
}


forward OnAdminDeleteAccount(playerid, username[]);
public OnAdminDeleteAccount(playerid, username[])
{
	if(!cache_get_row_count(connectionID))
	{
	    SendClientMessage(playerid, COLOR_GREY, "The player specified doesn't exist.");
	}
	else if(cache_get_row_int(0, 0) > PlayerData[playerid][pAdmin])
	{
	    SendClientMessage(playerid, COLOR_GREY, "The player specified has a higher admin level than you. You cannot delete them.");
	}
	else
	{
	    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "DELETE FROM "#TABLE_USERS" WHERE username = '%e'", username);
	    mysql_tquery(connectionID, queryBuffer);

	    SendAdminMessage(COLOR_LIGHTRED, "AdmCmd: %s %s has deleted %s's account.", GetAdmCmdRank(playerid), GetPlayerNameEx(playerid), username);
	}
}

forward OnAdminListKills(playerid, targetid);
public OnAdminListKills(playerid, targetid)
{
    new rows = cache_get_row_count(connectionID);

    if(!rows)
	{
	    SendClientMessage(playerid, COLOR_GREY, "That player hasn't killed, or has been killed, by anyone since they registered.");
	}
	else
	{
	    new date[24], killer[24], target[24], reason[24];

	    SendClientMessage(playerid, COLOR_NAVYBLUE, "________ Kills & Deaths ________");

	    for(new i = 0; i < rows; i ++)
	    {
	        cache_get_field_content(i, "date", date);
	        cache_get_field_content(i, "killer", killer);
	        cache_get_field_content(i, "target", target);
	        cache_get_field_content(i, "reason", reason);

	        if(cache_get_field_content_int(i, "killer_uid") == PlayerData[targetid][pID])
	        {
		        SendClientMessageEx(playerid, COLOR_YELLOW, "[%s] %s killed %s (%s)", date, killer, target, reason);
	        }
	        else if(cache_get_field_content_int(i, "target_uid") == PlayerData[targetid][pID])
	        {
	            SendClientMessageEx(playerid, COLOR_YELLOW, "[%s] %s was killed by %s (%s)", date, target, killer, reason);
	        }
	    }
	}
}

forward OnAdminListDamages(playerid, targetid);
public OnAdminListDamages(playerid, targetid)
{
	new rows = cache_get_row_count(connectionID);

    if(!rows)
	{
	    SendClientMessage(playerid, COLOR_GREY, "That player hasn't been damaged by anyone since they connected.");
	}
	else
	{
	    SendClientMessage(playerid, COLOR_NAVYBLUE, "___________ Damage Received ___________");

	    for(new i = 0; i < rows; i ++)
	    {
	        SendClientMessageEx(playerid, COLOR_YELLOW, "[%i seconds ago] %s was shot by %s with a %s", gettime() - cache_get_row_int(i, 2), GetRPName(targetid), GetRPName(cache_get_row_int(i, 1)), GetWeaponNameEx(cache_get_row_int(i, 0)));
			//SendClientMessageEx(playerid, COLOR_GREY2, "(Weapon: %s) - (From: %s) - (Time: %i seconds ago)", GetWeaponNameEx(cache_get_row_int(i, 0)), GetRPName(cache_get_row_int(i, 1)), gettime() - cache_get_row_int(i, 2));
		}
	}
}

forward OnAdminListShots(playerid, targetid);
public OnAdminListShots(playerid, targetid)
{
	new rows = cache_get_row_count(connectionID);

    if(!rows)
	{
	    SendClientMessage(playerid, COLOR_GREY, "That player hasn't registered any shots since they connected.");
	}
	else
	{
	    new weaponid, hittype, timestamp, hit[48];

	    SendClientMessageEx(playerid, COLOR_NAVYBLUE, "___________ %i Last Shots ___________", rows);

	    for(new i = 0; i < rows; i ++)
	    {
	        weaponid 	= cache_get_field_content_int(i, "weaponid");
	        hittype 	= cache_get_field_content_int(i, "hittype");
	        timestamp 	= cache_get_field_content_int(i, "timestamp");

			switch(hittype)
			{
       			case BULLET_HIT_TYPE_PLAYER:
					cache_get_field_content(i, "hitplayer", hit);
          		case BULLET_HIT_TYPE_VEHICLE:
          		    format(hit, sizeof(hit), "Vehicle (ID %i)", cache_get_field_content_int(i, "hitid"));
    			default:
    			    hit = "Missed";
			}

			SendClientMessageEx(playerid, COLOR_YELLOW, "[%i seconds ago] %s shot a %s and hit: %s", gettime() - timestamp, GetRPName(targetid), GetWeaponNameEx(weaponid), hit);
		}
	}
}

forward OnAdminCheckBan(playerid, string[]);
public OnAdminCheckBan(playerid, string[])
{
	new bannedby[MAX_PLAYER_NAME], username[MAX_PLAYER_NAME], ip[16], date[24], reason[128];

	if(!cache_get_row_count(connectionID))
	{
	    SendClientMessage(playerid, COLOR_GREY, "There are no bans that match your criteria.");
	}
	else
	{
	    cache_get_field_content(0, "bannedby", bannedby);
	    cache_get_field_content(0, "username", username);
	    cache_get_field_content(0, "ip", ip);
	    cache_get_field_content(0, "date", date);
	    cache_get_field_content(0, "reason", reason);

		if(!strcmp(username, "n/a", true)) {
		    if(strfind(ip, "*", true) != -1) {
		    	SendClientMessageEx(playerid, COLOR_LIGHTRED, "[%s] IP address '%s' was rangebanned by %s, reason: %s", date, ip, bannedby, reason);
	        } else {
	            SendClientMessageEx(playerid, COLOR_LIGHTRED, "[%s] IP address '%s' was banned by %s, reason: %s", date, ip, bannedby, reason);
	        }
		}
		else {
		    if(strfind(ip, "*", true) != -1) {
		    	SendClientMessageEx(playerid, COLOR_LIGHTRED, "[%s] %s (IP: %s) was rangebanned by %s, reason: %s", date, username, ip, bannedby, reason);
	        } else if(cache_get_field_content_int(0, "permanent")) {
	            SendClientMessageEx(playerid, COLOR_LIGHTRED, "[%s] %s (IP: %s) was permanently banned by %s, reason: %s", date, username, ip, bannedby, reason);
	        } else {
	            SendClientMessageEx(playerid, COLOR_LIGHTRED, "[%s] %s (IP: %s) was banned by %s, reason: %s", date, username, ip, bannedby, reason);
	        }
		}
	}
}

/*stock UnbanPlayer(playerid, username[])
{
    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "SELECT * FROM users_bans WHERE username = '%e'", username);
    mysql_tquery(connectionID, queryBuffer, "UnbanPlayer", "is", playerid, username);
}

DB:UnbanPlayer(playerid, username[])
{
    if (cache_get_row_count(connectionID))
    {
        //new userid   = cache_get_field_content_int(0, "userid");
        new duration = cache_get_field_content_int(0, "duration");
        new isbanned = cache_get_field_content_int(0, "isbanned");
        new userip[16];
        cache_get_field_content(0, "userip", userip);

        if (duration == PERMANENT_BAN_DURATION && PlayerData[playerid][pAdmin] < GENERAL_MANAGER)
        {
            return SendClientMessage(playerid, COLOR_GREY, "This player is permanently banned. Permabans may only be lifted by management.");
        }
        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "DELETE FROM users_bans WHERE userid = %i", userid);
		mysql_tquery(connectionID, queryBuffer);
		mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "DELETE FROM users_bans WHERE userid = %i", cache_get_row_int(0, 0));
		mysql_tquery(connectionID, queryBuffer);

        if (!isbanned)
        {
            return SendClientMessage(playerid, COLOR_GREY, "This player is not banned. Cleaning ban cache.");
        }
        RemoveIPBan(userip);
        LogPlayerPunishment(playerid, userid, userip,
            "UNBAN", "%s was unbanned by %s %s.",
            username, GetAdminRank(playerid), GetRPName(playerid));
		
        SendAdminMessage(COLOR_LIGHTRED, "AdmCmd: %s %s has unbanned %s.", GetAdmCmdRank(playerid), GetRPName(playerid), username);
    }
    else
    {
        SendClientMessage(playerid, COLOR_GREY, "There is no banned player known by that name.");
    }

    return 1;
}*/

forward OnAdminUnbanUser(playerid, username[]);
public OnAdminUnbanUser(playerid, username[])
{
	if(cache_get_row_count(connectionID))
	{
	    new duration = cache_get_field_content_int(0, "duration");

	    if(duration == PERMANENT_BAN_DURATION && PlayerData[playerid][pAdmin] < GENERAL_MANAGER)
	    {
	        return SendClientMessage(playerid, COLOR_GREY, "This player is permanently banned. Permabans may only be lifted by management.");
		}

		new userid = cache_get_field_content_int(0, "userid");

		mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "DELETE FROM users_bans WHERE userid = %i", userid);
		mysql_tquery(connectionID, queryBuffer);

		new userip[16];
		cache_get_field_content(0, "userip", userip, sizeof(userip));
		RemoveIPBan(userip);

		SendAdminMessage(COLOR_LIGHTRED, "AdmCmd: %s %s has unbanned %s.", GetAdmCmdRank(playerid), GetRPName(playerid), username);
		Log_Write("log_punishments", "%s (uid: %i) has unbanned %s.", GetPlayerNameEx(playerid), PlayerData[playerid][pID], username);
	}
	else
	{
	    SendClientMessage(playerid, COLOR_GREY, "There is no banned player known by that name.");
	}

	return 1;
}

/*

// Old Methode

forward OnAdminUnbanUser(playerid, username[]);
public OnAdminUnbanUser(playerid, username[])
{
	if(cache_get_row_count(connectionID))
	{
	    if(cache_get_row_int(0, 1) == PERMANENT_BAN_DURATION && PlayerData[playerid][pAdmin] < GENERAL_MANAGER)
	    {
	        return SendClientMessage(playerid, COLOR_GREY, "This player is permanently banned. Permabans may only be lifted by management.");
		}

		new userid   = cache_get_field_content_int(0, "userid");

		mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "DELETE FROM users_bans WHERE userid = %i", userid);
		mysql_tquery(connectionID, queryBuffer);

		new userip[16];
		cache_get_row(0, 2, userip);
		RemoveIPBan(userip);

		SendAdminMessage(COLOR_LIGHTRED, "AdmCmd: %s %s has unbanned %s.",GetAdmCmdRank(playerid), GetRPName(playerid), username);
		Log_Write("log_punishments", "%s (uid: %i) has unbanned %s.", GetPlayerNameEx(playerid), PlayerData[playerid][pID], username);
	}
	else
	{
	    SendClientMessage(playerid, COLOR_GREY, "There is no banned player known by that name.");
	}

	return 1;
}

*/

forward OnAdminLockAccount(playerid, username[]);
public OnAdminLockAccount(playerid, username[])
{
    if(!cache_get_row_count(connectionID))
	{
	    SendClientMessage(playerid, COLOR_GREY, "The player specified doesn't exist.");
	}
	else if(cache_get_row_int(0, 0))
	{
	    SendClientMessage(playerid, COLOR_GREY, "This player's account is already locked. /unlockaccount to unlock it.");
	}
	else if(cache_get_row_int(0, 1) > PlayerData[playerid][pAdmin])
	{
	    SendClientMessage(playerid, COLOR_GREY, "The player specified has a higher admin level than you. They cannot be locked.");
	}
	else
	{
	    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET locked = 1 WHERE username = '%e'", username);
	    mysql_tquery(connectionID, queryBuffer);

	    SendAdminMessage(COLOR_LIGHTRED, "AdmCmd: %s %s has locked %s's account.",GetAdmCmdRank(playerid), GetRPName(playerid), username);
	    Log_Write("log_admin", "%s (uid: %i) locked %s's account.", GetPlayerNameEx(playerid), PlayerData[playerid][pID], username);
	}
}

forward OnAdminUnlockAccount(playerid, username[]);
public OnAdminUnlockAccount(playerid, username[])
{
    if(!cache_get_row_count(connectionID))
	{
	    SendClientMessage(playerid, COLOR_GREY, "The player specified doesn't exist, or their account is not locked.");
	}
	else
	{
	    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET locked = 0 WHERE username = '%e'", username);
	    mysql_tquery(connectionID, queryBuffer);

	    SendAdminMessage(COLOR_LIGHTRED, "AdmCmd: %s %s has unlocked %s's account.",GetAdmCmdRank(playerid), GetRPName(playerid), username);
	    Log_Write("log_admin", "%s (uid: %i) unlocked %s's account.", GetPlayerNameEx(playerid), PlayerData[playerid][pID], username);
	}
}

forward OnAdminChangeName(playerid, targetid, name[]);
public OnAdminChangeName(playerid, targetid, name[])
{
	if(cache_get_row_count(connectionID))
	{
	    SendClientMessage(playerid, COLOR_GREY, "The name specified is taken already.");
	}
	else
	{
	    Log_Write("log_admin", "%s (uid: %i) changed %s's (uid: %i) name to %s.", GetPlayerNameEx(playerid), PlayerData[playerid][pID], GetPlayerNameEx(targetid), PlayerData[targetid][pID], name);
		Log_Write("log_namechanges", "%s (uid: %i) changed %s's (uid: %i) name to %s.", GetPlayerNameEx(playerid), PlayerData[playerid][pID], GetPlayerNameEx(targetid), PlayerData[targetid][pID], name);

		mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "INSERT INTO log_namehistory VALUES(null, %i, '%s', '%s', '%s', NOW())", PlayerData[targetid][pID], GetPlayerNameEx(targetid), name, GetPlayerNameEx(playerid));
		mysql_tquery(connectionID, queryBuffer);

		SendAdminMessage(COLOR_LIGHTRED, "AdmCmd: %s %s has changed %s's name to %s.", GetAdmCmdRank(playerid),GetRPName(playerid), GetRPName(targetid), name);
		SendClientMessageEx(targetid, COLOR_WHITE, "%s changed your name from %s to %s.", GetRPName(playerid), GetRPName(targetid), name);

		Namechange(targetid, GetPlayerNameEx(targetid), name);
	}
}

forward OBanCheckPlayer(playerid, username[], duration, reason[]);
public OBanCheckPlayer(playerid, username[], duration, reason[])
{
    if (cache_get_row_count(connectionID))
    {
		if (!IsAdmin(playerid, cache_get_field_content_int(0, "adminlevel") + 1))
		{
			return SendClientMessage(playerid, COLOR_GREY, "The player specified has a higher admin level than you. They cannot be banned.");
		}

		new userid = cache_get_field_content_int(0, "uid");
		new userip[16];
		cache_get_field_content(0, "ip", userip);

		OfflineBan(userid, username, userip, reason, playerid, duration);

		/*LogPlayerPunishment(playerid, userid, userip,
			"BAN", "%s was offline banned by %s %s for %d days. Reason: %s",
			username, GetAdminRank(playerid), GetRPName(playerid), duration, reason);
		*/
		
		SendAdminMessage(COLOR_LIGHTRED,"AdmCmd: %s (IP: %s) was offline banned by %s %s. Reason: %s",username, userip, GetAdmCmdRank(playerid), GetPlayerNameEx(playerid), reason);
	}
	else 
	{
		SendClientMessage(playerid, COLOR_GREY, "That player is not registered.");
	}

    return 1;
}

/*publish OnAdminOfflineBan(playerid, username[], duration, reason[])
{
    if(cache_get_row_count(connectionID))
	{
	    if(cache_get_row_int(0, 0) > PlayerData[playerid][pAdmin])
	    {
			return SendClientMessage(playerid, COLOR_GREY, "The player specified has a higher admin level than you. They cannot be banned.");
		}

		new ip[16];
		cache_get_row(0, 1, ip);

        OfflineBan(username, ip, reason, playerid, duration);

    	mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "INSERT INTO log_bans VALUES(null, %i, NOW(), '%s (IP: %s) was banned by %s, reason: %e')", cache_get_field_content_int(0, "uid"), username, userip, GetPlayerNameEx(playerid), reason);
		mysql_tquery(connectionID, queryBuffer);

        SendAdminMessage(COLOR_LIGHTRED, "AdmCmd: %s was offline banned by %s %s, reason: %s", username, GetAdmCmdRank(playerid), GetPlayerNameEx(playerid), reason);
        Log_Write("log_punishments", "%s (uid: %i) offline banned %s, reason: %s", GetPlayerNameEx(playerid), PlayerData[playerid][pID], username, reason);
	}
	else
	{
	    SendClientMessage(playerid, COLOR_GREY, "That player is not registered.");
	}

	return 1;
}*/

forward OnAdminOfflinePrison(playerid, username[], minutes, reason[]);
public OnAdminOfflinePrison(playerid, username[], minutes, reason[])
{
	if(cache_get_row_count(connectionID))
	{
	    if(cache_get_row_int(0, 0) > PlayerData[playerid][pAdmin])
	    {
			return SendClientMessage(playerid, COLOR_GREY, "The player specified has a higher admin level than you. They cannot be prisoned.");
		}

	    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET jailtype = 2, jailtime = %i, prisonedby = '%e', prisonreason = '%e' WHERE username = '%e'", minutes * 60, GetPlayerNameEx(playerid), reason, username);
	    mysql_tquery(connectionID, queryBuffer);

		SendAdminMessage(COLOR_LIGHTRED, "AdmCmd: %s was offline prisoned for %i minutes by %s %s, reason: %s", username, minutes, GetAdmCmdRank(playerid), GetRPName(playerid), reason);
		Log_Write("log_punishments", "%s (uid: %i) offline prisoned %s for %i minutes, reason: %s", GetPlayerNameEx(playerid), PlayerData[playerid][pID], username, minutes, reason);
	}
	else
	{
	    SendClientMessage(playerid, COLOR_GREY, "That player is not registered.");
	}

	return 1;
}

forward OnAdminOfflineFine(playerid, username[], amount, reason[]);
public OnAdminOfflineFine(playerid, username[], amount, reason[])
{
	if(cache_get_row_count(connectionID))
	{
	    if(cache_get_row_int(0, 0) > PlayerData[playerid][pAdmin])
	    {
			return SendClientMessage(playerid, COLOR_GREY, "The player specified has a higher admin level than you. They cannot be fined.");
		}

	    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET cash = cash - %i WHERE username = '%e'", amount, username);
	    mysql_tquery(connectionID, queryBuffer);

		SendAdminMessage(COLOR_LIGHTRED, "AdmCmd: %s was offline fined for %s by %s %s, reason: %s", username, FormatCash(amount), GetAdmCmdRank(playerid),GetRPName(playerid), reason);
        Log_Write("log_admin", "%s (uid: %i) offline fined %s for $%i, reason: %s", GetPlayerNameEx(playerid), PlayerData[playerid][pID], username, amount, reason);
	}
	else
	{
	    SendClientMessage(playerid, COLOR_GREY, "That player is not registered.");
	}

	return 1;
}


public OnQueryError(errorid, error[], callback[], query[], connectionHandle)
{    
	new
	    File:file = fopen("mysql_error.txt", io_append);

	if(file)
	{
	    new
	        string[2048];

		format(string, sizeof(string), "[%s]\r\nError ID: %i\r\nCallback: %s\r\nQuery: %s\r\nError: %s\r\n\r\n", GetDateTime(), errorid, callback, query, error);
		fwrite(file, string);
		printf(string);
		fclose(file);
	}

	SendAdminMessage(COLOR_LIGHTRED, "AdmCmd: A MySQL error occurred (error %i). Details written to mysql_error.txt.", errorid);

	return 1;
}


forward OnQueryFinished(threadid, extraid);
public OnQueryFinished(threadid, extraid)
{
	new rows = cache_get_row_count(connectionID);

	switch(threadid)
	{
	    case THREAD_COUNT_FLAGS:
	    {
	        if(rows)
	        {
				SendAdminMessage(COLOR_YELLOW, "AdmWarning: %s[%i] has %i pending flags. (/listflags %i)", GetRPName(extraid), extraid, rows, extraid);
			}
		}
		case THREAD_LIST_CHANGES:
		{
		    new text[128];

		    SendClientMessage(extraid, COLOR_NAVYBLUE, "________ Changes List ________");

		    for(new i = 0; i < rows; i ++)
			{
			    cache_get_field_content(i, "text", text);
			    SendClientMessageEx(extraid, COLOR_GREY1, "Slot %i -> %s", cache_get_field_content_int(i, "slot"), text);
			}
		}
		case THREAD_LIST_HELPERS:
		{
		    new username[MAX_PLAYER_NAME], lastlogin[24];

		    SendClientMessage(extraid, COLOR_NAVYBLUE, "_______ Helper Roster _______");

		    for(new i = 0; i < rows; i ++)
		    {
		        cache_get_field_content(i, "username", username);
		        cache_get_field_content(i, "lastlogin", lastlogin);

		        switch(cache_get_field_content_int(i, "helperlevel"))
				{
					case 1: SendClientMessageEx(extraid, COLOR_GREY2, "Junior Helper %s - Last Seen: %s", username, lastlogin);
					case 2: SendClientMessageEx(extraid, COLOR_GREY2, "Senior Helper %s - Last Seen: %s", username, lastlogin);
					case 3: SendClientMessageEx(extraid, COLOR_GREY2, "Ast. Head Helper %s - Last Seen: %s", username, lastlogin);
					case 4: SendClientMessageEx(extraid, COLOR_GREY2, "Head Helper %s - Last Seen: %s", username, lastlogin);
				}
		    }
		}
		case THREAD_LOAD_HOUSES:
		{
		    for(new i = 0; i < rows && i < MAX_HOUSES; i ++)
		    {
		        cache_get_field_content(i, "owner", HouseInfo[i][hOwner], connectionID, MAX_PLAYER_NAME);

		        HouseInfo[i][hID] = cache_get_field_content_int(i, "id");
		        HouseInfo[i][hOwnerID] = cache_get_field_content_int(i, "ownerid");
		        HouseInfo[i][hType] = cache_get_field_content_int(i, "type");
		        HouseInfo[i][hPrice] = cache_get_field_content_int(i, "price");
		        HouseInfo[i][hRentPrice] = cache_get_field_content_int(i, "rentprice");
		        HouseInfo[i][hLevel] = cache_get_field_content_int(i, "level");
		        HouseInfo[i][hLocked] = cache_get_field_content_int(i, "locked");
		        HouseInfo[i][hTimestamp] = cache_get_field_content_int(i, "timestamp");
		        HouseInfo[i][hPosX] = cache_get_field_content_float(i, "pos_x");
		        HouseInfo[i][hPosY] = cache_get_field_content_float(i, "pos_y");
		        HouseInfo[i][hPosZ] = cache_get_field_content_float(i, "pos_z");
		        HouseInfo[i][hPosA] = cache_get_field_content_float(i, "pos_a");
                HouseInfo[i][hIntX] = cache_get_field_content_float(i, "int_x");
		        HouseInfo[i][hIntY] = cache_get_field_content_float(i, "int_y");
		        HouseInfo[i][hIntZ] = cache_get_field_content_float(i, "int_z");
		        HouseInfo[i][hIntA] = cache_get_field_content_float(i, "int_a");
		        HouseInfo[i][hInterior] = cache_get_field_content_int(i, "interior");
		        HouseInfo[i][hWorld] = cache_get_field_content_int(i, "world");
		        HouseInfo[i][hOutsideInt] = cache_get_field_content_int(i, "outsideint");
		        HouseInfo[i][hOutsideVW] = cache_get_field_content_int(i, "outsidevw");
		        HouseInfo[i][hCash] = cache_get_field_content_int(i, "cash");
		        HouseInfo[i][hMaterials] = cache_get_field_content_int(i, "materials");
                HouseInfo[i][hWeed] = cache_get_field_content_int(i, "weed");
                HouseInfo[i][hCocaine] = cache_get_field_content_int(i, "cocaine");
                HouseInfo[i][hHeroin] = cache_get_field_content_int(i, "heroin");
                HouseInfo[i][hPainkillers] = cache_get_field_content_int(i, "painkillers");
                HouseInfo[i][hWeapons][0] = cache_get_field_content_int(i, "weapon_1");
                HouseInfo[i][hWeapons][1] = cache_get_field_content_int(i, "weapon_2");
                HouseInfo[i][hWeapons][2] = cache_get_field_content_int(i, "weapon_3");
                HouseInfo[i][hWeapons][3] = cache_get_field_content_int(i, "weapon_4");
                HouseInfo[i][hWeapons][4] = cache_get_field_content_int(i, "weapon_5");
                HouseInfo[i][hWeapons][5] = cache_get_field_content_int(i, "weapon_6");
                HouseInfo[i][hWeapons][6] = cache_get_field_content_int(i, "weapon_7");
                HouseInfo[i][hWeapons][7] = cache_get_field_content_int(i, "weapon_8");
                HouseInfo[i][hWeapons][8] = cache_get_field_content_int(i, "weapon_9");
                HouseInfo[i][hWeapons][9] = cache_get_field_content_int(i, "weapon_10");
                HouseInfo[i][hDelivery] = cache_get_field_content_int(i, "delivery");
                HouseInfo[i][hLights] = cache_get_field_content_int(i, "lights");
                HouseInfo[i][hAlarm] = cache_get_field_content_int(i, "alarm");
                HouseInfo[i][hText] = Text3D:INVALID_3DTEXT_ID;
                HouseInfo[i][hPickup] = -1;
                HouseInfo[i][hLabels] = 0;
                HouseInfo[i][hExists] = 1;
                Iter_Add(House, i);
                ReloadHouse(i);
		    }

		    printf("[Script] %i houses loaded.", rows);
		}
		case THREAD_LIST_TENANTS:
		{
		    if(!rows)
		    {
		        SendClientMessage(extraid, COLOR_GREY, "There is nobody currently renting at your home.");
			}
			else
			{
			    new username[MAX_PLAYER_NAME], date[24];

				SendClientMessage(extraid, COLOR_NAVYBLUE, "_______ List of Tenants _______");

			    for(new i = 0; i < rows; i ++)
			    {
			        cache_get_field_content(i, "username", username);
			        cache_get_field_content(i, "lastlogin", date);

			        SendClientMessageEx(extraid, COLOR_GREY2, "Name: %s - Last Seen: %s", username, date);
				}
			}
		}
		case THREAD_LOAD_FURNITURE:
		{

		}
		case THREAD_LOAD_GARAGES:
		{
		    for(new i = 0; i < rows && i < MAX_GARAGES; i ++)
		    {
		        cache_get_field_content(i, "owner", GarageInfo[i][gOwner], connectionID, MAX_PLAYER_NAME);

		        GarageInfo[i][gID] = cache_get_field_content_int(i, "id");
		        GarageInfo[i][gOwnerID] = cache_get_field_content_int(i, "ownerid");
		        GarageInfo[i][gType] = cache_get_field_content_int(i, "type");
		        GarageInfo[i][gPrice] = cache_get_field_content_int(i, "price");
		        GarageInfo[i][gLocked] = cache_get_field_content_int(i, "locked");
		        GarageInfo[i][gTimestamp] = cache_get_field_content_int(i, "timestamp");
		        GarageInfo[i][gPosX] = cache_get_field_content_float(i, "pos_x");
		        GarageInfo[i][gPosY] = cache_get_field_content_float(i, "pos_y");
		        GarageInfo[i][gPosZ] = cache_get_field_content_float(i, "pos_z");
		        GarageInfo[i][gPosA] = cache_get_field_content_float(i, "pos_a");
		        GarageInfo[i][gExitX] = cache_get_field_content_float(i, "exit_x");
		        GarageInfo[i][gExitY] = cache_get_field_content_float(i, "exit_y");
		        GarageInfo[i][gExitZ] = cache_get_field_content_float(i, "exit_z");
		        GarageInfo[i][gExitA] = cache_get_field_content_float(i, "exit_a");
		        GarageInfo[i][gWorld] = cache_get_field_content_int(i, "world");
		        GarageInfo[i][gText] = Text3D:INVALID_3DTEXT_ID;
		        GarageInfo[i][gPickup] = -1;
		        GarageInfo[i][gExists] = 1;
		        Iter_Add(Garage, i);

				ReloadGarage(i);
		    }

		    printf("[Script] %i garages loaded.", rows);
		}
        case THREAD_LOAD_BUSINESSES:
		{
		    for(new i = 0; i < rows && i < MAX_BUSINESSES; i ++)
		    {
		        cache_get_field_content(i, "owner", BusinessInfo[i][bOwner], connectionID, MAX_PLAYER_NAME);			    
				cache_get_field_content(i, "name", 	BusinessInfo[i][bName], connectionID, MAX_BUSINESSES_NAME);	
				cache_get_field_content(i, "message", 	BusinessInfo[i][bMessage], connectionID, 128);	
		        
		        BusinessInfo[i][bID] = cache_get_field_content_int(i, "id");
		        BusinessInfo[i][bOwnerID] = cache_get_field_content_int(i, "ownerid");
		        BusinessInfo[i][bType] = cache_get_field_content_int(i, "type");
				BusinessInfo[i][bDealerShipType] = cache_get_field_content_int(i, "dealershiptype");
		        BusinessInfo[i][bPrice] = cache_get_field_content_int(i, "price");
		        BusinessInfo[i][bEntryFee] = cache_get_field_content_int(i, "entryfee");
		        BusinessInfo[i][bLocked] = cache_get_field_content_int(i, "locked");
		        BusinessInfo[i][bTimestamp] = cache_get_field_content_int(i, "timestamp");
		        BusinessInfo[i][bPosX] = cache_get_field_content_float(i, "pos_x");
		        BusinessInfo[i][bPosY] = cache_get_field_content_float(i, "pos_y");
		        BusinessInfo[i][bPosZ] = cache_get_field_content_float(i, "pos_z");
		        BusinessInfo[i][bPosA] = cache_get_field_content_float(i, "pos_a");
                BusinessInfo[i][bIntX] = cache_get_field_content_float(i, "int_x");
		        BusinessInfo[i][bIntY] = cache_get_field_content_float(i, "int_y");
		        BusinessInfo[i][bIntZ] = cache_get_field_content_float(i, "int_z");
		        BusinessInfo[i][bIntA] = cache_get_field_content_float(i, "int_a");
			    BusinessInfo[i][cVehicle][0] = cache_get_field_content_float(i, "cVehicleX");
			    BusinessInfo[i][cVehicle][1] = cache_get_field_content_float(i, "cVehicleY");
			    BusinessInfo[i][cVehicle][2] = cache_get_field_content_float(i, "cVehicleZ");
			    BusinessInfo[i][cVehicle][3] = cache_get_field_content_float(i, "cVehicleA");
		        BusinessInfo[i][bInterior] = cache_get_field_content_int(i, "interior");
		        BusinessInfo[i][bWorld] = cache_get_field_content_int(i, "world");
		        BusinessInfo[i][bOutsideInt] = cache_get_field_content_int(i, "outsideint");
		        BusinessInfo[i][bOutsideVW] = cache_get_field_content_int(i, "outsidevw");
		        BusinessInfo[i][bCash] = cache_get_field_content_int(i, "cash");
                BusinessInfo[i][bProducts] = cache_get_field_content_int(i, "products");
                BusinessInfo[i][bMaterials] = cache_get_field_content_int(i, "materials");
				BusinessInfo[i][bDisplayMapIcon] = cache_get_field_content_int(i, "displaymapicon");
                BusinessInfo[i][bText] = Text3D:INVALID_3DTEXT_ID;
                BusinessInfo[i][bPickup] = -1;
                BusinessInfo[i][bMapIcon] = -1;
                BusinessInfo[i][bExists] = 1;
                Iter_Add(Business, i);

                ReloadBusiness(i);
		    }

		    printf("[Script] %i businesses loaded.", rows);
		}
		case THREAD_LOAD_ENTRANCES:
		{
		    for(new i = 0; i < rows && i < MAX_ENTRANCES; i ++)
		    {
		        cache_get_field_content(i, "owner", EntranceInfo[i][eOwner], connectionID, MAX_PLAYER_NAME);
		        cache_get_field_content(i, "name", EntranceInfo[i][eName], connectionID, 40);
		        cache_get_field_content(i, "password", EntranceInfo[i][ePassword], connectionID, 64);

				EntranceInfo[i][eID] = cache_get_field_content_int(i, "id");
				EntranceInfo[i][eOwnerID] = cache_get_field_content_int(i, "ownerid");
				EntranceInfo[i][eIcon] = cache_get_field_content_int(i, "iconid");
                EntranceInfo[i][eLocked] = cache_get_field_content_int(i, "locked");
                EntranceInfo[i][eRadius] = cache_get_field_content_float(i, "radius");
                EntranceInfo[i][ePosX] = cache_get_field_content_float(i, "pos_x");
                EntranceInfo[i][ePosY] = cache_get_field_content_float(i, "pos_y");
                EntranceInfo[i][ePosZ] = cache_get_field_content_float(i, "pos_z");
                EntranceInfo[i][ePosA] = cache_get_field_content_float(i, "pos_a");
                EntranceInfo[i][eIntX] = cache_get_field_content_float(i, "int_x");
                EntranceInfo[i][eIntY] = cache_get_field_content_float(i, "int_y");
                EntranceInfo[i][eIntZ] = cache_get_field_content_float(i, "int_z");
                EntranceInfo[i][eIntA] = cache_get_field_content_float(i, "int_a");
                EntranceInfo[i][eInterior] = cache_get_field_content_int(i, "interior");
                EntranceInfo[i][eWorld] = cache_get_field_content_int(i, "world");
                EntranceInfo[i][eOutsideInt] = cache_get_field_content_int(i, "outsideint");
                EntranceInfo[i][eOutsideVW] = cache_get_field_content_int(i, "outsidevw");
                EntranceInfo[i][eAdminLevel] = cache_get_field_content_int(i, "adminlevel");
                EntranceInfo[i][eFaction] = cache_get_field_content_int(i, "faction");
                EntranceInfo[i][eGang] = cache_get_field_content_int(i, "gang");
                EntranceInfo[i][eVIP] = cache_get_field_content_int(i, "vip");
                EntranceInfo[i][eVehicles] = cache_get_field_content_int(i, "vehicles");
                EntranceInfo[i][eFreeze] = cache_get_field_content_int(i, "freeze");
                EntranceInfo[i][eLabel] = cache_get_field_content_int(i, "label");
                EntranceInfo[i][eType] = cache_get_field_content_int(i, "type");
                EntranceInfo[i][eMapIcon] = cache_get_field_content_int(i, "mapicon");
                EntranceInfo[i][eColor] = cache_get_field_content_int(i, "color");
                EntranceInfo[i][eText] = Text3D:INVALID_3DTEXT_ID;
                EntranceInfo[i][ePickup] = -1;
                EntranceInfo[i][eMapIconID] = -1;
                EntranceInfo[i][eExists] = 1;
                Iter_Add(Entrance, i);

                ReloadEntrance(i);
			}

			printf("[Script] %i entrances loaded.", rows);
		}
		case THREAD_LOAD_FACTIONS:
		{
		    for(new i = 0; i < rows && i < MAX_FACTIONS; i ++)
		    {
		        new factionid = cache_get_field_content_int(i, "id");

		        cache_get_field_content(i, "name", FactionInfo[factionid][fName], connectionID, 48);
		        cache_get_field_content(i, "shortname", FactionInfo[factionid][fShortName], connectionID, 24);
		        cache_get_field_content(i, "motd", FactionInfo[factionid][fMOTD], connectionID, 128);
		        cache_get_field_content(i, "leader", FactionInfo[factionid][fLeader], connectionID, MAX_PLAYER_NAME);

		        FactionInfo[factionid][fType] = cache_get_field_content_int(i, "type");
		        FactionInfo[factionid][fColor] = cache_get_field_content_int(i, "color");
		        FactionInfo[factionid][fRankCount] = cache_get_field_content_int(i, "rankcount");
		        FactionInfo[factionid][fTurfTokens] = cache_get_field_content_int(i, "turftokens");
		        FactionInfo[factionid][fBudget] = cache_get_field_content_int(i, "budget");
                FactionInfo[factionid][fText] = Text3D:INVALID_3DTEXT_ID;
                FactionInfo[factionid][fPickup] = -1;
		    }

		    printf("[Script] %i factions loaded.", rows);
		}
		case THREAD_LOAD_FACTIONRANKS:
		{
		    for(new i = 0; i < MAX_FACTIONS; i ++)
	    	{
		        for(new r = 0; r < MAX_FACTION_RANKS; r ++)
		        {
		            strcpy(FactionRanks[i][r], "Unspecified", 32);
		        }
		    }

		    for(new i = 0; i < rows; i ++)
		    {
		        cache_get_field_content(i, "name", FactionRanks[cache_get_field_content_int(i, "id")][cache_get_field_content_int(i, "rank")], connectionID, 32);
      		}
		}
        case THREAD_LOAD_FACTIONSKINS:
		{
		    for(new i = 0; i < rows; i ++)
		    {
				FactionInfo[cache_get_field_content_int(i, "id")][fSkins][cache_get_field_content_int(i, "slot")] = cache_get_field_content_int(i, "skinid");
		    }
		}
		case THREAD_LOAD_FACTIONPAY:
		{
		    for(new i = 0; i < rows; i ++)
		    {
				FactionInfo[cache_get_field_content_int(i, "id")][fPaycheck][cache_get_field_content_int(i, "rank")] = cache_get_field_content_int(i, "amount");
		    }
		}
		case THREAD_LOAD_DIVISIONS:
		{
		    for(new i = 0; i < MAX_FACTIONS; i ++)
	    	{
		        for(new r = 0; r < MAX_FACTION_DIVISIONS; r ++)
		        {
		            FactionDivisions[i][r][0] = 0;
		        }
		    }

		    for(new i = 0; i < rows; i ++)
		    {
		        cache_get_field_content(i, "name", FactionDivisions[cache_get_field_content_int(i, "id")][cache_get_field_content_int(i, "divisionid")], connectionID, 32);
      		}
		}
		case THREAD_LOAD_LANDS:
		{
		    for(new i = 0; i < rows && i < MAX_LANDS; i ++)
		    {
		        cache_get_field_content(i, "owner", LandInfo[i][lOwner], connectionID, MAX_PLAYER_NAME);

		        LandInfo[i][lID] = cache_get_field_content_int(i, "id");
		        LandInfo[i][lOwnerID] = cache_get_field_content_int(i, "ownerid");
		        LandInfo[i][lLevel] = cache_get_field_content_int(i, "level");
		        LandInfo[i][lPrice] = cache_get_field_content_int(i, "price");
		        LandInfo[i][lMinX] = cache_get_field_content_float(i, "min_x");
		        LandInfo[i][lMinY] = cache_get_field_content_float(i, "min_y");
		        LandInfo[i][lMaxX] = cache_get_field_content_float(i, "max_x");
		        LandInfo[i][lMaxY] = cache_get_field_content_float(i, "max_y");
		        LandInfo[i][lHeightX] = cache_get_field_content_float(i, "heightx");
		        LandInfo[i][lHeightY] = cache_get_field_content_float(i, "heighty");
		        LandInfo[i][lHeightZ] = cache_get_field_content_float(i, "heightz");
				LandInfo[i][lSeized] = cache_get_field_content_int(i, "seized");
		        LandInfo[i][lGangZone] = -1;
		        LandInfo[i][lArea] = -1;
		        LandInfo[i][lLabels] = 0;
				
		        //LandInfo[i][lTextdraw];
		        LandInfo[i][lExists] = 1;
		        Iter_Add(Land, i);

		        ReloadLand(i);
			}

			printf("[Script] %i lands loaded.", rows);
		}
		case THREAD_LOAD_LANDOBJECTS:
		{
			new lastlandid = -1;
			new lastsqlid = -1;
			
		    for(new i = 0; i < rows; i ++)
		    {
				new sqlid = cache_get_field_content_int(i, "landid");
				if(sqlid != lastsqlid)
				{
					lastlandid = GetLandId(sqlid);
					lastsqlid = sqlid;
				}
		        new objectid;
				if(lastlandid >= 0 && LandInfo[lastlandid][lSeized])
				{
					objectid = CreateDynamicObject(cache_get_field_content_int(i, "modelid"), cache_get_field_content_float(i, "pos_x"), cache_get_field_content_float(i, "pos_y"), cache_get_field_content_float(i, "pos_z"), cache_get_field_content_float(i, "rot_x"), cache_get_field_content_float(i, "rot_y"), cache_get_field_content_float(i, "rot_z"), SEIZED_LAND_VW);
				}
				else
				{
					objectid = CreateDynamicObject(cache_get_field_content_int(i, "modelid"), cache_get_field_content_float(i, "pos_x"), cache_get_field_content_float(i, "pos_y"), cache_get_field_content_float(i, "pos_z"), cache_get_field_content_float(i, "rot_x"), cache_get_field_content_float(i, "rot_y"), cache_get_field_content_float(i, "rot_z"));
				}

				Streamer_SetExtraInt(objectid, E_OBJECT_TYPE, E_OBJECT_LAND);
				Streamer_SetExtraInt(objectid, E_OBJECT_INDEX_ID, cache_get_field_content_int(i, "id"));
				Streamer_SetExtraInt(objectid, E_OBJECT_EXTRA_ID, cache_get_field_content_int(i, "landid"));
				Streamer_SetExtraFloat(objectid, E_OBJECT_X, cache_get_field_content_float(i, "pos_x"));
                Streamer_SetExtraFloat(objectid, E_OBJECT_Y, cache_get_field_content_float(i, "pos_y"));
                Streamer_SetExtraFloat(objectid, E_OBJECT_Z, cache_get_field_content_float(i, "pos_z"));

				if(extraid)
				{
				    new
				        string[48];

				    cache_get_field_content(i, "name", string);

					format(string, sizeof(string), "[%i] - %s", objectid, string);
					Streamer_SetExtraInt(objectid, E_OBJECT_3DTEXT_ID, _:CreateDynamic3DTextLabel(string, COLOR_GREY2, cache_get_field_content_float(i, "pos_x"), cache_get_field_content_float(i, "pos_y"), cache_get_field_content_float(i, "pos_z"), 10.0));
				}
			}
		}
		case THREAD_LOAD_GANGS:
		{
		    for(new i = 0; i < rows && i < MAX_GANGS; i ++)
		    {
		        new gangid = cache_get_field_content_int(i, "id");

		        cache_get_field_content(i, "name", GangInfo[gangid][gName], connectionID, 32);
		        cache_get_field_content(i, "motd", GangInfo[gangid][gMOTD], connectionID, 128);
		        cache_get_field_content(i, "leader", GangInfo[gangid][gLeader], connectionID, MAX_PLAYER_NAME);

				GangInfo[gangid][gIsMafia] = cache_get_field_content_int(i, "is_mafia");
		        GangInfo[gangid][gLeaderUID] = cache_get_field_content_int(i, "leaderid");
		        GangInfo[gangid][gCount] = cache_get_field_content_int(i, "count");
		        GangInfo[gangid][gColor] = cache_get_field_content_int(i, "color");
		        GangInfo[gangid][gStrikes] = cache_get_field_content_int(i, "strikes");
		        GangInfo[gangid][gLevel] = cache_get_field_content_int(i, "level");
		        GangInfo[gangid][gPoints] = cache_get_field_content_int(i, "points");
		        GangInfo[gangid][gTurfTokens] = cache_get_field_content_int(i, "turftokens");
		        GangInfo[gangid][gStashX] = cache_get_field_content_float(i, "stash_x");
		        GangInfo[gangid][gStashY] = cache_get_field_content_float(i, "stash_y");
		        GangInfo[gangid][gStashZ] = cache_get_field_content_float(i, "stash_z");
		        GangInfo[gangid][gStashInterior] = cache_get_field_content_int(i, "stashinterior");
		        GangInfo[gangid][gStashWorld] = cache_get_field_content_int(i, "stashworld");
		        GangInfo[gangid][gCash] = cache_get_field_content_int(i, "cash");
		        GangInfo[gangid][gMaterials] = cache_get_field_content_int(i, "materials");
		        GangInfo[gangid][gWeed] = cache_get_field_content_int(i, "weed");
		        GangInfo[gangid][gCocaine] = cache_get_field_content_int(i, "cocaine");
		        GangInfo[gangid][gHeroin] = cache_get_field_content_int(i, "heroin");
		        GangInfo[gangid][gPainkillers] = cache_get_field_content_int(i, "painkillers");
		        GangInfo[gangid][gAlliance] = cache_get_field_content_int (i, "alliance");
				GangInfo[gangid][gMatLevel] = cache_get_field_content_int (i, "matlevel");
				GangInfo[gangid][gGunLevel] = cache_get_field_content_int (i, "gunlevel");
				GangInfo[gangid][gRankingPoints] = cache_get_field_content_int (i, "rankingpoints");

				// Gang stash weapons
		        GangInfo[gangid][gWeapons][GANGWEAPON_9MM] = cache_get_field_content_int(i, "weapon_9mm");
		        GangInfo[gangid][gWeapons][GANGWEAPON_SDPISTOL] = cache_get_field_content_int(i, "weapon_sdpistol");
		        GangInfo[gangid][gWeapons][GANGWEAPON_DEAGLE] = cache_get_field_content_int(i, "weapon_deagle");
		        GangInfo[gangid][gWeapons][GANGWEAPON_SHOTGUN] = cache_get_field_content_int(i, "weapon_shotgun");
		        GangInfo[gangid][gWeapons][GANGWEAPON_SPAS12] = cache_get_field_content_int(i, "weapon_spas12");
		    //    GangInfo[gangid][gWeapons][GANGWEAPON_SAWNOFF] = cache_get_field_content_int(i, "weapon_sawnoff");
		        GangInfo[gangid][gWeapons][GANGWEAPON_TEC9] = cache_get_field_content_int(i, "weapon_tec9");
		        GangInfo[gangid][gWeapons][GANGWEAPON_UZI] = cache_get_field_content_int(i, "weapon_uzi");
		        GangInfo[gangid][gWeapons][GANGWEAPON_MP5] = cache_get_field_content_int(i, "weapon_mp5");
		        GangInfo[gangid][gWeapons][GANGWEAPON_AK47] = cache_get_field_content_int(i, "weapon_ak47");
		        GangInfo[gangid][gWeapons][GANGWEAPON_M4] = cache_get_field_content_int(i, "weapon_m4");
		        GangInfo[gangid][gWeapons][GANGWEAPON_RIFLE] = cache_get_field_content_int(i, "weapon_rifle");
		        GangInfo[gangid][gWeapons][GANGWEAPON_SNIPER] = cache_get_field_content_int(i, "weapon_sniper");
		      //  GangInfo[gangid][gWeapons][GANGWEAPON_MOLOTOV] = cache_get_field_content_int(i, "weapon_molotov");

		        // Gang stash weapon ranks (01/07/2017)
		        GangInfo[gangid][gWeaponRanks][GANGWEAPON_9MM] = cache_get_field_content_int(i, "rank_9mm");
		        GangInfo[gangid][gWeaponRanks][GANGWEAPON_SDPISTOL] = cache_get_field_content_int(i, "rank_sdpistol");
		        GangInfo[gangid][gWeaponRanks][GANGWEAPON_DEAGLE] = cache_get_field_content_int(i, "rank_deagle");
		        GangInfo[gangid][gWeaponRanks][GANGWEAPON_SHOTGUN] = cache_get_field_content_int(i, "rank_shotgun");
		        GangInfo[gangid][gWeaponRanks][GANGWEAPON_SPAS12] = cache_get_field_content_int(i, "rank_spas12");
		       // GangInfo[gangid][gWeaponRanks][GANGWEAPON_SAWNOFF] = cache_get_field_content_int(i, "rank_sawnoff");
		        GangInfo[gangid][gWeaponRanks][GANGWEAPON_TEC9] = cache_get_field_content_int(i, "rank_tec9");
		        GangInfo[gangid][gWeaponRanks][GANGWEAPON_UZI] = cache_get_field_content_int(i, "rank_uzi");
		        GangInfo[gangid][gWeaponRanks][GANGWEAPON_MP5] = cache_get_field_content_int(i, "rank_mp5");
		        GangInfo[gangid][gWeaponRanks][GANGWEAPON_AK47] = cache_get_field_content_int(i, "rank_ak47");
		        GangInfo[gangid][gWeaponRanks][GANGWEAPON_M4] = cache_get_field_content_int(i, "rank_m4");
		        GangInfo[gangid][gWeaponRanks][GANGWEAPON_RIFLE] = cache_get_field_content_int(i, "rank_rifle");
		        GangInfo[gangid][gWeaponRanks][GANGWEAPON_SNIPER] = cache_get_field_content_int(i, "rank_sniper");
		   //     GangInfo[gangid][gWeaponRanks][GANGWEAPON_MOLOTOV] = cache_get_field_content_int(i, "rank_molotov");
				GangInfo[gangid][gVestRank] = cache_get_field_content_int(i, "rank_vest");

				// Gang arms & drug dealer
		        GangInfo[gangid][gArmsDealer] = cache_get_field_content_int(i, "armsdealer");
		        GangInfo[gangid][gDrugDealer] = cache_get_field_content_int(i, "drugdealer");
		        GangInfo[gangid][gArmsX] = cache_get_field_content_float(i, "arms_x");
		        GangInfo[gangid][gArmsY] = cache_get_field_content_float(i, "arms_y");
		        GangInfo[gangid][gArmsZ] = cache_get_field_content_float(i, "arms_z");
		        GangInfo[gangid][gArmsA] = cache_get_field_content_float(i, "arms_a");
		        GangInfo[gangid][gDrugX] = cache_get_field_content_float(i, "drug_x");
		        GangInfo[gangid][gDrugY] = cache_get_field_content_float(i, "drug_y");
		        GangInfo[gangid][gDrugZ] = cache_get_field_content_float(i, "drug_z");
		        GangInfo[gangid][gDrugA] = cache_get_field_content_float(i, "drug_a");
		        GangInfo[gangid][gArmsWorld] = cache_get_field_content_int(i, "armsworld");
		        GangInfo[gangid][gDrugWorld] = cache_get_field_content_int(i, "drugworld");
                GangInfo[gangid][gDrugWeed] = cache_get_field_content_int(i, "drugweed");
                GangInfo[gangid][gDrugCocaine] = cache_get_field_content_int(i, "drugcocaine");
                GangInfo[gangid][gDrugHeroin] = cache_get_field_content_int(i, "drugHeroin");
                GangInfo[gangid][gArmsMaterials] = cache_get_field_content_int(i, "armsmaterials");
                GangInfo[gangid][gArmsPrices][0] = cache_get_field_content_int(i, "armsprice_1");
                GangInfo[gangid][gArmsPrices][1] = cache_get_field_content_int(i, "armsprice_2");
                GangInfo[gangid][gArmsPrices][2] = cache_get_field_content_int(i, "armsprice_3");
                GangInfo[gangid][gArmsPrices][3] = cache_get_field_content_int(i, "armsprice_4");
                GangInfo[gangid][gArmsPrices][4] = cache_get_field_content_int(i, "armsprice_5");
                GangInfo[gangid][gArmsPrices][5] = cache_get_field_content_int(i, "armsprice_6");
                GangInfo[gangid][gArmsPrices][6] = cache_get_field_content_int(i, "armsprice_7");
                GangInfo[gangid][gArmsPrices][7] = cache_get_field_content_int(i, "armsprice_8");
                GangInfo[gangid][gArmsPrices][8] = cache_get_field_content_int(i, "armsprice_9");
                GangInfo[gangid][gArmsPrices][9] = cache_get_field_content_int(i, "armsprice_10");
                GangInfo[gangid][gArmsPrices][10] = cache_get_field_content_int(i, "armsprice_11");
                GangInfo[gangid][gArmsPrices][11] = cache_get_field_content_int(i, "armsprice_12");
                GangInfo[gangid][gDrugPrices][0] = cache_get_field_content_int(i, "weed_price");
                GangInfo[gangid][gDrugPrices][1] = cache_get_field_content_int(i, "cocaine_price");
                GangInfo[gangid][gDrugPrices][2] = cache_get_field_content_int(i, "heroin_price");

		        GangInfo[gangid][gText][0] = Text3D:INVALID_3DTEXT_ID;
		        GangInfo[gangid][gText][1] = Text3D:INVALID_3DTEXT_ID;
		        GangInfo[gangid][gText][2] = Text3D:INVALID_3DTEXT_ID;
		        GangInfo[gangid][gActors][0] = INVALID_ACTOR_ID;
    			GangInfo[gangid][gActors][1] = INVALID_ACTOR_ID;
		        GangInfo[gangid][gPickup] = -1;
		        GangInfo[gangid][gSetup] = 1;


				ReloadGang(gangid);
			}

			printf("[Script] %i gangs loaded.", rows);
		}
		case THREAD_LOAD_GANGRANKS:
		{
		    for(new i = 0; i < MAX_GANGS; i ++)
	    	{
		        for(new r = 0; r < 7; r ++)
		        {
		            strcpy(GangRanks[i][r], "Unspecified", 32);
		        }
		    }

		    for(new i = 0; i < rows; i ++)
		    {
		        cache_get_field_content(i, "name", GangRanks[cache_get_field_content_int(i, "id")][cache_get_field_content_int(i, "rank")], connectionID, 32);
      		}
		}
        case THREAD_LOAD_GANGSKINS:
		{
		    for(new i = 0; i < rows; i ++)
		    {
				GangInfo[cache_get_field_content_int(i, "id")][gSkins][cache_get_field_content_int(i, "slot")] = cache_get_field_content_int(i, "skinid");
		    }
		}
		case THREAD_LOAD_LOCKERS:
		{
		    for(new i = 0; i < rows && i < MAX_LOCKERS; i ++)
		    {
		        LockerInfo[i][lID] = cache_get_field_content_int(i, "id");
		        LockerInfo[i][lFaction] = cache_get_field_content_int(i, "factionid");
		        LockerInfo[i][lPosX] = cache_get_field_content_float(i, "pos_x");
		        LockerInfo[i][lPosY] = cache_get_field_content_float(i, "pos_y");
		        LockerInfo[i][lPosZ] = cache_get_field_content_float(i, "pos_z");
		        LockerInfo[i][lInterior] = cache_get_field_content_int(i, "interior");
		        LockerInfo[i][lWorld] = cache_get_field_content_int(i, "world");
				LockerInfo[i][lIcon] = cache_get_field_content_int(i, "iconid");
				LockerInfo[i][lLabel] = cache_get_field_content_int(i, "label");

				LockerInfo[i][locKevlar][0] = cache_get_field_content_int(i, "weapon_kevlar");
			    LockerInfo[i][locMedKit][0] = cache_get_field_content_int(i, "weapon_medkit");
			    LockerInfo[i][locNitestick][0] = cache_get_field_content_int(i, "weapon_nitestick");
			    LockerInfo[i][locMace][0] = cache_get_field_content_int(i, "weapon_mace");
			    LockerInfo[i][locDeagle][0] = cache_get_field_content_int(i, "weapon_deagle");
			    LockerInfo[i][locShotgun][0] = cache_get_field_content_int(i, "weapon_shotgun");
			    LockerInfo[i][locMP5][0] = cache_get_field_content_int(i, "weapon_mp5");
			    LockerInfo[i][locM4][0] = cache_get_field_content_int(i, "weapon_m4");
			    LockerInfo[i][locSpas12][0] = cache_get_field_content_int(i, "weapon_spas12");
			    LockerInfo[i][locSniper][0] = cache_get_field_content_int(i, "weapon_sniper");
			    LockerInfo[i][locCamera][0] = cache_get_field_content_int(i, "weapon_camera");
			    LockerInfo[i][locFireExt][0] = cache_get_field_content_int(i, "weapon_fire_extinguisher");
			    LockerInfo[i][locPainKillers][0] = cache_get_field_content_int(i, "weapon_painkillers");

                LockerInfo[i][locKevlar][1] = cache_get_field_content_int(i, "price_kevlar");
			    LockerInfo[i][locMedKit][1] = cache_get_field_content_int(i, "price_medkit");
			    LockerInfo[i][locNitestick][1] = cache_get_field_content_int(i, "price_nitestick");
			    LockerInfo[i][locMace][1] = cache_get_field_content_int(i, "price_mace");
			    LockerInfo[i][locDeagle][1] = cache_get_field_content_int(i, "price_deagle");
			    LockerInfo[i][locShotgun][1] = cache_get_field_content_int(i, "price_shotgun");
			    LockerInfo[i][locMP5][1] = cache_get_field_content_int(i, "price_mp5");
			    LockerInfo[i][locM4][1] = cache_get_field_content_int(i, "price_m4");
			    LockerInfo[i][locSpas12][1] = cache_get_field_content_int(i, "price_spas12");
			    LockerInfo[i][locSniper][1] = cache_get_field_content_int(i, "price_sniper");
			    LockerInfo[i][locCamera][1] = cache_get_field_content_int(i, "price_camera");
			    LockerInfo[i][locFireExt][1] = cache_get_field_content_int(i, "price_fire_extinguisher");
			    LockerInfo[i][locPainKillers][1] = cache_get_field_content_int(i, "price_painkillers");

		        LockerInfo[i][lText] = Text3D:INVALID_3DTEXT_ID;
		        LockerInfo[i][lPickup] = -1;
		        LockerInfo[i][lExists] = 1;

		        ReloadLocker(i);
		    }
		}
		case THREAD_LOAD_CLOTHING:
		{
		    for(new i = 0; i < rows; i ++)
		    {
		        cache_get_field_content(i, "name", ClothingInfo[extraid][i][cName], connectionID, 32);

		        ClothingInfo[extraid][i][cID] = cache_get_field_content_int(i, "id");
		        ClothingInfo[extraid][i][cModel] = cache_get_field_content_int(i, "modelid");
		        ClothingInfo[extraid][i][cBone] = cache_get_field_content_int(i, "boneid");
		        ClothingInfo[extraid][i][cAttached] = cache_get_field_content_int(i, "attached");
		        ClothingInfo[extraid][i][cPosX] = cache_get_field_content_float(i, "pos_x");
		        ClothingInfo[extraid][i][cPosY] = cache_get_field_content_float(i, "pos_y");
		        ClothingInfo[extraid][i][cPosZ] = cache_get_field_content_float(i, "pos_z");
		        ClothingInfo[extraid][i][cRotX] = cache_get_field_content_float(i, "rot_x");
		        ClothingInfo[extraid][i][cRotY] = cache_get_field_content_float(i, "rot_y");
		        ClothingInfo[extraid][i][cRotZ] = cache_get_field_content_float(i, "rot_z");
		        ClothingInfo[extraid][i][cScaleX] = cache_get_field_content_float(i, "scale_x");
		        ClothingInfo[extraid][i][cScaleY] = cache_get_field_content_float(i, "scale_y");
		        ClothingInfo[extraid][i][cScaleZ] = cache_get_field_content_float(i, "scale_z");
		        ClothingInfo[extraid][i][cExists] = 1;
		        ClothingInfo[extraid][i][cAttachedIndex] = -1;
		    }

		    PlayerData[extraid][pAwaitingClothing] = 1;
		}
		case THREAD_HOUSE_INFORMATION:
		{
			new type[16], houseid = GetNearbyHouseEx(extraid);

		    if(HouseInfo[houseid][hType] == -1)
			{
				type = "Other";
			}
			else
			{
				strcpy(type, houseInteriors[HouseInfo[houseid][hType]][intClass]);
			}

			SendClientMessageEx(extraid, COLOR_NAVYBLUE, "_______ House ID %i _______", houseid);
			SendClientMessageEx(extraid, COLOR_GREY2, "Value: %s - Rent Price: %s - Level: %i/5 - Active: %s - Locked: %s", FormatCash(HouseInfo[houseid][hPrice]), FormatCash(HouseInfo[houseid][hRentPrice]), HouseInfo[houseid][hLevel], (gettime() - HouseInfo[houseid][hTimestamp] > 2592000) ? ("{FF6347}No{C8C8C8}") : ("Yes"), (HouseInfo[houseid][hLocked]) ? ("Yes") : ("No"));
			SendClientMessageEx(extraid, COLOR_GREY2, "Class: %s - Location: %s - Furniture: %i/%i - Tenants: %i/%i", type, GetZoneName(HouseInfo[houseid][hPosX], HouseInfo[houseid][hPosY], HouseInfo[houseid][hPosZ]), cache_get_row_int(0, 0), GetHouseFurnitureCapacity(houseid), cache_get_row_int(0, 1), GetHouseTenantCapacity(houseid));
		}
		//down
		case THREAD_SELL_FURNITURE:
		{
		    if(cache_get_row_count(connectionID))
		    {
		        new name[32], price = percent(cache_get_field_content_int(0, "price"), 75);

		        cache_get_field_content(0, "name", name);
		        GivePlayerCash(extraid, price);

		        SendClientMessageEx(extraid, COLOR_AQUA, "You have sold {99ffbe}%s{CCFFFF} and received a 75 percent refund of $%i.", name, price);
		        RemoveFurniture(PlayerData[extraid][pSelected]);
			}
		}
		case THREAD_CLEAR_FURNITURE:
		{
		    if(!rows)
		    {
		        SendClientMessage(extraid, COLOR_RED, "[ERROR]{ffffff} Your home contains no furniture which can be sold.");
		    }
		    else
		    {
		        new price, houseid = GetInsideHouse(extraid);

			    for(new i = 0; i < rows; i ++)
				{
				    price += percent(cache_get_field_content_int(i, "price"), 75);
				}

				RemoveAllFurniture(houseid);

				GivePlayerCash(extraid, price);
				SendClientMessageEx(extraid, COLOR_AQUA, "You have sold a total of %i items and received $%i back.", rows, price);
			}
		}
		

		case THREAD_DUPLICATE_FURNITURE:
		{

		}
		case THREAD_DUPLICATED_FURNITURE:
		{

		}
		case THREAD_COUNT_TEXTS:
		{
		    rows = cache_get_row_int(0, 0);

		    if(rows)
		    {
		        SendClientMessageEx(extraid, COLOR_YELLOW, "* You have %i unread text messages. (/texts)", rows);
			}
		}
		case THREAD_VIEW_TEXTS:
		{
		    if(!rows)
		    {
		        SendClientMessage(extraid, COLOR_GREY, "You have no more unread text messages to read.");
			}
			else
			{
		    	static listString[4096], sender[MAX_PLAYER_NAME], date[24], message[128];

				listString = "Texts sent to you while offline (recent first):\n";

			    for(new i = 0; i < min(rows, 25); i ++)
			    {
			        cache_get_field_content(i, "sender", sender);
		    	    cache_get_field_content(i, "date", date);
		        	cache_get_field_content(i, "message", message);

			        format(listString, sizeof(listString), "%s\n[%s] SMS from %s (%i): %s", listString, date, sender, cache_get_field_content_int(i, "sender_number"), message);
				}

				if(rows > 25)
				{
				    Dialog_Show(extraid, DIALOG_UNREADTEXTS, DIALOG_STYLE_MSGBOX, "Unread Texts", listString, "Next", "OK");
				}
				else
				{
				    Dialog_Show(extraid, DIALOG_UNREADTEXTS, DIALOG_STYLE_MSGBOX, "Unread Texts", listString, "OK", "");
				}
			}
		}
		case THREAD_LIST_VEHICLES:
		{
		    if(!rows)
		    {
		        SendClientMessage(extraid, COLOR_GREY, "You own no vehicles which you can spawn.");
		    }
		    else
		    {
		        static string[1024];

		        string = "#\tModel\tLocation";

		        for(new i = 0; i < rows; i ++)
		        {
		            format(string, sizeof(string), "%s\n%i\t%s\t%s", string, i + 1, GetVehicleNameByModel(cache_get_field_content_int(i, "modelid")), (cache_get_field_content_int(i, "world")) ? ("Garage") : (GetZoneName(cache_get_field_content_float(i, "pos_x"), cache_get_field_content_float(i, "pos_y"), cache_get_field_content_float(i, "pos_z"))));
				}

				Dialog_Show(extraid, DIALOG_SPAWNCAR, DIALOG_STYLE_TABLIST_HEADERS, "Choose a vehicle to spawn.", string, "Select", "Cancel");
		    }
		}
		case THREAD_CAR_STORAGE:
		{
		    if(!rows)
		    {
		        SendClientMessage(extraid, COLOR_GREY, "You own no vehicles which you can spawn.");
		    }
		    else
		    {
		        new string[1024], vehicleid;

		        string = "Model\tStatus\tLocation\tTickets";

		        for(new i = 0; i < rows; i ++)
		        {
					if(cache_get_field_content_int(i, "carImpounded")) 
					{
						format(string, sizeof(string), "%s\n[#%i] %s\t{FF6347}Impounded{FFFFFF}\t%s\t%s", 
							string,
							i + 1,
							GetVehicleNameByModel(cache_get_field_content_int(i, "modelid")),
							(cache_get_field_content_int(i, "world")) ? ("Garage") : (GetZoneName(cache_get_field_content_float(i, "pos_x"), cache_get_field_content_float(i, "pos_y"), cache_get_field_content_float(i, "pos_z"))),
							FormatCash(cache_get_field_content_int(i, "tickets") + cache_get_field_content_int(i, "carImpoundPrice")));
					}
		            else if((vehicleid = GetVehicleLinkedID(cache_get_field_content_int(i, "id"))) != INVALID_VEHICLE_ID)
					{
		                format(string, sizeof(string), "%s\n[#%i] %s\t{00AA00}Spawned{FFFFFF}\t%s\t%s",
							string,
							i + 1,
							GetVehicleNameByModel(GetVehicleModel(vehicleid)),
							GetVehicleZoneName(vehicleid),
							FormatCash(cache_get_field_content_int(i, "tickets")));
					}
					else
					{
						format(string, sizeof(string), "%s\n[#%i] %s\t{FF6347}Despawned{FFFFFF}\t%s\t%s",
							string,
							i + 1,
							GetVehicleNameByModel(cache_get_field_content_int(i, "modelid")),
							(cache_get_field_content_int(i, "world")) ? ("Garage") : (GetZoneName(cache_get_field_content_float(i, "pos_x"), cache_get_field_content_float(i, "pos_y"), cache_get_field_content_float(i, "pos_z"))),
							FormatCash(cache_get_field_content_int(i, "tickets")));
					}
				}
				Dialog_Show(extraid, DIALOG_CARSTORAGE, DIALOG_STYLE_TABLIST_HEADERS, "Choose a vehicle to (de)spawn.", string, "Select", "Cancel");
		    }
		}

		case THREAD_FACTION_ROSTER:
		{
		    new username[MAX_PLAYER_NAME], date[24];

		    SendClientMessage(extraid, COLOR_NAVYBLUE, "_____ Faction Roster _____");

		    for(new i = 0; i < rows; i ++)
		    {
		        cache_get_field_content(i, "username", username);
		        cache_get_field_content(i, "lastlogin", date);

		        SendClientMessageEx(extraid, COLOR_GREY2, "%s %s - Last Seen: %s", FactionRanks[PlayerData[extraid][pFaction]][cache_get_field_content_int(i, "factionrank")], username, date);
		    }
		}
		case THREAD_GANG_ROSTER:
		{
		    new username[MAX_PLAYER_NAME], date[24];

		    SendClientMessage(extraid, COLOR_NAVYBLUE, "_____ Gang Roster _____");

		    for(new i = 0; i < rows; i ++)
		    {
		        cache_get_field_content(i, "username", username);
		        cache_get_field_content(i, "lastlogin", date);

		        SendClientMessageEx(extraid, COLOR_GREY2, "[%i] %s %s - Last Seen: %s - Points: %d", cache_get_field_content_int(i, "gangrank"), GangRanks[PlayerData[extraid][pGang]][cache_get_field_content_int(i, "gangrank")], username, date, cache_get_field_content_int(i, "membership_rankingpoints"));
		    }
		}
		case THREAD_VIEW_PHONEBOOK:
		{
		    if((!rows) && PlayerData[extraid][pPage] == 1)
		    {
		        SendClientMessage(extraid, COLOR_GREY, "The phonebook directory is currently empty.");
		    }
		    else
		    {
		        static string[MAX_LISTED_NUMBERS * 32], name[MAX_PLAYER_NAME];

		        string = "#\tName\tNumber";

		        for(new i = 0; i < rows; i ++)
		        {
		            cache_get_field_content(i, "name", name);
		            format(string, sizeof(string), "%s\n%i\t%s\t%i", string, ((PlayerData[extraid][pPage] - 1) * MAX_LISTED_NUMBERS) + (i + 1), name, cache_get_field_content_int(i, "number"));
				}

				if(PlayerData[extraid][pPage] > 1)
				{
				    strcat(string, "\n{FF6347}<< Go back{FFFFFF}");
				}
    			if(rows == MAX_LISTED_NUMBERS)
    			{
    			    strcat(string, "\n{00AA00}>> Next page{FFFFFF}");
				}

				Dialog_Show(extraid, DIALOG_PHONEBOOK, DIALOG_STYLE_TABLIST_HEADERS, "Phonebook directory", string, "Select", "Close");
		    }
		}
		case THREAD_COUNT_LANDOBJECTS:
		{
		    new landid = GetNearbyLand(extraid);

		    if(cache_get_row_int(0, 0) >= GetLandObjectCapacity(LandInfo[landid][lLevel]))
		    {
		        SendClientMessageEx(extraid, COLOR_GREY, "You are only only allowed up to %i objects for your land.", GetLandObjectCapacity(LandInfo[landid][lLevel]));
		    }
		    else
		    {
		        ShowDialogToPlayer(extraid, DIALOG_LANDBUILDTYPE);
				//ShowDialogToPlayer(extraid, DIALOG_LANDBUILD1);
			}
		}
		
		case THREAD_LANDOBJECT_INFO:
		{
		    if(cache_get_row_count(connectionID))
		    {
		        new name[32];

		        cache_get_field_content(0, "name", name);
			    new objid = PlayerData[extraid][pSelected];
			    new modelid = cache_get_field_content_int(0, "modelid");
			    new Float:x = cache_get_field_content_float(0, "pos_x");
			    new Float:y = cache_get_field_content_float(0, "pos_y");
			    new Float:z = cache_get_field_content_float(0, "pos_z");
			    new Float:rx = cache_get_field_content_float(0, "rot_x");
			    new Float:ry = cache_get_field_content_float(0, "rot_y");
			    new Float:rz = cache_get_field_content_float(0, "rot_z");

				SendClientMessageEx(extraid, COLOR_YELLOW2, "Object Name: %s [ID: %i, Model: %i] X: %.4f | Y: %.4f | Z: %.4f | RX: %.4f | RY: %.4f | RZ: %.4f", name,objid, modelid, x, y, z, rx, ry, rz);
			}
			PlayerData[extraid][pSelected] = 0;
		}
		case THREAD_SELL_LANDOBJECT:
		{
		    if(cache_get_row_count(connectionID))
		    {
		        new name[32], price = percent(cache_get_field_content_int(0, "price"), 75);

		        cache_get_field_content(0, "name", name);
		        GivePlayerCash(extraid, price);

		        SendClientMessageEx(extraid, COLOR_AQUA, "You have sold {FF6347}%s{33CCFF} and received a 75 percent refund of {00AA00}$%i{33CCFF}.", name, price);
		        RemoveLandObject(PlayerData[extraid][pSelected]);
				UpdateLandText(GetNearbyLand(extraid));
			}
		}
		case THREAD_DUPLICATE_LANDOBJECT:
		{
			//name, modelid, price, pos_x, pos_y, pos_z, rot_x, rot_y, rot_z

  			if(cache_get_row_count(connectionID))
			{
			    new string[20], name[32], landid = GetNearbyLand(extraid);

			    new modelid = cache_get_field_content_int(0, "modelid");
			    new price = cache_get_field_content_int(0, "price");
			    new Float:x = cache_get_field_content_float(0, "pos_x");
			    new Float:y = cache_get_field_content_float(0, "pos_y");
			    new Float:z = cache_get_field_content_float(0, "pos_z");
			    new Float:rx = cache_get_field_content_float(0, "rot_x");
			    new Float:ry = cache_get_field_content_float(0, "rot_y");
			    new Float:rz = cache_get_field_content_float(0, "rot_z");

			    if(PlayerData[extraid][pCash] < price)
			    {
			        SendClientMessage(extraid, COLOR_GREY, "You can't afford to duplicate this object.");
			    }
			    else
			    {
			        PlayerData[extraid][pObjectLand] = landid;
				    cache_get_field_content(0, "name", name);

			    	GivePlayerCash(extraid, -price);
			    	SendClientMessageEx(extraid, COLOR_GREEN, "%s duplicated for $%i. You will now edit this object.", name, price);

				    format(string, sizeof(string), "~r~-$%i", price);
				    GameTextForPlayer(extraid, string, 5000, 1);

				    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "INSERT INTO landobjects VALUES(null, %i, %i, '%e', %i, '%f', '%f', '%f', '%f', '%f', '%f', 0, 0, '0.0', '0.0', '0.0', '-1000.0', '-1000.0', '-1000.0')", LandInfo[landid][lID], modelid, name, price, x, y, z, rx, ry, rz);
					mysql_tquery(connectionID, queryBuffer);					

					mysql_tquery(connectionID, "SELECT * FROM landobjects WHERE id = LAST_INSERT_ID()", "OnQueryFinished", "ii", THREAD_LOAD_LANDOBJECTS, LandInfo[landid][lLabels]);
					mysql_tquery(connectionID, "SELECT LAST_INSERT_ID() FROM landobjects LIMIT 1", "OnQueryFinished", "ii", THREAD_DUPLICATED_OBJECT, extraid);
					UpdateLandText(landid);
				}
			}
		}
		case THREAD_DUPLICATED_OBJECT:
		{
			if(cache_get_row_count(connectionID))
			{
			    new id = cache_get_row_int(0, 0);

			    for(new i = 0, j = Streamer_GetUpperBound(STREAMER_TYPE_OBJECT); i <= j; i ++)
			    {
			        if(IsValidDynamicObject(i) && Streamer_GetExtraInt(i, E_OBJECT_TYPE) == E_OBJECT_LAND && Streamer_GetExtraInt(i, E_OBJECT_INDEX_ID) == id)
			        {
			            PlayerData[extraid][pEditType] = EDIT_LAND_OBJECT;
		    	    	PlayerData[extraid][pEditObject] = i;

						EditDynamicObject(extraid, i);
	    		    	GameTextForPlayer(extraid, "~w~Editing Mode~n~~g~Click disk to save~n~~r~Press ESC to cancel", 5000, 1);

			            //PlayerData[extraid][pSelected] = i;
						//ShowDialogToPlayer(extraid, DIALOG_LANDOBJECTMENU);
			            break;
					}
			    }
		    }
		}
		case THREAD_CLEAR_LANDOBJECTS:
		{
		    if(!rows)
		    {
		        SendClientMessage(extraid, COLOR_GREY, "Your land contains no furniture which can be sold.");
		    }
		    else
		    {
		        new price, landid = GetNearbyLand(extraid);

			    for(new i = 0; i < rows; i ++)
				{
				    price += percent(cache_get_field_content_int(i, "price"), 75);
				}

				RemoveAllLandObjects(landid);

				GivePlayerCash(extraid, price);
				SendClientMessageEx(extraid, COLOR_AQUA, "You have sold a total of %i items and received {00AA00}$%i{33CCFF} back.", rows, price);
			}
		}
		case THREAD_LIST_LANDOBJECTS:
		{
		    if((!rows) && PlayerData[extraid][pPage] == 1)
		    {
		        SendClientMessage(extraid, COLOR_GREY, "Your land contains no objects which can be listed.");
		    }
		    else
		    {
		        static string[MAX_LISTED_OBJECTS * 48], name[32];

		        string = "#\tName\tCost\tDistance";

		        for(new i = 0; i < rows; i ++)
		        {
		            cache_get_field_content(i, "name", name);
		            format(string, sizeof(string), "%s\n%i\t%s\t{00AA00}$%i{FFFFFF}\t%.1fm", string, GetLandObjectID(cache_get_field_content_int(i, "id")), name, cache_get_field_content_int(i, "price"), GetPlayerDistanceFromPoint(extraid, cache_get_field_content_float(i, "pos_x"), cache_get_field_content_float(i, "pos_y"), cache_get_field_content_float(i, "pos_z")));
				}

				if(PlayerData[extraid][pPage] > 1)
				{
				    strcat(string, "\n{FF6347}<< Go back{FFFFFF}");
				}
    			if(rows == MAX_LISTED_OBJECTS)
    			{
    			    strcat(string, "\n{00AA00}>> Next page{FFFFFF}");
				}

				Dialog_Show(extraid, DIALOG_LANDOBJECTS, DIALOG_STYLE_TABLIST_HEADERS, "List of objects", string, "Select", "Back");
		    }
		}
		case THREAD_LAND_MAINMENU:
		{
		    new
		        landid = GetNearbyLand(extraid),
		        string[64];

			format(string, sizeof(string), "Land menu {FFD700}(Level: %i/5) (%i/%i objects)", LandInfo[landid][lLevel], cache_get_row_int(0, 0), GetLandObjectCapacity(LandInfo[landid][lLevel]));
		    Dialog_Show(extraid, DIALOG_LANDMENU, DIALOG_STYLE_LIST, string, "Build object\nEdit object\nToggle labels\nList all objects\nSell all objects\nUpgrade land\nPermissions", "Select", "Cancel");
		}
		case THREAD_LAND_INFORMATION:
		{
		    new landid = GetNearbyLand(extraid);

		    //SendClientMessage(extraid, COLOR_NAVYBLUE, "_______ My Land _______");
			//SendClientMessageEx(extraid, COLOR_GREY2, "(ID: %i) - (Value: $%i) - (Objects: %i/%i) - (Location: %s)", landid, LandInfo[landid][lPrice], cache_get_row_int(0, 0), GetLandObjectCapacity(landid), GetZoneName(LandInfo[landid][lMinX], LandInfo[landid][lMinY], LandInfo[landid][lHeight]));
			SendClientMessageEx(extraid, COLOR_WHITE, "* Your level %i/3 land in %s is worth {00AA00}%s{FFFFFF} and contains %i/%i objects.", LandInfo[landid][lLevel], GetZoneName(LandInfo[landid][lHeightX], LandInfo[landid][lHeightY], LandInfo[landid][lHeightZ]), FormatCash(LandInfo[landid][lPrice]), cache_get_row_int(0, 0), GetLandObjectCapacity(LandInfo[landid][lLevel]));
		}
		case THREAD_LOAD_VEHICLES:
		{
		    new modelid, Float:pos_x, Float:pos_y, Float:pos_z, Float:pos_a, color1, color2, respawndelay, siren, vehicleid;

		    for(new i = 0; i < rows; i ++)
		    {
	            modelid 		= cache_get_field_content_int(i, "modelid"),
				pos_x 			= cache_get_field_content_float(i, "pos_x"),
				pos_y 			= cache_get_field_content_float(i, "pos_y"),
				pos_z 			= cache_get_field_content_float(i, "pos_z"),
				pos_a 			= cache_get_field_content_float(i, "pos_a"),
				color1 			= cache_get_field_content_int(i, "color1"),
				color2 			= cache_get_field_content_int(i, "color2"),
				respawndelay 	= cache_get_field_content_int(i, "respawndelay");
				siren           = cache_get_field_content_int(i, "siren");

		        vehicleid 		= CreateVehicle(modelid, pos_x, pos_y, pos_z, pos_a, color1, color2, respawndelay, siren);


				if(vehicleid != INVALID_VEHICLE_ID)
				{
				    ResetVehicle(vehicleid); // Forgot this!
                    cache_get_field_content(0, "plate", VehicleInfo[vehicleid][vPlate], connectionID, 32);
					VehicleInfo[vehicleid][vID] = cache_get_field_content_int(i, "id");
					VehicleInfo[vehicleid][vGang] = cache_get_field_content_int(i, "gangid");
					VehicleInfo[vehicleid][vFaction] = cache_get_field_content_int(i, "factionid");
					VehicleInfo[vehicleid][vFGDivision] = cache_get_field_content_int(i, "fgdivisionid");
					VehicleInfo[vehicleid][vRank] = cache_get_field_content_int(i, "rank");
					VehicleInfo[vehicleid][vVIP] = cache_get_field_content_int(i, "vippackage");
					VehicleInfo[vehicleid][vJob] = cache_get_field_content_int(i, "job");
					VehicleInfo[vehicleid][vHealth] = cache_get_field_content_float(i, "health");
				    VehicleInfo[vehicleid][carImpounded] = cache_get_field_content_int(i, "carImpounded");
				    VehicleInfo[vehicleid][carImpoundPrice] = cache_get_field_content_int(i, "carImpoundPrice");
				    VehicleInfo[vehicleid][vMileage] = cache_get_field_content_float(i, "mileage");

					if(VehicleInfo[vehicleid][vGang] >= 0)
					{
					    VehicleInfo[vehicleid][vPrice] = cache_get_field_content_int(i, "price");
					    VehicleInfo[vehicleid][vLocked] = cache_get_field_content_int(i, "locked");
					    VehicleInfo[vehicleid][vPaintjob] = cache_get_field_content_int(i, "paintjob");
					    VehicleInfo[vehicleid][vInterior] = cache_get_field_content_int(i, "interior");
				        VehicleInfo[vehicleid][vWorld] = cache_get_field_content_int(i, "world");
				        VehicleInfo[vehicleid][vMods][0] = cache_get_field_content_int(i, "mod_1");
				        VehicleInfo[vehicleid][vMods][1] = cache_get_field_content_int(i, "mod_2");
				        VehicleInfo[vehicleid][vMods][2] = cache_get_field_content_int(i, "mod_3");
				        VehicleInfo[vehicleid][vMods][3] = cache_get_field_content_int(i, "mod_4");
				        VehicleInfo[vehicleid][vMods][4] = cache_get_field_content_int(i, "mod_5");
				        VehicleInfo[vehicleid][vMods][5] = cache_get_field_content_int(i, "mod_6");
				        VehicleInfo[vehicleid][vMods][6] = cache_get_field_content_int(i, "mod_7");
				        VehicleInfo[vehicleid][vMods][7] = cache_get_field_content_int(i, "mod_8");
				        VehicleInfo[vehicleid][vMods][8] = cache_get_field_content_int(i, "mod_9");
				        VehicleInfo[vehicleid][vMods][9] = cache_get_field_content_int(i, "mod_10");
				        VehicleInfo[vehicleid][vMods][10] = cache_get_field_content_int(i, "mod_11");
				        VehicleInfo[vehicleid][vMods][11] = cache_get_field_content_int(i, "mod_12");
				        VehicleInfo[vehicleid][vMods][12] = cache_get_field_content_int(i, "mod_13");
				        VehicleInfo[vehicleid][vMods][13] = cache_get_field_content_int(i, "mod_14");
						ReloadVehicle(vehicleid);
					}
					VehicleInfo[vehicleid][vModel] = modelid;
					VehicleInfo[vehicleid][vPosX] = pos_x;
					VehicleInfo[vehicleid][vPosY] = pos_y;
					VehicleInfo[vehicleid][vPosZ] = pos_z;
					VehicleInfo[vehicleid][vPosA] = pos_a;
					VehicleInfo[vehicleid][vColor1] = color1;
					VehicleInfo[vehicleid][vColor2] = color2;
					VehicleInfo[vehicleid][vRespawnDelay] = respawndelay;
					VehicleInfo[vehicleid][vObjects][0] = INVALID_OBJECT_ID;
					VehicleInfo[vehicleid][vObjects][1] = INVALID_OBJECT_ID;
					VehicleInfo[vehicleid][vTimer] = -1;

					RefuelVehicle(vehicleid);
                    SetVehicleNumberPlate(vehicleid, VehicleInfo[vehicleid][vPlate]);
					SetVehicleHealth(vehicleid, VehicleInfo[vehicleid][vHealth]);
		        }
			}
		}
		case THREAD_LIST_FLAGGED:
		{
		    new
				flags[MAX_PLAYERS],
				username[MAX_PLAYER_NAME],
				targetid;

		    SendClientMessage(extraid, COLOR_NAVYBLUE, "_____ Flagged Players _____");

		    for(new i = 0; i < rows; i ++)
		    {
		        cache_get_row(i, 0, username);

		        if(IsPlayerOnline(username, targetid))
		        {
		            flags[targetid]++;
				}
		    }

		    foreach(new i : Player)
		    {
		        if(flags[i] > 0)
		        {
		            SendClientMessageEx(extraid, COLOR_GREY3, "* %s[%i] has %i active flags.", GetRPName(i), i, flags[i]);
				}
			}
		}

		case THREAD_LIST_ADMINS:
		{
		    new username[MAX_PLAYER_NAME], lastlogin[24];

		   // SendClientMessage(extraid, COLOR_GREEN, "---- Admin Team ----");
			static strings[4096];
			strings = "Name\t\tLast Login\tStrikes\tRank";


		    for(new i = 0; i < rows; i ++)
		    {
		        cache_get_field_content(i, "username", username);
		        cache_get_field_content(i, "lastlogin", lastlogin);
		       // cache_get_field_content_int(i, "adminstrikes", AdminStrikes);
		       // cache_get_field_content(i, "adminname", PlayerData[i][pAdminName], connectionID, MAX_PLAYER_NAME);
		        new adminstring[64];
		        switch(cache_get_field_content_int(i, "adminlevel"))
		        {
				    case 1: adminstring = "Secret Admin";
				    case 2: adminstring = "{00FF00}Trial Admin";
				    case 3: adminstring = "{00AA00}Junior Admin";
				    case 4: adminstring = "{00AA00}General Admin";
					case 5: adminstring = "{FFA500}Senior Admin";
					case 6: adminstring = "{FF0000}Head Admin";
					case 7: adminstring = "{298EFF}Lead Head Admin";
					case 8: adminstring = "{298EFF}Executive Admin";
					case 9: adminstring = "{D909D9}Asst Management";
					case 10: adminstring = "{D909D9}Management";
				}
				format(strings, sizeof(strings), "%s\n%s\t%s\t%d\t%s {ffffff}(%d)\n", strings, username, lastlogin, PlayerData[i][pAdminStrike], adminstring, cache_get_field_content_int(i, "adminlevel"));

			    if(strlen(strings) > 0)
				{
					Dialog_Show(extraid, DIALOG_NONE, DIALOG_STYLE_TABLIST_HEADERS, "Admin Team", strings, "Okay", "");
					//else Dialog_Show(extraid, DIALOG_ADMINLIST, DIALOG_STYLE_TABLIST_HEADERS, "Admin Team", strings, "Okay", "");
				}
			//	SendClientMessageEx(extraid, COLOR_GREY2, "Level %i Admin %s - Last Seen: %s", cache_get_field_content_int(i, "adminlevel"), username, lastlogin);
		    }
 		}
		case THREAD_DUPLICATE_LANDOBJ:
		{
			if(cache_get_row_int(0, 0) >= GetLandObjectCapacity(LandInfo[PlayerData[extraid][pObjectLand]][lLevel]))
			{
 				SendClientMessageEx(extraid, COLOR_GREY, "You are only only allowed up to %i objects for your land.", GetLandObjectCapacity(LandInfo[PlayerData[extraid][pObjectLand]][lLevel]));
   			}
			else
			{
				mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "SELECT name, modelid, price, pos_x, pos_y, pos_z, rot_x, rot_y, rot_z FROM landobjects WHERE id = %i", Streamer_GetExtraInt(PlayerData[extraid][pSelected], E_OBJECT_INDEX_ID));
   				mysql_tquery(connectionID, queryBuffer, "OnQueryFinished", "ii", THREAD_DUPLICATE_LANDOBJECT, extraid);
			}
		}
		case THREAD_CHECKDUPE_FURNITURE:
		{

		}
		case THREAD_LOAD_LOCATIONS:
		{
		    for(new i = 0; i < rows && i < MAX_LOCATIONS; i ++)
		    {
      			cache_get_field_content(i, "name", LocationInfo[i][locName], connectionID, 64);

		        LocationInfo[i][locID] = cache_get_field_content_int(i, "id");
		        LocationInfo[i][locPosX] = cache_get_field_content_float(i, "pos_x");
		        LocationInfo[i][locPosY] = cache_get_field_content_float(i, "pos_y");
			   	LocationInfo[i][locPosZ] = cache_get_field_content_float(i, "pos_z");
				LocationInfo[i][locExists] = true;
			}
			printf("[Script] %i locations loaded", (rows < MAX_LOCATIONS) ? (rows) : (MAX_LOCATIONS));
		}
		case THREAD_UPDATE_LANDLABELS:
		{
		    new landid = extraid;
			new string[128];
			if(IsValidDynamic3DTextLabel(LandInfo[landid][lTextdraw]))
			{
				if(LandInfo[landid][lOwnerID] > 0)
				{
					format(string, sizeof(string), "This land belong to \n{33CCFF}%s (%i)\n{FFD700}Level: %i\n{FFFFFF}%i/%i Objects",LandInfo[landid][lOwner],landid, LandInfo[landid][lLevel], cache_get_row_int(0, 0), GetLandObjectCapacity(LandInfo[landid][lLevel]));
				}
				else
				{
				    format(string, sizeof(string), "This land(%i) is for sale by the state\n{00AA00}Price: %s{FFFFFF}\n{FFD700}Level: %i\n{FFFFFF}%i/%i Objects", landid, FormatCash(LandInfo[landid][lPrice]), LandInfo[landid][lLevel], cache_get_row_int(0, 0), GetLandObjectCapacity(LandInfo[landid][lLevel]));
				}
				if(LandInfo[landid][lSeized])
				{
					format(string, sizeof(string), "{FF0000}Seized Land{AFAFAF}\n%s", string);
				}
				UpdateDynamic3DTextLabelText(LandInfo[landid][lTextdraw], COLOR_GREY, string);
			}
		}
		case THREAD_LOAD_CREWS:
		{
		    for(new i = 0; i < MAX_GANGS; i ++)
	    	{
		        for(new r = 0; r < MAX_GANG_CREWS; r ++)
		        {
		            GangCrews[i][r][0] = 0;
		        }
		    }

		    for(new i = 0; i < rows; i ++)
		    {
		        cache_get_field_content(i, "name", GangCrews[cache_get_field_content_int(i, "id")][cache_get_field_content_int(i, "crewid")], connectionID, 32);
      		}
            printf("[Script] %i crews loaded", rows);
		}
		case THREAD_LIST_VIPS:
		{
		    new username[MAX_PLAYER_NAME], lastlogin[24], viplevel, viptime;

		    SendClientMessage(extraid, COLOR_VIP, "---- VIP List ----");

		    for(new i = 0; i < rows; i ++)
		    {
		        cache_get_field_content(i, "username", username);
		        cache_get_field_content(i, "lastlogin", lastlogin);
		        viplevel = cache_get_field_content_int(i, "vippackage");
		        viptime = cache_get_field_content_int(i, "viptime");
				SendClientMessageEx(extraid, COLOR_GREY2, "[%i] {D909D9}%s VIP{C8C8C8} %s - Last Seen: %s - Expires: %s", viplevel, GetVIPRank(viplevel), username, lastlogin, TimestampToString(viptime, 4));
		    }
		}
		case THREAD_LOAD_ATMS:
		{
		    for(new i = 0; i < rows && i < MAX_ATMS; i ++)
		    {
			    ATM[i][atmExists] = 1;
			    ATM[i][atmID] = cache_get_field_content_int(i, "atmID");
			    ATM[i][atmSpawn][0] = cache_get_field_content_float(i, "atmX");
			    ATM[i][atmSpawn][1] = cache_get_field_content_float(i, "atmY");
			    ATM[i][atmSpawn][2] = cache_get_field_content_float(i, "atmZ");
			    ATM[i][atmSpawn][3] = cache_get_field_content_float(i, "atmA");
			    ATM[i][atmInterior] = cache_get_field_content_int(i, "atmInterior");
			    ATM[i][atmWorld] = cache_get_field_content_int(i, "atmWorld");
			    ATM[i][atmObject] = INVALID_OBJECT_ID;
		        ATM[i][atmText] = INVALID_3DTEXT_ID;
		        UpdateATM(i);
			}
			printf("[Script] %i atms loaded", (rows < MAX_ATMS) ? (rows) : (MAX_ATMS));
		}
		case THREAD_REMOVE_VIP:
		{
		    printf("[Script] %i vips removed.", rows);
		}
		case LOADCRATE_THREAD:
		{
		}
		case THREAD_LOAD_GATES:
		{

		}
		case SENDDATA_THREAD:
		{
			if(cache_affected_rows(connectionID) > 0)
			{
				printf("saved");
			}
			else
			{
	  			printf("fucks");
			}
		}
	}
}

forward OnLoadPayphones();
public OnLoadPayphones()
{
	new
	    rows = cache_get_row_count(connectionID);

	for (new i = 0; i < rows; i ++)
	{
	    Payphones[i][phExists] = 1;
	    Payphones[i][phID] = cache_get_field_content_int(i, "phID");
	    Payphones[i][phNumber] = cache_get_field_content_int(i, "phNumber");
	    Payphones[i][phX] = cache_get_field_content_float(i, "phX");
	    Payphones[i][phY] = cache_get_field_content_float(i, "phY");
	    Payphones[i][phZ] = cache_get_field_content_float(i, "phZ");
	    Payphones[i][phA] = cache_get_field_content_float(i, "phA");
	    Payphones[i][phInterior] = cache_get_field_content_int(i, "phInterior");
	    Payphones[i][phWorld] = cache_get_field_content_int(i, "phWorld");
	    Payphones[i][phCaller] = INVALID_PLAYER_ID;
	    Payphones[i][phObject] = INVALID_OBJECT_ID;
	    Payphones[i][phText] = INVALID_3DTEXT_ID;

	    UpdatePayphone(i);
	}
}

hook OnGameModeInit()
{
	printf("Using SAMP_INCLUDES_VERSION: %d", SAMP_INCLUDES_VERSION);

    new hour, minute, second, timestamp;
    timestamp = gettime(hour, minute, second);

    if(!LoadServerConfig())
    {
        SendRconCommand("exit");
        return 0;
    }

 	// Default values, don't touch them
    SetGameModeText("Loading...");
    new weburl[256];
    format(weburl, sizeof(weburl), "weburl %s", GetServerWebsite());
	SendRconCommand(weburl);
	printf( "%s is loading...", GetServerName());
   	connectionID = mysql_connect(Mysql_Hostname, Mysql_Username, Mysql_Database, Mysql_Password);

	if(mysql_errno(connectionID))
	{
	    printf("[ERROR] - Unable to establish a connection with the MySQL server...");
	    SendRconCommand("exit");
	    return 0;
	}

    //spawn vehicles
    CreateVehicle(421, 1559.9244, -2338.5549, 13.3744, 89.7600, -1, -1, 100);
    CreateVehicle(421, 1559.9818, -2331.9814, 13.3744, 89.7600, -1, -1, 100);
    CreateVehicle(436, 1559.8101, -2335.2644, 13.2537, 89.5200, -1, -1, 100);
    CreateVehicle(576, 1560.0779, -2328.6450, 13.1204, 89.7600, -1, -1, 100);
    CreateVehicle(576, 1559.9822, -2325.3567, 13.1204, 90.1800, -1, -1, 100);
    CreateVehicle(576, 1560.1245, -2321.9968, 13.1204, 90.1800, -1, -1, 100);
    CreateVehicle(576, 1560.3719, -2318.7837, 13.1204, 90.1800, -1, -1, 100);
    CreateVehicle(576, 1560.3429, -2315.4192, 13.1204, 90.1800, -1, -1, 100);
    CreateVehicle(576, 1560.3474, -2312.2234, 13.1204, 90.1800, -1, -1, 100);


    for(new i = 0; i < MAX_VEHICLES; i ++)
    {
        ResetVehicle(i);
    }

    mysql_tquery(connectionID, "TRUNCATE TABLE shots");
    mysql_tquery(connectionID, "SELECT * FROM houses", "OnQueryFinished", "ii", THREAD_LOAD_HOUSES, 0);
    mysql_tquery(connectionID, "SELECT * FROM rp_furniture", "OnLoadFurniture");
    mysql_tquery(connectionID, "SELECT * FROM garages", "OnQueryFinished", "ii", THREAD_LOAD_GARAGES, 0);
    mysql_tquery(connectionID, "SELECT * FROM businesses", "OnQueryFinished", "ii", THREAD_LOAD_BUSINESSES, 0);
    mysql_tquery(connectionID, "SELECT * FROM entrances", "OnQueryFinished", "ii", THREAD_LOAD_ENTRANCES, 0);
    mysql_tquery(connectionID, "SELECT * FROM factions", "OnQueryFinished", "ii", THREAD_LOAD_FACTIONS, 0);
    mysql_tquery(connectionID, "SELECT * FROM factionranks", "OnQueryFinished", "ii", THREAD_LOAD_FACTIONRANKS, 0);
    mysql_tquery(connectionID, "SELECT * FROM factionskins", "OnQueryFinished", "ii", THREAD_LOAD_FACTIONSKINS, 0);
    mysql_tquery(connectionID, "SELECT * FROM factionpay", "OnQueryFinished", "ii", THREAD_LOAD_FACTIONPAY, 0);
    mysql_tquery(connectionID, "SELECT * FROM divisions", "OnQueryFinished", "ii", THREAD_LOAD_DIVISIONS, 0);
    mysql_tquery(connectionID, "SELECT * FROM lands", "OnQueryFinished", "ii", THREAD_LOAD_LANDS, 0);
    mysql_tquery(connectionID, "SELECT * FROM landobjects ORDER BY landid ASC", "OnQueryFinished", "ii", THREAD_LOAD_LANDOBJECTS, 0);
    mysql_tquery(connectionID, "SELECT * FROM vehicles WHERE ownerid = 0", "OnQueryFinished", "ii", THREAD_LOAD_VEHICLES, 0);
    mysql_tquery(connectionID, "select *,(select count(*) from users where users.gang=gangs.id) as count, COALESCE((select username from users where users.uid=gangs.leaderid), 'No-One') as leader from gangs", "OnQueryFinished", "ii", THREAD_LOAD_GANGS, 0);
    mysql_tquery(connectionID, "SELECT * FROM gangranks", "OnQueryFinished", "ii", THREAD_LOAD_GANGRANKS, 0);
    mysql_tquery(connectionID, "SELECT * FROM gangskins", "OnQueryFinished", "ii", THREAD_LOAD_GANGSKINS, 0);
    mysql_tquery(connectionID, "SELECT * FROM turfs", "OnLoadTurfs");
	mysql_tquery(connectionID, "SELECT * FROM points", "OnLoadPoints");
    mysql_tquery(connectionID, "SELECT * FROM factionlockers", "OnQueryFinished", "ii", THREAD_LOAD_LOCKERS, 0);
    mysql_tquery(connectionID, "SELECT * FROM locations", "OnQueryFinished", "ii", THREAD_LOAD_LOCATIONS, 0);
    mysql_tquery(connectionID, "SELECT * FROM crews", "OnQueryFinished", "ii", THREAD_LOAD_CREWS, 0);
    mysql_tquery(connectionID, "SELECT * FROM rp_atms", "OnQueryFinished", "ii", THREAD_LOAD_ATMS, 0);
    mysql_tquery(connectionID, "SELECT * FROM `crates`", "OnQueryFinished", "ii", LOADCRATE_THREAD, 0);
    mysql_tquery(connectionID, "SELECT * FROM `gates`", "OnQueryFinished", "ii", THREAD_LOAD_GATES, 0);
    mysql_tquery(connectionID, "SELECT * FROM `gunracks`", "Rack_Load", "");
    mysql_tquery(connectionID, "SELECT * FROM rp_dealercars", "OnLoadDealershipCars");
    mysql_tquery(connectionID, "SELECT * FROM rp_payphones", "OnLoadPayphones");
    mysql_tquery(connectionID, "SELECT * FROM rp_gundamages", "OnLoadGunDamages");
    mysql_tquery(connectionID, "UPDATE "#TABLE_USERS" SET vippackage = 0, viptime = 0 WHERE viptime < UNIX_TIMESTAMP()", "OnQueryFinished", "ii", THREAD_REMOVE_VIP, 0);
    CallRemoteFunction("OnLoadDatabase", "i", timestamp);

    gettime(.hour = gWorldTime);
    SetWorldTime(gWorldTime);

    // Timers
    SetTimer("SecondTimer", 1000, true);
    SetTimer("InjuredTimer", 5000, true);
    SetTimerEx("RandomFire", 5400000, true, "i", 1);
    SetTimer("OnPlayerUpdateEx", 1000, true);

    EnableStuntBonusForAll(0);
    DisableInteriorEnterExits();
    Streamer_SetVisibleItems(STREAMER_TYPE_OBJECT, 1000);
    Streamer_TickRate(100);
    SetNameTagDrawDistance(30.0);
    ManualVehicleEngineAndLights();

    LoadGeneralTextdraws();
    RefreshTime();
    ResetRobbery();
    LoadPickupsAndText();
    LoadGatesAndCells();
    
	// Driving test vehicles
    testVehicles[0] = AddStaticVehicleEx(445, 1280.5974, -1795.9840, 13.2733, 180.0000, 1, 1, 10); // test car 1
	testVehicles[1] = AddStaticVehicleEx(445, 1276.2882, -1796.0579, 13.2776,181.8796, 1, 1, 10); // test car 2
	testVehicles[2] = AddStaticVehicleEx(445, 1271.8486, -1796.2174, 13.2694,182.5803, 1, 1, 10); // test car 3
	testVehicles[3] = AddStaticVehicleEx(445, 1267.1357, -1796.2031, 13.2980,181.5889, 1, 1, 10); // test car 4
	testVehicles[4] = AddStaticVehicleEx(445, 1262.5736, -1796.3016, 13.3016,180.8420, 1, 1, 10); // test car 5
    
    CallRemoteFunction("OnLoadGameMode", "i", timestamp); // seconds since epoc


    UsePlayerPedAnims();


	printf("           _____  _____  _   _ ________   _________ ");
	printf("     /\\   |  __ \\|  __ \\| \\ | |  ____\\ \\ / /__   __|");
	printf("    /  \\  | |__) | |__) |  \\| | |__   \\ V /   | |   ");
	printf("   / /\\ \\ |  _  /|  ___/| . ` |  __|   > <    | |   ");
	printf("  / ____ \\| | \\ \\| |    | |\\  | |____ / . \\   | |   ");
	printf(" /_/    \\_\\_|  \\_\\_|    |_| \\_|______/_/ \\_\\  |_|   ");
	printf("                 ______                             ");
	printf("                |______|                            ");
	printf("                                                      ");

    printf("____________________________________________________");
    printf("| arp_next by Khalil Zoldyck                       |");
    printf("| Gamemode loaded successfully.                    |");
    printf("____________________________________________________");
    for(new o; o < CountDynamicObjects(); o++)
    {
        if(IsValidDynamicObject(o))
        {
            Streamer_SetFloatData(STREAMER_TYPE_OBJECT, o, E_STREAMER_DRAW_DISTANCE, 900.0);
        }
    }
    new count;
    for(new i = 0; i < MAX_OBJECTS; i ++)
    {
        if(IsValidObject(i)) count++;
    }
    printf("%i objects loaded.", count);
    SetGameModeText(SERVER_SHORT_NAME"-"SERVER_REVISION);

	return 1;
}

hook OnGameModeExit()
{
	mysql_close(connectionID);
	return 1;
}



forward OnAdminOfflineCheck(playerid, username[]);
public OnAdminOfflineCheck(playerid, username[])
{
    if(!cache_get_row_count(connectionID))
	{
	    SendClientMessage(playerid, COLOR_GREY, "The player specified doesn't exist.");
	}
	else
	{
	    // At first I didn't know how I was going to do this. But then I came up with a plan.
	    // Load everything into an unused player slot, use DisplayStats as normal, then destroy the data.
	    // This ensures that whenever I add a new thing to /stats for instance, I don't have to maintain
	    // two stats functions, I can just call DisplayStats and let the work do itself.

	    PlayerData[MAX_PLAYERS][pID] = cache_get_field_content_int(0, "uid");
		PlayerData[MAX_PLAYERS][pSetup] = cache_get_field_content_int(0, "setup");
        PlayerData[MAX_PLAYERS][pGender] = cache_get_field_content_int(0, "gender");
        PlayerData[MAX_PLAYERS][pAge] = cache_get_field_content_int(0, "age");
        PlayerData[MAX_PLAYERS][pSkin] = cache_get_field_content_int(0, "skin");
        PlayerData[MAX_PLAYERS][pCameraX] = cache_get_field_content_float(0, "camera_x");
        PlayerData[MAX_PLAYERS][pCameraY] = cache_get_field_content_float(0, "camera_y");
        PlayerData[MAX_PLAYERS][pCameraZ] = cache_get_field_content_float(0, "camera_z");
        PlayerData[MAX_PLAYERS][pPosX] = cache_get_field_content_float(0, "pos_x");
        PlayerData[MAX_PLAYERS][pPosY] = cache_get_field_content_float(0, "pos_y");
        PlayerData[MAX_PLAYERS][pPosZ] = cache_get_field_content_float(0, "pos_z");
        PlayerData[MAX_PLAYERS][pPosA] = cache_get_field_content_float(0, "pos_a");
        PlayerData[MAX_PLAYERS][pInterior] = cache_get_field_content_int(0, "interior");
        PlayerData[MAX_PLAYERS][pWorld] = cache_get_field_content_int(0, "world");
        PlayerData[MAX_PLAYERS][pCash] = cache_get_field_content_int(0, "cash");
        PlayerData[MAX_PLAYERS][pBank] = cache_get_field_content_int(0, "bank");
        PlayerData[MAX_PLAYERS][pPaycheck] = cache_get_field_content_int(0, "paycheck");
        PlayerData[MAX_PLAYERS][pLevel] = cache_get_field_content_int(0, "level");//pVehicleCMD
        PlayerData[MAX_PLAYERS][pAdminStrike] = cache_get_field_content_int(0, "adminstrike");

        PlayerData[MAX_PLAYERS][pGunLicense] = cache_get_field_content_int(0, "gunlicense");
        PlayerData[MAX_PLAYERS][pvLock] = cache_get_field_content_int(0, "vehlock");
        PlayerData[MAX_PLAYERS][pGraphic] = cache_get_field_content_int(0, "graphic");
        PlayerData[MAX_PLAYERS][pEXP] = cache_get_field_content_int(0, "exp");
        PlayerData[MAX_PLAYERS][pMinutes] = cache_get_field_content_int(0, "minutes");
        PlayerData[MAX_PLAYERS][pHours] = cache_get_field_content_int(0, "hours");
        PlayerData[MAX_PLAYERS][pAdmin] = cache_get_field_content_int(0, "adminlevel");
        PlayerData[MAX_PLAYERS][pHelper] = cache_get_field_content_int(0, "helperlevel");
        PlayerData[MAX_PLAYERS][pHealth] = cache_get_field_content_float(0, "health");
        PlayerData[MAX_PLAYERS][pArmor] = cache_get_field_content_float(0, "armor");
		PlayerData[MAX_PLAYERS][pUpgradePoints] = cache_get_field_content_int(0, "upgradepoints");
		PlayerData[MAX_PLAYERS][pWarnings] = cache_get_field_content_int(0, "warnings");
		PlayerData[MAX_PLAYERS][pInjured] = cache_get_field_content_int(0, "injured");
		PlayerData[MAX_PLAYERS][pHospital] = cache_get_field_content_int(0, "hospital");
		PlayerData[MAX_PLAYERS][pSpawnHealth] = cache_get_field_content_float(0, "spawnhealth");
        PlayerData[MAX_PLAYERS][pSpawnArmor] = cache_get_field_content_float(0, "spawnarmor");
        PlayerData[MAX_PLAYERS][pJailType] = cache_get_field_content_int(0, "jailtype");
        PlayerData[MAX_PLAYERS][pJailTime] = cache_get_field_content_int(0, "jailtime");
        PlayerData[MAX_PLAYERS][pNewbieMuted] = cache_get_field_content_int(0, "newbiemuted");
        PlayerData[MAX_PLAYERS][pHelpMuted] = cache_get_field_content_int(0, "helpmuted");
        PlayerData[MAX_PLAYERS][pAdMuted] = cache_get_field_content_int(0, "admuted");
        PlayerData[MAX_PLAYERS][pLiveMuted] = cache_get_field_content_int(0, "livemuted");
        PlayerData[MAX_PLAYERS][pGlobalMuted] = cache_get_field_content_int(0, "globalmuted");
        PlayerData[MAX_PLAYERS][pReportMuted] = cache_get_field_content_int(0, "reportmuted");
        PlayerData[MAX_PLAYERS][pReportWarns] = cache_get_field_content_int(0, "reportwarns");
        PlayerData[MAX_PLAYERS][pFightStyle] = cache_get_field_content_int(0, "fightstyle");
		PlayerData[MAX_PLAYERS][pPhone] = cache_get_field_content_int(0, "phone");
		PlayerData[MAX_PLAYERS][pJob] = cache_get_field_content_int(0, "job");
		PlayerData[MAX_PLAYERS][pSecondJob] = cache_get_field_content_int(0, "secondjob");
		PlayerData[MAX_PLAYERS][pCrimes] = cache_get_field_content_int(0, "crimes");
		PlayerData[MAX_PLAYERS][pArrested] = cache_get_field_content_int(0, "arrested");
		PlayerData[MAX_PLAYERS][pWantedLevel] = cache_get_field_content_int(0, "wantedlevel");		
		PlayerData[MAX_PLAYERS][pNotoriety] = cache_get_field_content_int(0, "notoriety");		
		PlayerData[MAX_PLAYERS][pMaterials] = cache_get_field_content_int(0, "materials");
		PlayerData[MAX_PLAYERS][pWeed] = cache_get_field_content_int(0, "weed");
		PlayerData[MAX_PLAYERS][pCocaine] = cache_get_field_content_int(0, "cocaine");
		PlayerData[MAX_PLAYERS][pHeroin] = cache_get_field_content_int(0, "heroin");
		PlayerData[MAX_PLAYERS][pPainkillers] = cache_get_field_content_int(0, "painkillers");
		PlayerData[MAX_PLAYERS][pSeeds] = cache_get_field_content_int(0, "seeds");
		PlayerData[MAX_PLAYERS][pEphedrine] = cache_get_field_content_int(0, "ephedrine");
		PlayerData[MAX_PLAYERS][pMuriaticAcid] = cache_get_field_content_int(0, "muriaticacid");
		PlayerData[MAX_PLAYERS][pBakingSoda] = cache_get_field_content_int(0, "bakingsoda");
		PlayerData[MAX_PLAYERS][pCigars] = cache_get_field_content_int(0, "cigars");
		PlayerData[MAX_PLAYERS][pPrivateRadio] = cache_get_field_content_int(0, "walkietalkie");
		PlayerData[MAX_PLAYERS][pChannel] = cache_get_field_content_int(0, "channel");
		PlayerData[MAX_PLAYERS][pRentingHouse] = cache_get_field_content_int(0, "rentinghouse");
		PlayerData[MAX_PLAYERS][pSpraycans] = cache_get_field_content_int(0, "spraycans");
		PlayerData[MAX_PLAYERS][pBoombox] = cache_get_field_content_int(0, "boombox");
		PlayerData[MAX_PLAYERS][pMP3Player] = cache_get_field_content_int(0, "mp3player");
		PlayerData[MAX_PLAYERS][pPhonebook] = cache_get_field_content_int(0, "phonebook");
		PlayerData[MAX_PLAYERS][pFishingRod] = cache_get_field_content_int(0, "fishingrod");
		PlayerData[MAX_PLAYERS][pFishingBait] = cache_get_field_content_int(0, "fishingbait");
		PlayerData[MAX_PLAYERS][pFishWeight] = cache_get_field_content_int(0, "fishweight");
		PlayerData[MAX_PLAYERS][pComponents] = cache_get_field_content_int(0, "components");
		PlayerData[MAX_PLAYERS][pSweep] = cache_get_field_content_int(0, "sweep");
		PlayerData[MAX_PLAYERS][pSweepLeft] = cache_get_field_content_int(0, "sweepleft");
		PlayerData[MAX_PLAYERS][pRccam] = cache_get_field_content_int(0, "rccam");
		PlayerData[MAX_PLAYERS][pCondom] = cache_get_field_content_int(0, "condom");

		PlayerData[MAX_PLAYERS][pMechanicSkill] = cache_get_field_content_int(0, "mechanicskill");
		PlayerData[MAX_PLAYERS][pSmugglerSkill] = cache_get_field_content_int(0, "smugglerskill");
		PlayerData[MAX_PLAYERS][pWeaponSkill] = cache_get_field_content_int(0, "weaponskill");
		PlayerData[MAX_PLAYERS][pDrugDealerSkill] = cache_get_field_content_int(0, "drugdealerskill");
		PlayerData[MAX_PLAYERS][pDetectiveSkill] = cache_get_field_content_int(0, "detectiveskill");
		PlayerData[MAX_PLAYERS][pFarmerSkill] = cache_get_field_content_int(0, "farmerskill");
		PlayerData[MAX_PLAYERS][pLawyerSkill] = cache_get_field_content_int(0, "lawyerskill");
		PlayerData[MAX_PLAYERS][pForkliftSkill] = cache_get_field_content_int(0, "forkliftskill");
		PlayerData[MAX_PLAYERS][pCarJackerSkill] = cache_get_field_content_int(0, "carjackerskill");
		PlayerData[MAX_PLAYERS][pCraftSkill] = cache_get_field_content_int(0, "craftskill");
		PlayerData[MAX_PLAYERS][pPizzaSkill] = cache_get_field_content_int(0, "pizzaskill");
		PlayerData[MAX_PLAYERS][pTruckerSkill] = cache_get_field_content_int(0, "truckerskill");
		PlayerData[MAX_PLAYERS][pHookerSkill] = cache_get_field_content_int(0, "hookerskill");
		PlayerData[MAX_PLAYERS][pRobberySkill] = cache_get_field_content_int(0, "robberyskill");
		PlayerData[MAX_PLAYERS][pFishingSkill] = cache_get_field_content_int(0, "fishingskill");
		
		PlayerData[MAX_PLAYERS][pToggleTextdraws] = cache_get_field_content_int(0, "toggletextdraws");
		PlayerData[MAX_PLAYERS][pToggleOOC] = cache_get_field_content_int(0, "toggleooc");
		PlayerData[MAX_PLAYERS][pTogglePhone] = cache_get_field_content_int(0, "togglephone");
		PlayerData[MAX_PLAYERS][pToggleAdmin] = cache_get_field_content_int(0, "toggleadmin");
		PlayerData[MAX_PLAYERS][pToggleHelper] = cache_get_field_content_int(0, "togglehelper");
		PlayerData[MAX_PLAYERS][pTogglePoints] = cache_get_field_content_int(0, "togglepoints");
		PlayerData[MAX_PLAYERS][pToggleTurfs] = cache_get_field_content_int(0, "toggleturfs");
		PlayerData[MAX_PLAYERS][pToggleNewbie] = cache_get_field_content_int(0, "togglenewbie");
		PlayerData[MAX_PLAYERS][pTogglePR] = cache_get_field_content_int(0, "togglewt");
		PlayerData[MAX_PLAYERS][pToggleRadio] = cache_get_field_content_int(0, "toggleradio");
		PlayerData[MAX_PLAYERS][pTogglePM] = cache_get_field_content_int(0, "togglepm");
		PlayerData[MAX_PLAYERS][pToggleVIP] = cache_get_field_content_int(0, "togglevip");
		PlayerData[MAX_PLAYERS][pToggleMusic] = cache_get_field_content_int(0, "togglemusic");
		PlayerData[MAX_PLAYERS][pToggleFaction] = cache_get_field_content_int(0, "togglefaction");
		PlayerData[MAX_PLAYERS][pToggleNews] = cache_get_field_content_int(0, "togglenews");
		PlayerData[MAX_PLAYERS][pToggleGlobal] = cache_get_field_content_int(0, "toggleglobal");
		PlayerData[MAX_PLAYERS][pToggleCam] = cache_get_field_content_int(0, "togglecam");
		PlayerData[MAX_PLAYERS][pToggleHUD] = cache_get_field_content_int(0, "togglehud");
		PlayerData[MAX_PLAYERS][pToggleReports] = cache_get_field_content_int(0, "togglereports");
		PlayerData[MAX_PLAYERS][pToggleWhisper] = cache_get_field_content_int(0, "togglewhisper");
		PlayerData[MAX_PLAYERS][pCarLicense] = cache_get_field_content_int(0, "carlicense");
		PlayerData[MAX_PLAYERS][pDonator] = cache_get_field_content_int(0, "vippackage");
		PlayerData[MAX_PLAYERS][pVIPTime] = cache_get_field_content_int(0, "viptime");
		PlayerData[MAX_PLAYERS][pVIPCooldown] = cache_get_field_content_int(0, "vipcooldown");
		PlayerData[MAX_PLAYERS][pWeapons][0] = cache_get_field_content_int(0, "weapon_0");
		PlayerData[MAX_PLAYERS][pWeapons][1] = cache_get_field_content_int(0, "weapon_1");
		PlayerData[MAX_PLAYERS][pWeapons][2] = cache_get_field_content_int(0, "weapon_2");
		PlayerData[MAX_PLAYERS][pWeapons][3] = cache_get_field_content_int(0, "weapon_3");
		PlayerData[MAX_PLAYERS][pWeapons][4] = cache_get_field_content_int(0, "weapon_4");
		PlayerData[MAX_PLAYERS][pWeapons][5] = cache_get_field_content_int(0, "weapon_5");
		PlayerData[MAX_PLAYERS][pWeapons][6] = cache_get_field_content_int(0, "weapon_6");
		PlayerData[MAX_PLAYERS][pWeapons][7] = cache_get_field_content_int(0, "weapon_7");
		PlayerData[MAX_PLAYERS][pWeapons][8] = cache_get_field_content_int(0, "weapon_8");
		PlayerData[MAX_PLAYERS][pWeapons][9] = cache_get_field_content_int(0, "weapon_9");
		PlayerData[MAX_PLAYERS][pWeapons][10] = cache_get_field_content_int(0, "weapon_10");
		PlayerData[MAX_PLAYERS][pWeapons][11] = cache_get_field_content_int(0, "weapon_11");
		PlayerData[MAX_PLAYERS][pWeapons][12] = cache_get_field_content_int(0, "weapon_12");
		PlayerData[MAX_PLAYERS][pAmmo][0] = cache_get_field_content_int(0, "ammo_0");
		PlayerData[MAX_PLAYERS][pAmmo][1] = cache_get_field_content_int(0, "ammo_1");
		PlayerData[MAX_PLAYERS][pAmmo][2] = cache_get_field_content_int(0, "ammo_2");
		PlayerData[MAX_PLAYERS][pAmmo][3] = cache_get_field_content_int(0, "ammo_3");
		PlayerData[MAX_PLAYERS][pAmmo][4] = cache_get_field_content_int(0, "ammo_4");
		PlayerData[MAX_PLAYERS][pAmmo][5] = cache_get_field_content_int(0, "ammo_5");
		PlayerData[MAX_PLAYERS][pAmmo][6] = cache_get_field_content_int(0, "ammo_6");
		PlayerData[MAX_PLAYERS][pAmmo][7] = cache_get_field_content_int(0, "ammo_7");
		PlayerData[MAX_PLAYERS][pAmmo][8] = cache_get_field_content_int(0, "ammo_8");
		PlayerData[MAX_PLAYERS][pAmmo][9] = cache_get_field_content_int(0, "ammo_9");
		PlayerData[MAX_PLAYERS][pAmmo][10] = cache_get_field_content_int(0, "ammo_10");
		PlayerData[MAX_PLAYERS][pAmmo][11] = cache_get_field_content_int(0, "ammo_11");
		PlayerData[MAX_PLAYERS][pAmmo][12] = cache_get_field_content_int(0, "ammo_12");
		PlayerData[MAX_PLAYERS][pFaction] = cache_get_field_content_int(0, "faction");
		PlayerData[MAX_PLAYERS][pFactionRank] = cache_get_field_content_int(0, "factionrank");
		PlayerData[MAX_PLAYERS][pFactionLeader] = cache_get_field_content_int(0, "factionleader");
		PlayerData[MAX_PLAYERS][pGang] = cache_get_field_content_int(0, "gang");
		PlayerData[MAX_PLAYERS][pGangRank] = cache_get_field_content_int(0, "gangrank");
		PlayerData[MAX_PLAYERS][pDivision] = cache_get_field_content_int(0, "division");
		PlayerData[MAX_PLAYERS][pCrew] = cache_get_field_content_int(0, "crew");
		PlayerData[MAX_PLAYERS][pContracted] = cache_get_field_content_int(0, "contracted");
		PlayerData[MAX_PLAYERS][pBombs] = cache_get_field_content_int(0, "bombs");
		PlayerData[MAX_PLAYERS][pCompletedHits] = cache_get_field_content_int(0, "completedhits");
		PlayerData[MAX_PLAYERS][pFailedHits] = cache_get_field_content_int(0, "failedhits");
		PlayerData[MAX_PLAYERS][pReports] = cache_get_field_content_int(0, "reports");
		PlayerData[MAX_PLAYERS][pNewbies] = cache_get_field_content_int(0, "newbies");
		PlayerData[MAX_PLAYERS][pHelpRequests] = cache_get_field_content_int(0, "helprequests");
		PlayerData[MAX_PLAYERS][pSpeedometer] = cache_get_field_content_int(0, "speedometer");
		PlayerData[MAX_PLAYERS][pFactionMod] = cache_get_field_content_int(0, "factionmod");
		PlayerData[MAX_PLAYERS][pWebDev] = cache_get_field_content_int(0, "webdev");
		PlayerData[MAX_PLAYERS][pGangMod] = cache_get_field_content_int(0, "gangmod");
		PlayerData[MAX_PLAYERS][pBanAppealer] = cache_get_field_content_int(0, "banappealer");
		PlayerData[MAX_PLAYERS][pFormerAdmin] = cache_get_field_content_int(0, "FormerAdmin");
		PlayerData[MAX_PLAYERS][pDeveloper] = cache_get_field_content_int(0, "scripter");
		PlayerData[MAX_PLAYERS][pWeedPlanted] = cache_get_field_content_int(0, "weedplanted");
		PlayerData[MAX_PLAYERS][pWeedTime] = cache_get_field_content_int(0, "weedtime");
		PlayerData[MAX_PLAYERS][pWeedGrams] = cache_get_field_content_int(0, "weedgrams");
		PlayerData[MAX_PLAYERS][pWeedX] = cache_get_field_content_float(0, "weed_x");
		PlayerData[MAX_PLAYERS][pWeedY] = cache_get_field_content_float(0, "weed_y");
		PlayerData[MAX_PLAYERS][pWeedZ] = cache_get_field_content_float(0, "weed_z");
		PlayerData[MAX_PLAYERS][pWeedA] = cache_get_field_content_float(0, "weed_a");
		PlayerData[MAX_PLAYERS][pInventoryUpgrade] = cache_get_field_content_int(0, "inventoryupgrade");
		PlayerData[MAX_PLAYERS][pAddictUpgrade] = cache_get_field_content_int(0, "addictupgrade");
        PlayerData[MAX_PLAYERS][pTraderUpgrade] = cache_get_field_content_int(0, "traderupgrade");
        PlayerData[MAX_PLAYERS][pAssetUpgrade] = cache_get_field_content_int(0, "assetupgrade");
        PlayerData[MAX_PLAYERS][pLaborUpgrade] = cache_get_field_content_int(0, "laborupgrade");
		PlayerData[MAX_PLAYERS][pDMWarnings] = cache_get_field_content_int(0, "dmwarnings");
		PlayerData[MAX_PLAYERS][pWeaponRestricted] = cache_get_field_content_int(0, "weaponrestricted");
		PlayerData[MAX_PLAYERS][pReferralUID] = cache_get_field_content_int(0, "referral_uid");
		PlayerData[MAX_PLAYERS][pWatch] = cache_get_field_content_int(0, "watch");
		PlayerData[MAX_PLAYERS][pGPS] = cache_get_field_content_int(0, "gps");
		PlayerData[MAX_PLAYERS][pClothes] = cache_get_field_content_int(0, "clothes");
		PlayerData[MAX_PLAYERS][pShowLands] = cache_get_field_content_int(0, "showlands");
		PlayerData[MAX_PLAYERS][pShowTurfs] = cache_get_field_content_int(0, "showturfs");
		PlayerData[MAX_PLAYERS][pWatchOn] = cache_get_field_content_int(0, "watchon");
		PlayerData[MAX_PLAYERS][pGPSOn] = cache_get_field_content_int(0, "gpson");
		PlayerData[MAX_PLAYERS][pDoubleXP] = cache_get_field_content_int(0, "doublexp");
        PlayerData[MAX_PLAYERS][pDetectiveCooldown] = cache_get_field_content_int(0, "detectivecooldown");
        PlayerData[MAX_PLAYERS][pThiefCooldown] = cache_get_field_content_int(0, "thiefcooldown");
        PlayerData[MAX_PLAYERS][pCocaineCooldown] = cache_get_field_content_int(0, "crackcooldown");
    	PlayerData[MAX_PLAYERS][pGasCan] = cache_get_field_content_int(0, "gascan");
    	PlayerData[MAX_PLAYERS][pDuty] = cache_get_field_content_int(0, "duty");
    	PlayerData[MAX_PLAYERS][pBandana] = cache_get_field_content_int(0, "bandana");
        PlayerData[MAX_PLAYERS][pPassport] = cache_get_field_content_int(0, "passport");
        PlayerData[MAX_PLAYERS][pPassportLevel] = cache_get_field_content_int(0, "passportlevel");
        PlayerData[MAX_PLAYERS][pPassportSkin] = cache_get_field_content_int(0, "passportskin");
        PlayerData[MAX_PLAYERS][pPassportPhone] = cache_get_field_content_int(0, "passportphone");
		//
        PlayerData[MAX_PLAYERS][pNewbieMuteTime] = cache_get_field_content_int(0, "newbiemutetime");
		PlayerData[MAX_PLAYERS][pReportMuteTime] = cache_get_field_content_int(0, "reportmutetime");
		PlayerData[MAX_PLAYERS][pGlobalMuteTime] = cache_get_field_content_int(0, "globalmutetime");
		PlayerData[MAX_PLAYERS][pAdminHide] = cache_get_field_content_int(0, "adminhide");
		PlayerData[MAX_PLAYERS][pInsurance] = cache_get_field_content_int(0, "insurance");
		PlayerData[MAX_PLAYERS][pRope] = cache_get_field_content_int(0, "rope");
		PlayerData[MAX_PLAYERS][pTotalPatients] = cache_get_field_content_int(0, "totalpatients");
		PlayerData[MAX_PLAYERS][pTotalFires] = cache_get_field_content_int(0, "totalfires");

		strcpy(PlayerData[MAX_PLAYERS][pUsername], username, MAX_PLAYER_NAME);
		DisplayStats(MAX_PLAYERS, playerid);
	}
}

PlayNearbySound(playerid, soundid)
{
	new
		Float:x,
		Float:y,
		Float:z;

	GetPlayerPos(playerid, x, y, z);

	foreach (new i : Player)
	{
		if (i == playerid || IsPlayerStreamedIn(playerid, i))
		{
			PlayerPlaySound(i, soundid, x, y, z);
		}
	}
}

forward HandlePhoneRing(playerid);
public HandlePhoneRing(playerid)
{
	if (PlayerData[playerid][pCalling] != 1)
	{
		return 0;
	}

	PlayNearbySound(playerid, 20600);
	SetTimerEx("HandlePhoneRing", 4000, false, "i", playerid);

	return 1;
}

forward HandlePhoneDial(playerid);
public HandlePhoneDial(playerid)
{
	if (PlayerData[playerid][pCalling] != 1)
	{
		return 0;
	}

	PlayerPlaySound(playerid, 16001, 0.0, 0.0, 0.0);
	SetTimerEx("HandlePhoneDial", 4000, false, "i", playerid);

	return 1;
}

forward OnPhoneResponse(playerid, number);
public OnPhoneResponse(playerid, number)
{
	if ((PlayerData[playerid][pPayphone] != -1 && GetClosestPayphone(playerid) != PlayerData[playerid][pPayphone]) || PlayerData[playerid][pTogglePhone] || !PlayerData[playerid][pCalling])
	{
		return 0;
	}

	switch (number)
	{
		case 911:
		{
			PlayerData[playerid][pCalling] = 911;
			ShowActionBubble(playerid, "* %s dials a number on their keypad and begins a call.", GetRPName(playerid));
			SendClientMessage(playerid, COLOR_YELLOW, "Dispatch: 911, what is your emergency? Enter 'police' or 'medic'.");
		}
		case 8294:
		{
			SendClientMessage(playerid, COLOR_YELLOW, "(Phone) Taxi: Would you like to request a taxi? Say 'yes' or 'no'.");
			PlayerData[playerid][pCalling] = 8294;
		}
		case 6324:
		{

			SendClientMessage(playerid, COLOR_LIGHTORANGE, "Dispatch: This is the mechanic hotline. Please explain your situation to us.");
			PlayerData[playerid][pCalling] = 6324;

		}
		default:
		{
			new targetid = GetPhonePlayerID(number);

			if (targetid == INVALID_PLAYER_ID)
			{
				SendClientMessage(playerid, COLOR_GREY, "* This cellphone number is currently not in service. *");
				HangupCall(playerid);
			}
			else if (IsPhoneBusy(number))
			{
				SendClientMessage(playerid, COLOR_GREY, "* You would hear a busy tone. *");
				HangupCall(playerid);
			}
		}
	}
	return 1;
}

IsValidUsername(username[])
{
    if(strcmp(username, "Khalil_Zoldyck", true)==0) return true;
    new arrForbiddenNames[][] = {
            "com1", "com2", "com3", "com4",
            "com5", "com6", "com7", "com8",
            "com9", "lpt4", "lpt5", "lpt6",
            "lpt7", "lpt8", "lpt9", "nul",
            "clock$", "aux", "prn", "con",
            "InvalidNick", "BannedPlayer","rex",
            "Khalil","Zoldyck","Bot"
        },
        iLength,
        i;

    iLength = strlen(username);

    while(i < sizeof(arrForbiddenNames))
    {
        if(strcmp(arrForbiddenNames[i++], username, true) == 0) 
        {
            return 0;
        }
    }
    if(username[iLength - 1] == '_' || username[0] == '_' || strfind(username, "_", false) == -1)
    {
        return 0;
    }

    new namepart[32];
    new npidx = 0;
    for(new idx = 0; idx < iLength; idx ++)
    {
        if(username[idx] == '_')
        {
            namepart[npidx] = 0;
            npidx = 0;

            if(namepart[0] == 0)
            {
                return 0;
            }

            if(strval(namepart) != 0 || (namepart[0] == 48 && namepart[1] ==0))
            {
                return 0;
            }

            continue;
        }
        else if(!((48 <= username[idx] <= 57) || (65 <= username[idx] <= 90) || (97 <= username[idx] <= 122)))
        {
            return 0;            
        }
        namepart[npidx] = username[idx];
        npidx++;
    }

    if(namepart[0] != 0)
    {
        namepart[npidx] = 0;
        if(strval(namepart) != 0 || (namepart[0] == 48 && namepart[1] == 0))
        {
            return 0;
        }
    }
    return 1;
}

IsValidAdminName(username[])
{
    new arrForbiddenNames[][] = {
            "com1", "com2", "com3", "com4",
            "com5", "com6", "com7", "com8",
            "com9", "lpt4", "lpt5", "lpt6",
            "lpt7", "lpt8", "lpt9", "nul",
            "clock$", "aux", "prn", "con",
            "InvalidNick", "BannedPlayer"
        },
        iLength,
        i;

    iLength = strlen(username);

    while(i < sizeof(arrForbiddenNames))
    {
        if(strcmp(arrForbiddenNames[i++], username, true) == 0) 
        {
            return 0;
        }
    }
    if(username[iLength - 1] == '_' || username[0] == '_')
    {
        return 0;
    }

    if(strfind(username, "_", false) != -1)
    {
        return 0;
    }

    new namepart[32];
    new npidx = 0;
    for(new idx = 0; idx < iLength; idx ++)
    {
        if(username[idx] == '_')
        {
            namepart[npidx] = 0;
            npidx = 0;

            if(namepart[0] == 0)
            {
                return 0;
            }

            if(strval(namepart) != 0 || (namepart[0] == 48 && namepart[1] ==0))
            {
                return 0;
            }

            continue;
        }
        else if(!((48 <= username[idx] <= 57) || (65 <= username[idx] <= 90) || (97 <= username[idx] <= 122)))
        {
            return 0;            
        }
        namepart[npidx] = username[idx];
        npidx++;
    }

    if(namepart[0] != 0)
    {
        namepart[npidx] = 0;
        if(strval(namepart) != 0 || (namepart[0] == 48 && namepart[1] == 0))
        {
            return 0;
        }
    }
    return 1;
}

hook OnRemoveBuildings(playerid)
{

	//GarbageMan
	RemoveBuildingForPlayer(playerid, 1412, 2415.8672, -2145.4375, 13.7500, 0.25);
	RemoveBuildingForPlayer(playerid, 1412, 2421.1406, -2145.3438, 13.7500, 0.25);
	
	//Trucker
	RemoveBuildingForPlayer(playerid, 3709, 2206.3125, -2616.4688, 17.0703, 0.25);
	RemoveBuildingForPlayer(playerid, 3744, 2205.1563, -2582.7891, 14.8125, 0.25);
	RemoveBuildingForPlayer(playerid, 3623, 2206.3125, -2616.4688, 17.0703, 0.25);
	RemoveBuildingForPlayer(playerid, 3574, 2205.1563, -2582.7891, 14.8125, 0.25);	
	RemoveBuildingForPlayer(playerid, 3744, 2262.8359, -2638.7734, 14.8125, 0.25);
	RemoveBuildingForPlayer(playerid, 3574, 2262.8359, -2638.7734, 14.8125, 0.25);

	//Drek's house
	RemoveBuildingForPlayer(playerid, 1261, 1715.7109, -780.3281, 68.3984, 0.25);
	RemoveBuildingForPlayer(playerid, 1267, 1715.7109, -780.3281, 68.3984, 0.25);
	RemoveBuildingForPlayer(playerid, 617, 1724.1172, -746.0234, 50.4922, 0.25);

    
	/////////////aerodrom nikola tesla
	RemoveBuildingForPlayer(playerid, 1215, 1586.210, -2325.562, 13.023, 0.250);
	RemoveBuildingForPlayer(playerid, 4992, 1654.539, -2286.804, 13.320, 0.250);
	RemoveBuildingForPlayer(playerid, 712, 1568.578, -2364.148, 21.648, 0.250);
	RemoveBuildingForPlayer(playerid, 620, 1569.312, -2342.109, 11.296, 0.250);
	RemoveBuildingForPlayer(playerid, 1226, 1570.679, -2323.421, 16.312, 0.250);

    
    // ---------------------------< Mechanic > ------------------------------ //
	RemoveBuildingForPlayer(playerid, 5516, 1977.8359, -1569.0469, 19.0703, 0.25);
	RemoveBuildingForPlayer(playerid, 5634, 1931.3125, -1574.8438, 16.4609, 0.25);
	RemoveBuildingForPlayer(playerid, 1524, 1959.3984, -1577.7578, 13.7578, 0.25);
	RemoveBuildingForPlayer(playerid, 714, 2007.6094, -1556.6563, 12.5938, 0.25);
	RemoveBuildingForPlayer(playerid, 1308, 1943.8672, -1602.8047, 12.7813, 0.25);
	RemoveBuildingForPlayer(playerid, 5630, 1928.4922, -1575.9688, 20.5547, 0.25);
	RemoveBuildingForPlayer(playerid, 1307, 1931.7422, -1569.8828, 12.6641, 0.25);
	RemoveBuildingForPlayer(playerid, 700, 1942.5625, -1599.2969, 12.9922, 0.25);
	RemoveBuildingForPlayer(playerid, 620, 1954.3594, -1603.6406, 12.5000, 0.25);
	RemoveBuildingForPlayer(playerid, 645, 1976.1719, -1600.1797, 12.1953, 0.25);
	RemoveBuildingForPlayer(playerid, 5475, 1977.8359, -1569.0469, 19.0703, 0.25);
	RemoveBuildingForPlayer(playerid, 620, 1987.1172, -1618.2578, 12.5000, 0.25);
	RemoveBuildingForPlayer(playerid, 1307, 1983.3359, -1557.6797, 12.6641, 0.25);
	RemoveBuildingForPlayer(playerid, 700, 2021.3359, -1599.2969, 12.9922, 0.25);
	RemoveBuildingForPlayer(playerid, 1264, 2019.5313, -1597.0000, 13.0703, 0.25);
	RemoveBuildingForPlayer(playerid, 5422, 2071.4766, -1831.4219, 14.5625, 0.25);
	RemoveBuildingForPlayer(playerid, 11327, -2026.9141, 129.4063, 30.4531, 0.25);
	RemoveBuildingForPlayer(playerid, 11319, -1904.5313, 277.8984, 42.9531, 0.25);

	// House objects
	RemoveBuildingForPlayer(playerid, 14862, 245.5547, 300.8594, 998.8359, 0.25); // int 1
	RemoveBuildingForPlayer(playerid, 1740, 243.8828, 301.9766, 998.2344, 0.25);
	RemoveBuildingForPlayer(playerid, 14861, 245.7578, 302.2344, 998.5469, 0.25);
	RemoveBuildingForPlayer(playerid, 14860, 246.5156, 301.5859, 1000.0000, 0.25);
	RemoveBuildingForPlayer(playerid, 14864, 246.1875, 303.1094, 998.2656, 0.25);
	RemoveBuildingForPlayer(playerid, 1734, 246.7109, 303.8750, 1002.1172, 0.25);
	RemoveBuildingForPlayer(playerid, 14863, 246.9844, 303.5781, 998.7500, 0.25);
	RemoveBuildingForPlayer(playerid, 2103, 248.4063, 300.5625, 999.3047, 0.25);
	RemoveBuildingForPlayer(playerid, 2088, 248.4922, 304.3516, 998.2266, 0.25);
	RemoveBuildingForPlayer(playerid, 1741, 248.4844, 306.1250, 998.1406, 0.25);
	RemoveBuildingForPlayer(playerid, 1741, 248.8672, 301.9609, 998.1406, 0.25);
	RemoveBuildingForPlayer(playerid, 1744, 250.1016, 301.9609, 999.4531, 0.25);
	RemoveBuildingForPlayer(playerid, 1744, 250.1016, 301.9609, 1000.1563, 0.25);
    /*RemoveBuildingForPlayer(playerid, 2251, 266.4531, 303.3672, 998.9844, 0.25); // int 2
	RemoveBuildingForPlayer(playerid, 14867, 270.2813, 302.5547, 999.6797, 0.25);
	RemoveBuildingForPlayer(playerid, 1720, 272.9063, 304.7891, 998.1641, 0.25);
	RemoveBuildingForPlayer(playerid, 14870, 273.1641, 303.1719, 1000.9141, 0.25);
	RemoveBuildingForPlayer(playerid, 2251, 273.9922, 303.3672, 998.9844, 0.25);
	RemoveBuildingForPlayer(playerid, 14868, 274.1328, 304.5078, 1001.1953, 0.25);
	RemoveBuildingForPlayer(playerid, 948, 266.5703, 306.4453, 998.1406, 0.25);
	RemoveBuildingForPlayer(playerid, 14866, 270.1172, 307.6094, 998.7578, 0.25);
	RemoveBuildingForPlayer(playerid, 14869, 273.8125, 305.0156, 998.9531, 0.25);*/
 	RemoveBuildingForPlayer(playerid, 15039, 2232.3438, -1106.7422, 1049.7500, 0.25); //
	RemoveBuildingForPlayer(playerid, 15038, 2235.2891, -1108.1328, 1051.2656, 0.25);
    RemoveBuildingForPlayer(playerid, 15035, 2205.9375, -1073.9922, 1049.4844, 0.25);
    RemoveBuildingForPlayer(playerid, 15028, 2263.1250, -1138.2422, 1049.8438, 0.25);
	RemoveBuildingForPlayer(playerid, 15026, 2264.9063, -1137.7656, 1051.3594, 0.25);
    RemoveBuildingForPlayer(playerid, 2123, 2312.9609, -1145.0703, 1050.3203, 0.25);
	RemoveBuildingForPlayer(playerid, 2123, 2314.2969, -1146.3125, 1050.3203, 0.25);
	RemoveBuildingForPlayer(playerid, 2123, 2315.4219, -1145.0703, 1050.3203, 0.25);
	RemoveBuildingForPlayer(playerid, 2086, 2314.2734, -1144.8984, 1050.0859, 0.25);
	RemoveBuildingForPlayer(playerid, 2123, 2314.2969, -1143.6250, 1050.3203, 0.25);
	RemoveBuildingForPlayer(playerid, 2281, 2318.7813, -1145.4609, 1054.5938, 0.25);
	RemoveBuildingForPlayer(playerid, 2138, 2331.3359, -1144.0859, 1049.6953, 0.25);
	RemoveBuildingForPlayer(playerid, 2138, 2335.3594, -1144.0703, 1049.6719, 0.25);
	RemoveBuildingForPlayer(playerid, 2135, 2336.3516, -1144.0781, 1049.6719, 0.25);
	RemoveBuildingForPlayer(playerid, 2305, 2337.3203, -1144.0781, 1049.6719, 0.25);
	RemoveBuildingForPlayer(playerid, 2138, 2331.3359, -1143.1016, 1049.6953, 0.25);
	RemoveBuildingForPlayer(playerid, 2138, 2337.3203, -1143.0938, 1049.6719, 0.25);
	RemoveBuildingForPlayer(playerid, 1703, 2322.2266, -1142.4766, 1049.4766, 0.25);
	RemoveBuildingForPlayer(playerid, 1822, 2323.9297, -1142.2578, 1049.4844, 0.25);
	RemoveBuildingForPlayer(playerid, 1741, 2312.6484, -1140.7891, 1053.3750, 0.25);
	RemoveBuildingForPlayer(playerid, 2138, 2331.3359, -1142.1094, 1049.6953, 0.25);
	RemoveBuildingForPlayer(playerid, 2138, 2331.3359, -1141.1172, 1049.6953, 0.25);
	RemoveBuildingForPlayer(playerid, 2079, 2334.4219, -1140.9688, 1050.3359, 0.25);
	RemoveBuildingForPlayer(playerid, 1703, 2326.5234, -1140.5703, 1049.4766, 0.25);
	RemoveBuildingForPlayer(playerid, 2138, 2337.3203, -1142.1094, 1049.6719, 0.25);
	RemoveBuildingForPlayer(playerid, 2139, 2337.3125, -1141.1094, 1049.6641, 0.25);
	RemoveBuildingForPlayer(playerid, 2088, 2338.4531, -1141.3672, 1053.2734, 0.25);
	RemoveBuildingForPlayer(playerid, 2270, 2340.2734, -1141.7109, 1054.5391, 0.25);
	RemoveBuildingForPlayer(playerid, 2138, 2331.3359, -1140.1328, 1049.6953, 0.25);
	RemoveBuildingForPlayer(playerid, 1703, 2323.4375, -1139.5469, 1049.4766, 0.25);
	RemoveBuildingForPlayer(playerid, 2079, 2333.3281, -1139.8672, 1050.3359, 0.25);
	RemoveBuildingForPlayer(playerid, 2115, 2334.4297, -1139.6250, 1049.7109, 0.25);
	RemoveBuildingForPlayer(playerid, 2079, 2335.3672, -1139.8750, 1050.3359, 0.25);
	RemoveBuildingForPlayer(playerid, 2303, 2337.3281, -1140.1172, 1049.6719, 0.25);
	RemoveBuildingForPlayer(playerid, 2090, 2309.5156, -1139.3438, 1053.4219, 0.25);
	RemoveBuildingForPlayer(playerid, 2138, 2331.3359, -1139.1406, 1049.6953, 0.25);
	RemoveBuildingForPlayer(playerid, 2079, 2333.3281, -1138.8281, 1050.3359, 0.25);
	RemoveBuildingForPlayer(playerid, 2079, 2335.3672, -1138.8359, 1050.3359, 0.25);
	RemoveBuildingForPlayer(playerid, 2298, 2336.5391, -1138.7891, 1053.2813, 0.25);
	RemoveBuildingForPlayer(playerid, 2138, 2331.3359, -1138.1563, 1049.6953, 0.25);
	RemoveBuildingForPlayer(playerid, 2136, 2337.3281, -1138.1328, 1049.6719, 0.25);
	RemoveBuildingForPlayer(playerid, 2240, 2319.2500, -1137.8750, 1050.0156, 0.25);
	RemoveBuildingForPlayer(playerid, 2240, 2329.5000, -1137.8750, 1050.0156, 0.25);
	RemoveBuildingForPlayer(playerid, 2138, 2331.3359, -1137.1641, 1049.6953, 0.25);
	RemoveBuildingForPlayer(playerid, 2079, 2334.4219, -1137.5859, 1050.3359, 0.25);
	RemoveBuildingForPlayer(playerid, 2139, 2337.3125, -1137.1484, 1049.6641, 0.25);
	RemoveBuildingForPlayer(playerid, 2088, 2310.6641, -1136.3047, 1053.3672, 0.25);
	RemoveBuildingForPlayer(playerid, 2257, 2320.4141, -1134.6328, 1053.8281, 0.25);
	RemoveBuildingForPlayer(playerid, 2138, 2331.3359, -1136.1719, 1049.6953, 0.25);
	RemoveBuildingForPlayer(playerid, 2138, 2331.3359, -1135.1875, 1049.6953, 0.25);
	RemoveBuildingForPlayer(playerid, 2254, 2328.1484, -1134.6172, 1054.0625, 0.25);
	RemoveBuildingForPlayer(playerid, 2281, 2335.2656, -1136.4063, 1054.7266, 0.25);
	RemoveBuildingForPlayer(playerid, 2106, 2336.5156, -1135.0156, 1053.8047, 0.25);
	RemoveBuildingForPlayer(playerid, 2271, 2337.8047, -1135.3516, 1054.7031, 0.25);
	RemoveBuildingForPlayer(playerid, 2138, 2337.3203, -1136.1641, 1049.6719, 0.25);
	RemoveBuildingForPlayer(playerid, 2138, 2337.3203, -1135.1797, 1049.6719, 0.25);
	RemoveBuildingForPlayer(playerid, 2106, 2339.2031, -1135.0156, 1053.8047, 0.25);
	RemoveBuildingForPlayer(playerid, 1741, 2261.6953, -1223.0781, 1048.0156, 0.25);
	RemoveBuildingForPlayer(playerid, 2088, 2258.1406, -1220.5859, 1048.0078, 0.25);
	RemoveBuildingForPlayer(playerid, 2090, 2258.5938, -1221.5469, 1048.0625, 0.25);
	RemoveBuildingForPlayer(playerid, 2528, 2254.4063, -1218.2734, 1048.0234, 0.25);
	RemoveBuildingForPlayer(playerid, 2138, 2247.5547, -1213.9219, 1048.0156, 0.25);
	RemoveBuildingForPlayer(playerid, 2138, 2247.5547, -1212.9375, 1048.0156, 0.25);
	RemoveBuildingForPlayer(playerid, 2121, 2250.3047, -1213.9375, 1048.5234, 0.25);
	RemoveBuildingForPlayer(playerid, 2526, 2252.4297, -1215.4531, 1048.0391, 0.25);
	RemoveBuildingForPlayer(playerid, 2523, 2254.1953, -1215.4531, 1048.0156, 0.25);
	RemoveBuildingForPlayer(playerid, 2297, 2255.4219, -1213.5313, 1048.0156, 0.25);
	RemoveBuildingForPlayer(playerid, 2248, 2262.3906, -1215.5469, 1048.6094, 0.25);
	RemoveBuildingForPlayer(playerid, 1816, 2261.4141, -1213.4531, 1048.0078, 0.25);
	RemoveBuildingForPlayer(playerid, 2249, 2247.2969, -1212.1641, 1049.6250, 0.25);
	RemoveBuildingForPlayer(playerid, 2249, 2247.2969, -1208.8594, 1049.6250, 0.25);
	RemoveBuildingForPlayer(playerid, 2139, 2247.5625, -1211.9531, 1048.0078, 0.25);
	RemoveBuildingForPlayer(playerid, 2136, 2247.5469, -1210.9688, 1048.0156, 0.25);
	RemoveBuildingForPlayer(playerid, 2303, 2247.5469, -1208.9844, 1048.0156, 0.25);
	RemoveBuildingForPlayer(playerid, 2138, 2247.5547, -1207.9766, 1048.0156, 0.25);
	RemoveBuildingForPlayer(playerid, 2305, 2247.5547, -1206.9922, 1048.0156, 0.25);
	RemoveBuildingForPlayer(playerid, 2109, 2250.2813, -1212.2500, 1048.4141, 0.25);
	RemoveBuildingForPlayer(playerid, 2121, 2249.2344, -1211.4531, 1048.5234, 0.25);
	RemoveBuildingForPlayer(playerid, 2121, 2250.3047, -1210.8984, 1048.5234, 0.25);
	RemoveBuildingForPlayer(playerid, 2135, 2248.5234, -1206.9922, 1048.0156, 0.25);
	RemoveBuildingForPlayer(playerid, 2319, 2250.3438, -1206.9609, 1048.0078, 0.25);
	RemoveBuildingForPlayer(playerid, 1760, 2261.4609, -1212.0625, 1048.0078, 0.25);
	RemoveBuildingForPlayer(playerid, 2126, 2258.1094, -1210.3750, 1048.0156, 0.25);
	RemoveBuildingForPlayer(playerid, 15044, 2255.0938, -1209.7813, 1048.0313, 0.25);
	RemoveBuildingForPlayer(playerid, 2247, 2258.4766, -1209.7891, 1048.9922, 0.25);
	RemoveBuildingForPlayer(playerid, 2099, 2262.8047, -1208.4922, 1048.0156, 0.25);
	RemoveBuildingForPlayer(playerid, 2254, 2254.1172, -1206.5000, 1050.7578, 0.25);
	RemoveBuildingForPlayer(playerid, 2240, 2254.6328, -1207.2734, 1048.5625, 0.25);
	RemoveBuildingForPlayer(playerid, 2252, 2256.2109, -1206.1016, 1048.8281, 0.25);
	RemoveBuildingForPlayer(playerid, 2235, 2256.2188, -1206.8594, 1048.0078, 0.25);
	RemoveBuildingForPlayer(playerid, 1760, 2257.6172, -1207.7266, 1048.0078, 0.25);
	RemoveBuildingForPlayer(playerid, 2235, 2261.4297, -1206.2031, 1048.0078, 0.25);
	RemoveBuildingForPlayer(playerid, 2252, 2262.1172, -1206.1016, 1048.8281, 0.25);
	/*RemoveBuildingForPlayer(playerid, 1734, 2452.0313, -1702.0234, 1015.9688, 0.25);
	RemoveBuildingForPlayer(playerid, 14742, 2451.9063, -1701.1875, 1014.8594, 0.25);
	RemoveBuildingForPlayer(playerid, 14741, 2447.4219, -1693.4531, 1012.4766, 0.25);
	RemoveBuildingForPlayer(playerid, 14761, 2449.9609, -1690.8438, 1014.0547, 0.25);
	RemoveBuildingForPlayer(playerid, 2241, 2459.3828, -1691.4766, 1013.0078, 0.25);
	RemoveBuildingForPlayer(playerid, 14745, 2460.2422, -1695.1016, 1012.9453, 0.25);*/
	RemoveBuildingForPlayer(playerid, 2249, 2251.3594, -1218.1797, 1048.6953, 0.25);
    RemoveBuildingForPlayer(playerid, 15049, 2334.3281, -1139.5859, 1051.1953, 0.25);
    RemoveBuildingForPlayer(playerid, 15045, 2324.4297, -1143.3125, 1049.6016, 0.25);

    // Miner objects
    RemoveBuildingForPlayer(playerid, 5967, 1259.4375, -1246.8125, 17.1094, 0.25);
	RemoveBuildingForPlayer(playerid, 5857, 1259.4375, -1246.8125, 17.1094, 0.25);

	// Miner Exterior
	RemoveBuildingForPlayer(playerid, 16084, 526.523, 885.421, -44.359, 0.250);
    RemoveBuildingForPlayer(playerid, 16446, 537.734, 839.398, -37.984, 0.250);
    RemoveBuildingForPlayer(playerid, 16085, 627.867, 850.273, -42.772, 0.250);
    RemoveBuildingForPlayer(playerid, 16071, 674.773, 854.515, -39.367, 0.250);
    RemoveBuildingForPlayer(playerid, 3214, 687.625, 847.109, -35.381, 0.250);
    RemoveBuildingForPlayer(playerid, 16075, 568.523, 916.343, -35.334, 0.250);
    RemoveBuildingForPlayer(playerid, 16309, 566.648, 874.484, -39.530, 0.250);
    RemoveBuildingForPlayer(playerid, 3398, 576.156, 934.921, -30.093, 0.250);
    RemoveBuildingForPlayer(playerid, 16310, 581.375, 875.609, -43.959, 0.250);
    RemoveBuildingForPlayer(playerid, 16311, 585.843, 869.632, -39.367, 0.250);
    RemoveBuildingForPlayer(playerid, 16325, 590.296, 870.273, -44.264, 0.250);
    RemoveBuildingForPlayer(playerid, 16073, 610.164, 908.476, -39.367, 0.250);
    RemoveBuildingForPlayer(playerid, 16074, 605.085, 902.156, -39.367, 0.250);
    RemoveBuildingForPlayer(playerid, 16077, 594.929, 926.414, -41.194, 0.250);
    RemoveBuildingForPlayer(playerid, 16076, 623.304, 893.773, -39.764, 0.250);
    RemoveBuildingForPlayer(playerid, 3398, 620.835, 884.242, -29.514, 0.250);
    RemoveBuildingForPlayer(playerid, 16072, 640.312, 874.789, -35.334, 0.250);

    return 1;
}

hook OnPlayerInit(playerid)
{
    
	for(new i = 0; i < MAX_DAMAGES; i++)
	{
		DamageData[playerid][i][damageTaken] = 0;
		DamageData[playerid][i][damageWeapon] = 0;
		DamageData[playerid][i][damageBy] = 0;
	}

	InitDealerShip(playerid);
	InitBizMessage(playerid);
    PlayerData[playerid][pShowFooter] = 0;
    PlayerData[playerid][pChatstyle] = 0;
	PlayerData[playerid][pInTurf] = 0;
    PlayerData[playerid][pCalling] = 0;
	InsideShamal[playerid]= INVALID_VEHICLE_ID;
	PlayerData[playerid][pBugFix] = 0;
	PlayerTextDrawHide(playerid, LoadingObjects0[playerid]);
	PlayerTextDrawHide(playerid, LoadingObjects1[playerid]);
	PlayerTextDrawHide(playerid, LoadingObjects2[playerid]);
	PlayerTextDrawHide(playerid, LoadingObjects3[playerid]);
	PlayerTextDrawHide(playerid, LoadingObjects4[playerid]);
	PlayerTextDrawHide(playerid, LoadingObjects5[playerid]);
    totalDamages[playerid] = 0;
	PlayerData[playerid][pSpeakerPhone] = 0;
	PlayerData[playerid][pDealership] = 0;
	PlayerData[playerid][pRepairShop] = -1;
	PlayerData[playerid][pRepairTime] = 0;
    PlayerData[playerid][pEditRack] = -1;
	PlayerData[playerid][pRangeBooth] = -1;
	PlayerData[playerid][pTargets] = 0;
	PlayerData[playerid][pTargetLevel] = 0;
	PlayerData[playerid][pToggleTP] = 0;
	PLAYER_IN_RACE[playerid] = 0;
	RACE_CP[playerid] = 0;
	//Fisher
	//	LandInfo[landid][lArea] = CreateDynamicRectangle(100,-2150, 900, -4500);	
	new gangzone = GangZoneCreateEx(FisherZone[0],FisherZone[1], FisherZone[2], FisherZone[3]);
	GangZoneShowForPlayer(playerid, gangzone, 0x0578f8AA);
	//police


    seatbelt[playerid] = 0;

	isharvesting[playerid] = 0;
	if(IsPlayerNPC(playerid)) return 1;
	// Nametag
    chosednumber[playerid] = -1;

	SetPVarInt(playerid, "Mobile", 501);

	PlayerData[playerid][pRobHouse] = -1;
	GetPlayerName(playerid, PlayerData[playerid][pUsername], MAX_PLAYER_NAME);
    DestroyDynamic3DTextLabel(fRepfamtext[playerid]);
    fRepfamtext[playerid] = Text3D:INVALID_3DTEXT_ID;
	SendClientMessageEx(playerid, 0xA9C4E4FF, "Establishing connection to the {00aa00} %s {A9C4E4} please wait...", GetServerName());


	firstperson[playerid] = 0;
	PlayerData[playerid][pCarryCrate] = -1;
	CreatePlayerTextDraws(playerid);
	// ----------------------------------------------------------------------- //
	PlayerData[playerid][pGender] = -1; // shitty register dialog
	PlayerData[playerid][pAge] = 0;
	// ----------------------------------------------------------------------- //


	// Default values are handled via MySQL. Don't assign default values here.

	//(playerid);
    PlayerData[playerid][pEditLandGraffiti] = -1;
	PlayerData[playerid][pID] = 0;
	PlayerData[playerid][pvLock] = 0;
	PlayerData[playerid][pKicked] = 0;
	PlayerData[playerid][pLoginTries] = 0;
	PlayerData[playerid][pSetup] = 0;
	PlayerData[playerid][pGender] = 0;
	PlayerData[playerid][pAge] = 0;
	PlayerData[playerid][pSkin] = 0;
	PlayerData[playerid][pCameraX] = 0;
	PlayerData[playerid][pCameraY] = 0;
	PlayerData[playerid][pCameraZ] = 0;
	PlayerData[playerid][pPosX] = 0;
	PlayerData[playerid][pPosY] = 0;
	PlayerData[playerid][pPosZ] = 0;
	PlayerData[playerid][pPosA] = 0;
	PlayerData[playerid][pInterior] = 0;
	PlayerData[playerid][pWorld] = 0;
	PlayerData[playerid][pCash] = 5000;
	PlayerData[playerid][pBank] = 0;
	PlayerData[playerid][pPaycheck] = 0;
	PlayerData[playerid][pLevel] = 1;
	PlayerData[playerid][pGraphic] = 0;
	PlayerData[playerid][pPasswordChanged] = 0;
	PlayerData[playerid][pEXP] = 0;
	PlayerData[playerid][pMinutes] = 0;
	PlayerData[playerid][pHours] = 0;
	PlayerData[playerid][pAdmin] = 0;
	PlayerData[playerid][pAdminName] = 0;
	PlayerData[playerid][pRegDate] = 0;
	PlayerData[playerid][pHelper] = 0;
	PlayerData[playerid][pHealth] = 100.0;
	PlayerData[playerid][pArmor] = 0.0;
	PlayerData[playerid][pCapturingPoint] = -1;
	PlayerData[playerid][pUpgradePoints] = 0;
	PlayerData[playerid][pWarnings] = 0;
	PlayerData[playerid][pInjured] = 0;
	PlayerData[playerid][pHospital] = 0;
	PlayerData[playerid][pSpawnHealth] = 50.0;
	PlayerData[playerid][pSpawnArmor] = 0;

	PlayerData[playerid][pJailType] = 0;
	PlayerData[playerid][pJailTime] = 0;
	PlayerData[playerid][pNewbieMuted] = 0;
	PlayerData[playerid][pHelpMuted] = 0;
	PlayerData[playerid][pAdMuted] = 0;
	PlayerData[playerid][pLiveMuted] = 0;
	PlayerData[playerid][pGlobalMuted] = 0;
	PlayerData[playerid][pReportMuted] = 0;
	PlayerData[playerid][pReportWarns] = 0;
	PlayerData[playerid][pFightStyle] = 0;
	PlayerData[playerid][pAccent] = 0;
	PlayerData[playerid][pPhone] = 0;
	PlayerData[playerid][pJob] = JOB_NONE;
	PlayerData[playerid][pSecondJob] = JOB_NONE;
	PlayerData[playerid][pCrimes] = 0;
	PlayerData[playerid][pArrested] = 0;
	PlayerData[playerid][pWantedLevel] = 0;
	PlayerData[playerid][pNotoriety] = 0;
	PlayerData[playerid][pMaterials] = 0;
	PlayerData[playerid][pWeed] = 0;
	PlayerData[playerid][pCocaine] = 0;
	PlayerData[playerid][pHeroin] = 0;
	PlayerData[playerid][pPainkillers] = 0;
	PlayerData[playerid][pSeeds] = 0;
	PlayerData[playerid][pEphedrine] = 0;
	PlayerData[playerid][pMuriaticAcid] = 0;
	PlayerData[playerid][pBakingSoda] = 0;
	PlayerData[playerid][pCigars] = 0;
	PlayerData[playerid][pPrivateRadio] = 0;
	PlayerData[playerid][pChannel] = 0;
	PlayerData[playerid][pRentingHouse] = 0;
	PlayerData[playerid][pSpraycans] = 0;
	PlayerData[playerid][pBoombox] = 0;
	PlayerData[playerid][pMP3Player] = 0;
	PlayerData[playerid][pPhonebook] = 0;
	PlayerData[playerid][pFishingRod] = 0;
	PlayerData[playerid][pFishingBait] = 0;
	PlayerData[playerid][pFishWeight] = 0;
	PlayerData[playerid][pNetSize] = 0;
	PlayerData[playerid][pDolphinWeight] = 0;
	PlayerData[playerid][pDolphinCount] = 0;
	PlayerData[playerid][pCrabWeight] = 0;
	PlayerData[playerid][pCrabCount] = 0;
	PlayerData[playerid][pSharkWeight] = 0;
	PlayerData[playerid][pSharkCount] = 0;
	PlayerData[playerid][pTruckerGoodType] = tNone;
	PlayerData[playerid][pComponents] = 0;
	PlayerData[playerid][pMechanicSkill] = 0;
	PlayerData[playerid][pSmugglerSkill] = 0;
	PlayerData[playerid][pWeaponSkill] = 0;
	PlayerData[playerid][pDrugDealerSkill] = 0;
	PlayerData[playerid][pFarmerSkill] = 0;
	PlayerData[playerid][pDetectiveSkill] = 0;
	PlayerData[playerid][pLawyerSkill] = 0;
	PlayerData[playerid][pForkliftSkill] = 0;
	PlayerData[playerid][pCarJackerSkill] = 0;
	PlayerData[playerid][pCraftSkill] = 0;
	PlayerData[playerid][pPizzaSkill] = 0;
	PlayerData[playerid][pTruckerSkill] = 0;
	PlayerData[playerid][pHookerSkill] = 0;
	PlayerData[playerid][pRobberySkill] = 0;
	PlayerData[playerid][pFishingSkill] = 0;
	PlayerData[playerid][pToggleTextdraws] = 0;
	PlayerData[playerid][pToggleOOC] = 0;
	PlayerData[playerid][pTogglePhone] = 0;
	PlayerData[playerid][pToggleAdmin] = 0;
	PlayerData[playerid][pToggleHelper] = 0;
	PlayerData[playerid][pTogglePoints] = 0;
	PlayerData[playerid][pToggleTurfs] = 0;
	PlayerData[playerid][pToggleNewbie] = 0;
	PlayerData[playerid][pTogglePR] = 0;
	PlayerData[playerid][pToggleRadio] = 0;
	PlayerData[playerid][pTogglePM] = 0;
	PlayerData[playerid][pToggleVIP] = 0;
	PlayerData[playerid][pToggleMusic] = 0;
	PlayerData[playerid][pToggleFaction] = 0;
	PlayerData[playerid][pToggleGang] = 0;
	PlayerData[playerid][pToggleNews] = 0;
	PlayerData[playerid][pToggleGlobal] = 1;
	PlayerData[playerid][pToggleCam] = 0;
	PlayerData[playerid][pCarLicense] = 0;
	PlayerData[playerid][pDonator] = 0;
	PlayerData[playerid][pVIPTime] = 0;
	PlayerData[playerid][pVIPCooldown] = 0;
	PlayerData[playerid][pWeapons] = 0;
	PlayerData[playerid][pGunsAmmo] = 0;
	PlayerData[playerid][pFaction] = 0;
	PlayerData[playerid][pFactionRank] = 0;
	PlayerData[playerid][pGang] = -1;
	PlayerData[playerid][pGangRank] = 0;
	PlayerData[playerid][pDivision] = 0;
	PlayerData[playerid][pRadar] = 0;
	PlayerData[playerid][pCrew] = 0;
	PlayerData[playerid][pContracted] = 0;
	PlayerData[playerid][pContractBy] = 0;
	PlayerData[playerid][pBombs] = 0;
	PlayerData[playerid][pCompletedHits] = 0;
	PlayerData[playerid][pFailedHits] = 0;
	PlayerData[playerid][pReports] = 0;
	PlayerData[playerid][pNewbies] = 0;
	PlayerData[playerid][pHelpRequests] = 0;
	PlayerData[playerid][pSpeedometer] = 0;
	PlayerData[playerid][pFactionMod] = 0;
	PlayerData[playerid][pWebDev] = 0;
	PlayerData[playerid][pGangMod] = 0;
	PlayerData[playerid][pBanAppealer] = 0;
	PlayerData[playerid][pHelperManager] = 0;
	PlayerData[playerid][pAdminPersonnel] = 0;
	PlayerData[playerid][pGameAffairs] = 0;
	PlayerData[playerid][pWebDev] = 0;
	PlayerData[playerid][pComplaintMod] = 0;
	PlayerData[playerid][pHumanResources] = 0;
	PlayerData[playerid][pHelperManager] = 0;
	PlayerData[playerid][pDeveloper] = 0;
	PlayerData[playerid][pWeedPlanted] = 0;
	PlayerData[playerid][pWeedTime] = 0;
	PlayerData[playerid][pWeedGrams] = 0;
	PlayerData[playerid][pWeedX] = 0;
	PlayerData[playerid][pWeedY] = 0;
	PlayerData[playerid][pWeedZ] = 0;
	PlayerData[playerid][pWeedA] = 0;
	PlayerData[playerid][pInventoryUpgrade] = 0;
	PlayerData[playerid][pAddictUpgrade] = 0;
	PlayerData[playerid][pTraderUpgrade] = 0;
	PlayerData[playerid][pAssetUpgrade] = 0;

	PlayerData[playerid][pLastReport] = 0;
	PlayerData[playerid][pLastNewbie] = 0;
	PlayerData[playerid][pLastFare] = 0;
	PlayerData[playerid][pLastRequest] = 0;
	PlayerData[playerid][pLastPay] = 0;
	PlayerData[playerid][pLastRepair] = 0;
	PlayerData[playerid][pLastRefuel] = 0;
	PlayerData[playerid][pLastDrug] = 0;
	PlayerData[playerid][pLastSell] = 0;
	PlayerData[playerid][pLastEnter] = 0;
	PlayerData[playerid][pLastPress] = 0;
	PlayerData[playerid][pLastDeath] = 0;
	PlayerData[playerid][pLastDesync] = 0;
	PlayerData[playerid][pLastGlobal] = 0;
	PlayerData[playerid][pFPS] = 0;
	PlayerData[playerid][pDrunkLevel] = 0;
	PlayerData[playerid][pAdminDuty] = 0;
	PlayerData[playerid][pActiveReport] = -1;
	PlayerData[playerid][pHospitalTime] = 0;
	PlayerData[playerid][pListen] = 0;
	PlayerData[playerid][pPaintball] = 0;
	PlayerData[playerid][pPaintballTeam] = -1;
	PlayerData[playerid][pDueling] = INVALID_PLAYER_ID;
	PlayerData[playerid][pAwaitingClothing] = 0;
	PlayerData[playerid][pFreezeTimer] = -1;
	PlayerData[playerid][pNameChange][0] = 0;
	PlayerData[playerid][pHelpRequest][0] = 0;
	PlayerData[playerid][pAcceptedHelp] = 0;
	PlayerData[playerid][pHouseOffer] = INVALID_PLAYER_ID;
	PlayerData[playerid][pGarageOffer] = INVALID_PLAYER_ID;
	PlayerData[playerid][pBizOffer] = INVALID_PLAYER_ID;
	PlayerData[playerid][pVestOffer] = INVALID_PLAYER_ID;
	PlayerData[playerid][pCarOffer] = INVALID_PLAYER_ID;
	PlayerData[playerid][pFactionOffer] = INVALID_PLAYER_ID;
	PlayerData[playerid][pGangOffer] = INVALID_PLAYER_ID;
	PlayerData[playerid][pFriskOffer] = INVALID_PLAYER_ID;
	PlayerData[playerid][pTicketOffer] = INVALID_PLAYER_ID;
	PlayerData[playerid][pLiveOffer] = INVALID_PLAYER_ID;
	PlayerData[playerid][pLiveBroadcast] = INVALID_PLAYER_ID;
	PlayerData[playerid][pShakeOffer] = INVALID_PLAYER_ID;
	PlayerData[playerid][pLandOffer] = INVALID_PLAYER_ID;
	PlayerData[playerid][pSellOffer] = INVALID_PLAYER_ID;
	PlayerData[playerid][pAllianceOffer] = INVALID_PLAYER_ID;
	PlayerData[playerid][pWarOffer] = INVALID_PLAYER_ID;
	PlayerData[playerid][pDefendOffer] = INVALID_PLAYER_ID;
	PlayerData[playerid][pDiceOffer] = INVALID_PLAYER_ID;
	PlayerData[playerid][pInviteOffer] = INVALID_PLAYER_ID;
	PlayerData[playerid][pRobberyOffer] = INVALID_PLAYER_ID;
	PlayerData[playerid][pDuelOffer] = INVALID_PLAYER_ID;
	PlayerData[playerid][pMarriageOffer] = INVALID_PLAYER_ID;
	PlayerData[playerid][pEditType] = 0;
    PlayerData[playerid][pEditObject] = INVALID_OBJECT_ID;
    PlayerData[playerid][pFurniturePerms] = -1;
    PlayerData[playerid][pLandPerms] = -1;
	PlayerData[playerid][pLastStuck] = 0;
	PlayerData[playerid][pLastLoad] = 0;
	PlayerData[playerid][pLastBet] = 0;
	PlayerData[playerid][pLastShot] = 0;
	PlayerData[playerid][pCP] = CHECKPOINT_NONE;
	PlayerData[playerid][pShipment] = -1;
	PlayerData[playerid][pFishTime] = 0;
	PlayerData[playerid][pUsedBait] = 0;
	PlayerData[playerid][pSmuggleMats] = 0;
	PlayerData[playerid][pSmuggleTime] = 0;
	PlayerData[playerid][pSmuggleDrugs] = 0;
	PlayerData[playerid][pRefuel] = INVALID_VEHICLE_ID;
	PlayerData[playerid][pCallLine] = INVALID_PLAYER_ID;
	PlayerData[playerid][pDrivingTest] = 0;
    PlayerData[playerid][pSweeping] = 0;
	PlayerData[playerid][pSpecialTag] = Text3D:INVALID_3DTEXT_ID;
	PlayerData[playerid][pTagType] = TAG_NONE;
	PlayerData[playerid][pVIPColor] = 0;
    PlayerData[playerid][pTaxiFare] = 0;
    PlayerData[playerid][pTaxiPassenger] = INVALID_PLAYER_ID;
    PlayerData[playerid][pTaxiBill] = 0;
    PlayerData[playerid][pTaxiTime] = 0;
    PlayerData[playerid][pFaction] = -1;
    PlayerData[playerid][pFactionRank] = 0;
    PlayerData[playerid][pGang] = -1;
    PlayerData[playerid][pGangRank] = 0;
	PlayerData[playerid][pDuty] = 0;
	PlayerData[playerid][pBackup] = 0;
	PlayerData[playerid][pTazer] = 0;
	PlayerData[playerid][pTazedTime] = 0;
	PlayerData[playerid][pCuffed] = 0;
	PlayerData[playerid][pTied] = 0;
	PlayerData[playerid][pDraggedBy] = INVALID_PLAYER_ID;
	PlayerData[playerid][pSkinSelected] = -1;
	PlayerData[playerid][pReceivingAid] = 0;
    PlayerData[playerid][pDelivered] = 0;
    PlayerData[playerid][pPlantedBomb] = 0;
    PlayerData[playerid][pBombObject] = INVALID_OBJECT_ID;
    PlayerData[playerid][pContractTaken] = INVALID_PLAYER_ID;
	PlayerData[playerid][pSpamTime] = 0;
    PlayerData[playerid][pMuted] = 0;
    PlayerData[playerid][pBoomboxPlaced] = 0;
    PlayerData[playerid][pBoomboxObject] = INVALID_OBJECT_ID;
	PlayerData[playerid][pBoomboxListen] = INVALID_PLAYER_ID;
    PlayerData[playerid][pZonePickups][0] = -1;
    PlayerData[playerid][pZonePickups][1] = -1;
    PlayerData[playerid][pZonePickups][2] = -1;
    PlayerData[playerid][pZonePickups][3] = -1;
    PlayerData[playerid][pZoneID] = -1;
    PlayerData[playerid][pZoneCreation] = 0;
    PlayerData[playerid][pShowLands] = 0;
    PlayerData[playerid][pShowTurfs] = 0;
    PlayerData[playerid][pStreamType] = MUSIC_NONE;
    PlayerData[playerid][pFreeNamechange] = 0;
	PlayerData[playerid][pVehicleKeys] = INVALID_VEHICLE_ID;
    PlayerData[playerid][pCurrentVehicle] = 0;
    PlayerData[playerid][pVehicleCount] = 0;
    PlayerData[playerid][pACWarns] = 0;
    PlayerData[playerid][pACTime] = 0;
    PlayerData[playerid][pArmorTime] = 0;
    PlayerData[playerid][pWeedObject] = INVALID_OBJECT_ID;
    PlayerData[playerid][pPickPlant] = INVALID_PLAYER_ID;
    PlayerData[playerid][pPickTime] = 0;
    PlayerData[playerid][pCookHeroin] = 0;
    PlayerData[playerid][pCookTime] = 0;
    PlayerData[playerid][pCookGrams] = 0;
    PlayerData[playerid][pDrugsUsed] = 0;
    PlayerData[playerid][pDrugsTime] = 0;
    PlayerData[playerid][pCondom] = 0;
    PlayerData[playerid][pBandana] = 0;
	PlayerData[playerid][pLoginCamera] = 0;
	PlayerData[playerid][pPoisonTime] = 0;
	PlayerData[playerid][pJetpack] = 0;
    PlayerData[playerid][pWatchOn] = 0;
    PlayerData[playerid][pGPSOn] = 0;
    PlayerData[playerid][pTextFrom] = INVALID_PLAYER_ID;
    PlayerData[playerid][pWhisperFrom] = INVALID_PLAYER_ID;
    PlayerData[playerid][pMechanicCall] = 0;
	PlayerData[playerid][pTaxiCall] = 0;
    PlayerData[playerid][pEmergencyCall] = 0;
    PlayerData[playerid][pFindTime] = 0;
    PlayerData[playerid][pFindPlayer] = INVALID_PLAYER_ID;
    PlayerData[playerid][pRobCash] = 0;
	PlayerData[playerid][pLootTime] = 0;
    PlayerData[playerid][pRemoveFrom] = INVALID_PLAYER_ID;
	PlayerData[playerid][pSniper] = 0;
	PlayerData[playerid][pLockBreak] = INVALID_VEHICLE_ID;
	PlayerData[playerid][pLockTimer] = 0;
	PlayerData[playerid][pLockText] = Text3D:INVALID_3DTEXT_ID;
    PlayerData[playerid][pAnimation] = 0;
	PlayerData[playerid][pDropTime] = 0;
    PlayerData[playerid][pCocaineTrunk] = INVALID_VEHICLE_ID;
    PlayerData[playerid][pCocaineTime] = 0;
	PlayerData[playerid][pCocaineFrom] = INVALID_VEHICLE_ID;
    PlayerData[playerid][pRapidFire] = 0;
    PlayerData[playerid][pGodmode] = 0;
    PlayerData[playerid][pGodmodeHP] = 100.0;
    PlayerData[playerid][pGodmodeAP] = 0.0;
    PlayerData[playerid][pPreviewHouse] = -1;
    PlayerData[playerid][pPreviewType] = 0;
    PlayerData[playerid][pPreviewTime] = 0;
    PlayerData[playerid][pDamageTimer] = -1;
    PlayerData[playerid][pHHCheck] = 0;
	PlayerData[playerid][pHHTime] = 0;
	PlayerData[playerid][pHHRounded] = 0;
	PlayerData[playerid][pHHCount] = 0;
	PlayerData[playerid][pNoDamage] = 0;
	PlayerData[playerid][pGovTimer] = 0;
	PlayerData[playerid][pGodshand] = 0;
	PlayerData[playerid][pUndercover][0] = 0;
    PlayerData[playerid][pUndercover][1] = 0;
	PlayerData[playerid][pUndercoverHP] = 0.0;
	PlayerData[playerid][pUndercoverAR] = 0.0;
	PlayerData[playerid][pHurt] = 0;
	PlayerData[playerid][pBugged] = 0;
	PlayerData[playerid][pBuggedBy] = 0;
	PlayerData[playerid][pSweep] = 0;
	PlayerData[playerid][pSweepLeft] = 0;
	PlayerData[playerid][pRccam] = 0;
	PlayerData[playerid][pSkates] = 0;
	PlayerData[playerid][pSkateObj] = 0;
	PlayerData[playerid][pSkating] = false;
	PlayerData[playerid][pRareTime] = 0;
	PlayerData[playerid][pAcceptedEMS] = INVALID_PLAYER_ID;
	PlayerData[playerid][pHuntKilled] = 0;
	PlayerData[playerid][pDiamonds] = 0;
	PlayerData[playerid][pDeleteMode] = 0;
	PlayerData[playerid][pAdvertWarnings] = 0;
	PlayerData[playerid][pNoKnife] = 0;
	PlayerData[playerid][pExecute] = 0;
	PlayerData[playerid][pMarriedTo] = 0;
	PlayerData[playerid][pStationEdit] = 0;
	PlayerData[playerid][pRobbingBiz] = -1;
	PlayerData[playerid][pBlindfold] = 0;
	PlayerData[playerid][pBlinded] = 0;

	aimWarnings[playerid] = 0;
	PayCheckCode[playerid] = 0;

    for(new i = 0; i < MAX_PLAYERS; i ++)
	{
	    chattingWith[playerid]{i} = false;
	}

	for(new i = 0; i < 13; i ++)
	{
	    PlayerData[playerid][pWeapons][i] = 0;
	    PlayerData[playerid][pTempWeapons][i] = 0;
	    PlayerData[playerid][pGunsAmmo][i] = 0;
	}

	for(new i = 0; i < 3; i ++)
	{
	    MarkedPositions[playerid][i][mPosX] = 0.0;
	    MarkedPositions[playerid][i][mPosY] = 0.0;
	    MarkedPositions[playerid][i][mPosZ] = 0.0;
	}

	for(new i = 0; i < MAX_PLAYER_CLOTHING; i ++)
	{
	    ClothingInfo[playerid][i][cExists] = 0;
	    ClothingInfo[playerid][i][cID] = 0;
	    ClothingInfo[playerid][i][cName] = 0;
	    ClothingInfo[playerid][i][cModel] = 0;
	    ClothingInfo[playerid][i][cBone] = 0;
	    ClothingInfo[playerid][i][cAttached] = 0;
	    ClothingInfo[playerid][i][cAttachedIndex] = -1;
	}

	// Reset the player's client attributes.
	for(new i = 0; i < MAX_PLAYER_ATTACHED_OBJECTS; i ++)
	{
	    if(IsPlayerAttachedObjectSlotUsed(playerid, i))
	    {
	        RemovePlayerAttachedObject(playerid, i);
		}
	}

	ResetPlayerWeapons(playerid);
	StopAudioStreamForPlayer(playerid);
 	// Paintball
	zone_paintball[0] = GangZoneCreateEx(1287.0806, 2055.0513, 1487.7770, 2275.3984);
	area_paintball[0] = CreateDynamicRectangle(1287.0806, 2055.0513, 1487.7770, 2275.3984);
	// Sniper
	zone_paintball[1] = GangZoneCreateEx(-2591.2288, -1814.2455, -2178.9082, -1394.5500);
	area_paintball[1] = CreateDynamicRectangle(-2591.2288, -1814.2455, -2178.9082, -1394.5500);

	// GPS
	PlayerData[playerid][pGPSText] = CreatePlayerTextDraw(playerid, 88.000000, 323.000000, "Loading...");
	PlayerTextDrawAlignment(playerid, PlayerData[playerid][pGPSText], 2);
	PlayerTextDrawBackgroundColor(playerid, PlayerData[playerid][pGPSText], 255);
	PlayerTextDrawFont(playerid, PlayerData[playerid][pGPSText], 1);
	PlayerTextDrawLetterSize(playerid, PlayerData[playerid][pGPSText], 0.260000, 1.300000);
	PlayerTextDrawColor(playerid, PlayerData[playerid][pGPSText], -1);
	PlayerTextDrawSetOutline(playerid, PlayerData[playerid][pGPSText], 1);
	PlayerTextDrawSetProportional(playerid, PlayerData[playerid][pGPSText], 1);

	// HP & armor
	PlayerData[playerid][pArmorText] = CreatePlayerTextDraw(playerid, 577.000000, 43.500000, "100");
	PlayerTextDrawAlignment(playerid, PlayerData[playerid][pArmorText], 2);
	PlayerTextDrawBackgroundColor(playerid, PlayerData[playerid][pArmorText], 255);
	PlayerTextDrawFont(playerid, PlayerData[playerid][pArmorText], 2);
	PlayerTextDrawLetterSize(playerid, PlayerData[playerid][pArmorText], 0.220000, 1.100000);
	PlayerTextDrawColor(playerid, PlayerData[playerid][pArmorText], -1);
	PlayerTextDrawSetOutline(playerid, PlayerData[playerid][pArmorText], 1);
	PlayerTextDrawSetProportional(playerid, PlayerData[playerid][pArmorText], 1);

	PlayerData[playerid][pHealthText] = CreatePlayerTextDraw(playerid, 577.000000, 65.500000, "100");
	PlayerTextDrawAlignment(playerid, PlayerData[playerid][pHealthText], 2);
	PlayerTextDrawBackgroundColor(playerid, PlayerData[playerid][pHealthText], 255);
	PlayerTextDrawFont(playerid, PlayerData[playerid][pHealthText], 2);
	PlayerTextDrawLetterSize(playerid, PlayerData[playerid][pHealthText], 0.220000, 1.100000);
	PlayerTextDrawColor(playerid, PlayerData[playerid][pHealthText], -1);
	PlayerTextDrawSetOutline(playerid, PlayerData[playerid][pHealthText], 1);
	PlayerTextDrawSetProportional(playerid, PlayerData[playerid][pHealthText], 1);


    return 1;
}

hook OnPlayerClickPlayer(playerid, clickedplayerid, source)
{
	new title[68], string[500], ip[32];
	GetPlayerIp(playerid, ip, 32);
    format(string, sizeof(string), "Report Player\nPrivate Message\n");
	if(PlayerData[playerid][pAdmin] >= 1)
	{
		format(string, sizeof(string), "%sKick Player\nBan Player\nSpectate Player\nBring Player\nGoto Player\nNewbie Mute Player\nFreeze Player\nUnfreeze Player\nSlap Player\nRevive Player\nCheck Player\nNon-Roleplay Name\nShow Rules\nCheck Player's Gun\nCheck Player's Vehicles\n{33CCFF}IP Address: {FFFFFF}%s", string, ip);
	}
	SetPVarInt(playerid, "pClickedID", clickedplayerid);
	format(title, sizeof(title), "{33CCFF}Player Control Panel {FFFFFF}(SELECTED: ID %d)", clickedplayerid);
	Dialog_Show(playerid, DIALOG_PCP,DIALOG_STYLE_LIST,title,string,"Select","Cancel");
	return 1;
}

hook OnPlayerDisconnect(playerid, reason)
{
    if(IsPlayerNPC(playerid)) return 1;

    KillTimer(PlayerData[playerid][pIntroKickTimer]);
    
	if(RACE_ADMIN_ID == playerid && CREATING_RACE_CHECKPOINTS == 1 && 	RACE_CREATED == 0)
	{
		CREATING_RACE_CHECKPOINTS = 0;
		RACE_ADMIN_ID = -1;
	}
	if(PLAYER_IN_RACE[playerid])
	{
		PLAYER_IN_RACE[playerid] = 0;
		RACE_CP[playerid] = 0;
		KillTimer(FREEZE_PLAYER[playerid]);
		DisablePlayerRaceCheckpoint(playerid);		
		if(RaceVehicles[playerid])
			DestroyVehicleEx(RaceVehicles[playerid]);
	}
	if (PlayerData[playerid][pShowFooter])
	    KillTimer(PlayerData[playerid][pFooterTimer]);
    InsideShamal[playerid] = INVALID_VEHICLE_ID;

    chosednumber[playerid] = -1;
    openedpaycheck[playerid] = 0;
	isharvesting[playerid] = 0;
 	DestroyDynamic3DTextLabel(PlayerData[playerid][aMeID]);
 	PlayerData[playerid][aMeStatus] = 0;
	if (PlayerData[playerid][pCalling] > 0)
	{
		HangupCall(playerid);
	}
	TextDrawHideForPlayer(playerid, welcomenew);
    DestroyDynamic3DTextLabel(fRepfamtext[playerid]);
    fRepfamtext[playerid] = Text3D:INVALID_3DTEXT_ID;
    PlayerData[playerid][pCarryCrate] = -1;
    PlayerData[playerid][pRobHouse] = -1;
 	SavePlayerVariables(playerid);
	
 	foreach(new i : Player)
	{
		if(PlayerData[i][pHouseOffer] == playerid)
		{
		    PlayerData[i][pHouseOffer] = INVALID_PLAYER_ID;
		}
        if(PlayerData[i][pGarageOffer] == playerid)
		{
		    PlayerData[i][pGarageOffer] = INVALID_PLAYER_ID;
		}
		if(PlayerData[i][pBizOffer] == playerid)
		{
		    PlayerData[i][pBizOffer] = INVALID_PLAYER_ID;
		}
		if(PlayerData[i][pVestOffer] == playerid)
		{
		    PlayerData[i][pVestOffer] = INVALID_PLAYER_ID;
		}
		if(PlayerData[i][pCarOffer] == playerid)
		{
		    PlayerData[i][pCarOffer] = INVALID_PLAYER_ID;
		}
		if(PlayerData[i][pFactionOffer] == playerid)
		{
		    PlayerData[i][pFactionOffer] = INVALID_PLAYER_ID;
		}
		if(PlayerData[i][pGangOffer] == playerid)
		{
		    PlayerData[i][pGangOffer] = INVALID_PLAYER_ID;
		}
		if(PlayerData[i][pFriskOffer] == playerid)
		{
		    PlayerData[i][pFriskOffer] = INVALID_PLAYER_ID;
		}
		if(PlayerData[i][pTicketOffer] == playerid)
		{
		    PlayerData[i][pTicketOffer] = INVALID_PLAYER_ID;
		}
		if(PlayerData[i][pLiveOffer] == playerid)
		{
		    PlayerData[i][pLiveOffer] = INVALID_PLAYER_ID;
		}
		if(PlayerData[i][pLiveBroadcast] == playerid)
		{
		    PlayerData[i][pLiveBroadcast] = INVALID_PLAYER_ID;
		}
		if(PlayerData[i][pShakeOffer] == playerid)
		{
		    PlayerData[i][pShakeOffer] = INVALID_PLAYER_ID;
		}
		if(PlayerData[i][pLandOffer] == playerid)
		{
		    PlayerData[i][pLandOffer] = INVALID_PLAYER_ID;
		}
		if(PlayerData[i][pSellOffer] == playerid)
		{
		    PlayerData[i][pSellOffer] = INVALID_PLAYER_ID;
		}
		if(PlayerData[i][pAllianceOffer] == playerid)
		{
		    PlayerData[i][pSellOffer] = INVALID_PLAYER_ID;
		}
		if(PlayerData[playerid][pGangOffer] == playerid)
		{
			PlayerData[playerid][pSellOffer] = INVALID_PLAYER_ID;
		}
        if(PlayerData[i][pDefendOffer] == playerid)
		{
		    PlayerData[i][pDefendOffer] = INVALID_PLAYER_ID;
		}
		if(PlayerData[i][pDiceOffer] == playerid)
		{
		    PlayerData[i][pDiceOffer] = INVALID_PLAYER_ID;
		}
		if(PlayerData[i][pInviteOffer] == playerid)
		{
		    PlayerData[i][pInviteOffer] = INVALID_PLAYER_ID;
		}
		if(PlayerData[i][pRobberyOffer] == playerid)
		{
		    PlayerData[i][pRobberyOffer] = INVALID_PLAYER_ID;
		}
        if(PlayerData[i][pDuelOffer] == playerid)
		{
		    PlayerData[i][pDuelOffer] = INVALID_PLAYER_ID;
		}
		if(PlayerData[i][pMarriageOffer] == playerid)
		{
		    PlayerData[i][pMarriageOffer] = INVALID_PLAYER_ID;
		}
		if(PlayerData[i][pTextFrom] == playerid)
		{
		    PlayerData[i][pTextFrom] = INVALID_PLAYER_ID;
		}
		if(PlayerData[i][pWhisperFrom] == playerid)
		{
		    PlayerData[i][pWhisperFrom] = INVALID_PLAYER_ID;
		}
		if(PlayerData[i][pFindPlayer] == playerid)
		{
		    PlayerData[i][pFindPlayer] = INVALID_PLAYER_ID;
		}
		if(PlayerData[i][pRemoveFrom] == playerid)
		{
		    PlayerData[i][pRemoveFrom] = INVALID_PLAYER_ID;
		}
		if(chattingWith[i]{playerid})
		{
		    SendClientMessageEx(i, COLOR_YELLOW, "Your chat with %s (ID %i) has ended as they left the server.", GetRPName(playerid), playerid);
		    chattingWith[i]{playerid} = false;
		}
		if(PlayerData[i][pActiveReport] >= 0 && (ReportInfo[PlayerData[i][pActiveReport]][rHandledBy] == playerid || ReportInfo[PlayerData[i][pActiveReport]][rReporter] == playerid))
		{
		    if(ReportInfo[PlayerData[i][pActiveReport]][rReporter] == playerid)
				SendClientMessage(i, COLOR_GREEN, "The player who made the report has left the server.");
			else if(ReportInfo[PlayerData[i][pActiveReport]][rHandledBy] == playerid)
                SendClientMessage(i, COLOR_GREEN, "The admin who accepted the report has left the server.");

		    ReportInfo[PlayerData[i][pActiveReport]][rExists] = 0;
		    PlayerData[i][pActiveReport] = -1;
		}
		if(PlayerData[i][pDueling] == playerid)
		{
		    SendClientMessage(i, COLOR_WHITE, "Your duel target has left the server.");
		    PlayerData[i][pDueling] = INVALID_PLAYER_ID;
		    SetPlayerToSpawn(i);
		}
		if(PlayerData[i][pContractTaken] == playerid)
		{
		    SendClientMessage(i, COLOR_YELLOW, "Your contract target has disconnected from the server.");
		    PlayerData[i][pContractTaken] = INVALID_PLAYER_ID;
		}
		if(PlayerData[i][pDraggedBy] == playerid)
		{
		    SendClientMessage(i, COLOR_AQUA, "The person dragging you has disconnected. You are free!");
			PlayerData[i][pDraggedBy] = INVALID_PLAYER_ID;
		}
		if(PlayerData[i][pTaxiPassenger] == playerid)
		{
		    CancelTaxiRide(i);
		}

	}

	if(PlayerData[playerid][pLogged] && GetPVarInt(playerid, "EventToken") == 0)
	{
	    if(PlayerData[playerid][pUndercover][0])
		{
		    OnUndercover(playerid, 0, "", 0, 0.0, 0.0);
		}
		if(PlayerData[playerid][pHurt] - 5 > 0)
		{
		    SendAdminMessage(COLOR_YELLOW, "AdmWarning: %s possibly left the server while in a gunfight.", GetRPName(playerid));
			PlayerData[playerid][pInjured] = gettime();
		}
        SavePlayerVariables(playerid);

        if(PlayerData[playerid][pTazedTime] > 0 || PlayerData[playerid][pCuffed] > 0)
        {
            SendAdminMessage(COLOR_YELLOW, "AdmWarning: %s left the server while tazed or cuffed.", GetRPName(playerid));
            ResetPlayerWeaponsEx(playerid);

            mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET jailtype = 2, jailtime = 1200, prisonedby = 'Server', prisonreason = 'Logging to avoid arrest' WHERE uid = %i", PlayerData[playerid][pID]);
            mysql_tquery(connectionID, queryBuffer);
        }
	}
	if(PlayerData[playerid][pActiveReport] >= 0)
	{
	    callcmd::cr(playerid, "\1");
	}
	if(PlayerData[playerid][pAcceptedEMS] != INVALID_PLAYER_ID)
	{
		SendClientMessageEx(PlayerData[playerid][pAcceptedEMS], COLOR_YELLOW, "Your patient %s has left the server while injured.", GetRPName(playerid));
		PlayerData[playerid][pAcceptedEMS] = INVALID_PLAYER_ID;
	}
	foreach(new i : Player)
	{
	    if(PlayerData[i][pAcceptedEMS] == playerid)
	    {
	        SendClientMessage(i, COLOR_YELLOW, "Your medic has left the server while rescuing you. (you can now accept your fate)");
	        PlayerData[i][pAcceptedEMS] = INVALID_PLAYER_ID;
	    }
	}
	if(IsValidDynamicObject(PlayerData[playerid][pEditObject]))
	{
	    DestroyDynamicObject(PlayerData[playerid][pEditObject]);
	}
	if(IsValidDynamic3DTextLabel(PlayerData[playerid][pSpecialTag]))
	{
	    DestroyDynamic3DTextLabel(PlayerData[playerid][pSpecialTag]);
	}
	if(IsValidDynamicObject(PlayerData[playerid][pBombObject]))
	{
	    DestroyDynamicObject(PlayerData[playerid][pBombObject]);
	}
	if(IsValidDynamicObject(PlayerData[playerid][pWeedObject]))
	{
	    DestroyDynamicObject(PlayerData[playerid][pWeedObject]);
	}
	if(PlayerData[playerid][pLockBreak] != INVALID_VEHICLE_ID)
	{
	    CancelBreakIn(playerid);
	}
	if(PlayerData[playerid][pAdminDuty])
	{
	    SetPlayerName(playerid, PlayerData[playerid][pUsername]);
	}
	if(PlayerData[playerid][pBoomboxPlaced])
	{
	    DestroyBoombox(playerid);
	}
	if(PlayerData[playerid][pZoneID] >= 0)
	{
	    GangZoneDestroy(PlayerData[playerid][pZoneID]);
	}
	if(RobberyInfo[rPlanning] || RobberyInfo[rStarted])
	{
		RemoveFromBankRobbery(playerid);
	}

	for(new i = 0; i < 4; i ++)
	{
	    if(IsValidDynamicPickup(PlayerData[playerid][pZonePickups][i]))
	    {
	        DestroyDynamicPickup(PlayerData[playerid][pZonePickups][i]);
	    }
	}

	if(PlayerData[playerid][pLogged])
	{
		foreach(new i: Vehicle)
		{
	    	if(IsVehicleOwner(playerid, i) && VehicleInfo[i][vTimer] == -1)
		    {
				VehicleInfo[i][vTimer] = SetTimerEx("DespawnTimer", 600000, false, "i", i);
	   		}
		}
	}
	for(new i = 0; i < MAX_REPORTS; i ++)
	{
	    if(ReportInfo[i][rExists] && ReportInfo[i][rReporter] == playerid)
	    {
	        ReportInfo[i][rExists] = 0;
		}
	}



	switch(reason)
	{
	    case 0: SendProximityMessage(playerid, 20.0, COLOR_YELLOW, "%s has left the server. (Timeout)", GetRPName(playerid));
	    case 1: SendProximityMessage(playerid, 20.0, COLOR_YELLOW, "%s has left the server. (Leaving)", GetRPName(playerid));
	    case 2: SendProximityMessage(playerid, 20.0, COLOR_YELLOW, "%s has left the server. (Kicked)", GetRPName(playerid));
	}
	if(PlayerData[playerid][pGang] >= 0)
	{
	    SendGangMessage(PlayerData[playerid][pGang], COLOR_AQUA, "(( %s has disconnected ))", GetRPName(playerid));
	}
	mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "DELETE FROM shots WHERE (playerid = %i) OR (hitid = %i AND hittype = 1)", playerid, playerid);
	mysql_tquery(connectionID, queryBuffer);

	return 1;
}


LoadGeneralTextdraws()
{
	//------------------------------------------//
	Blind = TextDrawCreate(641.199951, 1.500000, "usebox");
    TextDrawLetterSize(Blind, 0.000000, 49.378147);
    TextDrawTextSize(Blind, -2.000000, 0.000000);
    TextDrawAlignment(Blind, 3);
    TextDrawColor(Blind, -1);
    TextDrawUseBox(Blind, true);
    TextDrawBoxColor(Blind, 255);
    TextDrawSetShadow(Blind, 0);
    TextDrawSetOutline(Blind, 0);
    TextDrawBackgroundColor(Blind, 255);
    TextDrawFont(Blind, 1);

 	/////////////////////////////////////////////
    new welc[128];
    format(welc, sizeof(welc), "Welcome to ~g~Arabica RolePlay ~w~!");
	welcomenew = TextDrawCreate(327.496246, 153.999984, welc);
	TextDrawLetterSize(welcomenew, 0.449999, 1.600000);
	TextDrawAlignment(welcomenew, 2);
	TextDrawColor(welcomenew, -1);
	TextDrawSetShadow(welcomenew, 0);
	TextDrawSetOutline(welcomenew, 1);
	TextDrawBackgroundColor(welcomenew, 255);
	TextDrawFont(welcomenew, 3);
	TextDrawSetProportional(welcomenew, 1);

	// Time textdraw
 	TimeTD = TextDrawCreate(578.000000, 8.000000, "12:05AM");
	TextDrawAlignment(TimeTD, 2);
	TextDrawBackgroundColor(TimeTD, 255);
	TextDrawFont(TimeTD, 2);
	TextDrawLetterSize(TimeTD, 0.230000, 1.500000);
	TextDrawColor(TimeTD, -1);
	TextDrawSetOutline(TimeTD, 1);
	TextDrawSetProportional(TimeTD, 1);
	TextDrawSetSelectable(TimeTD, 0);

	// Damage Informer Textdraw
	for(new i; i < MAX_PLAYERS; ++i)
	{
		Damage[i] = TextDrawCreate(198.000015, 382.874114, "Damage: You were shot by");
		TextDrawLetterSize(Damage[i], 0.213333, 1.110517);
		TextDrawAlignment(Damage[i], 1);
		TextDrawColor(Damage[i], -1);
		TextDrawSetShadow(Damage[i], 0);
		TextDrawSetOutline(Damage[i], 1);
		TextDrawBackgroundColor(Damage[i], 51);
		TextDrawFont(Damage[i], 1);
		TextDrawSetProportional(Damage[i], 1);
	}

	// House Lights
   	houseLights = TextDrawCreate(0.0, 0.0, "|");
    TextDrawUseBox(houseLights, 1);
    TextDrawBoxColor(houseLights, 0x000000BB);
    TextDrawTextSize(houseLights, 660.000000, 22.000000);
    TextDrawAlignment(houseLights, 0);
    TextDrawBackgroundColor(houseLights, 0x000000FF);
    TextDrawFont(houseLights, 3);
    TextDrawLetterSize(houseLights, 1.000000, 52.200000);
    TextDrawColor(houseLights, 0x000000FF);
    TextDrawSetOutline(houseLights, 1);
    TextDrawSetProportional(houseLights, 1);
    TextDrawSetShadow(houseLights, 1);
}


public OnPlayerSpawn(playerid)
{

    if(PlayerData[playerid][pKicked]) return 0;

    if(PlayerLogin(playerid))
	{
        return 0;
	}

	if(InsideShamal[playerid] != INVALID_VEHICLE_ID)
	{
		SetPlayerPos(playerid, GetPVarFloat(playerid, "air_Xpos"), GetPVarFloat(playerid, "air_Ypos"), GetPVarFloat(playerid, "air_Zpos"));
		SetPlayerFacingAngle(playerid, GetPVarFloat(playerid, "air_Rpos"));

		DeletePVar(playerid, "air_Xpos");
		DeletePVar(playerid, "air_Ypos");
		DeletePVar(playerid, "air_Zpos");
		DeletePVar(playerid, "air_Rpos");
		DeletePVar(playerid, "air_HP");
		DeletePVar(playerid, "air_Arm");

		SetCameraBehindPlayer(playerid);
		SetPlayerVirtualWorld(playerid, InsideShamal[playerid]);
		return SetPlayerInterior(playerid, 1);
	}
	
	TextDrawHideForPlayer(playerid, welcomenew);
	TextDrawHideForPlayer(playerid, Blind);
    DestroyDynamic3DTextLabel(fRepfamtext[playerid]);
    fRepfamtext[playerid] = Text3D:INVALID_3DTEXT_ID;

	if(PlayerData[playerid][pSetup])
	{
	    StartTutorial(playerid);
	}
	else if(PlayerData[playerid][pJailTime] > 0)
	{
	    SetPlayerInJail(playerid);

	    if(PlayerData[playerid][pJailType] == 2)
	    {
	        SendClientMessageEx(playerid, COLOR_LIGHTRED, "* You were placed in admin prison by %s, reason: %s", PlayerData[playerid][pPrisonedBy], PlayerData[playerid][pPrisonReason]);
		}
		else
		{
			SendClientMessage(playerid, COLOR_LIGHTRED, "* You haven't completed your jail sentence yet.");
		}
	}
	else if(PlayerData[playerid][pPaintball] > 0)
	{
	    SetPlayerInPaintball(playerid, PlayerData[playerid][pPaintball]);
	}
	else
	{

	    if(PlayerData[playerid][pInjured])
	    {
	        SetPlayerHealth(playerid, 100.0);
	        SetPlayerArmour(playerid, 0.0);
            ApplyAnimation(playerid, "SWEET", "Sweet_injuredloop", 4.1, 0, 0, 0, 1, 0, 1);

            GameTextForPlayer(playerid, "~r~Injured~n~~w~/phone or~n~/accept death", 5000, 3);
	        SendClientMessage(playerid, COLOR_DOCTOR, "You are injured and losing blood. /call 911 for medical attention.");
	        SendClientMessage(playerid, COLOR_DOCTOR, "If you wish to accept your death and go to hospital use /accept death.");
	    }
	    else if(PlayerData[playerid][pHospital])
	    {
	        if(PlayerData[playerid][pInsurance] == 0)
     	   		SetPlayerInHospital(playerid);
	        else
				SetPlayerInHospital(playerid, .type = PlayerData[playerid][pInsurance]);

			ResetPlayerWeaponsEx(playerid);
	    }
	    else
		{

		    SetPlayerHealth(playerid, PlayerData[playerid][pHealth]);
		    SetScriptArmour(playerid, PlayerData[playerid][pArmor]);
		}

		if(!PlayerData[playerid][pHospital])
		{
		    if(PlayerData[playerid][pDueling] != INVALID_PLAYER_ID)
			{
				PlayerData[PlayerData[playerid][pDueling]][pDueling] = INVALID_PLAYER_ID;
				PlayerData[playerid][pDueling] = INVALID_PLAYER_ID;
			}
			if(PlayerData[playerid][pInjured])
			{
					if(PlayerData[playerid][pInterior] || PlayerData[playerid][pWorld])
					{
					    SetTimerEx("StreamedCheck", 1000, false, "ifffii", playerid, PlayerData[playerid][pPosX], PlayerData[playerid][pPosY], PlayerData[playerid][pPosZ], PlayerData[playerid][pInterior], PlayerData[playerid][pWorld]);
					}
					SetPlayerPos(playerid, PlayerData[playerid][pPosX], PlayerData[playerid][pPosY], PlayerData[playerid][pPosZ]);
					SetPlayerFacingAngle(playerid, PlayerData[playerid][pPosA]);
					SetPlayerInterior(playerid, PlayerData[playerid][pInterior]);
			 		SetPlayerVirtualWorld(playerid, PlayerData[playerid][pWorld]);
					SetPlayerWeapons(playerid);
					SetCameraBehindPlayer(playerid);
			}
			else
			{
				switch(PlayerData[playerid][pSpawnSelect])
				{
				    case 0:
				    {
						if(PlayerData[playerid][pInterior] || PlayerData[playerid][pWorld])
						{
						    SetTimerEx("StreamedCheck", 1000, false, "ifffii", playerid, PlayerData[playerid][pPosX], PlayerData[playerid][pPosY], PlayerData[playerid][pPosZ], PlayerData[playerid][pInterior], PlayerData[playerid][pWorld]);
						}
						SetPlayerPos(playerid, PlayerData[playerid][pPosX], PlayerData[playerid][pPosY], PlayerData[playerid][pPosZ]);
						SetPlayerFacingAngle(playerid, PlayerData[playerid][pPosA]);
						SetPlayerInterior(playerid, PlayerData[playerid][pInterior]);
				 		SetPlayerVirtualWorld(playerid, PlayerData[playerid][pWorld]);
						SetPlayerWeapons(playerid);
						SetCameraBehindPlayer(playerid);
					}
					case 1:
					{
					    new houseid = PlayerData[playerid][pSpawnHouse];
					    if(HouseInfo[houseid][hExists] && IsHouseOwner(playerid, houseid))
					    {
							SetPlayerPos(playerid, HouseInfo[houseid][hPosX], HouseInfo[houseid][hPosY], HouseInfo[houseid][hPosZ]);
							SetPlayerFacingAngle(playerid, HouseInfo[houseid][hPosA]);
							SetPlayerInterior(playerid, PlayerData[playerid][pInterior]);
					 		SetPlayerVirtualWorld(playerid, PlayerData[playerid][pWorld]);
							SetPlayerWeapons(playerid);
							SetCameraBehindPlayer(playerid);
						}
						else
						{
							SetPlayerPos(playerid, PlayerData[playerid][pPosX], PlayerData[playerid][pPosY], PlayerData[playerid][pPosZ]);
							SetPlayerFacingAngle(playerid, PlayerData[playerid][pPosA]);
							SetPlayerInterior(playerid, PlayerData[playerid][pInterior]);
					 		SetPlayerVirtualWorld(playerid, PlayerData[playerid][pWorld]);
							SetPlayerWeapons(playerid);
							SetCameraBehindPlayer(playerid);
						}
					}
					case 2:
					{
						new factionid = PlayerData[playerid][pFaction];
						if(factionid != -1)
						{
							for(new i = 0; i < MAX_LOCKERS; i ++)
							{
							    if(LockerInfo[i][lExists] && LockerInfo[i][lFaction] == factionid)
							    {
									SetPlayerPos(playerid, LockerInfo[i][lPosX], LockerInfo[i][lPosY], LockerInfo[i][lPosZ]);
	      							SetPlayerFacingAngle(playerid, 90.0);
									SetPlayerInterior(playerid, LockerInfo[playerid][lInterior]);
									SetPlayerVirtualWorld(playerid, LockerInfo[playerid][lWorld]);
									SetPlayerWeapons(playerid);
									SetCameraBehindPlayer(playerid);
								}
							}
						}
						else
						{
							SetPlayerPos(playerid, PlayerData[playerid][pPosX], PlayerData[playerid][pPosY], PlayerData[playerid][pPosZ]);
							SetPlayerFacingAngle(playerid, PlayerData[playerid][pPosA]);
							SetPlayerInterior(playerid, PlayerData[playerid][pInterior]);
					 		SetPlayerVirtualWorld(playerid, PlayerData[playerid][pWorld]);
							SetPlayerWeapons(playerid);
							SetCameraBehindPlayer(playerid);
						}
					}
				}
			}
		}
	}

	if(PlayerData[playerid][pAdminDuty])
	{
		SetPlayerSkin(playerid, ADMIN_SKIN);
	}
	else if(PlayerData[playerid][pAcceptedHelp])
	{
		SetPlayerSkin(playerid, HELPER_SKIN);
	}
	else
	{
		SetPlayerSkin(playerid, PlayerData[playerid][pSkin]);
	}
	SetPlayerFightingStyle(playerid, PlayerData[playerid][pFightStyle]);
	SetPlayerSkillLevel(playerid, WEAPONSKILL_MICRO_UZI, 998);
	SetPlayerSkillLevel(playerid, WEAPONSKILL_PISTOL, 998);
 	SetPlayerSkillLevel(playerid, WEAPONSKILL_SAWNOFF_SHOTGUN, 998);
	SetPlayerClothing(playerid);
	RefreshPlayerTextdraws(playerid);

	return 1;
}

public OnPlayerDeath(playerid, killerid, reason)
{

	if((gettime() - PlayerData[playerid][pLastDeath]) < 2)
	{
	    return 1;
	}

    if(GetPVarInt(playerid, "Mobile") != 501)
    {
        if(IsPlayerConnected(GetPVarInt(playerid, "Mobile")) && GetPVarInt(GetPVarInt(playerid, "Mobile"), "Mobile") == playerid)
        {
		    SendClientMessage(GetPVarInt(playerid, "Mobile"),COLOR_GREY,"The phone line went dead...");
		    if(GetPlayerSpecialAction(GetPVarInt(playerid, "Mobile")) == SPECIAL_ACTION_USECELLPHONE) SetPlayerSpecialAction(GetPVarInt(playerid, "Mobile"), SPECIAL_ACTION_STOPUSECELLPHONE);
            SetPVarInt(GetPVarInt(playerid, "Mobile"), "Mobile", 501);
		}
        SetPVarInt(playerid, "Mobile", 501);
    }
    foreach(new i : Player)
	{
		if(PlayerData[i][pAdmin] >= 6 || PlayerData[i][pAdminDuty])
		{
		    if(PlayerData[playerid][pInjured] == 0)
		    {
	    		SendDeathMessageToPlayer(i, killerid, playerid, reason);
	 		}
		}
	}

    if(IsAdmin(playerid) && IsAdminOnDuty(playerid, false) && IsPlayerConnected(killerid))
    {
        AwardAchievement(killerid, ACH_BlackHole);
    }

	if(PlayerData[playerid][pLogged])
	{
		if(IsPlayerInEvent(playerid))
		{
			CallRemoteFunction("OnEventPlayerDeath", "iiii", GetPVarInt(playerid, "EventToken"), playerid, killerid, reason);
		}
		else if(PlayerData[playerid][pPaintball] > 0)
		{
		    foreach(new i : Player)
			{
			    if(PlayerData[playerid][pPaintball] == PlayerData[i][pPaintball])
			    {
			        if(killerid == INVALID_PLAYER_ID)
			            SendClientMessageEx(i, COLOR_LIGHTORANGE, "(( %s died. ))", GetRPName(playerid));
			        else
						SendClientMessageEx(i, COLOR_LIGHTORANGE, "(( %s was killed by %s. ))", GetRPName(playerid), GetRPName(killerid));

				}
			}
		}
		else if(PlayerData[playerid][pDueling] != INVALID_PLAYER_ID)
		{
		    new entranceid = GetInsideEntrance(playerid);

			SendClientMessageEx(playerid, COLOR_LIGHTORANGE, "(( You lost your duel against %s! ))", GetRPName(PlayerData[playerid][pDueling]));

			if(killerid != INVALID_PLAYER_ID)
		    {
				SendClientMessageEx(killerid, COLOR_LIGHTORANGE, "(( You won the duel against %s! ))", GetRPName(playerid));

				if(entranceid >= 0 && EntranceInfo[entranceid][eType] == 1)
				{
				    foreach(new i : Player)
				    {
				        if(GetInsideEntrance(i) == entranceid)
				        {
				            SendClientMessageEx(i, COLOR_YELLOW, "Duel Arena: %s has won their duel against %s.", GetRPName(killerid), GetRPName(playerid));
						}
				    }
				}
				else
				{
					SendAdminMessage(COLOR_LIGHTRED, "AdmCmd: %s has won their duel against %s.", GetRPName(killerid), GetRPName(playerid));
				}

				SetPlayerWeapons(killerid);
				SetPlayerToSpawn(killerid);
			}
		}
		else
		{
		    if(killerid != INVALID_PLAYER_ID)
			{
			    HandleContract(playerid, killerid);
			}

		    if(!PlayerData[playerid][pAcceptedHelp] && !PlayerData[playerid][pAdminDuty] && PlayerData[playerid][pJailType] == 0 && PlayerData[playerid][pPreviewHouse] == -1)
		    {
			    if(PlayerData[playerid][pInjured] == 0)
				{
					if(IsPlayerConnected(killerid))
					{
						if(PlayerData[playerid][pAdminDuty] == 0 && PlayerData[killerid][pAdminDuty] == 0 )
						{
							if(IsLawEnforcement(playerid) && !IsLawEnforcement(killerid))
							{				
								GiveNotoriety(killerid, 1000);
								SendClientMessageEx(killerid, COLOR_AQUA, "You have gained 1000 notoriety for killing a law enforcement member, you now have %d.", PlayerData[killerid][pNotoriety]);
							} else if(GetPlayerFaction(playerid) == FACTION_GOVERNMENT && GetPlayerFaction(killerid) != FACTION_GOVERNMENT){
								GiveNotoriety(killerid, 3000);
								SendClientMessageEx(killerid, COLOR_AQUA, "You have gained 1000 notoriety for killing a government agent, you now have %d.", PlayerData[killerid][pNotoriety]);
							} else if(GetPlayerFaction(playerid) == FACTION_HITMAN){
								GiveNotoriety(killerid, 500);
								SendClientMessageEx(killerid, COLOR_AQUA, "You have gained 500 notoriety for killing a civil servant, you now have %d.", PlayerData[killerid][pNotoriety]);
							} else if(PlayerData[playerid][pBandana] && PlayerData[killerid][pBandana]) {
								GiveNotoriety(killerid, 100);
								SendClientMessageEx(killerid, COLOR_AQUA, "You have gained 100 notoriety for killing a rival gang member, you now have %d.", PlayerData[killerid][pNotoriety]);
							} else {
								GiveNotoriety(killerid, 200);
								SendClientMessageEx(killerid, COLOR_AQUA, "You have gained 200 notoriety for killing a civilian, you now have %d.", PlayerData[killerid][pNotoriety]);
							}
						}
					}
				    ResetPlayer(playerid);
				    PlayerData[playerid][pInjured] = gettime();
					foreach(new i : Player)
					{
					    if(GetPlayerFaction(i) == FACTION_MEDIC)
					    {
					    	SendClientMessageEx(i, 0xEC004DFF, "Dispatch: {FFFFFF}Beacon %s (%i) is in need of immediate medical assistance.", GetRPName(playerid), playerid);
						}
					}
				}
				else
				{
					GiveNotoriety(playerid, -5);
					SendClientMessageEx(playerid, COLOR_AQUA, "You have lost -5 notoriety as you died, you now have %d.", PlayerData[playerid][pNotoriety]);
					
					PlayerData[playerid][pInjured] = 0;
					PlayerData[playerid][pHospital] = 1;
					if(PlayerData[playerid][pAcceptedEMS] != INVALID_PLAYER_ID)
					{
						SendClientMessageEx(PlayerData[playerid][pAcceptedEMS], COLOR_YELLOW, "Your patient %s has bled out.", GetRPName(playerid));
                        PlayerData[playerid][pAcceptedEMS] = INVALID_PLAYER_ID;
					}

                    if(PlayerData[playerid][pDraggedBy] != INVALID_PLAYER_ID)
                    {
                        PlayerData[playerid][pDraggedBy] = INVALID_PLAYER_ID;
                    }
				}
			}
			else
			{
			    PlayerData[playerid][pHealth] = 32767.0;
			}

			if(killerid != INVALID_PLAYER_ID)
			{
			    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "INSERT INTO kills VALUES(null, %i, %i, '%s', '%s', '%s', NOW())", PlayerData[killerid][pID], PlayerData[playerid][pID], GetPlayerNameEx(killerid), GetPlayerNameEx(playerid), GetDeathReason(reason));
			    mysql_tquery(connectionID, queryBuffer);
			}

			GetPlayerPos(playerid, PlayerData[playerid][pPosX], PlayerData[playerid][pPosY], PlayerData[playerid][pPosZ]);
	        GetPlayerFacingAngle(playerid, PlayerData[playerid][pPosA]);

	        PlayerData[playerid][pInterior] = GetPlayerInterior(playerid);
	        PlayerData[playerid][pWorld] = GetPlayerVirtualWorld(playerid);
		}
	}



	if(reason == 50 && killerid != INVALID_PLAYER_ID)
	{
	    SendAdminMessage(COLOR_YELLOW, "AdmWarning: %s[%i] was helibladed by %s[%i].", GetRPName(playerid), playerid, GetRPName(killerid), killerid);
	}

	PlayerData[playerid][pLastDeath] = gettime();
	return 1;
}

public OnPlayerEnterVehicle(playerid, vehicleid, ispassenger)
{

    IsPlayerSteppingInVehicle[playerid] = vehicleid;
	if(GetPlayerSpecialAction(playerid) == SPECIAL_ACTION_CARRY)
	{
	    new
	        Float:x,
	        Float:y,
	        Float:z;
	    GetPlayerPos(playerid, x, y, z);
	    SetPlayerPos(playerid, x, y, z + 0.5);
	    ClearAnimations(playerid);
	}

	if((!ispassenger) && (PlayerData[playerid][pCuffed] || PlayerData[playerid][pTied] || PlayerData[playerid][pInjured]))
	{
	    new
	        Float:x,
	        Float:y,
	        Float:z;
	    GetPlayerPos(playerid, x, y, z);
	    SetPlayerPos(playerid, x, y, z + 0.5);
	    ClearAnimations(playerid);
	}

	if(!ispassenger)
	{
		if(IsJobCar(vehicleid) && !CanEnterJobCar(playerid,vehicleid))
	    {
			if (GetVehicleModel(vehicleid) == 515)
				SendClientMessage(playerid, COLOR_GREY, "You cannot operate this vehicle as you are not a master Trucker.");
			else 
	        	SendClientMessageEx(playerid, COLOR_GREY, "You cannot operate this vehicle as you are not a %s.",GetJobName(GetCarJobType(vehicleid)));
	        ClearAnimations(playerid);
	    }
	
		if((testVehicles[0] <= vehicleid <= testVehicles[4]) && !PlayerData[playerid][pDrivingTest])
	    {
	        SendClientMessage(playerid, COLOR_GREY, "You cannot operate this vehicle as you are not taking your drivers test.");
	        ClearAnimations(playerid);
	    }
	    if(VehicleInfo[vehicleid][vFaction] != -1 && PlayerData[playerid][pFaction] != VehicleInfo[vehicleid][vFaction])
	    {
	        SendClientMessage(playerid, COLOR_GREY, "You cannot operate this vehicle as it doesn't belong to your faction.");
	        ClearAnimations(playerid);
	    }
	    else if(VehicleInfo[vehicleid][vFaction] != -1 && VehicleInfo[vehicleid][vRank] > PlayerData[playerid][pFactionRank])
	    {
	    	SendClientMessageEx(playerid, COLOR_GREY, "You cannot operate this vehicle as you aren't a rank %i in your faction.", VehicleInfo[vehicleid][vRank]);
	        ClearAnimations(playerid);
	    }else if(VehicleInfo[vehicleid][vFGDivision] != -1 && VehicleInfo[vehicleid][vFGDivision]!=PlayerData[playerid][pDivision])
		{
			SendClientMessageEx(playerid, COLOR_GREY, "You cannot operate this vehicle as you aren't %s in your faction.",  
			FactionDivisions[PlayerData[playerid][pFaction]][VehicleInfo[vehicleid][vFGDivision]]);
	        ClearAnimations(playerid);
		}
	    if(VehicleInfo[vehicleid][vGang] >= 0 && PlayerData[playerid][pGang] != VehicleInfo[vehicleid][vGang])
	    {
	        SendClientMessage(playerid, COLOR_GREY, "You cannot operate this vehicle as it doesn't belong to your gang.");
	        ClearAnimations(playerid);
	    }
	    else if(VehicleInfo[vehicleid][vGang] >= 0 && VehicleInfo[vehicleid][vRank] > PlayerData[playerid][pGangRank])
	    {
	    	SendClientMessageEx(playerid, COLOR_GREY, "You cannot operate this vehicle as you aren't a rank %i in your gang.", VehicleInfo[vehicleid][vRank]);
	        ClearAnimations(playerid);
	    }
	    if(VehicleInfo[vehicleid][vJob] >= 0 && PlayerData[playerid][pJob] != VehicleInfo[vehicleid][vJob])
	    {
	        SendClientMessageEx(playerid, COLOR_GREY, "You cannot operate this vehicle as you are not a %s.", GetJobName(VehicleInfo[vehicleid][vJob]));
	        ClearAnimations(playerid);
	    }
	    if(VehicleInfo[vehicleid][vVIP] > 0 && PlayerData[playerid][pDonator] < VehicleInfo[vehicleid][vVIP])
	    {
	        SendClientMessageEx(playerid, COLOR_GREY, "You cannot operate this vehicle as you are not a %s VIP+.", GetVIPRank(VehicleInfo[vehicleid][vVIP]));
	        ClearAnimations(playerid);
	    }
	}
	seatbelt[playerid] = 0;
	return 1;
}

public OnPlayerEnterCheckpoint(playerid)
{

	switch(PlayerData[playerid][pCP])
	{
	    case CHECKPOINT_TEST:
	    {
	        PlayerData[playerid][pTestCP]++;

	        if(PlayerData[playerid][pTestCP] < sizeof(drivingTestCPs))
	        {
	            if(!(testVehicles[0] <= GetPlayerVehicleID(playerid) <= testVehicles[4]))
	            {
					SendClientMessage(playerid, COLOR_LIGHTRED, "* You failed the test as you exited your vehicle.");
	                DisablePlayerCheckpoint(playerid);
		    		SetVehicleToRespawn(PlayerData[playerid][pTestVehicle]);

				    PlayerData[playerid][pCP] = CHECKPOINT_NONE;
		            PlayerData[playerid][pDrivingTest] = 0;
				}
				else
				{
		            SetPlayerCheckpoint(playerid, drivingTestCPs[PlayerData[playerid][pTestCP]][0], drivingTestCPs[PlayerData[playerid][pTestCP]][1], drivingTestCPs[PlayerData[playerid][pTestCP]][2], 3.0);
				}
			}
			else
			{
			    new
			        Float:health;

				GetVehicleHealth(PlayerData[playerid][pTestVehicle], health);

			    if(health < 900.0)
			    {
			        GameTextForPlayer(playerid, "~r~Failed", 5000, 1);
			        SendClientMessage(playerid, COLOR_LIGHTRED, "* You brought back the vehicle damaged and therefore failed your test.");
			    }
			    else
			    {
			        AwardAchievement(playerid, ACH_LegalDriver);

                    GameTextForPlayer(playerid, "~w~Passed!~n~~r~-$500", 5000, 1);
			        SendClientMessage(playerid, COLOR_AQUA, "You successfully passed your drivers test and received your license!");

			        GivePlayerCash(playerid, -500);
			        PlayerData[playerid][pCarLicense] = 1;

			        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET carlicense = 1 WHERE uid = %i", PlayerData[playerid][pID]);
			        mysql_tquery(connectionID, queryBuffer);
			    }

	    		DisablePlayerCheckpoint(playerid);
	    		SetVehicleToRespawn(PlayerData[playerid][pTestVehicle]);

			    PlayerData[playerid][pCP] = CHECKPOINT_NONE;
	            PlayerData[playerid][pDrivingTest] = 0;
	        }
	    }
	    case CHECKPOINT_MATS:
	    {
	        //if((PlayerData[playerid][pSmuggleMats] == 1 && IsPlayerInRangeOfPoint(playerid, 3.0, 2173.2129, -2264.1548, 13.3467)) || (PlayerData[playerid][pSmuggleMats] == 2 && IsPlayerInRangeOfPoint(playerid, 3.0, 2288.0918, -1105.6555, 37.9766)))
            if((PlayerData[playerid][pSmuggleMats] == 1 && IsPlayerInRangeOfPoint(playerid, 3.0, 2173.2129, -2264.1548, 13.3467))
			|| (PlayerData[playerid][pSmuggleMats] == 2 && IsPlayerInRangeOfPoint(playerid, 3.0, 2288.0918, -1105.6555, 37.9766))
			|| (PlayerData[playerid][pSmuggleMats] == 3 && IsPlayerInRangeOfPoint(playerid, 20.0, 29.0318,-1399.3555,1.7680))
			|| (PlayerData[playerid][pSmuggleMats] == 4 && (IsPlayerInRangeOfPoint(playerid, 30.0, -1368.1206,-203.7393,14.1484) || IsPlayerInRangeOfPoint(playerid,30.0,310.8307,2033.6459,17.6406) || IsPlayerInRangeOfPoint(playerid,30.0,401.2192,2502.6482,16.4844) || IsPlayerInRangeOfPoint(playerid,30.0,1582.8756,1356.8186,10.8556) || IsPlayerInRangeOfPoint(playerid,30.0,1574.8552,1505.5690,10.8361))))
			{
			    if(gettime() - PlayerData[playerid][pSmuggleTime] < 20 && PlayerData[playerid][pAdmin] < JUNIOR_ADMIN && !PlayerData[playerid][pKicked])
			    {
			        PlayerData[playerid][pACWarns]++;

			        if(PlayerData[playerid][pACWarns] < MAX_ANTICHEAT_WARNINGS)
			        {
			            SendAdminMessage(COLOR_YELLOW, "AdmWarning: %s[%i] is possibly teleport matrunning (time: %i).", GetRPName(playerid), playerid, gettime() - PlayerData[playerid][pSmuggleTime]);
					}
					else
					{
					    BanPlayer(playerid, "Teleport matrun");
					}
			    }
				
				new materialsqte;
		 	   	if(PlayerData[playerid][pSmuggleMats] == 1) {
			        materialsqte = 250 ;
			    }else if (PlayerData[playerid][pSmuggleMats] == 2) {
			        materialsqte = 250;
			    } else if (PlayerData[playerid][pSmuggleMats] == 3) {
                    materialsqte = 250;
				} else if (PlayerData[playerid][pSmuggleMats] == 4) {
                    materialsqte = 650;
				}
				materialsqte = materialsqte + 50 * GetJobLevel(playerid,JOB_FORKLIFT);
				
                if(PlayerData[playerid][pMaterials] + materialsqte > GetPlayerCapacity(playerid, CAPACITY_MATERIALS))
				{
	    			return SendClientMessageEx(playerid, COLOR_GREY, "You currently have %i/%i materials. You can't carry anymore until you upgrade your inventory skill.", PlayerData[playerid][pMaterials], GetPlayerCapacity(playerid, CAPACITY_MATERIALS));
				}

			    if(PlayerData[playerid][pGang] >= 0)
			    {
			        GiveGangPoints(PlayerData[playerid][pGang], 1);
				}

				if(IsPlayerInAnyVehicle(playerid))
				{
				    PlayerData[playerid][pDedication] = 0;
				}

				if(PlayerData[playerid][pDedication])
				{
				    AwardAchievement(playerid, ACH_Dedication);
				}
				PlayerData[playerid][pMaterials] += materialsqte;
				SendClientMessageEx(playerid, COLOR_AQUA, "You have dropped off your load and collected %d materials from the depot.",materialsqte);
				
				if(PlayerData[playerid][pSmuggleMats] > 0 && PlayerData[playerid][pDonator] >= 3)
                {
                    PlayerData[playerid][pMaterials] += 250;
                    SendClientMessage(playerid, COLOR_AQUA, "You've earned 250 more materials for being a {D909D9}Legendary VIP");
                }
		    	PlayerData[playerid][pSmuggleMats] = 0;
		    	PlayerData[playerid][pCP] = CHECKPOINT_NONE;
				GiveNotoriety(playerid, 10);
                GivePlayerRankPointIllegalJob(playerid, 80);
				SendClientMessageEx(playerid, COLOR_AQUA, "You have gained 10 notoriety for matrials smuggling, you now have %d.", PlayerData[playerid][pNotoriety]);
			    //SendClientMessage(playerid, COLOR_AQUA, "You have dropped off your load and collected 250 materials from the depot.");
		    	DisablePlayerCheckpoint(playerid);

		    	mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET materials = %i WHERE uid = %i", PlayerData[playerid][pMaterials], PlayerData[playerid][pID]);
		    	mysql_tquery(connectionID, queryBuffer);
			}
	    }
	    case CHECKPOINT_DRUGS:
	    {
	        new amount = (GetJobLevel(playerid, JOB_DRUGSMUGGLER) * 100);

			switch(PlayerData[playerid][pSmuggleDrugs])
			{
				case 1:
				{
					amount += 200;
				    if(!IsPlayerInRangeOfPoint(playerid, 5.0, 2160.4971, -1700.8091, 15.0859))
				    {
			    	    return SendClientMessage(playerid, COLOR_GREY, "You aren't at the correct dropoff spot.");
					}
					if(gSeedsStock >= 1000)
					{
					    return SendClientMessage(playerid, COLOR_GREY, "The drug den does not need anymore seeds.");
					}

					gSeedsStock += 4;
                    IncreaseJobSkill(playerid, JOB_DRUGSMUGGLER);
					GivePlayerCash(playerid, amount);
				    SendClientMessageEx(playerid, COLOR_AQUA, "You have earned {00AA00}$%i{33CCFF} for your delivery of marijuana seeds.", amount);
				}
				case 2:
				{
					amount += 300;
				    if(!IsPlayerInRangeOfPoint(playerid, 5.0, 2349.7727, -1169.6304, 28.0243))
				    {
			    	    return SendClientMessage(playerid, COLOR_GREY, "You aren't at the correct dropoff spot.");
					}
					if(gCocaineStock >= 500)
					{
					    return SendClientMessage(playerid, COLOR_GREY, "The crack house does not need anymore crack.");
					}

					gCocaineStock += 5;
                    IncreaseJobSkill(playerid, JOB_DRUGSMUGGLER);
					GivePlayerCash(playerid, amount);
				    SendClientMessageEx(playerid, COLOR_AQUA, "You have earned {00AA00}$%i{33CCFF} for your delivery of crack.", amount);
				}
				case 3:
				{
					amount += 250;
				    if(!IsPlayerInRangeOfPoint(playerid, 5.0, 1765.2086, -2048.8926, 14.0429))
				    {
			    	    return SendClientMessage(playerid, COLOR_GREY, "You aren't at the correct dropoff spot.");
					}
					if(gEphedrineStock >= 250)
					{
					    return SendClientMessage(playerid, COLOR_GREY, "The drug den does not need anymore chemicals.");
					}

					gEphedrineStock += 4;
                    IncreaseJobSkill(playerid, JOB_DRUGSMUGGLER);
					GivePlayerCash(playerid, amount);
				    SendClientMessageEx(playerid, COLOR_AQUA, "You have earned {00AA00}$%i{33CCFF} for your delivery of Chems.", amount);
				}
			}

			if(gettime() - PlayerData[playerid][pSmuggleTime] < 60 && PlayerData[playerid][pAdmin] < JUNIOR_ADMIN)
		    {
		        PlayerData[playerid][pACWarns]++;

		        if(PlayerData[playerid][pACWarns] < MAX_ANTICHEAT_WARNINGS)
		        {
		            SendAdminMessage(COLOR_YELLOW, "AdmWarning: %s[%i] is possibly teleport drug smuggling (time: %i).", GetRPName(playerid), playerid, gettime() - PlayerData[playerid][pSmuggleTime]);
				}
				else if(!PlayerData[playerid][pKicked])
				{
				    BanPlayer(playerid, "Teleport drug smuggling");
				}
		    }
		    else
		    {
		        if(PlayerData[playerid][pGang] >= 0)
		    	{
		     		GiveGangPoints(PlayerData[playerid][pGang], 1);
				}
			}
			GiveNotoriety(playerid, 10);
            GivePlayerRankPointIllegalJob(playerid, 80);

			SendClientMessageEx(playerid, COLOR_AQUA, "You have gained 10 notoriety for drug smuggling, you now have %d.", PlayerData[playerid][pNotoriety]);
			PlayerData[playerid][pSmuggleDrugs] = 0;
			PlayerData[playerid][pCP] = CHECKPOINT_NONE;

			DisablePlayerCheckpoint(playerid);

	    }
	    case CHECKPOINT_HOUSE:
	    {
            ShowActionBubble(playerid, "* %s has entered the house.", GetRPName(playerid));
			SetPlayerPos(playerid, HouseInfo[PlayerData[playerid][pInviteHouse]][hIntX], HouseInfo[PlayerData[playerid][pInviteHouse]][hIntY], HouseInfo[PlayerData[playerid][pInviteHouse]][hIntZ]);
			SetPlayerFacingAngle(playerid, HouseInfo[PlayerData[playerid][pInviteHouse]][hIntA]);
			SetPlayerInterior(playerid, HouseInfo[PlayerData[playerid][pInviteHouse]][hInterior]);
			SetPlayerVirtualWorld(playerid, HouseInfo[PlayerData[playerid][pInviteHouse]][hWorld]);
			SetCameraBehindPlayer(playerid);

			PlayerData[playerid][pCP] = CHECKPOINT_NONE;
	        DisablePlayerCheckpoint(playerid);
	    }
	    case CHECKPOINT_ROBBERY:
	    {
	        if(IsPlayerInBankRobbery(playerid) && PlayerData[playerid][pRobCash] > 0)
	        {
	            if(gettime() - PlayerData[playerid][pLastLoad] < 60 && PlayerData[playerid][pAdmin] < JUNIOR_ADMIN)
	            {
	                SendClientMessage(playerid, COLOR_GREY, "Robbery failed. You arrived at the checkpoint too fast.");
	                SendAdminMessage(COLOR_YELLOW, "AdmWarning: %s[%i] arrived to the bank robbery checkpoint too fast.", GetRPName(playerid), playerid);
	            }
	            else
	            {
	                if(PlayerData[playerid][pGang] >= 0)
	                {
	                    GiveGangPoints(PlayerData[playerid][pGang], 50);
	                }

					RobberyInfo[rStolen] += PlayerData[playerid][pRobCash];
					GivePlayerCash(playerid, PlayerData[playerid][pRobCash]);
					SendClientMessageEx(playerid, COLOR_AQUA, "You have earned {00AA00}$%i{33CCFF} for successfully completing the bank robbery.", PlayerData[playerid][pRobCash]);
				}

				RemoveFromBankRobbery(playerid);
			}else if(PlayerData[playerid][pRobCash] > 0)//it's biz robbery
			{
				new string[20];
				GivePlayerCash(playerid,PlayerData[playerid][pRobCash]);
				format(string, sizeof(string), "~g~+$%i", PlayerData[playerid][pRobCash]);
				GameTextForPlayer(playerid, string, 5000, 1);

				SendClientMessageEx(playerid, COLOR_AQUA, "You have earned {00AA00}$%i{33CCFF} for successfully completing the business robbery.", PlayerData[playerid][pRobCash]);
				PlayerData[playerid][pRobCash] = 0;
			}else{
				SendClientMessage(playerid, COLOR_RED, "Checkpoint error. You are not in a robbery.");
			
			}

			PlayerData[playerid][pCP] = CHECKPOINT_NONE;
            GivePlayerRankPointIllegalJob(playerid, 120);
			DisablePlayerCheckpoint(playerid);
	    }
	    case CHECKPOINT_DROPCAR:
	    {
	        new vehicleid = GetPlayerVehicleID(playerid);

	        if(GetPlayerState(playerid) != PLAYER_STATE_DRIVER)
			{
			    return SendClientMessage(playerid, COLOR_GREY, "You are not driving any vehicle.");
			}
			if(IsVehicleOwner(playerid, vehicleid))
			{
			    return SendClientMessage(playerid, COLOR_GREY, "You can't drop off your own vehicle.");
			}
			if(!GetVehicleCranePrice(vehicleid))
			{
			    return SendClientMessage(playerid, COLOR_GREY, "This vehicle is not worth anything.");
			}
			if(VehicleInfo[vehicleid][vID] > 0 && IsPointInRangeOfPoint(VehicleInfo[vehicleid][vPosX], VehicleInfo[vehicleid][vPosY], VehicleInfo[vehicleid][vPosZ], 300.0, 2695.8010, -2226.6643, 13.5501))
			{
	    		return SendClientMessage(playerid, COLOR_GREY, "This vehicle is parked too close to the crane. You can't deliver it.");
			}

	        if(gettime() - PlayerData[playerid][pDropTime] < 10 && PlayerData[playerid][pAdmin] < JUNIOR_ADMIN)
	        {
	            PlayerData[playerid][pACWarns]++;

		        if(PlayerData[playerid][pACWarns] < MAX_ANTICHEAT_WARNINGS)
		        {
		            SendAdminMessage(COLOR_YELLOW, "AdmWarning: %s[%i] is possibly teleport car delivering (time: %i).", GetRPName(playerid), playerid, gettime() - PlayerData[playerid][pDropTime]);
				}
				else if(!PlayerData[playerid][pKicked])
				{
				    BanPlayer(playerid, "Teleport delivering");
				}
			}

	        new money = GetVehicleCranePrice(vehicleid);

	        GivePlayerCash(playerid, money);

			SetVehicleToRespawn(vehicleid);
			IncreaseJobSkill(playerid, JOB_CARJACKER);
	        PlayerData[playerid][pCP] = CHECKPOINT_NONE;
	        DisablePlayerCheckpoint(playerid);
			GiveNotoriety(playerid, 10);
            GivePlayerRankPointIllegalJob(playerid, 60);
			SendClientMessageEx(playerid, COLOR_AQUA, "You have gained 10 notoriety for car jacking, you now have %d.", PlayerData[playerid][pNotoriety]);
		}
		case CHECKPOINT_GARBAGE:
		{
 			if(GetVehicleModel(GetPlayerVehicleID(playerid)) != 408 && GetPlayerState(playerid) != PLAYER_STATE_DRIVER)
			{
			    return SendClientMessage(playerid, COLOR_GREY, "You need to be driving a Trashmaster.");
			}
		    if(PlayerData[playerid][pGarbage] == 1)
		    {
                GameTextForPlayer(playerid, "Loading Garbage....~n~Please wait.", 5000, 3);
                TogglePlayerControllableEx(playerid, 0);
                SetTimerEx("garbagewait", 5000, false, "i", playerid);
				DisablePlayerCheckpoint(playerid);

				PlayerData[playerid][pGarbage] = 2;
				SetPlayerCheckpoint(playerid, 1138.8413,-1333.5553,13.6871, 5.0);
			}
			if(PlayerData[playerid][pGarbage] == 2)
			{
			    if(IsPlayerInRangeOfPoint(playerid, 5.0, 1138.8413,-1333.5553,13.6871))
			    {
	   				GameTextForPlayer(playerid, "Loading Garbage....~n~Please wait.", 5000, 3);
	                TogglePlayerControllableEx(playerid, 0);
	                SetTimerEx("garbagewait", 5000, false, "i", playerid);
					DisablePlayerCheckpoint(playerid);

					PlayerData[playerid][pGarbage] = 3;
					SetPlayerCheckpoint(playerid, 2121.7314,-1342.7231,23.9844, 5.0);
				}

			}
			if(PlayerData[playerid][pGarbage] == 3)
			{
   				if(IsPlayerInRangeOfPoint(playerid, 5.0, 2121.7314,-1342.7231,23.9844))
			    {
	                GameTextForPlayer(playerid, "Loading Garbage....~n~Please wait..", 5000, 3);
	                TogglePlayerControllableEx(playerid, 0);
	                SetTimerEx("garbagewait", 5000, false, "i", playerid);
					DisablePlayerCheckpoint(playerid);

					PlayerData[playerid][pGarbage] = 4;
					SetPlayerCheckpoint(playerid, 1920.7303,-1791.3890,13.3828, 5.0);
				}
			}
			if(PlayerData[playerid][pGarbage] == 4)
			{
   				if(IsPlayerInRangeOfPoint(playerid, 5.0, 1920.7303,-1791.3890,13.3828))
			    {
	                GameTextForPlayer(playerid, "Loading Garbage....~n~Please wait.", 5000, 3);
	                TogglePlayerControllableEx(playerid, 0);
	                SetTimerEx("garbagewait", 5000, false, "i", playerid);
					DisablePlayerCheckpoint(playerid);

					PlayerData[playerid][pGarbage] = 5;
					SetPlayerCheckpoint(playerid, 2392.6050,-2106.0879,13.5469, 5.0);
				}

			}
			if(PlayerData[playerid][pGarbage] == 5)
			{
   				if(IsPlayerInRangeOfPoint(playerid, 5.0, 2392.6050,-2106.0879,13.5469))
			    {
					GameTextForPlayer(playerid, "Unloading Garbage....~n~Please wait.", 5000, 3);
					PlayerData[playerid][pGarbage] = 0;
					DisablePlayerCheckpoint(playerid);

					new amount = 800 + random(300);
					PlayerData[playerid][pCash] = PlayerData[playerid][pCash] + amount;
					SendClientMessageEx(playerid, COLOR_AQUA, "Paycheck: You've earned $%i for your time working as a garbage man.", amount);

					PlayerData[playerid][pCP] = CHECKPOINT_NONE;

	   				mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET cash = %i WHERE uid = %i", PlayerData[playerid][pCash], PlayerData[playerid][pID]);
					mysql_tquery(connectionID, queryBuffer);
				}
			}
			GiveNotoriety(playerid, -2);
            GivePlayerRankPointLegalJob(playerid, 60);
			SendClientMessageEx(playerid, COLOR_AQUA, "You have lost -2 notoriety for public service, you now have %d.", PlayerData[playerid][pNotoriety]);
		}
		case CHECKPOINT_TRUCKDELIVERY:
		{
			new truckid = GetPlayerVehicleID(playerid);
			if(!((truckerVehicles[0] <= truckid <= truckerVehicles[29]) && GetPlayerState(playerid) == PLAYER_STATE_DRIVER))
			{
				CancelTruckDelivery(playerid);
			    return SendClientMessage(playerid, COLOR_GREY, "Trucker: Delivery canceled as you are not driving a valid truck.");
			}
			if(!IsTrailerAttachedToVehicle(GetPlayerVehicleID(playerid)) && GetVehicleModel(GetPlayerVehicleID(playerid)) == 515){
				return SendClientMessage(playerid, COLOR_GREY, "Trailer is not attached to vehicle.");
			}
			new truckindex = GetTruckIndex(playerid);
			if(!PlayerHasJob(playerid, JOB_TRUCKER))
			{
				CancelTruckDelivery(playerid);
				return SendClientMessage(playerid, COLOR_GREY, "Trucker: Delivery canceled as you are not a trucker.");
			}			
			
			if(IsPlayerInRangeOfPoint(playerid, 5, 2197.1211, -2660.5928, 13.5469))
			{
				DisablePlayerCheckpoint(playerid);
				Dialog_Show(playerid, DIALOG_PICKLOAD, DIALOG_STYLE_LIST, "Choose the load you want to deliver.", 
				"{00FF00}Legal goods {FFFFFF}(no risk but no bonuses)\n{FF0000}Illegal goods {FFFFFF}(Risk of getting caught but a bonus)", "Select", "Cancel");
			}else if(IsPlayerInRangeOfPoint(playerid, 5, 2224.3040,-2635.5708,13.4350))
			{
				if(truckersGoods[truckindex][pTrailerID] != GetVehicleTrailer(GetPlayerVehicleID(playerid)) && truckersGoods[truckindex][pTrailerID]!=-1){
					return SendClientMessage(playerid, COLOR_GREY, "Trucker: Unvalid attached trailer.");
				}				
				new vehicleid = GetPlayerVehicleID(playerid);
				new money = Random(GetJobLevel(playerid, JOB_TRUCKER) * 500, 1500 + GetJobLevel(playerid, JOB_TRUCKER) * 500);
				if(GetVehicleModel(vehicleid) != 515 && money > 2000)
					money = 2000;
				SendClientMessageEx(playerid, COLOR_AQUA, "TRUCKER: You Delivered goods and you got $%d.",money);
				GivePlayerCash(playerid,money);
				PlayerPlaySound(playerid, 1058, 0.0, 0.0, 0.0);				
			    CancelTruckDelivery(playerid);			
				SetVehicleToRespawn(vehicleid);
				if(truckersGoods[truckindex][pTrailerID]!=-1)
					SetVehicleToRespawn(truckersGoods[truckindex][pTrailerID]);
				new joblevel = GetJobLevel(playerid, JOB_TRUCKER);
				if(joblevel>1){
					switch(PlayerData[playerid][pTruckerGoodType])
					{
						case tIllegalDrugs:{
                            GivePlayerRankPointIllegalJob(playerid, 60);
							new qte = min(joblevel-1,3);
							PlayerData[playerid][pCocaine] += qte;
							PlayerData[playerid][pWeed] += qte;
							PlayerData[playerid][pHeroin] += qte;
							SendClientMessageEx(playerid, COLOR_RED, "TRUCKER: You got %d cocaine, %d weed, %d Heroin as a gift.",qte,qte,qte);	
						}
						case tIllegalMaterials:{
                            GivePlayerRankPointIllegalJob(playerid, 60);
							PlayerData[playerid][pMaterials]+= min(50 * (joblevel - 1), 200);
							SendClientMessageEx(playerid, COLOR_RED, "TRUCKER: You got %d materials as gift.",min(50 * (joblevel - 1), 200));
						}
						case tIllegalWeapons:{
                            GivePlayerRankPointIllegalJob(playerid, 60);
							new dice=random(10);
							if(joblevel==2 && dice<5){
									GivePlayerWeaponEx(playerid, 25);//Shotgun
									SendClientMessage(playerid, COLOR_RED, "TRUCKER: You got Shotgun as gift.");
							}
							if(joblevel==3){
								if(dice<4){
									GivePlayerWeaponEx(playerid, 25);
									SendClientMessage(playerid, COLOR_RED, "TRUCKER: You got Shotgun as gift.");
								}else if (dice<6){
									GivePlayerWeaponEx(playerid, 33);//rifle
									SendClientMessage(playerid, COLOR_RED, "TRUCKER: You got Rifle as gift.");
								}
							}else{
								if(dice<4){
									GivePlayerWeaponEx(playerid, 25);
									SendClientMessage(playerid, COLOR_RED, "TRUCKER: You got Shotgun as gift.");
								}else if (dice<7){
									GivePlayerWeaponEx(playerid, 33);
									SendClientMessage(playerid, COLOR_RED, "TRUCKER: You got Rifle as gift.");
								}else if (dice<8){
									GivePlayerWeaponEx(playerid, 24);//deagle
									SendClientMessage(playerid, COLOR_RED, "TRUCKER: You got Desert Deagle as gift.");
								}
							}
						}
                        default:
                        {
                            GivePlayerRankPointLegalJob(playerid, 60);
                        }
					}
				}
				IncreaseJobSkill(playerid, JOB_TRUCKER);
			}else if (IsPlayerInRangeOfPoint(playerid, 5, 
						truckersGoods[truckindex][pTDPosX],
						truckersGoods[truckindex][pTDPosY],
						truckersGoods[truckindex][pTDPosZ])){									
				
				if(truckersGoods[truckindex][pTrailerID] != GetVehicleTrailer(GetPlayerVehicleID(playerid)) && truckersGoods[truckindex][pTrailerID]!=-1){
					return SendClientMessage(playerid, COLOR_GREY, "Trucker: Unvalid attached trailer.");
				}
				
				SendClientMessage(playerid, COLOR_AQUA, "Trucker: You delivered the goods return back to dock to get your paid.");
				BusinessInfo[truckersGoods[truckindex][pBizID]][bProducts] += (GetJobLevel(playerid, JOB_TRUCKER) * 2) + 10;
				DisablePlayerCheckpoint(playerid);
				SetPlayerCheckpoint(playerid, 2224.3040,-2635.5708,13.4350, 5);
			}else{
				CancelTruckDelivery(playerid);
				return SendClientMessage(playerid, COLOR_GREY, "Trucker: Delivery canceled as you are in an unvalid checkpoint.");
			}
			
		}
		case CHECKPOINT_FORKLIFT:
		{
			OnEnterForkliftCheckPoint(playerid);
		}
		case CHECKPOINT_FARMER:
		{
			OnEnterFarmerCheckpoint(playerid);
		}
		case CHECKPOINT_HOUSEROB:
		{
			new rand1 = Random(1, 1000);
			new rand = Random(1, 200);
			if(PlayerData[playerid][pRobHouse] == 1)
			{
			    GivePlayerCash(playerid, rand1);
			    SendClientMessageEx(playerid, COLOR_AQUA, "Congratulations, Mission complete, you have received $%d for the stolen safe", rand1);
			}
			else
			{
			    GivePlayerCash(playerid, rand);
			    SendClientMessageEx(playerid, COLOR_AQUA, "Congratulations, Mission complete, you have received $%d for the stolen item", rand);
			}
            DisablePlayerCheckpoint(playerid);
			PlayerData[playerid][pWantedLevel]++;
			PlayerData[playerid][pCrimes]++;
			PlayerData[playerid][pBugFix] = 0;
			mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET wantedlevel = %i, crimes = %i WHERE uid = %i", PlayerData[playerid][pWantedLevel], PlayerData[playerid][pCrimes], PlayerData[playerid][pID]);
			mysql_tquery(connectionID, queryBuffer);
			GiveNotoriety(playerid, 20);
            GivePlayerRankPointIllegalJob(playerid, 50);

			SendClientMessageEx(playerid, COLOR_AQUA, "You have gained 20 notoriety for house robbing, you now have %d.", PlayerData[playerid][pNotoriety]);
		}
		default:
	    {
	        PlayerData[playerid][pCP] = CHECKPOINT_NONE;
	        DisablePlayerCheckpoint(playerid);
	    }
	}
	return 1;
}

public OnPlayerPickUpDynamicPickup(playerid, pickupid)
{
	if(IsJellyFish(pickupid))
        PickUpJellyFish(playerid);
		
	if(pickupid == gPaycheck && IsPlayerInRangeOfPoint(playerid, 5.0, 1667.4180, -972.4201, 683.6855))
	{
	    if(PlayerData[playerid][pPaycheck] > 0)
	    {
			new
				string[20];

			format(string, sizeof(string), "~g~+$%i", PlayerData[playerid][pPaycheck]);
			GameTextForPlayer(playerid, string, 5000, 1);

			GivePlayerCash(playerid, PlayerData[playerid][pPaycheck]);
			PlayerPlaySound(playerid, 1150, 0.0, 0.0, 0.0);

			mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET paycheck = 0 WHERE uid = %i", PlayerData[playerid][pID]);
			mysql_tquery(connectionID, queryBuffer);

			PlayerData[playerid][pPaycheck] = 0;
	    }
	}

	if(PlayerData[playerid][pDonator] == 3)
	{
	    if(pickupid == gVIPHealth) {
	        SetPlayerHealth(playerid, 100.0);
		} else if(pickupid == gVIPArmor) {
		    SetScriptArmour(playerid, 100.0);
		}
	}

	if(gParachutes[0] <= pickupid <= gParachutes[1]) {
	    GivePlayerWeaponEx(playerid, 46);
	}

	return 1;
}

public OnPlayerGiveDamage(playerid, damagedid, Float:amount, weaponid, bodypart)
{
    if (weaponid < 0 || weaponid > 46) return 0;

    if (damagedid != INVALID_PLAYER_ID && weaponid >= 22 && weaponid <= 36) 
    {
        if (!PlayerHasWeapon(playerid, weaponid, true) && PlayerData[playerid][pAdmin] < JUNIOR_ADMIN)
        {
            SendAdminWarning(2, "%s[%i] has a desynced %s (weapon sync attempted).", GetRPName(playerid), playerid, GetWeaponNameEx(weaponid));
            ResetPlayerWeapons(playerid);
            SetPlayerWeapons(playerid);
            return 0;
        }
    }

    if (GetPlayerState(playerid) == PLAYER_STATE_SPECTATING && PlayerData[playerid][pAdmin] < JUNIOR_ADMIN)
    {
        if (IsPlayerConnected(damagedid))
        {
            SendAdminWarning(2, "%s[%i] is giving damage to %s[%i] while spectating.", GetRPName(playerid), playerid, GetRPName(damagedid), damagedid);
        }
        else
        {
            SendAdminWarning(2, "%s[%i] is giving damage to an INVALID_PLAYER_ID while spectating.", GetRPName(playerid), playerid);
        }
        return 0;
    }

    if (damagedid != INVALID_PLAYER_ID && weaponid == 23 && amount > 5.0)
    {
        if (IsLawEnforcement(playerid) || GetPlayerFaction(playerid) == FACTION_GOVERNMENT || GetPlayerFaction(playerid) == FACTION_TERRORIST)
        {
            if (PlayerData[playerid][pTazer] && GetPlayerState(playerid) == PLAYER_STATE_ONFOOT)
            {
                if (PlayerData[damagedid][pAdminDuty])
                {
                    SendClientMessage(playerid, COLOR_GREY, "You can't taze an admin on duty.");
                    return 0;
                }
                if (PlayerData[damagedid][pAcceptedHelp])
                {
                    SendClientMessage(playerid, COLOR_GREY, "You can't taze a helper on duty.");
                    return 0;
                }
                if (PlayerData[damagedid][pTazedTime])
                {
                    return SendClientMessage(playerid, COLOR_GREY, "This player is already tazed.");
                }
                if (!IsPlayerNearPlayer(playerid, damagedid, 10.0))
                {
                    return SendClientMessage(playerid, COLOR_GREY, "This player is too far to be tazed.");
                }
                if (IsPlayerAiming(damagedid) && GetPlayerWeapon(damagedid) >= 22 && GetPlayerWeapon(damagedid) <= 38)
                {
                    return SendClientMessage(playerid, COLOR_GREY, "You can't taze someone aiming at you.");
                }
                if (IsPlayerInAnyVehicle(damagedid))
                {
                    return SendClientMessage(playerid, COLOR_GREY, "You can't taze a player in a vehicle.");
                }
                new turfid = GetNearbyTurf(damagedid);
                if (turfid != -1 && IsActiveTurf(turfid))
                {
                    return SendClientMessage(playerid, COLOR_GREY, "You can't taze a player in an active turf.");
                }

                PlayerData[damagedid][pTazedTime] = 10;
                TogglePlayerControllableEx(damagedid, 0);
                ApplyAnimation(damagedid, "PED", "KO_skid_front", 4.1, 0, 0, 0, 1, 0);
                GameTextForPlayer(damagedid, "~r~Tazed", 5000, 3);

                ShowActionBubble(playerid, "* %s aims their tazer at %s and stuns them.", GetRPName(playerid), GetRPName(damagedid));
                SendClientMessageEx(damagedid, COLOR_AQUA, "You've been stunned by %s's taser.", GetRPName(playerid));
                SendClientMessageEx(playerid, COLOR_AQUA, "You have stunned %s with a taser.", GetRPName(damagedid));
                return 0;
            }
        }
    }

    if (PlayerData[playerid][pToggleHUD] && IsPlayerConnected(playerid))
    {
        new string[50];
        format(string, sizeof(string), "~g~%.0f damage.", amount);
        TextDrawSetString(Damage[playerid], string);
        TextDrawShowForPlayer(playerid, Damage[playerid]);
        PlayerPlaySound(playerid, 17802, 0.0, 0.0, 15.0);
        KillTimer(PlayerData[playerid][pDamageTimer]);
        PlayerData[playerid][pDamageTimer] = SetTimerEx("DestroyDamageTD", 1500, false, "i", playerid);
    }

    if (damagedid != INVALID_PLAYER_ID && IsPlayerConnected(damagedid) && weaponid != -1)
    {
        AddDamages(playerid, damagedid, weaponid, bodypart, amount);
        
        new name[MAX_PLAYER_NAME];
        GetPlayerName(damagedid, name, sizeof(name));

        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer),
            "INSERT INTO shots VALUES(null, %i, %i, %i, %i, '%s', '0.0', '0.0', '0.0', %i)", 
            playerid, weaponid, BULLET_HIT_TYPE_PLAYER, damagedid, name, gettime());
        mysql_tquery(connectionID, queryBuffer);
    }

    if (!PlayerData[playerid][pNoKnife] && bodypart == 9 && GetPlayerState(playerid) != PLAYER_STATE_WASTED && GetPlayerFaction(playerid) == FACTION_HITMAN && IsPlayerIdle(playerid))
    {
        SetPlayerHealth(damagedid, 0);
        ShowPlayerFooter(playerid, "Headshot", 2000);
        ShowPlayerFooter(damagedid, "Headshot", 2000);
    }

    printf("DEBUG: OnPlayerGiveDamage -> playerid: %d, damagedid: %d, weaponid: %d, bodypart: %d, amount: %.2f",
        playerid, damagedid, weaponid, bodypart, amount);

    return 1;
}

public OnPlayerTakeDamage(playerid, issuerid, Float: amount, weaponid, bodypart)
{
	new string[100];
    if (IsPlayerPaused(playerid) && !PlayerData[playerid][pHurt])
    {
        if (IsInSameActiveTurf(playerid, issuerid))
        {
            return 1;
        }
        GameTextForPlayer(issuerid, "That player is AFK!", 5000, 3);
        return 0;
    }
	if(amount <= 0.1)
    {
        SetPlayerHealth(playerid, 99.0);
    }
	if(IsPlayerConnected(issuerid))
	{
	    if(weaponid == 4 && PlayerHasWeapon(issuerid, 4) && IsPlayerInRangeOfPlayer(playerid, issuerid, 20.0) && amount > 100.0)
	    {
	        SetPlayerHealth(playerid, 0.0);
	        HandleContract(playerid, issuerid);
	    }
		if(PlayerData[playerid][pToggleHUD] == 0)
		{
			format(string, sizeof(string), "~r~Damage: %s hit you for %.0f damage.", GetRPName(issuerid), amount);
			TextDrawSetString(Damage[playerid], string);
			TextDrawShowForPlayer(playerid, Damage[playerid]);
			PlayerPlaySound(playerid, 17802, 0.0, 0.0, 15.0);
			KillTimer(PlayerData[playerid][pDamageTimer]);
			PlayerData[playerid][pDamageTimer] = SetTimerEx("DestroyDamageTD", 1500, false, "i", playerid);
		}
	    if (IsValidDamageWeapon(weaponid) && WeaponDamages[weaponid] != 0.0 && PlayerData[issuerid][pTazer] == 0)
        {
            ProcessDamage(playerid, weaponid);
        }

	}
	return 1;
}
forward OnLoadGunDamages();
public OnLoadGunDamages()
{
	new
		rows = cache_get_row_count(connectionID),
		weaponid
	;

    for (new i = 0; i < rows; i ++)
	{
	    weaponid = cache_get_field_content_int(i, "Weapon");

		if (IsValidDamageWeapon(weaponid))
		{
		    WeaponDamages[weaponid] = cache_get_field_content_float(i, "Damage");
		}
	}
}
public OnPlayerShootDynamicObject(playerid, weaponid, objectid, Float:x, Float:y, Float:z)
{
	if(RobberyInfo[rPlanning] && objectid == RobberyInfo[rObjects][1])
	{
	    new bank[32];

     	if(GetPlayerVirtualWorld(playerid) == GetStaticEntranceWorld("Mulholland Bank")) {
     	    bank = "Mulholland Bank";
	    } else if(GetPlayerVirtualWorld(playerid) == GetStaticEntranceWorld("Rodeo Bank")) {
	        bank = "Rodeo Bank";
	    }

		for(new i = 0; i < MAX_BANK_ROBBERS; i ++)
		{
		    if(RobberyInfo[rRobbers][i] != INVALID_PLAYER_ID)
		    {
			    PlayerPlaySound(RobberyInfo[rRobbers][i], 3401, 0.0, 0.0, 0.0);
			    GameTextForPlayer(RobberyInfo[rRobbers][i], "~w~Heist started", 5000, 1);
			    SetPlayerAttachedObject(RobberyInfo[rRobbers][i], 8, 19801, 2, 0.091000, 0.012000, -0.000000, 0.099999, 87.799957, 179.500015, 1.345999, 1.523000, 1.270001, 0, 0);
				SetPlayerAttachedObject(RobberyInfo[rRobbers][i], 9, 1550, 1, 0.116999, -0.170999, -0.016000, -3.099997, 87.800018, -179.400009, 0.602000, 0.640000, 0.625000, 0, 0);
				ApplyAnimation(RobberyInfo[rRobbers][i], "GOGGLES", "goggles_put_on", 4.1, 0, 0, 0, 0, 0, 1);
				PlayerData[RobberyInfo[rRobbers][i]][pWantedLevel] = 6;
				PlayerData[RobberyInfo[rRobbers][i]][pCrimes]++;

				mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "INSERT INTO charges VALUES(null, %i, 'The State', NOW(), 'Bank Robbery')", PlayerData[RobberyInfo[rRobbers][i]][pID]);
				mysql_tquery(connectionID, queryBuffer);

				mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET wantedlevel = 6, crimes = crimes + 1 WHERE uid = %i", PlayerData[RobberyInfo[rRobbers][i]][pID]);
				mysql_tquery(connectionID, queryBuffer);
			}
		}

		foreach(new i : Player)
		{
		    if(IsLawEnforcement(i))
		    {
		        SendClientMessageEx(i, COLOR_OLDSCHOOL, "* HQ: A robbery is occurring at the %s. There are %i confirmed robbers.", bank, GetBankRobbers());
			}
		}

        GetDynamicObjectPos(RobberyInfo[rObjects][1], x, y, z);
	    MoveDynamicObject(RobberyInfo[rObjects][0], 1678.248901, -988.181152, 670.224853, 5.0, 90.000000, 0.000000, 0.000000);
		DestroyDynamicObject(RobberyInfo[rObjects][1]);

	    CreateExplosion(x, y, z, 12, 6.0);
		SendClientMessageToAllEx(COLOR_AQUA, "Breaking News: A bank robbery is currently taking place at the %s!", bank);

		RobberyInfo[rText][0] = CreateDynamic3DTextLabel("/lootbox\nto loot deposit box.", COLOR_YELLOW, 1680.2344, -994.6146, 671.0032, 10.0);
		RobberyInfo[rText][1] = CreateDynamic3DTextLabel("/lootbox\nto loot deposit box.", COLOR_YELLOW, 1680.2335, -998.6115, 671.0032, 10.0);
		RobberyInfo[rText][2] = CreateDynamic3DTextLabel("/lootbox\nto loot deposit box.", COLOR_YELLOW, 1680.2344, -1002.5356, 671.0032, 10.0);
		RobberyInfo[rText][3] = CreateDynamic3DTextLabel("/lootbox\nto loot deposit box.", COLOR_YELLOW, 1674.2708, -998.4954, 671.0032, 10.0);
		RobberyInfo[rText][4] = CreateDynamic3DTextLabel("/lootbox\nto loot deposit box.", COLOR_YELLOW, 1674.2708, -994.5173, 671.0032, 10.0);

		RobberyInfo[rStarted] = 1;
		RobberyInfo[rStolen] = 0;
		RobberyInfo[rPlanning] = 0;
	}
	if(PlayerData[playerid][pDeleteMode])
	{
		PlayerData[playerid][pSelected] = objectid;
		ShowDialogToPlayer(playerid, DIALOG_DELETEOBJECT);
	}

	return 1;
}
forward RechargeTazer(playerid);
public RechargeTazer(playerid)
{
	if (PlayerData[playerid][pTazer])
	{
		GivePlayerWeapon(playerid, 23, 1);
	}
	TogglePlayerControllableEx(playerid, 1);
}

public OnPlayerWeaponShot(playerid, weaponid, hittype, hitid, Float:fX, Float:fY, Float:fZ)
{
    if(weaponid < 0 || weaponid > 47)
    {
        return 0;// Anti-WeaponId change hack
    }
    if(hittype == BULLET_HIT_TYPE_PLAYER && !IsPlayerConnected(hitid))
    {
        return 0;
    }
	if ((weaponid >= 22 && weaponid <= 38) && hittype == BULLET_HIT_TYPE_OBJECT && PlayerData[playerid][pRangeBooth] != -1 && hitid == g_BoothObject[PlayerData[playerid][pRangeBooth]])
 	{
		PlayerPlaySound(playerid, 6401, 0.0, 0.0, 0.0);

		PlayerData[playerid][pTargets]++;
		DestroyObject(g_BoothObject[PlayerData[playerid][pRangeBooth]]);
		SendClientMessageEx(playerid, COLOR_GREEN, "~b~Targets:~w~ %d/10", PlayerData[playerid][pTargets]);
		SetTimerEx("UpdateBooth", 3000, false, "dd", playerid, PlayerData[playerid][pRangeBooth]);
	}
		
	if (weaponid == 23 && PlayerData[playerid][pTazer] && GetPlayerFaction(playerid) == FACTION_POLICE) 
	{
	    PlayerPlaySoundEx(playerid, 6003);
	}
	
    if(!CanPlayerShootWithWeapon(playerid, weaponid, hittype, hitid))
    {
        return 0;
    }

	if((25 <= weaponid && weaponid <= 38) && hittype == BULLET_HIT_TYPE_VEHICLE && IsValidVehicle(hitid))
	{
		new driverid = GetVehicleDriver(hitid);
		
		if(IsPlayerConnected(driverid))
		{
			GivePlayerHealth(playerid, - WeaponDamages[weaponid] / 2.0);
		}
	}

	return 1;
}

stock CheckAdmin(playerid, level)
{
	if (PlayerData[playerid][pAdmin] >= level)
		return true;
	else
		return false;
}

public OnPlayerSelectionMenuResponse(playerid, extraid, response, listitem, modelid)
{
	switch(extraid)
	{
	    case MODEL_SELECTION_CLOTHES:
	    {
	        if(response)
	        {
		        new
					businessid = GetInsideBusiness(playerid);

		        if(businessid >= 0 && BusinessInfo[businessid][bType] == BUSINESS_CLOTHES)
		        {
		            if(PlayerData[playerid][pDonator] == 0 && PlayerData[playerid][pCash] < 1000)
	                {
	                    return SendClientMessage(playerid, COLOR_GREY, "You don't have enough money. You can't buy new clothes.");
	                }
					if((PlayerData[playerid][pDonator] == 0 && GetPlayerFaction(playerid) != FACTION_POLICE && GetPlayerFaction(playerid) != FACTION_MEDIC) && (!(0 <= modelid <= 311) || (265 <= modelid <= 267) || (274 <= modelid <= 288) || (300 <= modelid <= 302) || (306 <= modelid <= 311)))
					{
					    return SendClientMessage(playerid, COLOR_GREY, "You are not allowed to use that skin as it is either invalid or faction reserved.");
					}

					if(PlayerData[playerid][pDonator] == 0)
					{
					    new price = 1000;

	                    if(PlayerData[playerid][pTraderUpgrade] > 0)
	                    {
							price -= percent(price, (PlayerData[playerid][pTraderUpgrade] * 10));
							SendClientMessageEx(playerid, COLOR_YELLOW3, "Trader Perk: Your level %i/3 trader perk reduced the price of this item to $%i.", PlayerData[playerid][pTraderUpgrade], price);
	                    }

						GivePlayerCash(playerid, -price);

                        if(BusinessInfo[businessid][bProducts] > 0)
                        {
                            BusinessInfo[businessid][bCash] += price;
                            BusinessInfo[businessid][bProducts]--;
                            mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE businesses SET cash = %i, products = %i WHERE id = %i", BusinessInfo[businessid][bCash], BusinessInfo[businessid][bProducts], BusinessInfo[businessid][bID]);
                            mysql_tquery(connectionID, queryBuffer);
                        }

	                	ShowActionBubble(playerid, "* %s paid %s to the shopkeeper and received a new set of clothes.", GetRPName(playerid), FormatCash(price));
	             		SendClientMessageEx(playerid, COLOR_WHITE, "You've changed your clothes for $%i.", price);
	                }
	                else
	                {
	                    SendClientMessage(playerid, COLOR_VIP, "VIP Perk: You changed your clothes free of charge.");
					}

					SetScriptSkin(playerid, modelid);
					SendClientMessageEx(playerid, -1, "%d", modelid);
		        }
			}
	    }
	    case MODEL_SELECTION_FURNITURE:
	    {
	        if(response && listitem >=0)
	        {
	            new houseid = GetInsideHouse(playerid);
				if(houseid == -1)
				    houseid = GetFurnitureHouse(playerid);

	            if(houseid >= 0 && HasFurniturePerms(playerid, houseid))
	            {
		            PreviewFurniture(playerid, listitem + PlayerData[playerid][pPreviewIndex]);
				}
	        }
	    }
	    case MODEL_SELECTION_LANDOBJECTS:
	    {
	        if(response && listitem >=0)
	        {
	            new landid = GetNearbyLand(playerid);

		    	if(landid >= 0 && HasLandPerms(playerid, landid))
				{
					PurchaseLandObject(playerid, landid, listitem + PlayerData[playerid][pFurnitureIndex]);
				}
			}
	        else
	        {
	            ShowDialogToPlayer(playerid, DIALOG_LANDBUILD1);
			}
	    }
	    case MODEL_SELECTION_CLOTHING:
	    {
	        if(response && listitem >=0)
	        {
	            new businessid = GetInsideBusiness(playerid);

	            if(businessid >= 0 && BusinessInfo[businessid][bType] == BUSINESS_CLOTHES)
	            {
					PreviewClothing(playerid, listitem + PlayerData[playerid][pClothingIndex]);
				}
	        }
	        else
	        {
	            ShowDialogToPlayer(playerid, DIALOG_BUYCLOTHINGTYPE);
			}
	    }
	    case MODEL_SELECTION_COPCLOTHING:
	    {
	        if((response) && IsLawEnforcement(playerid))
	        {
	            SetPlayerAttachedObject(playerid, 9, modelid, copClothing[listitem][cBone]);

				PlayerData[playerid][pEditType] = EDIT_COP_CLOTHING;
		        PlayerData[playerid][pSelected] = listitem;

				SendClientMessageEx(playerid, COLOR_AQUA, "You have selected {FF6347}%s{33CCFF}. Use the editor to arrange your clothing and click the disk icon to save.", copClothing[listitem][cName]);
        		EditAttachedObject(playerid, 9);
	        }
	    }
	    case MODEL_SELECTION_VIPCLOTHES:
	    {
	        if((response) && PlayerData[playerid][pDonator] > 0)
	        {
	            SetScriptSkin(playerid, modelid);
	            SendClientMessage(playerid, COLOR_VIP, "VIP Perk: You changed your clothes free of charge.");
	        }
		}
		case MODEL_SELECTION_VEHICLES:
		{
			if(response)
			{
			    PlayerData[playerid][pSelected] = listitem;
			    PurchaseVehicle(playerid);
			}
		}
	}
	return 1;
}

public OnPlayerInteriorChange(playerid, newinteriorid, oldinteriorid)
{

	if((newinteriorid == 0) && IsPlayerInBankRobbery(playerid))
	{
	    PlayerPlaySound(playerid, 3402, 0.0, 0.0, 0.0);
	}

	/*if(PlayerData[playerid][pPreviewHouse] >= 0)
	{
		PlayerData[playerid][pPreviewHouse] = -1;
  		PlayerData[playerid][pPreviewType] = 0;
    	PlayerData[playerid][pPreviewTime] = 0;
    	SendClientMessage(playerid, COLOR_GREY, "Preview cancelled. You left your house interior.");
	}*/

	return 1;
}

bool:IsVehicleBajs(vehid)
{
	switch(GetVehicleModel(vehid))
	{
		case 481, 509, 510: return true;
	}
	return false;
}
public OnPlayerUpdate(playerid)
{
	if(PlayerData[playerid][pKicked])
		return 0;

	if(!PlayerData[playerid][pLogged])
		return 1;
	new index = GetPlayerAnimationIndex(playerid);

	if(GetPlayerWeapon(playerid)  == 38 &&  PlayerData[playerid][pAdmin] < HEAD_ADMIN) // when they sync something which they should not!!!
	{
	    RemovePlayerWeapon(playerid, 38);
		KickPlayer(playerid, "Weapon Hack", INVALID_PLAYER_ID, BAN_VISIBILITY_ADMIN);
	}
	for (new id = 1; id <= 45; id++)
	{
		if (GetPlayerWeapon(playerid) == id && PlayerData[playerid][pLevel] == 1)
		{
			RemovePlayerWeapon(playerid, id);
			KickPlayer(playerid, "Weapon Hack", INVALID_PLAYER_ID, BAN_VISIBILITY_ADMIN);
		}
	}
	new Float:CarHealth[MAX_PLAYERS];
	if(IsPlayerInAnyVehicle(playerid) == 1 && seatbelt[playerid] == 0)
	{
		new Float:TempCarHealth;
		GetVehicleHealth(GetPlayerVehicleID(playerid), TempCarHealth);
		new Float:Difference = floatsub(CarHealth[playerid], TempCarHealth);
		if((floatcmp(CarHealth[playerid], TempCarHealth) == 1) && (floatcmp(Difference,100.0) == 1))
		{
		    Difference = floatdiv(Difference, 10.0);
		    new Float:OldHealth;
		    GetPlayerHealth(playerid, OldHealth);
		    SetPlayerHealth(playerid, floatsub(OldHealth, Difference));
		}
		CarHealth[playerid] = TempCarHealth;
	}
	else
	{
		CarHealth[playerid] = 0.0;
	}

	new vehicleid = GetPlayerVehicleID(playerid), string[128], drunkLevel = GetPlayerDrunkLevel(playerid);

	if(PlayerData[playerid][pCurrentVehicle] != vehicleid)
	{
	    PlayerData[playerid][pCurrentVehicle] = vehicleid;
	    PlayerData[playerid][pVehicleCount]++;

	    if((!IsABoat(vehicleid) && GetVehicleModel(vehicleid) != 539) && PlayerData[playerid][pVehicleCount] >= 4 && PlayerData[playerid][pAdmin] < JUNIOR_ADMIN && !PlayerData[playerid][pKicked])
	    {
	        KickPlayer(playerid, "Car warping");
	        return 0;
		}
	}
	new keys, ud, lr;
    GetPlayerKeys(playerid, keys, ud, lr);

	if((44 <= GetPlayerWeapon(playerid) <= 45) && keys & KEY_FIRE)
	{
	    return 0;
	}

	if(!PlayerData[playerid][pToggleHUD] && !PlayerData[playerid][pToggleTextdraws] && GetPlayerState(playerid) != PLAYER_STATE_SPECTATING)
	{
		new
			Float:health,
			Float:armour;

		GetPlayerHealth(playerid, health);
		GetPlayerArmour(playerid, armour);

		if(floatround(armour) > 0)
		{
			format(string, sizeof(string), "%.0f", armour);
			PlayerTextDrawSetString(playerid, PlayerData[playerid][pArmorText], string);
			PlayerTextDrawShow(playerid, PlayerData[playerid][pArmorText]);
		}
		else
		{
		    PlayerTextDrawHide(playerid, PlayerData[playerid][pArmorText]);
		}

		format(string, sizeof(string), "%.0f", health);
		PlayerTextDrawSetString(playerid, PlayerData[playerid][pHealthText], string);
		PlayerTextDrawShow(playerid, PlayerData[playerid][pHealthText]);


	}

	if(GetPlayerWeapon(playerid) > 1 && PlayerData[playerid][pInjured])
	{
		SetPlayerArmedWeapon(playerid, 0);
	}
	if(PlayerData[playerid][pInjured])
	{
		format(string, sizeof(string), "(( Has been injured %d times, /damages %d for more information. ))", totalDamages[playerid], playerid);
		SetPlayerChatBubble(playerid, string, COLOR_ADM, 30.0, 2000);
	}
	if(!drunkLevel)
	{
	    SetPlayerDrunkLevel(playerid, 1000);
	}

	if(PlayerData[playerid][pDrunkLevel] != drunkLevel)
	{
	    new value = PlayerData[playerid][pDrunkLevel] - drunkLevel;

	    if(0 <= value <= 250)
	    {
	        PlayerData[playerid][pFPS] = value;
		}

	    PlayerData[playerid][pDrunkLevel] = drunkLevel;
	}

    if(!GetPlayerInterior(playerid))
	{
     	SetPlayerTime(playerid, gWorldTime, 0);
	}
	else
	{
	    new garageid;

		if((garageid = GetInsideGarage(playerid)) >= 0 && GarageInfo[garageid][gType] == 2)
		    SetPlayerTime(playerid, 0, 0);
	    else
          	SetPlayerTime(playerid, 12, 0);
	}

    if((keys & KEY_HANDBRAKE) && GetPlayerWeapon(playerid) == 34)
	{
 		if(!PlayerData[playerid][pSniper])
	    {
		    for(new i = 0; i < MAX_PLAYER_CLOTHING; i ++)
		    {
	    	    if(ClothingInfo[playerid][i][cAttached]) RemovePlayerAttachedObject(playerid, i);
			}

		    PlayerData[playerid][pSniper] = 1;
		}
	}
	else if(PlayerData[playerid][pSniper])
	{
	    SetPlayerClothing(playerid);
	    PlayerData[playerid][pSniper] = 0;
	}
	if(PlayerData[playerid][pNoKnife] && GetPlayerWeapon(playerid) == 4)
    {
        SetPlayerArmedWeapon(playerid, 0);
    }
	if(PlayerData[playerid][pAnimation] != index)
	{
	    if(PlayerData[playerid][pLockBreak] != INVALID_VEHICLE_ID)
	    {
	        vehicleid = PlayerData[playerid][pLockBreak];

	        if(!IsValidVehicle(vehicleid) || VehicleInfo[vehicleid][vOwnerID] == 0)
	        {
	            SendClientMessage(playerid, COLOR_GREY, "You are no longer breaking into this vehicle as it despawned.");
				CancelBreakIn(playerid);
	        }
	        else if(GetNearbyVehicle(playerid) != vehicleid)
	        {
	            SendClientMessage(playerid, COLOR_GREY, "You are no longer breaking into this vehicle as you left its location.");
				CancelBreakIn(playerid);
	        }
	        else if(VehicleInfo[vehicleid][vLocked] == 0)
	        {
	            SendClientMessage(playerid, COLOR_GREY, "You are no longer breaking into this vehicle as it was unlocked.");
	            CancelBreakIn(playerid);
	        }
	        else if(GetPlayerState(playerid) != PLAYER_STATE_ONFOOT)
	        {
	            SendClientMessage(playerid, COLOR_GREY, "You are no longer breaking into this vehicle as you aren't onfoot.");
	            CancelBreakIn(playerid);
	        }
	        else
	        {
			    switch(index)
			    {
					case 17..19, 1545..1547, 312..314, 1136..1138, 472..474, 482..484, 494..496, 504..505, 1165:
					{
					    if(IsValidVehicle(vehicleid) && (IsPlayerAtVehicleDoor(playerid, vehicleid, DOOR_DRIVER) || IsPlayerAtVehicleDoor(playerid, vehicleid, DOOR_PASSENGER)))
					    {
					        new
					            damage[4];

					        GetVehicleDamageStatus(vehicleid, damage[0], damage[1], damage[2], damage[3]);

							if(2 <= GetPlayerWeapon(playerid) <= 9)
							    PlayerData[playerid][pLockHealth] -= 20.0;
					        else
								PlayerData[playerid][pLockHealth] -= 10.0;

					        if(PlayerData[playerid][pLockHealth] <= 0)
					        {
					            VehicleInfo[vehicleid][vLocked] = 0;

								SetVehicleParams(vehicleid, VEHICLE_DOORS, false);
						        PlayerPlaySound(playerid, 1145, 0.0, 0.0, 0.0);

								GameTextForPlayer(playerid, "~g~Vehicle unlocked!", 3000, 6);
								ShowActionBubble(playerid, "* %s successfully kicked down the door of the %s.", GetRPName(playerid), GetVehicleName(vehicleid));

								CancelBreakIn(playerid);
								UpdateVehicleDamageStatus(vehicleid, damage[0], 262144, damage[2], damage[3]);
					        }
					        else
					        {
								new
								    Float:x,
								    Float:y,
								    Float:z,
									garageid = GetVehicleGarage(vehicleid);

		      					if(!IsVehicleParamOn(vehicleid, VEHICLE_ALARM))
		      					{
		      					    if(VehicleInfo[vehicleid][vAlarm] > 0)
									{
										foreach(new i : Player)
		      					    	{
		      					        	if(IsVehicleOwner(i, vehicleid))
		      					        	{
		      					        	    SendClientMessageEx(i, COLOR_YELLOW, "* SMS from OnStar: The alarm was activated on your %s located in %s, Ph: 999 *", GetVehicleName(vehicleid), GetVehicleZoneName(vehicleid));
											}

											if(GetPlayerFaction(i) == FACTION_POLICE)
											{
												if(VehicleInfo[vehicleid][vAlarm] == 2)
												{
												    SendClientMessageEx(i, COLOR_OLDSCHOOL, "* HQ: The alarm was activated on %s's %s in %s. *", VehicleInfo[vehicleid][vOwner], GetVehicleName(vehicleid), GetVehicleZoneName(vehicleid));
			      					            }
			      					            else if(VehicleInfo[vehicleid][vAlarm] == 3)
												{
												    if(PlayerData[playerid][pCP] == CHECKPOINT_NONE)
												    {
												        PlayerData[playerid][pCP] = CHECKPOINT_MISC;

												        if(garageid >= 0)
														{
													        SetPlayerCheckpoint(playerid, GarageInfo[garageid][gPosX], GarageInfo[garageid][gPosY], GarageInfo[garageid][gPosZ], 3.0);
												        }
														else
														{
												            GetVehiclePos(vehicleid, x, y, z);
												            SetPlayerCheckpoint(playerid, x, y, z, 3.0);
												        }
												    }

												    SendClientMessageEx(i, COLOR_OLDSCHOOL, "* HQ: The alarm was activated on %s's %s in %s (marked on map). *", VehicleInfo[vehicleid][vOwner], GetVehicleName(vehicleid), GetVehicleZoneName(vehicleid));
			      					            }
		      					            }
		      					        }
		      					    }

		      					    SetVehicleParams(vehicleid, VEHICLE_ALARM, true);
								}

		                        GetVehicleModelInfo(GetVehicleModel(vehicleid), VEHICLE_MODEL_INFO_FRONTSEAT, x, y, z);
		                        UpdateVehicleDamageStatus(vehicleid, damage[0], 131072, damage[2], damage[3]);

								format(string, sizeof(string), "%.0f HP", PlayerData[playerid][pLockHealth]);

								if(PlayerData[playerid][pLockText] == Text3D:INVALID_3DTEXT_ID)
								{
								    if(IsPlayerAtVehicleDoor(playerid, PlayerData[playerid][pLockBreak], DOOR_DRIVER)) {
									    PlayerData[playerid][pLockText] = CreateDynamic3DTextLabel(string, COLOR_GREEN, -x * 2, y + 0.25, z, 5.0, .attachedvehicle = vehicleid);
									} else if(IsPlayerAtVehicleDoor(playerid, PlayerData[playerid][pLockBreak], DOOR_PASSENGER)) {
									    PlayerData[playerid][pLockText] = CreateDynamic3DTextLabel(string, COLOR_GREEN, x * 2, y + 0.25, z, 5.0, .attachedvehicle = vehicleid);
									}
								}
								else
								{
								    UpdateDynamic3DTextLabelText(PlayerData[playerid][pLockText], COLOR_GREEN, string);
								}

								KillTimer(PlayerData[playerid][pLockTimer]);
								PlayerData[playerid][pLockTimer] = SetTimerEx("DestroyLockText", 5000, false, "i", playerid);
							}
					    }
					}
			    }
			}
		}

	    PlayerData[playerid][pAnimation] = index;
	}


	return 1;
}

forward OnPlayerUpdateEx();
public OnPlayerUpdateEx()
{
    foreach(new playerid : Player)
    {
		if(PlayerData[playerid][pKicked])
	    	continue;

		if(!PlayerData[playerid][pLogged])
	    	continue;

		new keys, ud, lr;

		GetPlayerKeys(playerid, keys, ud, lr);
		if(PlayerData[playerid][pHurt] > 0)
		{
		    PlayerData[playerid][pHurt]--;
		}
		if(PlayerData[playerid][pGovTimer] > 0)
		{
			PlayerData[playerid][pGovTimer]--;
		}
		if(PlayerData[playerid][pRareTime] > 0)
		{
		    PlayerData[playerid][pRareTime]--;
		}
		if(GetPlayerMoney(playerid) != PlayerData[playerid][pCash])
		{
		    ResetPlayerMoney(playerid);
		    GivePlayerMoney(playerid, PlayerData[playerid][pCash]);
		}
		if(GetPlayerScore(playerid) != PlayerData[playerid][pLevel])
		{
		    SetPlayerScore(playerid, PlayerData[playerid][pLevel]);
		}
        if(PlayerData[playerid][pInjured] && !IsPlayerInAnyVehicle(playerid) && PlayerData[playerid][pDraggedBy] == INVALID_PLAYER_ID)
        {
            ApplyAnimation(playerid, "SWEET", "Sweet_injuredloop", 4.1, 0, 0, 0, 1, 0, 1);
        }

		if((keys & KEY_FIRE) && IsFireActive() && GetPlayerFaction(playerid) == FACTION_MEDIC)
		{
		    new
		        Float:x,
		        Float:y,
		        Float:z,
		        Float:vx,
		        Float:vy,
		        Float:vz,
		        Float:cx,
		        Float:cy,
		        Float:cz;

		    if(GetPlayerWeapon(playerid) == 42 && GetPlayerState(playerid) == PLAYER_STATE_ONFOOT)
			{
			    for(new i = 0; i < MAX_FIRES; i ++)
			    {
			        if(IsPlayerInRangeOfDynamicObject(playerid, gFireObjects[i], 4.0))
			        {
			            gFireHealth[i] = gFireHealth[i] - 10.0;

			            if(gFireHealth[i] <= 0.0)
			            {
			                PlayerData[playerid][pTotalFires]++;

				            GetDynamicObjectPos(gFireObjects[i], x, y, z);
				            GameTextForPlayer(playerid, "~r~Fire extinguished", 2000, 3);

				            SetTimerEx("DestroyWater", 2000, false, "i", CreateDynamicObject(18744, x, y, z - 0.2, 0.0, 0.0, 0.0));
							DestroyDynamicObject(gFireObjects[i]);

							gFireObjects[i] = INVALID_OBJECT_ID;
							gFireHealth[i] = 0.0;
						}
			        }
				}
			}
			else if(GetPlayerState(playerid) == PLAYER_STATE_DRIVER && (GetVehicleModel(GetPlayerVehicleID(playerid)) == 407 || GetVehicleModel(GetPlayerVehicleID(playerid)) == 544))
			{
			    GetPlayerCameraFrontVector(playerid, vx, vy, vz);
			    GetPlayerCameraPos(playerid, cx, cy, cz);

			    for(new i = 0; i < MAX_FIRES; i ++)
			    {
			        if(IsPlayerInRangeOfDynamicObject(playerid, gFireObjects[i], 12.0))
			        {
			            GetDynamicObjectPos(gFireObjects[i], x, y, z);

						if(DistanceCameraTargetToLocation(cx, cy, cz, x, y, z + 2.5, vx, vy, vz) < 12.0)
		   				{
		   				    gFireHealth[i] = gFireHealth[i] - 5.0;

		   				    if(gFireHealth[i] <= 0.0)
			            	{
			   			    	GetDynamicObjectPos(gFireObjects[i], x, y, z);
			   			    	GameTextForPlayer(playerid, "~r~Fire extinguished", 2000, 3);

					            SetTimerEx("DestroyWater", 2000, false, "i", CreateDynamicObject(18744, x, y, z - 0.2, 0.0, 0.0, 0.0));
								DestroyDynamicObject(gFireObjects[i]);

								gFireObjects[i] = INVALID_OBJECT_ID;
								gFireHealth[i] = 0.0;
							}
						}
				  	}
			    }
			}

			if(!IsFireActive())
			{
			    new amount;

			    foreach(new i : Player)
			    {
			        if(GetPlayerFaction(i) == FACTION_MEDIC && IsPlayerInRangeOfPoint(playerid, 20.0, x, y, z))
			        {
			            amount = gFires * 150;

			            if(PlayerData[i][pLaborUpgrade] > 0)
						{
							amount += percent(amount, PlayerData[i][pLaborUpgrade]);
						}

			            SendClientMessageEx(i, COLOR_AQUA, "Well done! You helped put out the fire and received {00AA00}$%i{33CCFF}.", amount);
			            GivePlayerCash(i, amount);
			        }
				}

				gFires = 0;
			}
		}
	}
	return 1;
}



forward UpdateBooth(playerid, id);
public UpdateBooth(playerid, id)
{
	if (PlayerData[playerid][pRangeBooth] != id || !g_BoothUsed[id])
	    return 0;

	if (PlayerData[playerid][pTargets] == 10)
	{
	    PlayerData[playerid][pTargets] = 0;

	    switch (PlayerData[playerid][pTargetLevel]++)
	    {
	        case 0:
	        {
	            ResetPlayerWeapons(playerid);

				GivePlayerWeapon(playerid, 25, 15000);
	            SendInfoMessage(playerid, "You have advanced to the next level (1/5).");
	        }
	        case 1:
	        {
	            ResetPlayerWeapons(playerid);

				GivePlayerWeapon(playerid, 28, 15000);
	            SendInfoMessage(playerid, "You have advanced to the next level (2/5).");
	        }
	        case 2:
	        {
	            ResetPlayerWeapons(playerid);

				GivePlayerWeapon(playerid, 29, 15000);
	            SendInfoMessage(playerid, "You have advanced to the next level (3/5).");
	        }
	        case 3:
	        {
	            ResetPlayerWeapons(playerid);

				GivePlayerWeapon(playerid, 30, 15000);
	            SendInfoMessage(playerid, "You have advanced to the next level (4/5).");
	        }
	        case 4:
	        {
	            ResetPlayerWeapons(playerid);

				GivePlayerWeapon(playerid, 27, 15000);
	            SendInfoMessage(playerid, "You have advanced to the next level (5/5).");
	        }
	        case 5:
	        {
	            Booth_Leave(playerid);
	            SendInfoMessage(playerid, "You have completed the shooting challenge!");
	        }
	    }
	}
	Booth_Refresh(playerid);
	return 1;
}


public OnVehicleRespray(playerid, vehicleid, color1, color2)
{
	if(VehicleInfo[vehicleid][vOwnerID] > 0 || VehicleInfo[vehicleid][vGang] >= 0)
	{
	    VehicleInfo[vehicleid][vColor1] = color1;
	    VehicleInfo[vehicleid][vColor2] = color2;

	    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE vehicles SET color1 = %i, color2 = %i WHERE id = %i", color1, color2, VehicleInfo[vehicleid][vID]);
	    mysql_tquery(connectionID, queryBuffer);
	}
	return 1;
}

public OnVehiclePaintjob(playerid, vehicleid, paintjobid)
{
	if(VehicleInfo[vehicleid][vOwnerID] > 0 || VehicleInfo[vehicleid][vGang] >= 0)
	{
	    VehicleInfo[vehicleid][vPaintjob] = paintjobid;

	    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE vehicles SET paintjob = %i WHERE id = %i", paintjobid, VehicleInfo[vehicleid][vID]);
	    mysql_tquery(connectionID, queryBuffer);
	}

	return 1;
}

public OnVehicleMod(playerid, vehicleid, componentid)
{
	if(!GetPlayerInterior(playerid) && PlayerData[playerid][pAdmin] < JUNIOR_ADMIN && !PlayerData[playerid][pKicked])
	{
	    BanPlayer(playerid, "Illegal modding");
	    return 0;
	}

	if(VehicleInfo[vehicleid][vOwnerID] > 0 || VehicleInfo[vehicleid][vGang] >= 0)
	{
	    new slotid = GetVehicleComponentType(componentid);

	    VehicleInfo[vehicleid][vMods][slotid] = componentid;

	    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE vehicles SET mod_%i = %i WHERE id = %i", slotid + 1, componentid, VehicleInfo[vehicleid][vID]);
	    mysql_tquery(connectionID, queryBuffer);
	}

	return 1;
}

public OnVehicleSpawn(vehicleid)
{

	if(IsValidDynamic3DTextLabel(DonatorCallSign[vehicleid]))
	{
	    DestroyDynamic3DTextLabel(DonatorCallSign[vehicleid]);
		DonatorCallSign[vehicleid] = Text3D:INVALID_3DTEXT_ID;
	}
	if(adminVehicle{vehicleid})
	{
	    DestroyVehicleEx(vehicleid);
	    adminVehicle{vehicleid} = false;
	}
	if(IsValidDynamicObject(vehicleSiren[vehicleid]))
	{
	    DestroyDynamicObject(vehicleSiren[vehicleid]);
	    vehicleSiren[vehicleid] = INVALID_OBJECT_ID;
	}
	if(IsValidDynamic3DTextLabel(vehicleCallsign[vehicleid]))
	{
	    DestroyDynamic3DTextLabel(vehicleCallsign[vehicleid]);
		vehicleCallsign[vehicleid] = Text3D:INVALID_3DTEXT_ID;
	}


	if((VehicleInfo[vehicleid][vID] > 0 && VehicleInfo[vehicleid][vOwnerID] > 0) || (VehicleInfo[vehicleid][vGang] >= 0))
	{
	    ReloadVehicle(vehicleid);

	    if(VehicleInfo[vehicleid][vGang] >= 0)
	    {
			RefuelVehicle(vehicleid);
		}
	}
	else
	{
     	if(VehicleInfo[vehicleid][vID] > 0 && VehicleInfo[vehicleid][vHealth] > 300.0)
     	{
    		SetVehicleHealth(vehicleid, VehicleInfo[vehicleid][vHealth]);
     	}

		RefuelVehicle(vehicleid);
	}
	
	if(IsJobCar(vehicleid)){
		OnJobVehicleRespawn(vehicleid);
	}
	vehicleStream[vehicleid][0] = 0;
	return 1;
}

public OnPlayerText(playerid, text[])
{
	if(isnull(text))
	{
		return 0;
	}
	if(PlayerData[playerid][pLogged] && !PlayerData[playerid][pKicked])
	{
	    text[0] = toupper(text[0]);
	    if(IsPlayerInTutorial(playerid))
	    {
	        SendClientMessage(playerid, COLOR_LIGHTRED, "* You are currently in the tutorial. Chatting is disabled.");
	        return 0;
		}
		else if(PlayerData[playerid][pHospital])
	    {
	        SendClientMessage(playerid, COLOR_LIGHTRED, "* You are currently in the hospital. Chatting is disabled.");
	        return 0;
		}
		else if(PlayerData[playerid][pMuted])
		{
		    SendClientMessage(playerid, COLOR_LIGHTRED, "* You are currently muted. Chatting is disabled.");
	        return 0;
		}
		else if(++PlayerData[playerid][pSpamTime] >= 4 && PlayerData[playerid][pAdmin] < JUNIOR_ADMIN)
		{
		    PlayerData[playerid][pMuted] = 10;
		    SendClientMessage(playerid, COLOR_YELLOW, "You've been temporarily muted by the server for ten seconds for spamming.");
		    return 0;
		}
		else if(PlayerData[playerid][pAdmin] < GENERAL_MANAGER && CheckServerAd(text))
		{
			new string[128];
			format(string,sizeof(string),"{00aa00}AdmWarning{FFFF00}: %s (ID: %d) may be server advertising: '{00aa00}%s{FFFF00}'.", GetPlayerNameEx(playerid), playerid, text);
			SendAdminMessage(COLOR_YELLOW, string, 2);
			SendClientMessage(playerid, COLOR_GREY, "Your chat was blocked, you have automatically reported for server advertising.");
        	if(++PlayerData[playerid][pAdvertWarnings] > MAX_ANTICHEAT_WARNINGS)
        	{
	    		BanPlayer(playerid, "Server advertisement");
        	}
			return 0;
		}
		else
		{
			new
			    string[144];

			if (PlayerData[playerid][pCalling] > 1)
			{
				if (PlayerData[playerid][pCaller] != INVALID_PLAYER_ID)
				{
					SendSplitMessage(playerid, COLOR_YELLOW, "(Phone) %s says: %s", GetRPName(playerid), text);
					if (PlayerData[playerid][pPayphone] == -1)
					{
						SendSplitMessage(PlayerData[playerid][pCaller], COLOR_YELLOW, "(Phone) %s says: %s", GetRPName(playerid), text);
					}
					else
					{
						SendSplitMessage(PlayerData[playerid][pCaller], COLOR_YELLOW, "(Phone) Unknown says: %s", text);
					}
				}
				else
				{
					switch (PlayerData[playerid][pCalling])
					{
				        case 911:
				        {
					        if(!strcmp(text, "Police", true))
					        {
					            SendClientMessage(playerid, COLOR_OLDSCHOOL, "Dispatch: This is the Los Santos Police Department. What is your emergency?");
					        	PlayerData[playerid][pCalling] = 912;
					        }
							else if(!strcmp(text, "Medic", true))
					        {
					            SendClientMessage(playerid, COLOR_DOCTOR, "Dispatch: This is the Los Santos Fire & Medical Department. What is your emergency?");
					        	PlayerData[playerid][pCalling] = 913;
					        }
					        else
					        {
					            SendClientMessage(playerid, COLOR_YELLOW, "Dispatch: Sorry? I don't know what you mean... Enter 'police' or 'medic'.");
							}
						}
						case 912:
						{
						    foreach(new i : Player)
						    {
						        if(IsLawEnforcement(i))
						        {
						            SendClientMessageEx(i, COLOR_OLDSCHOOL, "______ Emergency Hotline ______");
						            SendClientMessageEx(i, COLOR_GREY2, "Caller: %s, Number: %i", GetRPName(playerid), PlayerData[playerid][pPhone]);
						            SendClientMessageEx(i, COLOR_GREY2, "Location: %s", GetPlayerZoneName(playerid));
						            SendClientMessageEx(i, COLOR_GREY2, "Emergency: %s", text);
						            SendClientMessageEx(i, COLOR_WHITE, "* Use '/trackcall %i' to track the caller's location.", playerid);
						        }
						    }
							strcpy(PlayerData[playerid][pEmergency], text, 128);
                            PlayerData[playerid][pEmergencyCall] = 120;
                            PlayerData[playerid][pEmergencyType] = FACTION_POLICE;
						    SendClientMessage(playerid, COLOR_OLDSCHOOL, "Dispatch: All units in the area have been notified. Thank you for your time.");
						    HangupCall(playerid);
						}
						case 913:
						{
						    foreach(new i : Player)
						    {
						        if(GetPlayerFaction(i) == FACTION_MEDIC)
						        {
						            SendClientMessageEx(i, COLOR_DOCTOR, "______ Emergency Hotline ______");
						            SendClientMessageEx(i, COLOR_GREY2, "Caller: %s, Number: %i", GetRPName(playerid), PlayerData[playerid][pPhone]);
						            SendClientMessageEx(i, COLOR_GREY2, "Location: %s", GetPlayerZoneName(playerid));
						            SendClientMessageEx(i, COLOR_GREY2, "Emergency: %s", text);
						            SendClientMessageEx(i, COLOR_WHITE, "* Use '/trackcall %i' to track the caller's location.", playerid);
						        }
						    }
						    strcpy(PlayerData[playerid][pEmergency], text, 128);
						    PlayerData[playerid][pEmergencyCall] = 120;
						    PlayerData[playerid][pEmergencyType] = FACTION_MEDIC;
						    SendClientMessage(playerid, COLOR_DOCTOR, "Dispatch: All units in the area have been notified. Thank you for your time.");
						    HangupCall(playerid);
						}
						case 6397:
						{
						    foreach(new i : Player)
						    {
						        if(GetPlayerFaction(i) == FACTION_NEWS)
						        {
						            SendClientMessageEx(i, COLOR_NAVYBLUE, "______ News Hotline ______");
						            SendClientMessageEx(i, COLOR_GREY2, "Caller: %s, Number: %i", GetRPName(playerid), PlayerData[playerid][pPhone]);
						            SendClientMessageEx(i, COLOR_GREY2, "Message: %s", text);
						        }
						    }
						    SendClientMessage(playerid, COLOR_NAVYBLUE, "News Team: Thank you. We will get back to you shortly!");
						    HangupCall(playerid);
						}
						case 6324:
						{
						    foreach(new i : Player)
						    {
						        if(PlayerHasJob(i, JOB_MECHANIC))
						        {
						            SendClientMessageEx(i, COLOR_NAVYBLUE, "______ Mechanic Hotline ______");
						            SendClientMessageEx(i, COLOR_GREY2, "Caller: %s, Number: %i", GetRPName(playerid), PlayerData[playerid][pPhone]);
						            SendClientMessageEx(i, COLOR_GREY2, "Situation: %s", text);
						            SendClientMessageEx(i, COLOR_WHITE, "* Use '/takecall %i' in order to take this call.", playerid);
						        }
						    }
							PlayerData[playerid][pMechanicCall] = 60;
						    SendClientMessage(playerid, COLOR_LIGHTORANGE, "Dispatch: Thank you. We will alert all mechanics on duty.");
						    HangupCall(playerid);
						}
						case 8294:
						{
						    foreach(new i : Player)
						    {
						        if(PlayerHasJob(i, JOB_TAXIDRIVER))
						        {
						            SendClientMessageEx(i, COLOR_NAVYBLUE, "______ Taxi Hotline ______");
						            SendClientMessageEx(i, COLOR_GREY2, "Caller: %s, Number: %i", GetRPName(playerid), PlayerData[playerid][pPhone]);
						            SendClientMessageEx(i, COLOR_GREY2, "Location: %s", text);
						            SendClientMessageEx(i, COLOR_WHITE, "* Use '/takecall %i' in order to take this call.", playerid);
						        }
						    }
							PlayerData[playerid][pTaxiCall] = 60;
						    SendClientMessage(playerid, COLOR_YELLOW, "Dispatch: Thank you. We will alert all taxi drivers on duty.");
						    HangupCall(playerid);
						}
					}
				}
			}
			else if(PlayerData[playerid][pLiveBroadcast] != INVALID_PLAYER_ID)
			{
			    foreach(new i : Player)
				{
					if(!PlayerData[i][pToggleNews])
					{
						if(GetPlayerFaction(playerid) == FACTION_NEWS)
			    		{
			    		    SendClientMessageEx(i, COLOR_LIGHTGREEN, "Live Reporter %s: %s", GetRPName(playerid), text);
						}
						else
						{
						    SendClientMessageEx(i, COLOR_LIGHTGREEN, "Live Guest %s: %s", GetRPName(playerid), text);
						}
					}
				}
			}
			else
			{
				new isAbreviation=false;
				for(new i=0;(i<sizeof(MeAbdreviations))&& (!isAbreviation);i++)
				{
					if(!strcmp(MeAbdreviations[i][0],text,true))
					{
						callcmd::me(playerid,MeAbdreviations[i][1]);
						isAbreviation=true;
					}
				}
				for(new i=0;(i<sizeof(OOCAbdreviations))&&(!isAbreviation);i++)
				{
					if(!strcmp(OOCAbdreviations[i][0],text,true))
					{
						callcmd::b(playerid,OOCAbdreviations[i][1]);
						isAbreviation=true;
					}
				}
                if ((IsAdmin(playerid) && IsAdminOnDuty(playerid, false)) || (PlayerData[playerid][pHelper] && PlayerData[playerid][pAcceptedHelp]))
                {
                    callcmd::b(playerid, text);
                }
				else if(!isAbreviation){
					if(IsPlayerInAnyVehicle(playerid) && !IsAMotorBike(GetPlayerVehicleID(playerid)) && CarWindows[GetPlayerVehicleID(playerid)] == 0)
					{
						foreach(new i : Player)
						{
							if(IsPlayerInAnyVehicle(i) && GetPlayerVehicleID(i) == GetPlayerVehicleID(playerid) && !IsAMotorBike(GetPlayerVehicleID(playerid)))
							{
								SendClientMessageEx(i, COLOR_GREY1, "(Windows closed) %s says: %s", GetRPName(playerid), text);
							}
						}
					}
					else
					{
						if(!strcmp(PlayerData[playerid][pAccent], "None", true))
						{
							format(string, sizeof(string), "(%s) %s says: %s", PlayerData[playerid][pAccent], GetRPName(playerid), text);
						}
						else
						{
							format(string, sizeof(string), "%s says: %s", GetRPName(playerid), text);
						}
						SendProximityFadeMessage(playerid, 20.0, string, COLOR_GREY1, COLOR_GREY2, COLOR_GREY3, COLOR_GREY4, COLOR_GREY5);
					}
					ReturnChatAnimation(playerid, text);
				}
			}
		}
	}

	return 0;
}

public OnPlayerCommandReceived(playerid, cmd[], params[], flags)
{
    if(PlayerData[playerid][pKicked]) return 0;

	if(!PlayerData[playerid][pLogged])
	{
	    SendClientMessage(playerid, COLOR_RED, "You cannot use commands if you're not logged in.");
		return 0;
	}
	if(isnull(params))
	{
	    params[0] = EOS;
	}
	if(IsPlayerInTutorial(playerid))
 	{
  		SendClientMessage(playerid, COLOR_LIGHTRED, "* You are currently in the tutorial. Commands are disabled.");
    	return 0;
	}
	if(GetPlayerState(playerid) == PLAYER_STATE_WASTED)
	{
	    SendClientMessage(playerid, COLOR_LIGHTRED, "* You are currently dead. Commands are disabled.");
    	return 0;
	}
	if(PlayerData[playerid][pMuted])
	{
	    SendClientMessage(playerid, COLOR_LIGHTRED, "* You are currently muted. Commands are disabled.");
        return 0;
	}
	if(++PlayerData[playerid][pSpamTime] >= 4 && PlayerData[playerid][pAdmin] < JUNIOR_ADMIN)
	{
	    PlayerData[playerid][pMuted] = 10;
	    SendClientMessage(playerid, COLOR_YELLOW, "You've been temporarily muted by the server for ten seconds due to flooding.");
	    return 0;
	}
	if(!IsAdminOnDuty(playerid))
	{
		if(PlayerData[playerid][pTazedTime])
		{
			SendClientMessage(playerid, COLOR_YELLOW, "You've been temporarily tazed you cannot use commands.");
			return 0;
		}
		if(PlayerData[playerid][pCuffed])
		{
			SendClientMessage(playerid, COLOR_YELLOW, "You cannot use commands as you are cuffed.");
			return 0;
		}
		if(PlayerData[playerid][pHospital])
		{
			SendClientMessage(playerid, COLOR_YELLOW, "You cannot use commands as you are in the hospital.");
			return 0;
		}
		
		//	if(PlayerData[playerid][pInjured])
		//	{
		//		if(strcmp(cmd, "accept", true))
		//		{
		//			SendClientMessage(playerid, COLOR_YELLOW, "You cannot use commands as you are injured.");
		//			return 0;
		//		}
		//		if(isnull(params) || strcmp(params, "death", true))
		//		{
		//			SendClientMessage(playerid, COLOR_GREY, "Usage: /accept death");
		//			return 0;
		//		}
		//	}
	}
	if(PlayerData[playerid][pAdmin] < GENERAL_MANAGER && CheckServerAd(params))
	{
		new string[128];
		format(string,sizeof(string),"{00aa00}AdmWarning{FFFF00}: %s (ID: %d) may be server advertising: '{00aa00}/%s %s{FFFF00}'.", GetPlayerNameEx(playerid), playerid, cmd, params);
		SendAdminMessage(COLOR_YELLOW, string, 2);
		SendClientMessage(playerid, COLOR_GREY, "Your command was blocked, you have automatically reported for server advertising.");
        PlayerData[playerid][pAdvertWarnings] ++;
		return 0;
	}
	printf("[zcmd] [%s]:%s %s", GetPlayerNameEx(playerid), cmd, params);
	//Log_Write("log_command", "[zcmd] [%s](uid: %d):%s %s.", GetPlayerNameEx(playerid), PlayerData[playerid][pID], cmd, params);

//	Log_Write("log_chat", "[%s]:%s %s.", GetPlayerNameEx(playerid), cmd, params);

	/*if((PlayerData[playerid][pAdmin] < GENERAL_MANAGER) && (!strcmp(cmd, "/ban", true, 3) || !strcmp(cmd, "/kick", true, 4) || !strcmp(cmd, "/sban", true, 4) || !strcmp(cmd, "/skick", true, 5) || !strcmp(cmd, "/permaban", true, 8) || !strcmp(cmd, "/getip", true, 5) || !strcmp(cmd, "/traceip", true, 7)))
	{
		SendClientMessage(playerid, COLOR_LIGHTRED, "* These commands cannot be used during beta testing.");
		return 0;
	}
	if((PlayerData[playerid][pAdmin] < HEAD_ADMIN) && (!strcmp(cmd, "/adminname")))
	{
		SendClientMessage(playerid, COLOR_LIGHTRED, "* These commands cannot be used during beta testing.");
		return 0;
	}*/
	return 1;
}

hook OnPlayerKeyStateChange(playerid, newkeys, oldkeys)
{
	new time = NetStats_GetConnectedTime(playerid);
	
	LumberJackPlayerKeyStateChange(playerid, newkeys);
    
	if((newkeys & KEY_FIRE) && CREATING_RACE_CHECKPOINTS == 1 && RACE_ADMIN_ID == playerid && CP_COUNTER <= TOTAL_RACE_CP)
    {
	    new Float: X , Float: Y , Float: Z;
		for(new i = CP_COUNTER; i <= TOTAL_RACE_CP ; i++)
		{
				if(CP_COUNTER == TOTAL_RACE_CP)
				{
					GetPlayerPos(playerid,X,Y,Z);
					Rx[i]= X , Ry[i] = Y , Rz[i] = Z;
					RACE_CREATED = 1;
                    CP_COUNTER = 0;
					CREATING_RACE_CHECKPOINTS = 0;
					RACE_ADMIN_ID = -1;
					SendClientMessage(playerid,COLOR_GREEN,"Congratz You've successfully created Race checkpoints.");
					break;
				}
				else
				{
					GetPlayerPos(playerid,X,Y,Z);
					Rx[i]= X , Ry[i] = Y , Rz[i] = Z;
					break;
				}
		}
		new string[128];
	    format(string, sizeof(string), "~r~RACE CHECKPOINT~n~~n~~y~ID %d~n~successfully created~n~~r~Total CP ~y~~n~(%d / %d).",CP_COUNTER,CP_COUNTER,TOTAL_RACE_CP);
		GameTextForPlayer(playerid,string,1500,3);
		CP_COUNTER++;
	}
	
	if(PlayerData[playerid][pSkating] && GetPlayerState(playerid) == PLAYER_STATE_ONFOOT)
	{
	    SetPlayerArmedWeapon(playerid, 0);
	    if(newkeys & KEY_HANDBRAKE)
		{
	        PlayAnim(playerid, "SKATE","skate_sprint",4.1,1,1,1,1,1);
	        if(!PlayerData[playerid][pSkateAct])
			{
	                PlayerData[playerid][pSkateAct] = true;
	                RemovePlayerAttachedObject(playerid, 5);
	                DestroyDynamicObject(PlayerData[playerid][pSkateObj]);
	                PlayerData[playerid][pSkateObj] = CreateDynamicObject(19878,0,0,0,0,0,0, .playerid = playerid);
	                AttachDynamicObjectToPlayer(PlayerData[playerid][pSkateObj], playerid, -0.2,0,-0.9,0,0,90);
	        }
	    }
        if(oldkeys & KEY_HANDBRAKE)
		{
            PlayAnim(playerid, "CARRY","crry_prtial",4.0,0,0,0,0,0);
            if(PlayerData[playerid][pSkateAct])
			{
                PlayerData[playerid][pSkateAct] = false;
                DestroyDynamicObject(PlayerData[playerid][pSkateObj]);
                RemovePlayerAttachedObject(playerid, 5);
                SetPlayerAttachedObject(playerid, 5,19878,6,-0.055999,0.013000,0.000000,-84.099983,0.000000,-106.099998,1.000000,1.000000,1.000000);
            }
        }
   	}
	BarTenderKeyStateChanged(playerid, newkeys);

	if(newkeys & KEY_SPRINT)
	{
		WorkoutUpdate(playerid);
	}

 	if((time - PlayerData[playerid][pLastPress]) >= 400)
	{
		if(newkeys & KEY_YES)
		{
			new success;

            if(PlayerData[playerid][pInjured] == 0 && PlayerData[playerid][pTazedTime] == 0 && PlayerData[playerid][pCuffed] == 0 && PlayerData[playerid][pDueling] == INVALID_PLAYER_ID)
			{
			    if(PlayerData[playerid][pHurt] - 5 > 0)
			        return SendClientMessageEx(playerid, COLOR_GREY, "You are too hurt to operate/enter anything. Please wait %i seconds before trying again.", (PlayerData[playerid][pHurt] - 30));

				if((success = EnterCheck(playerid)) == 0)
					success = ExitCheck(playerid);

				if(!success)
				{
					DoorCheck(playerid);
					GateCheck(playerid);
				}
				if (IsPlayerNearGymEquipment(playerid)) 
                {
                    GymCheck(playerid);
                }
			}

			PlayerData[playerid][pLastPress] = time; // Prevents spamming. Sometimes keys get messed up and register twice.
		}
		else if(newkeys & KEY_NO)
 		{
 		    /*if(!GateCheck(playerid) && GetPlayerState(playerid) == PLAYER_STATE_DRIVER)
 		    {
		  		callcmd::engine(playerid, "\1");
			}*/
			PlayerData[playerid][pLastPress] = time; // Prevents spamming. Sometimes keys get messed up and register twice.
		}
	}

	return 1;
}

public OnPlayerStateChange(playerid, newstate, oldstate)
{
    if(PlayerData[playerid][pKicked]) return 0;
    IsPlayerSteppingInVehicle[playerid] = -1;

	if(newstate == PLAYER_STATE_DRIVER)
	{
		if(PlayerData[playerid][pToggleVehCam] == 1)
		{
			new p = GetPlayerVehicleID(playerid);
			if(IsAMotorBike(p) || IsAHelicopter(p) || IsVehicleBajs(p) || IsAPlane(p) || IsABoat(p))
			{
				return 0;
			}
			else
			{
				pObj[playerid] = CreatePlayerObject(playerid,19300, 0.0000, -1282.9984, 10.1493, 0.0000, -1, -1, 100);
				AttachPlayerObjectToVehicle(playerid,pObj[playerid],p,-0.314999, -0.195000, 0.510000, 0.000000, 0.000000, 0.000000);
				AttachCameraToPlayerObject(playerid,pObj[playerid]);
				SetPVarInt(playerid,"used",1);
			}
		}

		new vehicleid = GetPlayerVehicleID(playerid);
	    
		if(IsJobCar(vehicleid))
		{
			if(!CanEnterJobCar(playerid,vehicleid))
			{
				if (GetVehicleModel(vehicleid) == 515)
					SendClientMessage(playerid, COLOR_GREY, "You cannot operate this vehicle as you are not a Trucker.");
				else SendClientMessageEx(playerid, COLOR_GREY, "You cannot operate this vehicle as you are not a %s.",GetJobName(GetCarJobType(vehicleid)));
				RemovePlayerFromVehicle(playerid);
			}else OnPlayerEnterJobCar(playerid,vehicleid);
		}

		
	    if((testVehicles[0] <= vehicleid <= testVehicles[4]) && !PlayerData[playerid][pDrivingTest])
	    {
	        SendClientMessage(playerid, COLOR_GREY, "You cannot operate this vehicle as you are not taking your drivers test.");
	        RemovePlayerFromVehicle(playerid);
	        return 1;
	    }
	    if(VehicleInfo[vehicleid][vFaction] != -1 && PlayerData[playerid][pFaction] != VehicleInfo[vehicleid][vFaction])
	    {
	        SendClientMessage(playerid, COLOR_GREY, "You cannot operate this vehicle as it doesn't belong to your faction.");
	        RemovePlayerFromVehicle(playerid);
	        return 1;
	    }
	    else if(VehicleInfo[vehicleid][vFaction] != -1 && VehicleInfo[vehicleid][vRank] > PlayerData[playerid][pFactionRank])
	    {
	    	SendClientMessageEx(playerid, COLOR_GREY, "You cannot operate this vehicle as you aren't a rank %i in your faction.", VehicleInfo[vehicleid][vRank]);
	        RemovePlayerFromVehicle(playerid);
	        return 1;
	    }
		else if(VehicleInfo[vehicleid][vFGDivision] != -1 && VehicleInfo[vehicleid][vFGDivision]!=PlayerData[playerid][pDivision])
		{
			SendClientMessageEx(playerid, COLOR_GREY, "You cannot operate this vehicle as you aren't %s in your faction.", FactionDivisions[PlayerData[playerid][pFaction]][VehicleInfo[vehicleid][vFGDivision]]);
	        RemovePlayerFromVehicle(playerid);
		}
	    if(VehicleInfo[vehicleid][vGang] >= 0 && PlayerData[playerid][pGang] != VehicleInfo[vehicleid][vGang])
	    {
	        SendClientMessage(playerid, COLOR_GREY, "You cannot operate this vehicle as it doesn't belong to your gang.");
	        RemovePlayerFromVehicle(playerid);
	        return 1;
	    }
	    else if(VehicleInfo[vehicleid][vGang] >= 0 && VehicleInfo[vehicleid][vRank] > PlayerData[playerid][pGangRank])
	    {
	    	SendClientMessageEx(playerid, COLOR_GREY, "You cannot operate this vehicle as you aren't a rank %i in your gang.", VehicleInfo[vehicleid][vRank]);
	        RemovePlayerFromVehicle(playerid);
	        return 1;
	    }
	    if(VehicleInfo[vehicleid][vJob] >= 0 && PlayerData[playerid][pJob] != VehicleInfo[vehicleid][vJob])
	    {
	        SendClientMessageEx(playerid, COLOR_GREY, "You cannot operate this vehicle as you are not a %s.", GetJobName(VehicleInfo[vehicleid][vJob]));
	        RemovePlayerFromVehicle(playerid);
	        return 1;
	    }
	    if(VehicleInfo[vehicleid][vVIP] > 0 && PlayerData[playerid][pDonator] < VehicleInfo[vehicleid][vVIP])
	    {
	        SendClientMessageEx(playerid, COLOR_GREY, "You cannot operate this vehicle as you are not a %s VIP+.", GetVIPRank(VehicleInfo[vehicleid][vVIP]));
	        RemovePlayerFromVehicle(playerid);
	        return 1;
	    }
	    if(VehicleInfo[vehicleid][vLocked])
	    {
	        SendClientMessageEx(playerid, COLOR_GREY, "You cannot operate this vehicle as it is locked.");
	        RemovePlayerFromVehicle(playerid);
	        return 1;
	    }
	    if(!IsEngineVehicle(vehicleid))
	    {
	        SetVehicleParams(vehicleid, VEHICLE_ENGINE, true);
		}
		else if(!IsVehicleParamOn(vehicleid, VEHICLE_ENGINE) && !IsABike(vehicleid))
		{
		    if(testVehicles[0] <= vehicleid <= testVehicles[4])
		    {
		        PlayerData[playerid][pCP] = CHECKPOINT_TEST;
		        PlayerData[playerid][pTestVehicle] = vehicleid;
		        PlayerData[playerid][pTestCP] = 0;

		        SetVehicleParams(vehicleid, VEHICLE_ENGINE, 1);
				SetPlayerCheckpoint(playerid, drivingTestCPs[PlayerData[playerid][pTestCP]][0], drivingTestCPs[PlayerData[playerid][pTestCP]][1], drivingTestCPs[PlayerData[playerid][pTestCP]][2], 3.0);
				SendClientMessage(playerid, COLOR_AQUA, "Drive through the checkpoints to proceed with the test. Try not to damage your vehicle.");
		    }
		    else
		    {

			    SetVehicleParams(vehicleid, VEHICLE_ENGINE, 1);
			    //GameTextForPlayer(playerid, "~r~Engine Off~n~~w~/engine", 3000, 3);
			  //  SendClientMessage(playerid, COLOR_YELLOW,"(( Note: use /togglecam to turn-off the 1st-person-view. ))");
			    //SendClientMessage(playerid, COLOR_AQUA, "Your vehicle's engine is turned on, you can use /engine or Press 'N' to turn it off/on.");
			}
	    }


	    if(!PlayerData[playerid][pCarLicense] && !PlayerData[playerid][pDrivingTest] && !IsVehicleBajs(vehicleid))
	    {
	        SendClientMessage(playerid, COLOR_LIGHTRED, "You are operating this vehicle without a license. Watch out for the cops!");
	    }

	    if(IsVehicleOwner(playerid, vehicleid) && VehicleInfo[vehicleid][vTickets] > 0)
	    {
	        SendClientMessageEx(playerid, COLOR_AQUA, "This vehicle has %s in unpaid tickets. You can pay your tickets using /paytickets.", FormatCash(VehicleInfo[vehicleid][vTickets]));
	    }

		SetPlayerArmedWeapon(playerid, 0);

		if(isnull(vehicleStream[vehicleid]))
		{
		    SendClientMessage(playerid, COLOR_WHITE, "* Use {C8C8C8}/setradio{FFFFFF} to change the radio station in this vehicle.");
		}
	}
	else if(oldstate == PLAYER_STATE_DRIVER)
	{
		if(GetPVarInt(playerid,"used") == 1)
		{
			SetPVarInt(playerid,"used",0);
			SetCameraBehindPlayer(playerid);
			DestroyPlayerObject(playerid,pObj[playerid]);
		}
     	if(PlayerData[playerid][pDrivingTest])
	    {
         	PlayerData[playerid][pDrivingTest] = 0;
         	SetVehicleToRespawn(PlayerData[playerid][pTestVehicle]);
         	SendClientMessage(playerid, COLOR_LIGHTRED, "* You have exited the vehicle and therefore failed the test.");
		}
	}
	else if(newstate == PLAYER_STATE_PASSENGER)
	{
	    new driverid = GetVehicleDriver(GetPlayerVehicleID(playerid));
        if(PlayerData[playerid][pWeapons][4] > 0)	SetPlayerArmedWeapon(playerid,PlayerData[playerid][pWeapons][4]);
		else SetPlayerArmedWeapon(playerid,0);
		if((driverid != INVALID_VEHICLE_ID && PlayerData[driverid][pTaxiFare] > 0 && PlayerData[driverid][pTaxiPassenger] == INVALID_PLAYER_ID) && (GetVehicleModel(GetPlayerVehicleID(playerid)) == 420 || GetVehicleModel(GetPlayerVehicleID(playerid)) == 438))
		{
		    if(PlayerData[playerid][pCash] < PlayerData[driverid][pTaxiFare])
		    {
		        SendClientMessage(playerid, COLOR_GREY, "You can't afford to pay the fare. Therefore you can't ride this taxi.");
		        RemovePlayerFromVehicle(playerid);
		        return 1;
		    }

			PlayerData[driverid][pTaxiPassenger] = playerid;
			PlayerData[driverid][pTaxiBill] = PlayerData[driverid][pTaxiFare];
			PlayerData[driverid][pTaxiTime] = 0;

			ShowActionBubble(playerid, "* %s enters %s's taxi cab.", GetRPName(playerid), GetRPName(driverid));
			SendClientMessageEx(playerid, COLOR_YELLOW, "You will be charged the fare price of {FF6347}$%i{33CCFF} every 15 seconds during your ride.", PlayerData[driverid][pTaxiFare]);
			SendClientMessageEx(driverid, COLOR_AQUA, "*%s has entered your taxi. You will earn {00AA00}$%i{33CCFF} every 15 seconds during the ride.", GetRPName(playerid), PlayerData[driverid][pTaxiFare]);
		}

     	switch(GetPlayerWeapon(playerid))
     	{
     	    case 22, 23, 25, 28..33:
     	        SetPlayerArmedWeapon(playerid, GetScriptWeapon(playerid));
	        default:
				SetPlayerArmedWeapon(playerid, 0);
		}
	}

	if(newstate == PLAYER_STATE_DRIVER || newstate == PLAYER_STATE_PASSENGER)
	{
	    new vehicleid = GetPlayerVehicleID(playerid);

		if(!isnull(vehicleStream[vehicleid]) && PlayerData[playerid][pStreamType] == MUSIC_NONE && !PlayerData[playerid][pToggleMusic])
  		{
  		    PlayerData[playerid][pStreamType] = MUSIC_VEHICLE;
    		PlayAudioStreamForPlayer(playerid, vehicleStream[vehicleid]);
      		SendClientMessage(playerid, COLOR_WHITE, "You are now tuned in to this vehicle's radio. /stopmusic to stop listening.");
	    }

	    PlayerData[playerid][pDedication] = 0;
	}
	else if(oldstate == PLAYER_STATE_DRIVER || oldstate == PLAYER_STATE_PASSENGER)
	{
		if(PlayerData[playerid][pStreamType] == MUSIC_VEHICLE)
		{
		    StopAudioStreamForPlayer(playerid);
		    PlayerData[playerid][pStreamType] = MUSIC_NONE;
		}
	}

	return 1;
}

public OnPlayerEditAttachedObject(playerid, response, index, modelid, boneid, Float:fOffsetX, Float:fOffsetY, Float:fOffsetZ, Float:fRotX, Float:fRotY, Float:fRotZ, Float:fScaleX, Float:fScaleY, Float:fScaleZ)
{
	if(!(-3.0 <= fScaleX <= 3.0)) fScaleX = fScaleX < -3.0 ? 0.0 : 3.0;
	if(!(-3.0 <= fScaleY <= 3.0)) fScaleY = fScaleY < -3.0 ? 0.0 : 3.0;
	if(!(-3.0 <= fScaleZ <= 3.0)) fScaleZ = fScaleZ < -3.0 ? 0.0 : 3.0;

	switch(PlayerData[playerid][pEditType])
	{
	    case EDIT_CLOTHING_PREVIEW:
	    {
	        RemovePlayerAttachedObject(playerid, 9);

	        if(response)
	        {
	            new businessid = GetInsideBusiness(playerid);

	            if(businessid >= 0 && BusinessInfo[businessid][bType] == BUSINESS_CLOTHES)
	            {
	                if(PlayerData[playerid][pCash] < clothingArray[PlayerData[playerid][pSelected]][clothingPrice])
	                {
	                    return SendClientMessage(playerid, COLOR_GREY, "You couldn't afford to purchase this item.");
	                }

	                for(new i = 0; i < MAX_PLAYER_CLOTHING; i ++)
	                {
	                    if(!ClothingInfo[playerid][i][cExists])
	                    {
	                        ClothingInfo[playerid][i][cModel] = modelid;
	                        ClothingInfo[playerid][i][cBone] = boneid;
	                        ClothingInfo[playerid][i][cPosX] = fOffsetX;
	                        ClothingInfo[playerid][i][cPosY] = fOffsetY;
	                        ClothingInfo[playerid][i][cPosZ] = fOffsetZ;
	                        ClothingInfo[playerid][i][cRotX] = fRotX;
	                        ClothingInfo[playerid][i][cRotY] = fRotY;
	                        ClothingInfo[playerid][i][cRotZ] = fRotZ;
	                        ClothingInfo[playerid][i][cScaleX] = fScaleX;
	                        ClothingInfo[playerid][i][cScaleY] = fScaleY;
	                        ClothingInfo[playerid][i][cScaleZ] = fScaleZ;
	                        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "INSERT INTO clothing VALUES(null, %i, '%e', %i, %i, 0, '%f', '%f', '%f', '%f', '%f', '%f', '%f', '%f', '%f')", PlayerData[playerid][pID], clothingArray[PlayerData[playerid][pSelected]][clothingName], modelid, boneid, fOffsetX, fOffsetY, fOffsetZ, fRotX, fRotY, fRotZ, fScaleX, fScaleY, fScaleZ);
							mysql_tquery(connectionID, queryBuffer, "OnPlayerBuyClothingItem", "isiii", playerid, clothingArray[PlayerData[playerid][pSelected]][clothingName], clothingArray[PlayerData[playerid][pSelected]][clothingPrice], businessid, i);
							return 1;
						}
					}

					SendClientMessage(playerid, COLOR_GREY, "You have no more clothing slots available. Therefore you can't buy this.");
	            }
	        }
	        else
	        {
	            if(PlayerData[playerid][pMenuType] == 0)
	                ShowClothingSelectionMenu(playerid);
	            else
					ShowDialogToPlayer(playerid, DIALOG_BUYCLOTHING);
			}
		}
		case EDIT_CLOTHING:
		{
		    new clothingid = PlayerData[playerid][pSelected];

		    if(response)
		    {
		        ClothingInfo[playerid][clothingid][cPosX] = fOffsetX;
		        ClothingInfo[playerid][clothingid][cPosY] = fOffsetY;
		        ClothingInfo[playerid][clothingid][cPosZ] = fOffsetZ;
		        ClothingInfo[playerid][clothingid][cRotX] = fRotX;
		        ClothingInfo[playerid][clothingid][cRotY] = fRotY;
		        ClothingInfo[playerid][clothingid][cRotZ] = fRotZ;
		        ClothingInfo[playerid][clothingid][cScaleX] = fScaleX;
		        ClothingInfo[playerid][clothingid][cScaleY] = fScaleY;
		        ClothingInfo[playerid][clothingid][cScaleZ] = fScaleZ;
 		        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE clothing SET pos_x = '%f', pos_y = '%f', pos_z = '%f', rot_x = '%f', rot_y = '%f', rot_z = '%f', scale_x = '%f', scale_y = '%f', scale_z = '%f' WHERE id = %i", fOffsetX, fOffsetY, fOffsetZ, fRotX, fRotY, fRotZ, fScaleX, fScaleY, fScaleZ, ClothingInfo[playerid][clothingid][cID]);
		        mysql_tquery(connectionID, queryBuffer);

		        SendClientMessageEx(playerid, COLOR_GREY, "Changes saved.");
		    }

			if(!ClothingInfo[playerid][clothingid][cAttached])
	        {
	            RemovePlayerAttachedObject(playerid, 9);
			}
			else
			{
			    RemovePlayerAttachedObject(playerid, ClothingInfo[playerid][clothingid][cAttachedIndex]);
			    SetPlayerAttachedObject(playerid, ClothingInfo[playerid][clothingid][cAttachedIndex], ClothingInfo[playerid][clothingid][cModel], ClothingInfo[playerid][clothingid][cBone], ClothingInfo[playerid][clothingid][cPosX], ClothingInfo[playerid][clothingid][cPosY], ClothingInfo[playerid][clothingid][cPosZ],
					ClothingInfo[playerid][clothingid][cRotX], ClothingInfo[playerid][clothingid][cRotY], ClothingInfo[playerid][clothingid][cRotZ], ClothingInfo[playerid][clothingid][cScaleX], ClothingInfo[playerid][clothingid][cScaleY], ClothingInfo[playerid][clothingid][cScaleZ]);
			}
		}
		case EDIT_COP_CLOTHING:
	    {
	        RemovePlayerAttachedObject(playerid, 9);

	        if(response)
	        {
                for(new i = 0; i < MAX_PLAYER_CLOTHING; i ++)
                {
                    if(!ClothingInfo[playerid][i][cExists])
                    {
                        ClothingInfo[playerid][i][cModel] = modelid;
                        ClothingInfo[playerid][i][cBone] = boneid;
                        ClothingInfo[playerid][i][cPosX] = fOffsetX;
                        ClothingInfo[playerid][i][cPosY] = fOffsetY;
                        ClothingInfo[playerid][i][cPosZ] = fOffsetZ;
                        ClothingInfo[playerid][i][cRotX] = fRotX;
                        ClothingInfo[playerid][i][cRotY] = fRotY;
                        ClothingInfo[playerid][i][cRotZ] = fRotZ;
                        ClothingInfo[playerid][i][cScaleX] = fScaleX;
                        ClothingInfo[playerid][i][cScaleY] = fScaleY;
                        ClothingInfo[playerid][i][cScaleZ] = fScaleZ;

                        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "INSERT INTO clothing VALUES(null, %i, '%e', %i, %i, 0, '%f', '%f', '%f', '%f', '%f', '%f', '%f', '%f', '%f')", PlayerData[playerid][pID], copClothing[PlayerData[playerid][pSelected]][cName], modelid, boneid, fOffsetX, fOffsetY, fOffsetZ, fRotX, fRotY, fRotZ, fScaleX, fScaleY, fScaleZ);
						mysql_tquery(connectionID, queryBuffer, "OnPlayerAttachCopClothing", "isi", playerid, copClothing[PlayerData[playerid][pSelected]][cName], i);
						return 1;
					}
				}

				SendClientMessage(playerid, COLOR_GREY, "You have no more clothing slots available. Therefore you can't attach this.");
	        }
	        else
	        {
	            ShowCopClothingMenu(playerid);
			}
		}
	}

    return 1;
}




public OnPlayerEditDynamicObject(playerid, objectid, response, Float:x, Float:y, Float:z, Float:rx, Float:ry, Float:rz)
{

	if (response == EDIT_RESPONSE_CANCEL)
	{
	    switch (PlayerData[playerid][pEdit])
	    {
	        case EDIT_TYPE_PREVIEW:
	        {
	            DestroyDynamicObject(gPreviewFurniture[playerid]);
	            gPreviewFurniture[playerid] = INVALID_OBJECT_ID;
			}
	        case EDIT_TYPE_FURNITURE:
	        {
	            UpdateFurniture(PlayerData[playerid][pEditID]);
	        }
   			case EDIT_TYPE_PAYPHONE:
			{
			    UpdatePayphone(PlayerData[playerid][pEditID]);
			}
 	        case EDIT_TYPE_ATM:
	        {
	            UpdateATM(PlayerData[playerid][pEditID]);
			}
		}
	    PlayerData[playerid][pEdit] = EDIT_TYPE_NONE;
	}
	else if (response == EDIT_RESPONSE_FINAL)
	{
	    switch (PlayerData[playerid][pEdit])
	    {
	        case EDIT_TYPE_PREVIEW: // Furniture preview
	        {
	            //if (!IsPointInRangeOfPoint(20.0, x, y, z, HouseInfo[PlayerData[playerid][pHouse]][hSpawn][0], HouseInfo[PlayerData[playerid][pHouse]][hSpawn][1], HouseInfo[PlayerData[playerid][pHouse]][hSpawn][2]) && !IsPointInRangeOfPoint(100.0, x, y, z, HouseInfo[PlayerData[playerid][pHouse]][hInt][0], HouseInfo[PlayerData[playerid][pHouse]][hInt][1], HouseInfo[PlayerData[playerid][pHouse]][hInt][2]))

	            if (GetInsideHouse(playerid) != PlayerData[playerid][pHouse] && GetFurnitureHouse(playerid) != PlayerData[playerid][pHouse])
				{
				    SendErrorMessage(playerid, "The object is out of range from your house.");
				}
				else if (!PlayerCanAfford(playerid, g_FurnitureList[PlayerData[playerid][pPreviewIndex]][e_ModelPrice]))
				{
				    SendErrorMessage(playerid, "You don't have enough money.");
				}
				else
				{
					new id = AddFurniture(PlayerData[playerid][pHouse], g_FurnitureList[PlayerData[playerid][pPreviewIndex]][e_ModelID], x, y, z, rx, ry, rz, GetPlayerInterior(playerid), GetPlayerVirtualWorld(playerid));

				    if (id == -1)
				    {
				        SendErrorMessage(playerid, "There are no available furniture slots.");
				        SendAdminMessage(COLOR_RED, "Admin: %s has failed to add furniture! \"MAX_FURNITURE\" needs to be adjusted.", GetRPName(playerid));
					}
					else
					{
					    GivePlayerCash(playerid, -g_FurnitureList[PlayerData[playerid][pPreviewIndex]][e_ModelPrice]);

						ShowFurnitureCategories(playerid);
					    SendInfoMessage(playerid, "Furniture purchased for {33CC33}%s{FFFFFF}. Use /edit to manage your furniture.", FormatCash(g_FurnitureList[PlayerData[playerid][pPreviewIndex]][e_ModelPrice]));
					}
				}
				DestroyDynamicObject(gPreviewFurniture[playerid]);
				gPreviewFurniture[playerid] = INVALID_OBJECT_ID;
	        }
	        case EDIT_TYPE_FURNITURE: // House furniture
	        {
	            Furniture[PlayerData[playerid][pEditID]][fSpawn][0] = x;
	            Furniture[PlayerData[playerid][pEditID]][fSpawn][1] = y;
	            Furniture[PlayerData[playerid][pEditID]][fSpawn][2] = z;
	            Furniture[PlayerData[playerid][pEditID]][fSpawn][3] = rx;
	            Furniture[PlayerData[playerid][pEditID]][fSpawn][4] = ry;
	            Furniture[PlayerData[playerid][pEditID]][fSpawn][5] = rz;

	            UpdateFurniture(PlayerData[playerid][pEditID]);
	            SaveFurniture(PlayerData[playerid][pEditID]);

	            SendInfoMessage(playerid, "You have edited furniture ID: %i.", PlayerData[playerid][pEditID]);
	        }
	        case EDIT_TYPE_PAYPHONE: // Payphones
			{
	            Payphones[PlayerData[playerid][pEditID]][phX] = x;
	            Payphones[PlayerData[playerid][pEditID]][phY] = y;
	            Payphones[PlayerData[playerid][pEditID]][phZ] = z;
	            Payphones[PlayerData[playerid][pEditID]][phA] = rz;

	            UpdatePayphone(PlayerData[playerid][pEditID]);
	            SavePayphone(PlayerData[playerid][pEditID]);

	            SendInfoMessage(playerid, "You have edited payphone ID: %i.", PlayerData[playerid][pEditID]);
	        }
	        case EDIT_TYPE_ATM: // ATM machines
	        {
	            ATM[PlayerData[playerid][pEditID]][atmSpawn][0] = x;
	            ATM[PlayerData[playerid][pEditID]][atmSpawn][1] = y;
	            ATM[PlayerData[playerid][pEditID]][atmSpawn][2] = z;
	            ATM[PlayerData[playerid][pEditID]][atmSpawn][3] = rz;

	            UpdateATM(PlayerData[playerid][pEditID]);
	            SaveATM(PlayerData[playerid][pEditID]);

	            SendInfoMessage(playerid, "You have edited ATM machine ID: %i.", PlayerData[playerid][pEditID]);
	        }
	    }
	    PlayerData[playerid][pEdit] = EDIT_TYPE_NONE;
	    PlayerData[playerid][pEditID] = -1;
	}
	switch(PlayerData[playerid][pEditType])
	{
		case EDIT_LAND_OBJECT_PREVIEW:
	    {
			if(response != EDIT_RESPONSE_UPDATE)
			{
			    DestroyDynamicObject(PlayerData[playerid][pEditObject]);
				PlayerData[playerid][pEditObject] = INVALID_OBJECT_ID;
				PlayerData[playerid][pEditType] = 0;

			    if(response == EDIT_RESPONSE_FINAL)
			    {
			        new landid = PlayerData[playerid][pObjectLand];

					if(landid >= 0 && HasLandPerms(playerid, landid))
					{
					    if(PlayerData[playerid][pCash] < landArray[PlayerData[playerid][pSelected]][fPrice])
		                {
		                    return SendClientMessage(playerid, COLOR_GREY, "You couldn't afford to purchase this item.");
		                }
		                if(!IsPointInLand(landid, x, y))
		                {
		                    return SendClientMessage(playerid, COLOR_GREY, "The object has exceeded the boundaries for your land.");
						}

					    new
					        string[16];

					    GivePlayerCash(playerid, -landArray[PlayerData[playerid][pSelected]][fPrice]);

						mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "INSERT INTO landobjects VALUES(null, %i, %i, '%e', %i, '%f', '%f', '%f', '%f', '%f', '%f', 0, 0, '0.0', '0.0', '0.0', '-1000.0', '-1000.0', '-1000.0')", LandInfo[landid][lID], landArray[PlayerData[playerid][pSelected]][fModel], landArray[PlayerData[playerid][pSelected]][fName], landArray[PlayerData[playerid][pSelected]][fPrice], x, y, z, rx, ry, rz);
						mysql_tquery(connectionID, queryBuffer);
						mysql_tquery(connectionID, "SELECT * FROM landobjects WHERE id = LAST_INSERT_ID()", "OnQueryFinished", "ii", THREAD_LOAD_LANDOBJECTS, LandInfo[landid][lLabels]);

						format(string, sizeof(string), "~r~-$%i", landArray[PlayerData[playerid][pSelected]][fPrice]);
						GameTextForPlayer(playerid, string, 5000, 1);
						UpdateLandText(landid);
						if(!strcmp(landArray[PlayerData[playerid][pSelected]][fCategory], "Doors & Gates"))
						{
							if(IsGateModel(landArray[PlayerData[playerid][pSelected]][fModel]))
							{
								SendClientMessage(playerid, COLOR_WHITE, "You can use /gate to open and close your gate. To change the destination coordinates, use /land and choose 'Edit object'.");
							}
						    else
							{
								SendClientMessage(playerid, COLOR_WHITE, "You can use /door to control your door and /lock to unlock or lock it.");
						    }
						}
					}
			    }
			    else if(response == EDIT_RESPONSE_CANCEL)
			    {
			        if(PlayerData[playerid][pMenuType] == 0)
						ShowLandObjects(playerid, MODEL_SELECTION_LANDOBJECTS);
					else
						ShowDialogToPlayer(playerid, DIALOG_LANDBUILD2);
				}
			}
		}
		case EDIT_LAND_OBJECT:
		{
		    if(response != EDIT_RESPONSE_UPDATE)
			{
				if(response == EDIT_RESPONSE_FINAL)
				{
				    if(!IsPointInLand(PlayerData[playerid][pObjectLand], x, y))
        			{
           				SendClientMessage(playerid, COLOR_GREY, "The object has exceeded the boundaries for your land.");
					}
					else
					{
					    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE landobjects SET pos_x = '%f', pos_y = '%f', pos_z = '%f', rot_x = '%f', rot_y = '%f', rot_z = '%f' WHERE id = %i", x, y, z, rx, ry, rz, Streamer_GetExtraInt(objectid, E_OBJECT_INDEX_ID));
						mysql_tquery(connectionID, queryBuffer);
						SendClientMessage(playerid, COLOR_GREY, "Changes saved.");
					}
				}

		        ReloadLandObject(objectid, LandInfo[PlayerData[playerid][pObjectLand]][lLabels]);
		        PlayerData[playerid][pEditType] = 0;
			}
		}
		case EDIT_LAND_GATE_MOVE:
		{
		    if(response != EDIT_RESPONSE_UPDATE)
			{
				if(response == EDIT_RESPONSE_FINAL)
				{
				    if(!IsPointInLand(PlayerData[playerid][pObjectLand], x, y))
        			{
           				SendClientMessage(playerid, COLOR_GREY, "The object has exceeded the boundaries for your land.");
					}
					else
					{
					    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE landobjects SET move_x = '%f', move_y = '%f', move_z = '%f', move_rx = '%f', move_ry = '%f', move_rz = '%f' WHERE id = %i", x, y, z, rx, ry, rz, Streamer_GetExtraInt(objectid, E_OBJECT_INDEX_ID));
						mysql_tquery(connectionID, queryBuffer);
						SendClientMessage(playerid, COLOR_GREY, "Changes saved.");
					}
				}

		        ReloadLandObject(objectid, LandInfo[PlayerData[playerid][pObjectLand]][lLabels]);
		        PlayerData[playerid][pEditType] = 0;
			}
		}
		case EDIT_GATE_OBJECT:
		{
		    if(response != EDIT_RESPONSE_UPDATE)
			{
				new id = GetGateByObjectID(PlayerData[playerid][pEditObject]);

				if(response == EDIT_RESPONSE_FINAL)
				{
					UpdateGatePosition(id, x,y,z,rx,ry,rz);
					SendClientMessageEx(playerid, COLOR_WHITE, "You have edited the position of gate ID: %d.", id);
				}
			    else if(response == EDIT_RESPONSE_CANCEL)
				{
					RedrawGate(id);
				}
		        PlayerData[playerid][pEditType] = 0;
			}
		}
		case EDIT_GATE_MOVE:
		{
		    if(response != EDIT_RESPONSE_UPDATE)
			{
				new id = GetGateByObjectID(PlayerData[playerid][pEditObject]);

				if(response == EDIT_RESPONSE_FINAL)
				{
					UpdateGateMovingPosition(id, x,y,z,rx,ry,rz);
					SendClientMessageEx(playerid, COLOR_WHITE, "You have edited the moving position of gate ID: %d.", id);
				}
			    else if(response == EDIT_RESPONSE_CANCEL)
				{
					RedrawGate(id);
				}
		        PlayerData[playerid][pEditType] = 0;
			}
		}
	}
 	return 1;
}
Dialog:PhoneMusic(playerid, response, listitem, inputtext[])
{
	if(response)
	{

	}
	return 1;
}
Dialog:PhoneMenu(playerid, response, listitem, inputtext[])
{
	if (response)
	{
		switch (listitem)
		{
			case 0:
			{
				Dialog_Show(playerid, PhoneCall, DIALOG_STYLE_INPUT, "{6688FF}Call Number", "Please specify the number you would like to call:", "Call", "Cancel");
			}
			case 1:
			{
				Dialog_Show(playerid, PhoneSMS, DIALOG_STYLE_INPUT, "{6688FF}SMS Number", "Please specify the number you would like to SMS:", "Call", "Cancel");
			}
			case 2:
			{
				ListContacts(playerid);
			}
			case 3:
			{
				Dialog_Show(playerid, PhoneMusic, DIALOG_STYLE_LIST, "{6688ff}Phone Music", "Default Ringtone\nMusical Ringtone 1\nMusical Ringtone 2\nMusical Ringtone 3\nMusical Ringtone 4\nMusical Ringtone 5\nMusical Ringtone 6\nMusical Ringtone 7", "Select", "Cancel");
			}
			case 4:
			{
				SendErrorMessage(playerid, "This feature is still being developed.");
			}
			case 5:
			{
				Dialog_Show(playerid, PhoneSettings, DIALOG_STYLE_LIST, "{6688FF}Phone Settings", "Power %s\nSound Off", "Select", "Cancel", (PlayerData[playerid][pTogglePhone]) ? ("Off") : ("On"));
			}
		}
	}
	return 1;
}
Dialog:ContactNumber(playerid, response, listitem, inputtext[])
{
	if (response)
	{
		new number;

		if (sscanf(inputtext, "i", number))
		{
			return Dialog_Show(playerid, ContactNumber, DIALOG_STYLE_INPUT, "{FFFFFF}Contact number", "Please input the number for the contact '%s':", "Submit", "Cancel", gTargetName[playerid]);
		}
		else if (number < 1)
		{
			return Dialog_Show(playerid, ContactNumber, DIALOG_STYLE_INPUT, "{FFFFFF}Contact number", "You have entered an invalid number.\n\nPlease input the number for the contact '%s':", "Submit", "Cancel", gTargetName[playerid]);
		}
		else
		{
			mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "INSERT INTO rp_contacts (Phone, Contact, Number) VALUES(%i, '%s', %i)", PlayerData[playerid][pPhone], mysql_escaped(gTargetName[playerid]), number);
			mysql_tquery(connectionID, queryBuffer);

			ListContacts(playerid);
			SendInfoMessage(playerid, "You have added a contact: %s (%i).", gTargetName[playerid], number);
		}
	}
	return 1;
}

Dialog:AddContact(playerid, response, listitem, inputtext[])
{
	if (response)
	{
		if (isnull(inputtext))
		{
			return Dialog_Show(playerid, AddContact, DIALOG_STYLE_INPUT, "{FFFFFF}Add contact", "Please input the name of the contact to add below:", "Submit", "Cancel");
		}
		else if (strlen(inputtext) > 24)
		{
			return Dialog_Show(playerid, AddContact, DIALOG_STYLE_INPUT, "{FFFFFF}Add contact", "The contact name must be below 24 characters.\n\nPlease input the name of the contact to add below:", "Submit", "Cancel");
		}
		else
		{
			strcpy(gTargetName[playerid], inputtext, MAX_PLAYER_NAME);

			Dialog_Show(playerid, ContactNumber, DIALOG_STYLE_INPUT, "{FFFFFF}Contact number", "Please input the number for the contact '%s':", "Submit", "Cancel", gTargetName[playerid]);
		}
	}
	else
	{
		ListContacts(playerid);
	}
	return 1;
}

Dialog:ContactOptions(playerid, response, listitem, inputtext[])
{
	if (response)
	{
		switch (listitem)
		{
			case 0:
			{
				mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "SELECT Contact, Number FROM `rp_contacts` WHERE ID = %i", PlayerData[playerid][pSelected]);
				mysql_tquery(connectionID, queryBuffer, "OnPlayerCallContact", "i", playerid);
			}
			case 1:
			{
				mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "SELECT Contact, Number FROM `rp_contacts` WHERE ID = %i", PlayerData[playerid][pSelected]);
				mysql_tquery(connectionID, queryBuffer, "OnPlayerTextContact", "i", playerid);
			}
			case 2:
			{
				mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "DELETE FROM `rp_contacts` WHERE ID = %i", PlayerData[playerid][pSelected]);
				mysql_tquery(connectionID, queryBuffer);

				ListContacts(playerid);
				SendInfoMessage(playerid, "You have deleted the selected contact.");
			}
		}
	}
	else
	{
		ListContacts(playerid);
	}
	return 1;
}

Dialog:Contacts(playerid, response, listitem, inputtext[])
{
	if (response)
	{
		if (listitem <= 0)
		{
			Dialog_Show(playerid, AddContact, DIALOG_STYLE_INPUT, "{FFFFFF}Add contact", "Please input the name of the contact to add below:", "Submit", "Cancel");
		}
		else
		{
			PlayerData[playerid][pSelected] = gListedItems[playerid][--listitem];

			Dialog_Show(playerid, ContactOptions, DIALOG_STYLE_LIST, "{FFFFFF}Contact options", "Call contact\nText Message\nDelete contact", "Select", "Cancel");
		}
	}
	return 1;
}

Dialog:PhoneSettings(playerid, response, listitem, inputtext[])
{
	if (response)
	{
		switch (listitem)
		{
			case 0:
			{
				if (PlayerData[playerid][pTogglePhone] == 0)
					PlayerData[playerid][pTogglePhone] = 1;
				else
					PlayerData[playerid][pTogglePhone] = 0;
			}
		}
	}
	return 1;
}

Dialog:PhoneSMS(playerid, response, listitem, inputtext[])
{
	new number;

	if (response)
	{
		if (sscanf(inputtext, "i", number))
		{
			return Dialog_Show(playerid, PhoneSMS, DIALOG_STYLE_INPUT, "{6688FF}SMS Number", "Please specify the number you would like to SMS:", "Call", "Cancel");
		}
		else if (PlayerData[playerid][pPhone] == number)
		{
			return Dialog_Show(playerid, PhoneSMS, DIALOG_STYLE_INPUT, "{6688FF}SMS Number", "You can't text your own number.\n\nPlease specify the number you would like to SMS:", "Call", "Cancel");
		}
		else if (number < 1)
		{
			return Dialog_Show(playerid, PhoneSMS, DIALOG_STYLE_INPUT, "{6688FF}SMS Number", "Please specify the number you would like to SMS:", "Call", "Cancel");
		}
		else
		{
			new strHead[64];
			format(strHead, sizeof(strHead), "{6688FF}SMS to %i", number);

			PlayerData[playerid][pPhoneSMS] = number;

			Dialog_Show(playerid, PhoneSMStext, DIALOG_STYLE_INPUT, strHead, "Please type your message:", "Send", "Cancel");
		}
	}
	return 1;
}

Dialog:PhoneSMStext(playerid, response, listitem, inputtext[])
{
	new text[512];
	new number = PlayerData[playerid][pPhoneSMS];
	new strHead[64];
	if (response)
	{
		format(strHead, sizeof(strHead), "{6688FF}SMS to %i", number);

		if (sscanf(inputtext, "s[512]", text))
		{
			Dialog_Show(playerid, PhoneSMStext, DIALOG_STYLE_INPUT, strHead, "Please type your message:", "Send", "Cancel");
		}
		else
		{
			SendTextMessage(playerid, number, text);
		}
	}
	return 1;
}

Dialog:PhoneCall(playerid, response, listitem, inputtext[])
{
	if (response)
	{
		new number;

		if (sscanf(inputtext, "i", number))
		{
			return Dialog_Show(playerid, PhoneCall, DIALOG_STYLE_INPUT, "{6688FF}Call Number", "Please specify the number you would like to call:", "Call", "Cancel");
		}
		else if (PlayerData[playerid][pCalling] > 0)
		{
			return Dialog_Show(playerid, PhoneCall, DIALOG_STYLE_INPUT, "{6688FF}Call Number", "You are already on a call. Use {6688FF}/hangup{FFFFFF} to end it.\n\nPlease specify the number you would like to call:", "Call", "Cancel");
		}
		else if (PlayerData[playerid][pPhone] == number)
		{
			return Dialog_Show(playerid, PhoneCall, DIALOG_STYLE_INPUT, "{6688FF}Call Number", "You can't dial your own number.\n\nPlease specify the number you would like to call:", "Call", "Cancel");
		}
		else if (number < 1)
		{
			return Dialog_Show(playerid, PhoneCall, DIALOG_STYLE_INPUT, "{6688FF}Call Number", "You have entered an invalid phone number.\n\nPlease specify the number you would like to call:", "Call", "Cancel");
		}
		else
		{
			CallNumber(playerid, number);
		}
	}
	return 1;
}
Dialog:PhoneCallPP(playerid, response, listitem, inputtext[])
{
	if (response)
	{
		new number, payphone = GetClosestPayphone(playerid);

		if (sscanf(inputtext, "i", number))
		{
			return Dialog_Show(playerid, PhoneCall, DIALOG_STYLE_INPUT, "{6688FF}Call Number", "Please specify the number you would like to call:", "Call", "Cancel");
		}
		else if (PlayerData[playerid][pCalling] > 0)
		{
			return Dialog_Show(playerid, PhoneCall, DIALOG_STYLE_INPUT, "{6688FF}Call Number", "You are already on a call. Use {6688FF}/hangup{FFFFFF} to end it.\n\nPlease specify the number you would like to call:", "Call", "Cancel");
		}
		else if (PlayerData[playerid][pPhone] == number)
		{
			return Dialog_Show(playerid, PhoneCall, DIALOG_STYLE_INPUT, "{6688FF}Call Number", "You can't dial your own number.\n\nPlease specify the number you would like to call:", "Call", "Cancel");
		}
		else if (number < 1)
		{
			return Dialog_Show(playerid, PhoneCall, DIALOG_STYLE_INPUT, "{6688FF}Call Number", "You have entered an invalid phone number.\n\nPlease specify the number you would like to call:", "Call", "Cancel");
		}
		else if (IsValidPayphoneID(payphone) && number == Payphones[payphone][phNumber])
		{
			return Dialog_Show(playerid, PhoneCall, DIALOG_STYLE_INPUT, "{6688FF}Call Number", "You can't call this number as it belongs to this payphone.\n\nPlease specify the number you would like to call:", "Call", "Cancel");
		}
		else if (IsValidPayphoneID(payphone) && (Payphones[payphone][phOccupied] || Payphones[payphone][phCaller] != INVALID_PLAYER_ID))
		{
			return Dialog_Show(playerid, PhoneCall, DIALOG_STYLE_INPUT, "{6688FF}Call Number", "This payphone is already in use.\n\nPlease specify the number you would like to call:", "Call", "Cancel");
		}
		else
		{
			CallNumber(playerid, number, payphone);
		}
	}
	return 1;
}


Dialog:DIALOG_HELPCMD(playerid, response, listitem, inputtext[])
{
    if(response)
    {
        switch(listitem)
        {
            case 0:
            {
				SendClientMessage(playerid, COLOR_YELLOW, "Account: {C8C8C8}/stats, /buylevel, /b, /g, /me, /do, /(o)oc, /(s)hout, /(l)ow, /(w)hisper, /(n)ewbie.");
				SendClientMessage(playerid, COLOR_YELLOW, "Account: {C8C8C8}/pay, /id, /time, /report, /upgrade, /charity, /stopmusic, /joinevent, /quitevent, /setspawn.");
			    SendClientMessage(playerid, COLOR_YELLOW, "General: {C8C8C8}/dice, /flipcoin, /accent, /helpers, /helpme, /accept, /activity, /skill, /quitjob.");
			    SendClientMessage(playerid, COLOR_YELLOW, "General: {C8C8C8}/give, /sell, /toggle, /cancelcp, /afk, /(ad)vertise, /buy, /phone, /sms.");
			    SendClientMessage(playerid, COLOR_YELLOW, "General: {C8C8C8}/clothing, /locate, /frisk, /contract, /number, /boombox, /switchspeedo, /stuck.");
			    SendClientMessage(playerid, COLOR_YELLOW, "General: {C8C8C8}/shakehand, /dropgun, /grabgun, /usecookies, /usecigar, /usedrug, /showid.");
				SendClientMessage(playerid, COLOR_YELLOW, "General: {C8C8C8}/(inv)entory, /guninv, /changename, /drop, /eject, /dicebet, /gangs, /factions.");
				SendClientMessage(playerid, COLOR_YELLOW, "General: {C8C8C8}/calculate, /serverstats, /resetupgrades, /turfs, /lands, /watch, /gps, /fixmyvw.");
			    SendClientMessage(playerid, COLOR_YELLOW, "General: {C8C8C8}/myupgrades, /unmute, /breakin, /achievements, /buyinsurance, /tie, /untie.");
				SendClientMessage(playerid, COLOR_YELLOW, "General: {C8C8C8}/househelp, /garagehelp, /bizhelp, /jobhelp, /animhelp, /vehiclehelp, /viphelp.");
				SendClientMessage(playerid, COLOR_YELLOW, "General: {C8C8C8}/bankhelp, /factionhelp, /ganghelp, /landhelp, /helperhelp, /breakcuffs");
				if(PlayerData[playerid][pBanAppealer])
				{
				    SendClientMessage(playerid, COLOR_NAVYBLUE,  "\n{FF6347}Ban Appealer Commands:{FFFFFF} /banip, /baninfo, /banhistory, /unbanip, /unban.");
				}
				if(PlayerData[playerid][pDeveloper])
				{
				    SendClientMessage(playerid, COLOR_NAVYBLUE, "\n{FF6347}Developer Commands:{FFFFFF} /changelist, /gmx, /renamecmd, /createalias");
				}
				if(PlayerData[playerid][pDynamicAdmin])
				{
				    SendClientMessage(playerid, COLOR_NAVYBLUE, "\n{FF6347}Dynamic Admin Commands:{FFFFFF} /dynamichelp, /setvip, /setstat.");
				}
				if(PlayerData[playerid][pAdminPersonnel])
				{
				    SendClientMessage(playerid, COLOR_NAVYBLUE, "\n{FF6347}Admin Personnel Commands:{FFFFFF} /setstaff, /oadmins, /makeadmin, /makeformeradmin, /forceaduty.");
				}
				if(PlayerData[playerid][pHumanResources])
				{
				    SendClientMessage(playerid, COLOR_NAVYBLUE, "\n{FF6347}Human Resources Commands:{FFFFFF} /banhistory, /oadmins, /ocheck.");
				}
				if(PlayerData[playerid][pAdmin] > 0)
				{
				    SendClientMessage(playerid, COLOR_NAVYBLUE, "\n{FF6347}Administrative Commands:{FFFFFF} /a, /adminhelp.");
				}
			}
			case 1:
			{
			
				SendClientMessage(playerid, COLOR_GREY, GetJobHelp(PlayerData[playerid][pJob]));
				if(PlayerData[playerid][pSecondJob] != JOB_NONE)
				{
					SendClientMessage(playerid, COLOR_GREY, GetJobHelp(PlayerData[playerid][pSecondJob]));
				}
			}
			case 2:
			{
				if(PlayerData[playerid][pGang] == -1)
				{
					return SendClientMessage(playerid, COLOR_GREY, "You can't use this command as you're not a gang member.");
				}

			    SendClientMessage(playerid, COLOR_GREEN, "_______________________________________");
			    SendClientMessage(playerid, COLOR_WHITE, "** GANG HELP ** type a command for more information.");
				SendClientMessage(playerid, COLOR_GREY, "** GANG ** /f /gang /gstash /gbackup /bandana /capture /claim /reclaim /turfinfo /gspray");
			    SendClientMessage(playerid, COLOR_GREY, "** GANG ** /gbuyvehicle /gpark /gfindcar /grespawncars /gsellcar /gunmod /lock /endalliance");
			    SendClientMessage(playerid, COLOR_GREY, "** CREW ** /managecrew /crew");

			}
			case 3:
			{
				if(PlayerData[playerid][pFaction] == -1)
				{
					return SendClientMessage(playerid, COLOR_GREY, "You can't use this command as you're not apart of any faction.");
				}

			    SendClientMessage(playerid, COLOR_GREEN, "_______________________________________");
				SendClientMessage(playerid, COLOR_WHITE, "** FACTION HELP ** type a command for more information.");
				SendClientMessage(playerid, COLOR_GREY, "** FACTION ** /fc /d /(r)adio /div /faction /division /locker /showbadge /(m)egaphone");

				switch(FactionInfo[PlayerData[playerid][pFaction]][fType])
				{
				    case FACTION_POLICE, FACTION_FEDERAL, FACTION_ARMY:
				    {
				        SendClientMessage(playerid, COLOR_GREY, "** FACTION ** /gate /door /cell /tazer /cuff /uncuff /drag /detain /charge /arrest");
				        SendClientMessage(playerid, COLOR_GREY, "** FACTION ** /wanted /frisk /take /ticket /gov /ram /deploy /undeploy /undeployall /backup");
				        SendClientMessage(playerid, COLOR_GREY, "** FACTION ** /mdc /clearwanted /siren /badge /vticket /vfrisk /vtake /seizeplant /mir /fpark");

						if(FactionInfo[PlayerData[playerid][pFaction]][fType] == FACTION_FEDERAL)
							SendClientMessage(playerid, COLOR_GREY, "** FACTION ** /listcallers /trackcall /cells /passport /callsign /bug /listbugs /tog bugged");
						else
						    SendClientMessage(playerid, COLOR_GREY, "** FACTION ** /listcallers /trackcall /cells /claim /callsign /fpark");
					}
					case FACTION_MEDIC:
					{
					    SendClientMessage(playerid, COLOR_GREY, "** FACTION ** /heal /drag /stretcher /deliverpt /getpt /listpt /injuries /deploy /undeploy /undeployall");
					    SendClientMessage(playerid, COLOR_GREY, "** FACTION ** /badge /gov /backup /listcallers /trackcall /callsign /fpark");
					}
					case FACTION_NEWS:
					{
					    SendClientMessage(playerid, COLOR_GREY, "** FACTION ** /news /live /endlive /liveban /badge /addeposit /adwithdraw /fpark");
					}
					case FACTION_GOVERNMENT:
					{
					    SendClientMessage(playerid, COLOR_GREY, "** FACTION ** /gov /settax /factionpay /tazer /cuff /uncuff /detain /taxdeposit /taxwithdraw /fpark");
					    SendClientMessage(playerid, COLOR_GREY, "** FACTION ** /backup /badge");
					}
					case FACTION_HITMAN:
					{
					    SendClientMessage(playerid, COLOR_GREY, "** FACTION ** /contracts /takehit /profile /passport /plantbomb /pickupbomb /detonate");
					    SendClientMessage(playerid, COLOR_GREY, "** FACTION ** /hfind, /noknife, /hm /fpark");
					}
				}
			}
			case 4:
			{
				if(!PlayerData[playerid][pDonator])
				{
					return SendClientMessage(playerid, COLOR_GREY, "You can't use this command as you don't have a VIP subscription.");
				}

			    SendClientMessage(playerid, COLOR_NAVYBLUE, "__________________ VIP Help __________________");
			    SendClientMessage(playerid, COLOR_WHITE, "** VIP HELP ** type a command for more information.");
			    SendClientMessage(playerid, COLOR_GREY, "** VIP ** /(v)ip /vipinfo /vipcolor /vipinvite /vipnumber /vipmusic");

				if(PlayerData[playerid][pDonator] == 3)
				{
				    SendClientMessage(playerid, COLOR_GREY, "** VIP ** /repair /nos /hyd /viprimkit");
				}
			}
			case 5:
			{
			    SendClientMessage(playerid, COLOR_WHITE, "** HOUSE HELP ** type a command for more information.");
			    SendClientMessage(playerid, COLOR_GREY, "** HOUSE ** /buyhouse /lock /stash /furniture /upgradehouse /sellhouse /sellmyhouse");
				SendClientMessage(playerid, COLOR_GREY, "** HOUSE ** /door /renthouse /unrent /setrent /tenants /evict /evictall /houseinfo");
				SendClientMessage(playerid, COLOR_GREY, "** HOUSE ** /houseinvite /hlights /installhousealarm (/iha), /uninstallhousealarm (/uha)");
			}
			case 6:
			{
			    SendClientMessage(playerid, COLOR_WHITE, "** VEHICLE HELP ** type a command for more information.");
			    SendClientMessage(playerid, COLOR_GREY, "** VEHICLE ** /lights /hood /boot /buy /carstorage /park /lock /findcar");
			    SendClientMessage(playerid, COLOR_GREY, "** VEHICLE ** /vstash /neon /unmod /colorcar /paintcar /upgradevehicle /sellcar /sellmycar");
			    SendClientMessage(playerid, COLOR_GREY, "** VEHICLE ** /givekeys /takekeys /setradio /paytickets /carinfo /gascan /breakin");
			}
			case 7:
			{
			    SendClientMessage(playerid, COLOR_WHITE, "** BUSINESS HELP ** type a command for more information.");
				SendClientMessage(playerid, COLOR_GREY, "** BUSINESS ** /buybiz /sellbiz /sellmybiz /lock /entryfee ");
				SendClientMessage(playerid, COLOR_GREY, "** BUSINESS ** /bizmenu /bwithdraw /bdeposit /bdepositmats /bwithdrawmats /bname");
            }
            case 8:
            {
                callcmd::hh(playerid, inputtext);
			}
			case 9:
			{
				callcmd::adminhelp(playerid, inputtext);
			}
		}
	}
	return 1;
}

Dialog:DIALOG_NEWUPGRADEONE(playerid, response, listitem, inputtext[])
{
    if(response)
    {
		if(PlayerData[playerid][pUpgradePoints] < 1)
		{
			return SendClientMessage(playerid, COLOR_GREY, "You have no upgrade points available which you can spend.");
		}
        switch(listitem)
        {
			case 0:
			{
			    if(PlayerData[playerid][pInventoryUpgrade] >= 5)
			    {
			        return SendClientMessage(playerid, COLOR_GREY, "Your inventory skill is already upgraded to its maximum level of 5.");
				}
				PlayerData[playerid][pInventoryUpgrade]++;
				PlayerData[playerid][pUpgradePoints]--;

				mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET inventoryupgrade = %i, upgradepoints = %i WHERE uid = %i", PlayerData[playerid][pInventoryUpgrade], PlayerData[playerid][pUpgradePoints], PlayerData[playerid][pID]);
				mysql_tquery(connectionID, queryBuffer);

				SendClientMessageEx(playerid, COLOR_GREEN, "You upgraded your inventory skill to %i/5. Your inventory capacity was increased.", PlayerData[playerid][pInventoryUpgrade]);
			}
			case 1:
			{
			    if(PlayerData[playerid][pAddictUpgrade] >= 3)
			    {
			        return SendClientMessage(playerid, COLOR_GREY, "Your addict skill is already upgraded to its maximum level of 3.");
				}

				PlayerData[playerid][pAddictUpgrade]++;
				PlayerData[playerid][pUpgradePoints]--;

				mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET addictupgrade = %i, upgradepoints = %i WHERE uid = %i", PlayerData[playerid][pAddictUpgrade], PlayerData[playerid][pUpgradePoints], PlayerData[playerid][pID]);
				mysql_tquery(connectionID, queryBuffer);

				SendClientMessageEx(playerid, COLOR_GREEN, "You upgraded your addict skill to level %i/3. You now gain %.1f more health & armor when using drugs.", PlayerData[playerid][pAddictUpgrade], PlayerData[playerid][pAddictUpgrade] * 5.0);
			}
			case 2:
			{
			    if(PlayerData[playerid][pTraderUpgrade] >= 3)
			    {
			        return SendClientMessage(playerid, COLOR_GREY, "Your trader skill is already upgraded to its maximum level of 3.");
				}

				PlayerData[playerid][pTraderUpgrade]++;
				PlayerData[playerid][pUpgradePoints]--;

				mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET traderupgrade = %i, upgradepoints = %i WHERE uid = %i", PlayerData[playerid][pTraderUpgrade], PlayerData[playerid][pUpgradePoints], PlayerData[playerid][pID]);
				mysql_tquery(connectionID, queryBuffer);

				SendClientMessageEx(playerid, COLOR_GREEN, "You upgraded your trader skill to level %i/3. You now pay %i percent less for items in shops.", PlayerData[playerid][pTraderUpgrade], PlayerData[playerid][pTraderUpgrade] * 10);

			}
			case 3:
			{
			    if(PlayerData[playerid][pAssetUpgrade] >= 4)
			    {
			        return SendClientMessage(playerid, COLOR_GREY, "Your asset skill is already upgraded to its maximum level of 4.");
				}

				PlayerData[playerid][pAssetUpgrade]++;
				PlayerData[playerid][pUpgradePoints]--;

				mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET assetupgrade = %i, upgradepoints = %i WHERE uid = %i", PlayerData[playerid][pAssetUpgrade], PlayerData[playerid][pUpgradePoints], PlayerData[playerid][pID]);
				mysql_tquery(connectionID, queryBuffer);

				SendClientMessageEx(playerid, COLOR_GREEN, "You upgraded your asset skill to level %i/4. You can now own %i/%i houses and garages and %i/%i businesses and vehicles.", PlayerData[playerid][pAssetUpgrade], GetPlayerAssetLimit(playerid, LIMIT_HOUSES), GetPlayerAssetLimit(playerid, LIMIT_GARAGES), GetPlayerAssetLimit(playerid, LIMIT_BUSINESSES), GetPlayerAssetLimit(playerid, LIMIT_VEHICLES));

			}
			case 4:
			{
			    if(PlayerData[playerid][pLaborUpgrade] >= 5)
			    {
			        return SendClientMessage(playerid, COLOR_GREY, "Your labor skill is already upgraded to its maximum level of 5.");
				}

				PlayerData[playerid][pLaborUpgrade]++;
				PlayerData[playerid][pUpgradePoints]--;

				mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET laborupgrade = %i, upgradepoints = %i WHERE uid = %i", PlayerData[playerid][pLaborUpgrade], PlayerData[playerid][pUpgradePoints], PlayerData[playerid][pID]);
				mysql_tquery(connectionID, queryBuffer);

				SendClientMessageEx(playerid, COLOR_GREEN, "You upgraded your labor skill to level %i/5. You now earn %i percent more extra cash when you work.", PlayerData[playerid][pLaborUpgrade], PlayerData[playerid][pLaborUpgrade] * 2);

			}
			case 5:
			{
			    if(PlayerData[playerid][pSpawnHealth] >= 100)
			    {
			        return SendClientMessage(playerid, COLOR_GREY, "Your spawn health is at maximum (100).");
			    }

			    PlayerData[playerid][pSpawnHealth] += 5.0;
			    PlayerData[playerid][pUpgradePoints]--;

			    SendClientMessageEx(playerid, COLOR_GREEN, "You have upgraded your spawn health. You will now spawn with %.1f health after death.", PlayerData[playerid][pSpawnHealth]);

			}
			case 6:
			{
			    if(PlayerData[playerid][pSpawnArmor] > 100 && PlayerData[playerid][pDonator] == 0)
			    {
			        return SendClientMessage(playerid, COLOR_GREY, "Your spawn armor is at maximum (100).");
			    }
			    else if(PlayerData[playerid][pSpawnArmor] > 125 && PlayerData[playerid][pDonator] <= 2)
			    {
			        return SendClientMessage(playerid, COLOR_GREY, "Your spawn armor is at maximum (125).");
			    }
			    else if(PlayerData[playerid][pSpawnArmor] > 150 && PlayerData[playerid][pDonator] == 3)
			    {
			        return SendClientMessage(playerid, COLOR_GREY, "Your spawn armor is at maximum (150).");
			    }

			    PlayerData[playerid][pSpawnArmor] += 2.0;
			    PlayerData[playerid][pUpgradePoints]--;

			    SendClientMessageEx(playerid, COLOR_GREEN, "You have upgraded your spawn armor. You will now spawn with %.1f armor after death.", PlayerData[playerid][pSpawnArmor]);

			}
		}
		if(PlayerData[playerid][pInventoryUpgrade] == 5 || PlayerData[playerid][pAddictUpgrade] == 3 || PlayerData[playerid][pTraderUpgrade] == 3 || PlayerData[playerid][pAssetUpgrade] == 4 || PlayerData[playerid][pLaborUpgrade] == 5 || PlayerData[playerid][pSpawnHealth] == 100 || PlayerData[playerid][pSpawnArmor] == 100)
		{
		    AwardAchievement(playerid, ACH_Benefits);
		}
	}
	return 1;
}


Dialog:DIALOG_PCP(playerid, response, listitem, inputtext[])
{
	if(response)
	{
		new params[158], string[200];
		if(listitem == 0)
		{
			format(string,sizeof(string),"Please enter the reason why you wish to report this player:");
		    Dialog_Show(playerid, DIALOG_PCP_REPORT, DIALOG_STYLE_INPUT, "{33CCFF}Player Control Panel :: Reporting", string, "Report", "Cancel");
		}
		if(listitem == 1)
		{
			Dialog_Show(playerid, DIALOG_PM, DIALOG_STYLE_INPUT, "Private Message", "Input your private message text:", "Send", "Cancel");
		}
		if(listitem == 2)
		{
			format(string,sizeof(string),"Please enter the reason why you wish to kick this player:");
		    Dialog_Show(playerid, DIALOG_PCP_KICK, DIALOG_STYLE_INPUT, "{33CCFF}Player Control Panel :: Kicking", string, "Kick", "Cancel");
		}
		if(listitem == 3)
		{
			format(string,sizeof(string),"Please enter the time to ban this player for:");
		    Dialog_Show(playerid, DIALOG_PCP_BAN1, DIALOG_STYLE_INPUT, "{33CCFF}Player Control Panel :: Banning", string, "Continue", "Cancel");
		}
		if(listitem == 4)
		{
			format(params, sizeof(params), "%i", GetPVarInt(playerid, "pClickedID"));
			DeletePVar(playerid, "pClickedID");
			return callcmd::spec(playerid, params);
		}

		if(listitem == 5)
		{
			format(params, sizeof(params), "%i", GetPVarInt(playerid, "pClickedID"));
			DeletePVar(playerid, "pClickedID");
			return callcmd::gethere(playerid, params);
		}
		if(listitem == 6)
		{
			format(params, sizeof(params), "%i", GetPVarInt(playerid, "pClickedID"));
			DeletePVar(playerid, "pClickedID");
			return callcmd::goto(playerid, params);
		}
		if(listitem == 7)
		{

			format(params, sizeof(params), "%i", GetPVarInt(playerid, "pClickedID"));
			DeletePVar(playerid, "pClickedID");
			return callcmd::nmute(playerid, params);
		}
		if(listitem == 8)
		{

			format(params, sizeof(params), "%i", GetPVarInt(playerid, "pClickedID"));
			DeletePVar(playerid, "pClickedID");
			return callcmd::freeze(playerid, params);
		}
		if(listitem == 9)
		{

			format(params, sizeof(params), "%i", GetPVarInt(playerid, "pClickedID"));
			DeletePVar(playerid, "pClickedID");
			return callcmd::unfreeze(playerid, params);
		}
		if(listitem == 10)
		{

			format(params, sizeof(params), "%i", GetPVarInt(playerid, "pClickedID"));
			DeletePVar(playerid, "pClickedID");
			return callcmd::slap(playerid, params);
		}
		if(listitem == 11)
		{

			format(params, sizeof(params), "%i", GetPVarInt(playerid, "pClickedID"));
			DeletePVar(playerid, "pClickedID");
			return callcmd::revive(playerid, params);
		}
		if(listitem == 12)
		{

			format(params, sizeof(params), "%i", GetPVarInt(playerid, "pClickedID"));
			DeletePVar(playerid, "pClickedID");
			return callcmd::check(playerid, params);
		}
		if(listitem == 13)
		{

			format(params, sizeof(params), "%i", GetPVarInt(playerid, "pClickedID"));
			DeletePVar(playerid, "pClickedID");
			return callcmd::nrn(playerid, params);
		}
		if(listitem == 14)
		{

			format(params, sizeof(params), "%i", GetPVarInt(playerid, "pClickedID"));
			DeletePVar(playerid, "pClickedID");
			return callcmd::showrules(playerid, params);
		}

		if(listitem == 15)
		{

			format(params, sizeof(params), "%i", GetPVarInt(playerid, "pClickedID"));
			DeletePVar(playerid, "pClickedID");
			return callcmd::listguns(playerid, params);
		}
		if(listitem == 16)
		{

			format(params, sizeof(params), "%i", GetPVarInt(playerid, "pClickedID"));
			DeletePVar(playerid, "pClickedID");
			return callcmd::listpvehs(playerid, params);
		}
		if(listitem == 17) { DeletePVar(playerid, "pClickedID"); return 1; }
	}
	else
	{
		DeletePVar(playerid, "pClickedID");
		return 1;
	}
	return 1;
}
Dialog:DIALOG_PM(playerid, response, listitem, inputtext[])
{
    if(response)
    {
        new targetid = GetPVarInt(playerid, "pClickedID");
		if(!IsPlayerConnected(targetid))
		{
		    return SendClientMessage(playerid, COLOR_GREY, "The player specified is disconnected.");
		}

		if(PlayerData[playerid][pHours] < 3)
		{
		    return SendClientMessage(playerid, COLOR_GREY, "You need to play at least 3 hours+ to use this command");
		}
		if(PlayerData[targetid][pTogglePM])
		{
		    return SendClientMessage(playerid, COLOR_GREY, "That player has disabled incoming private messages.");
		}
        if(targetid == playerid)
        {
            return SendClientMessage(playerid, COLOR_GREY, "You can't pm yourself");
		}
        if(PlayerData[playerid][pCash] < 3000)
        {
            return SendClientMessage(playerid, COLOR_GREY, "You need $3,000 to send private message.");
        }
		SendClientMessageEx(targetid, COLOR_GREEN, "(( PM from %s: %s ))", GetRPName(playerid), inputtext);
		SendClientMessageEx(playerid, COLOR_GREEN, "(( PM to %s: %s ))", GetRPName(targetid), inputtext);
        GivePlayerCash(playerid, -3000);
        GameTextForPlayer(playerid, "~w~Text sent!~n~~r~-$3,000", 5000, 1);
		if(PlayerData[targetid][pWhisperFrom] == INVALID_PLAYER_ID)
		{
		    SendClientMessage(targetid, COLOR_WHITE, "* You can use '/rpm [message]' to reply to this private message.");
		}
		PlayerData[targetid][pWhisperFrom] = playerid;
	}
	return 1;
}

Dialog:DIALOG_PCP_REPORT(playerid, response, listitem, inputtext[])
{
	if(response)
	{
		new params[158];
		format(params, sizeof(params), "%i %s", GetPVarInt(playerid, "pClickedID"), inputtext);
		DeletePVar(playerid, "pClickedID");
		return callcmd::report(playerid, params);
	}
	else
	{
		DeletePVar(playerid, "pClickedID");
		return 1;
	}

}
Dialog:DIALOG_PCP_KICK(playerid, response, listitem, inputtext[])
{
	if(response)
	{
		new params[158];
		format(params, sizeof(params), "%i %s", GetPVarInt(playerid, "pClickedID"), inputtext);
		DeletePVar(playerid, "pClickedID");
		return callcmd::kick(playerid, params);
	}
	else
	{
		DeletePVar(playerid, "pClickedID");
		return 1;
	}

}
Dialog:DIALOG_PCP_BAN1(playerid, response, listitem, inputtext[])
{
	if(response)
	{
		new string[128];
		SetPVarInt(playerid, "pBanTime", strval(inputtext));
		format(string,sizeof(string),"Please enter the reason why you wish to ban this player:");
		Dialog_Show(playerid, DIALOG_PCP_BAN2, DIALOG_STYLE_INPUT, "{33CCFF}Player Control Panel :: Banning", string, "Ban", "Cancel");
	}
	else
	{
		DeletePVar(playerid, "pClickedID");
		DeletePVar(playerid, "pBanTime");
	}
	return 1;
}
Dialog:DIALOG_PCP_BAN2(playerid, response, listitem, inputtext[])
{
	if(response)
	{
		new params[158];
		format(params, sizeof(params), "%i %i %s", GetPVarInt(playerid, "pClickedID"), GetPVarInt(playerid, "pBanTime"), inputtext);
		DeletePVar(playerid, "pClickedID");
		DeletePVar(playerid, "pBanTime");
		return callcmd::ban(playerid, params);
	}
	else
	{
		DeletePVar(playerid, "pClickedID");
		DeletePVar(playerid, "pBanTime");
		return 1;
	}

}

Dialog:DIALOG_FOOD(playerid, response, listitem, inputtext[])
{
    if(response)
    {
        if(listitem == 0) //Sprunk
        {
            GivePlayerCash(playerid, -50);
            GivePlayerHealth(playerid, 25.0);
            ShowActionBubble(playerid, "* %s pays $50 to the vendor and receives a can of sprunk.", GetRPName(playerid));
        }
        else if(listitem == 1) //Burger
        {
            GivePlayerCash(playerid, -15);
            GivePlayerHealth(playerid, 10.0);
            ShowActionBubble(playerid, "* %s pays $15 to the vendor and receives a piece of burger.", GetRPName(playerid));
        }
        else if(listitem == 2) //Cigar
        {
            GivePlayerCash(playerid, -35);
            PlayerData[playerid][pCigars]++;
            ShowActionBubble(playerid, "* %s pays $35 to the vendor and receives a piece of cigar.", GetRPName(playerid));
        }
        else if(listitem == 3) //Hot dog
        {
            GivePlayerCash(playerid, -25);
            GivePlayerHealth(playerid, 17.0);
            ShowActionBubble(playerid, "* %s pays $25 to the vendor and receives a piece of hot dog.", GetRPName(playerid));
        }
   	    else if(listitem == 4) //Rope
        {
            GivePlayerCash(playerid, -20);
            PlayerData[playerid][pRope] += 2;
            ShowActionBubble(playerid, "* %s pays $20 to the vendor and receives 2 ropes.", GetRPName(playerid));
        }
        else if(listitem == 5) //Chocolate
        {
            GivePlayerCash(playerid, -15);
            GivePlayerHealth(playerid, 12.0);
            ShowActionBubble(playerid, "* %s pays $15 to the vendor and receives a bar of chocolate.", GetRPName(playerid));
        }
    }
    return 1;
}
Dialog:DIALOG_BLACKMARKET1(playerid, response, listitem, inputtext[])
{
    if(response)
    {
        if(listitem == 0)
        {
            GivePlayerWeaponEx(playerid, 24);
        }
        else if(listitem == 1)
        {
            GivePlayerWeaponEx(playerid, 29);
        }
        else if(listitem == 2)
        {
            GivePlayerWeaponEx(playerid, 33);
        }
        else if(listitem == 3)
        {
            GivePlayerWeaponEx(playerid, 30);
        }
	}
	return 1;
}
Dialog:DIALOG_BLACKMARKET2(playerid, response, listitem, inputtext[])
{
    if(response)
    {
		if(listitem == 0)
		{
            GivePlayerWeaponEx(playerid, 8);
        }
        else if(listitem == 1)
        {
            GivePlayerWeaponEx(playerid, 24);
        }
        else if(listitem == 2)
        {
            GivePlayerWeaponEx(playerid, 29);
        }
        else if(listitem == 3)
        {
            GivePlayerWeaponEx(playerid, 34);
        }
        else if(listitem == 4)
        {
            GivePlayerWeaponEx(playerid, 30);
        }
        else if(listitem == 5)
        {
            GivePlayerWeaponEx(playerid, 31);
        }
	}
	return 1;
}

Dialog:DIALOG_SETTINGS2(playerid, response, listitem, inputtext[])
{
    if(response)
    {
        switch(listitem)
        {
            case 0:
            {
			    if(!PlayerData[playerid][pTogglePM])
			    {
			        PlayerData[playerid][pTogglePM] = 1;
			        SendClientMessage(playerid, COLOR_AQUA, "PM toggled. You will no longer receive any private message from players.");
			    }
			    else
			    {
			        PlayerData[playerid][pTogglePM] = 0;
			        SendClientMessage(playerid, COLOR_AQUA, "PM enabled. You will now receive private message from players again.");
			    }
			    ShowDialogToPlayer(playerid, DIALOG_SETTINGS2);
            }
            case 1:
            {
			    if(!PlayerData[playerid][pDonator])
			    {
			        return SendClientMessage(playerid, COLOR_GREY, "You are not a VIP member and therefore cannot toggle this feature.");
				}

			    if(!PlayerData[playerid][pToggleVIP])
			    {
			        PlayerData[playerid][pToggleVIP] = 1;
			        SendClientMessage(playerid, COLOR_AQUA, "VIP chat toggled. You will no longer see any messages in VIP chat.");
			    }
			    else
			    {
			        PlayerData[playerid][pToggleVIP] = 0;
			        SendClientMessage(playerid, COLOR_AQUA, "VIP chat enabled. You will now see messages in VIP chat again.");
			    }
			    ShowDialogToPlayer(playerid, DIALOG_SETTINGS2);
            }
            case 2:
            {
			    if(PlayerData[playerid][pFaction] == -1)
			    {
			        return SendClientMessage(playerid, COLOR_GREY, "You are not apart of a faction and therefore can't toggle this chat.");
				}

			    if(!PlayerData[playerid][pToggleFaction])
			    {
			        PlayerData[playerid][pToggleFaction] = 1;
			        SendClientMessage(playerid, COLOR_AQUA, "Faction chat toggled. You will no longer see any messages in faction chat.");
			    }
			    else
			    {
			        PlayerData[playerid][pToggleFaction] = 0;
			        SendClientMessage(playerid, COLOR_AQUA, "Faction chat enabled. You will now see messages in faction chat again.");
			    }
			    ShowDialogToPlayer(playerid, DIALOG_SETTINGS2);
            }
            case 3:
            {
			    if(PlayerData[playerid][pGang] == -1)
			    {
			        return SendClientMessage(playerid, COLOR_GREY, "You are not a gang member and therefore can't toggle this chat.");
				}

			    if(!PlayerData[playerid][pToggleGang])
			    {
			        PlayerData[playerid][pToggleGang] = 1;
			        SendClientMessage(playerid, COLOR_AQUA, "Gang chat toggled. You will no longer see any messages in gang chat.");
			    }
			    else
			    {
			        PlayerData[playerid][pToggleGang] = 0;
			        SendClientMessage(playerid, COLOR_AQUA, "Gang chat enabled. You will now see messages in gang chat again.");
			    }
			    ShowDialogToPlayer(playerid, DIALOG_SETTINGS2);
            }
            case 4:
            {
			    if(!PlayerData[playerid][pToggleCam])
			    {
			        PlayerData[playerid][pToggleCam] = 1;
			        SendClientMessage(playerid, COLOR_AQUA, "Spawn camera toggled. You will no longer see the camera effects upon spawning.");
			    }
			    else
			    {
			        PlayerData[playerid][pToggleCam] = 0;
			        SendClientMessage(playerid, COLOR_AQUA, "Spawn camera enabled. You will now see the camera effects when you spawn again.");
			    }
			    ShowDialogToPlayer(playerid, DIALOG_SETTINGS2);
            }
            case 5:
            {
			    if(!PlayerData[playerid][pToggleHUD])
			    {
			        PlayerData[playerid][pToggleHUD] = 1;
			        SendClientMessage(playerid, COLOR_AQUA, "HUD toggled. You will no longer see your health & armor indicators.");

			        PlayerTextDrawHide(playerid, PlayerData[playerid][pArmorText]);
			        PlayerTextDrawHide(playerid, PlayerData[playerid][pHealthText]);

			    }
			    else
			    {
			        PlayerData[playerid][pToggleHUD] = 0;
			        SendClientMessage(playerid, COLOR_AQUA, "HUD enabled. You will now see your health & armor indicators again.");

			        PlayerTextDrawShow(playerid, PlayerData[playerid][pArmorText]);
			        PlayerTextDrawShow(playerid, PlayerData[playerid][pHealthText]);
			    }
			    ShowDialogToPlayer(playerid, DIALOG_SETTINGS2);
            }
            case 6:
            {
			    if(!PlayerData[playerid][pToggleVehCam])
			    {
			        PlayerData[playerid][pToggleVehCam] = 1;
			        SendClientMessage(playerid, COLOR_AQUA, "One Seat Driving Person toggled.");


			    }
			    else
			    {
			        PlayerData[playerid][pToggleVehCam] = 0;
			        SendClientMessage(playerid, COLOR_AQUA, "On Seat Driving Person enabled.");
			    }
			    ShowDialogToPlayer(playerid, DIALOG_SETTINGS2);
            }
            case 7: ShowDialogToPlayer(playerid, DIALOG_SETTINGS);
		}
	}
	return 1;
}
Dialog:DIALOG_SETTINGS(playerid, response, listitem, inputtext[])
{
	if(response)
	{
        switch(listitem)
        {
            case 0:
            {
			    if(!PlayerData[playerid][pToggleTextdraws])
			    {
			        PlayerTextDrawHide(playerid, PlayerData[playerid][pGPSText]);
			        PlayerTextDrawHide(playerid, PlayerData[playerid][pArmorText]);
			        PlayerTextDrawHide(playerid, PlayerData[playerid][pHealthText]);



			        TextDrawHideForPlayer(playerid, TimeTD);

			        PlayerData[playerid][pToggleTextdraws] = 1;
			        SendClientMessage(playerid, COLOR_AQUA, "Textdraws toggled. You will no longer see any textdraws.");
			    }
			    else
			    {
			        if(PlayerData[playerid][pGPSOn])
			        {
			            PlayerTextDrawShow(playerid, PlayerData[playerid][pGPSText]);
			        }
			        if(PlayerData[playerid][pWatchOn])
			        {
			            TextDrawShowForPlayer(playerid, TimeTD);
			        }
			        if(!PlayerData[playerid][pToggleHUD])
			        {
			            PlayerTextDrawShow(playerid, PlayerData[playerid][pArmorText]);
			            PlayerTextDrawShow(playerid, PlayerData[playerid][pHealthText]);
			        }


			        PlayerData[playerid][pToggleTextdraws] = 0;
			        SendClientMessage(playerid, COLOR_AQUA, "Textdraws enabled. You will now see textdraws again.");
			    }
			    ShowDialogToPlayer(playerid, DIALOG_SETTINGS);
            }
            case 1:
            {
			    if(!PlayerData[playerid][pToggleOOC])
			    {
			        PlayerData[playerid][pToggleOOC] = 1;
			        SendClientMessage(playerid, COLOR_AQUA, "OOC chat toggled. You will no longer see any messages in /o.");
			    }
			    else
			    {
			        PlayerData[playerid][pToggleOOC] = 0;
			        SendClientMessage(playerid, COLOR_AQUA, "OOC chat enabled. You will now see messages in /o again.");
			    }
			    ShowDialogToPlayer(playerid, DIALOG_SETTINGS);
            }
            case 2:
            {
			    if(!PlayerData[playerid][pToggleGlobal])
			    {
			        PlayerData[playerid][pToggleGlobal] = 1;
			        SendClientMessage(playerid, COLOR_AQUA, "Global chat toggled. You will no longer see any messages in /g.");
			    }
			    else
			    {
			        PlayerData[playerid][pToggleGlobal] = 0;
			        SendClientMessage(playerid, COLOR_AQUA, "Global chat enabled. You can now speak to other players in /g.");
			    }
			    ShowDialogToPlayer(playerid, DIALOG_SETTINGS);
            }
            case 3:
            {
			    if(!PlayerData[playerid][pTogglePhone])
			    {
			        if(PlayerData[playerid][pCallLine] != INVALID_PLAYER_ID)
			        {
			            return SendClientMessage(playerid, COLOR_GREY, "You can't do this while in a call.");
			        }

			        PlayerData[playerid][pTogglePhone] = 1;
			        SendClientMessage(playerid, COLOR_AQUA, "Phone toggled. You will no longer receive calls or texts.");
			    }
			    else
			    {
			        PlayerData[playerid][pTogglePhone] = 0;
			        SendClientMessage(playerid, COLOR_AQUA, "Phone enabled. You can now receive calls and texts again.");
			    }
			    ShowDialogToPlayer(playerid, DIALOG_SETTINGS);
            }
            case 4:
            {
			    if(!PlayerData[playerid][pToggleWhisper])
			    {
			        PlayerData[playerid][pToggleWhisper] = 1;
			        SendClientMessage(playerid, COLOR_AQUA, "Whispers toggled. You will no longer receive any whispers from players.");
			    }
			    else
			    {
			        PlayerData[playerid][pToggleWhisper] = 0;
			        SendClientMessage(playerid, COLOR_AQUA, "Whispers enabled. You will now receive whispers from players again.");
			    }
			    ShowDialogToPlayer(playerid, DIALOG_SETTINGS);
            }
            case 5:
            {
			    if(!PlayerData[playerid][pToggleNewbie])
			    {
			        PlayerData[playerid][pToggleNewbie] = 1;
			        SendClientMessage(playerid, COLOR_AQUA, "Newbie chat toggled. You will no longer see any messages in newbie chat.");
			    }
			    else
			    {
			        PlayerData[playerid][pToggleNewbie] = 0;
			        SendClientMessage(playerid, COLOR_AQUA, "Newbie chat enabled. You will now see messages in newbie chat again.");
			    }
			    ShowDialogToPlayer(playerid, DIALOG_SETTINGS);
            }
            case 6:
            {
			    if(!PlayerData[playerid][pPrivateRadio])
				{
			    	return SendClientMessage(playerid, COLOR_GREY, "You don't have a private radio.");
				}

			    if(!PlayerData[playerid][pTogglePR])
			    {
			        PlayerData[playerid][pTogglePR] = 1;
			        SendClientMessage(playerid, COLOR_AQUA, "Private radio toggled. You will no longer receive any messages on your private radio.");
			    }
			    else
			    {
			        PlayerData[playerid][pTogglePR] = 0;
			        SendClientMessage(playerid, COLOR_AQUA, "Private radio enabled. You will now receive messages on your private radio again.");
			    }
			    ShowDialogToPlayer(playerid, DIALOG_SETTINGS);
            }
            case 7:
			{
		 		if(PlayerData[playerid][pFaction] == -1)
			    {
			        return SendClientMessage(playerid, COLOR_GREY, "You are not apart of a faction and therefore can't toggle your radio.");
				}

			    if(!PlayerData[playerid][pToggleRadio])
			    {
			        PlayerData[playerid][pToggleRadio] = 1;
			        SendClientMessage(playerid, COLOR_AQUA, "Radio chat toggled. You will no longer receive any messages on your radio.");
			    }
			    else
			    {
			        PlayerData[playerid][pToggleRadio] = 0;
			        SendClientMessage(playerid, COLOR_AQUA, "Radio chat enabled. You will now receive messages on your radio again.");
			    }
			    ShowDialogToPlayer(playerid, DIALOG_SETTINGS);
			}
            case 8:
            {
			    if(!PlayerData[playerid][pToggleMusic])
			    {
			        PlayerData[playerid][pToggleMusic] = 1;
			        StopAudioStreamForPlayer(playerid);
			        SendClientMessage(playerid, COLOR_AQUA, "Music streams toggled. You will no longer hear any music played locally & globally.");
			    }
			    else
			    {
			        PlayerData[playerid][pToggleMusic] = 0;
			        SendClientMessage(playerid, COLOR_AQUA, "Music streams enabled. You will now hear music played locally & globally again.");
			    }
			    ShowDialogToPlayer(playerid, DIALOG_SETTINGS);
            }
            case 9:
            {
			    if(!PlayerData[playerid][pToggleNews])
			    {
			        PlayerData[playerid][pToggleNews] = 1;
			        SendClientMessage(playerid, COLOR_AQUA, "News chat toggled. You will no longer see any news broadcasts.");
			    }
			    else
			    {
			        PlayerData[playerid][pToggleNews] = 0;
			        SendClientMessage(playerid, COLOR_AQUA, "News chat enabled. You will now see news broadcasts again.");
			    }
			    ShowDialogToPlayer(playerid, DIALOG_SETTINGS);
            }
            case 10: ShowDialogToPlayer(playerid, DIALOG_SETTINGS2);
		}
	}
	return 1;
}
GetJobHelp(jobid){
	new string[152];
	for(new i=0;i<sizeof(jobLocations);i++){
		if(jobLocations[i][jobID] == jobid){
			if(!isnull(jobLocations[i][jobHelp]))
				format(string,sizeof(string),"** JOB ** %s.",jobLocations[i][jobHelp]);
			return string;
		}
	}
	return string;
}

Dialog:DIALOG_HELP(playerid, response, listitem, inputtext[])
{
	if(response)
	{
	    new sstring[2048];
		switch(listitem)
		{
		    case 0: // JOBS
		    {
		        format(sstring, sizeof(sstring), "{FFFFFF}Chat: /stats, /b, /g, /me, /do, /(o)oc, /(s)hout, /(l)ow, /(w)hisper, /(n)ewbie.");
		        Dialog_Show(playerid, DIALOG_HELP, DIALOG_STYLE_MSGBOX, "{FFFFFF}Commands", sstring, "Ok","");
		    }
		    case 1: // STORES
		    {
		        format(sstring, sizeof(sstring), "{FFFFFF}General: /pay, /id, /time, /report, /upgrade, /charity, /stopmusic, /joinevent, /quitevent.");
		    	strcat(sstring, "\n{FFFFFF}General: /dice, /flipcoin, /accent, /helpers, /helpme, /accept, /properties, /skill, /quitjob.");
		    	strcat(sstring, "\n{FFFFFF}General: /give, /sell, /toggle, /cancelcp, /afk, /(ad)vertise, /buy, /phone, /sms.");
		    	strcat(sstring, "\n{FFFFFF}General: /clothing, /locate, /frisk, /contract, /number, /boombox, /switchspeedo, /stuck.");
		    	strcat(sstring, "\n{FFFFFF}General: /shakehand, /dropgun, /grabgun, /usecookies, /usecigar, /usedrug, /showid.");
		    	strcat(sstring, "\n{FFFFFF}General: /(inv)entory, /guninv, /loadammo, /drop, /eject, /dicebet, /gangs, /factions.");
		    	strcat(sstring, "\n{FFFFFF}General: /calculate, /serverstats, /turfs, /lands, /changename, /watch, /gps, /fixmyvw.");
		    	Dialog_Show(playerid, DIALOG_HELP, DIALOG_STYLE_MSGBOX, "{FFFFFF}Commands", sstring, "Ok","");
		    }
		    case 2: // GENERAL LOCATIONS
		    {
		        format(sstring, sizeof(sstring), "{FFFFFF}UPGRADES: /resetupgrades, /myupgrades.");
		        Dialog_Show(playerid, DIALOG_HELP, DIALOG_STYLE_MSGBOX, "{FFFFFF}Commands", sstring, "Ok","");
		    }
			case 3: // Find Points
			{
                format(sstring, sizeof(sstring), "{FFFFFF}Other: /househelp, /garagehelp, /bizhelp, /jobhelp, /animhelp, /vehiclehelp, /viphelp, /rankhelp.");
                strcat(sstring, "\n{FFFFFF}Other: /bankhelp, /factionhelp, /ganghelp, /landhelp, /helperhelp.");
                Dialog_Show(playerid, DIALOG_HELP, DIALOG_STYLE_MSGBOX, "{FFFFFF}Commands", sstring, "Ok","");
			}
			case 4:
			{
				if(PlayerData[playerid][pGang] == -1)
				{
					return SendClientMessage(playerid, COLOR_GREY, "You can't use this command as you're not a gang member.");
				}

				format(sstring, sizeof(sstring), "** GANG ** /f /gang /gstash /gbackup /bandana /capture /claim /reclaim /turfinfo\n");
			    strcat(sstring, "** GANG ** /gbuyvehicle /gpark /gfindcar /grespawncars /gsellcar /gunmod /lock /endalliance /gspray\n");
			    strcat(sstring, "** CREW ** /managecrew /crew\n");
                Dialog_Show(playerid, DIALOG_HELP, DIALOG_STYLE_MSGBOX, "Help | Gang Commands", sstring, "Ok","");

			}//gang
			case 5:
			{
				if(PlayerData[playerid][pFaction] == -1)
				{
					return SendClientMessage(playerid, COLOR_GREY, "You can't use this command as you're not apart of any faction.");
				}

				format(sstring, sizeof(sstring), "** FACTION ** /fc /d /(r)adio /div /faction /division /locker /showbadge /(m)egaphone\n");

				switch(FactionInfo[PlayerData[playerid][pFaction]][fType])
				{
				    case FACTION_POLICE, FACTION_FEDERAL, FACTION_ARMY:
				    {
				        strcat(sstring, "** FACTION ** /gate /door /cell /tazer /cuff /uncuff /drag /detain /charge /arrest\n");
				        strcat(sstring, "** FACTION ** /wanted /frisk /take /ticket /gov /ram /deploy /undeploy /undeployall /backup\n");
				        strcat(sstring, "** FACTION ** /mdc /clearwanted /siren /badge /vticket /vfrisk /vtake /seizeplant /mir\n");

						if(FactionInfo[PlayerData[playerid][pFaction]][fType] == FACTION_FEDERAL)
							strcat(sstring, "** FACTION ** /listcallers /trackcall /cells /passport /callsign /bug /listbugs /tog bugged\n");
						else
						    strcat(sstring, "** FACTION ** /listcallers /trackcall /cells /claim /callsign\n");
					}
					case FACTION_MEDIC:
					{
					    strcat(sstring, "** FACTION ** /heal /drag /stretcher /deliverpt /getpt /listpt /injuries /deploy /undeploy /undeployall\n");
					    strcat(sstring, "** FACTION ** /badge /gov /backup /listcallers /trackcall /callsign\n");
					}
					case FACTION_NEWS:
					{
					    format(sstring, sizeof(sstring), "** FACTION ** /news /live /endlive /liveban /badge /addeposit /adwithdraw\n");
					}
					case FACTION_GOVERNMENT:
					{
					    strcat(sstring, "** FACTION ** /gov /settax /factionpay /tazer /cuff /uncuff /detain /taxdeposit /taxwithdraw\n");
					    strcat(sstring, "** FACTION ** /backup /badge\n");
					}
					case FACTION_HITMAN:
					{
					    strcat(sstring, "** FACTION ** /contracts /takehit /profile /passport /plantbomb /pickupbomb /detonate\n");
					    strcat(sstring, "** FACTION ** /hfind /noknife\n");
					}
				}
                Dialog_Show(playerid, DIALOG_HELP, DIALOG_STYLE_MSGBOX, "Help | Faction Commands", sstring, "Ok","");
			}//faction
			case 6:
			{
				if(!PlayerData[playerid][pDonator])
				{
					return SendClientMessage(playerid, COLOR_GREY, "You can't use this command as you don't have a VIP subscription.\n");
				}
			    format(sstring, sizeof(sstring), "** VIP ** /(v)ip /vipinfo /viptag /vipcolor /vipinvite /vipnumber /vipmusic\n");

				if(PlayerData[playerid][pDonator] == 3)
				{
				    strcat(sstring, "** VIP ** /repair /nos /hyd\n");
				}
                Dialog_Show(playerid, DIALOG_HELP, DIALOG_STYLE_MSGBOX, "Help | VIP Commands", sstring, "Ok","");

			}//vip
			case 7:
			{
				if(PlayerData[playerid][pJob] == JOB_NONE && PlayerData[playerid][pSecondJob] == JOB_NONE)
				{
					return SendClientMessage(playerid, COLOR_GREY, "You have no job and therefore no job commands to view.");
				}
				
				format(sstring, sizeof(sstring),"%s\n", GetJobHelp(PlayerData[playerid][pJob]));
				
				if(PlayerData[playerid][pSecondJob] != JOB_NONE)
				{
					strcat(sstring,GetJobHelp(PlayerData[playerid][pSecondJob]));
					strcat(sstring,"\n");
				}
				
                Dialog_Show(playerid, DIALOG_HELP, DIALOG_STYLE_MSGBOX, "Help | Job Commands", sstring, "Ok","");

			}//job
		}
	}
	return 1;
}
Dialog:DIALOG_STATS(playerid, response, listitem, inputtext[])
{
	if(response)
	{
	    switch(listitem)
	    {
	        case 0: DisplayStats(playerid);
	        case 1: DisplayInventory(playerid);
		}
	}
	return 1;
}



Dialog:DIALOG_BUYVEHICLENEW(playerid, response, listitem, inputtext[])
{
    if(response)
	{
	    switch(listitem)
	    {
			case 0: ShowVehicleSelectionMenu(playerid, MODEL_SELECTION_VEHICLES);
			case 1: ShowDialogToPlayer(playerid, DIALOG_BUYVEHICLE);
		}
	}
	return 1;
}


Dialog:DIALOG_NEWBIE(playerid, response, listitem, inputtext[])
{
	if(response)
	{
		new string[128];
		if(PlayerData[playerid][pAdmin] < JUNIOR_ADMIN && PlayerData[playerid][pHelper] == 0)
		{
	 		PlayerData[playerid][pLastNewbie] = gettime();
		}
		if(isnull(inputtext)) return SendClientMessageEx(playerid, COLOR_GREY, "You cannot send no question!");
		if(strlen(inputtext) > 110) return SendClientMessageEx(playerid, COLOR_GREY, "That message is too long!");
		format(string, sizeof(string), "{FF0000}New Question! {FFFFFF}%s(%d): %s", GetPlayerNameEx(playerid), playerid, inputtext);
		SendQuestionToStaff(COLOR_RED, string);
		SendQuestionToStaff(COLOR_WHITE, "* /nanswer (/na) to asnwer | /trashnewb (/tn) to trash *");
		SetPVarInt(playerid, "SendQuestion", 1);
		SetPVarString(playerid, "Question", inputtext);
		SendClientMessage(playerid, COLOR_WHITE, "Your question was successfully submitted, please wait. An helper will reply shortly.");

	}
	return 1;
}

Dialog:DIALOG_INTERIORS(playerid, response, listitem, inputtext[])
{
    if(response)
    {
        TeleportToCoords(playerid, interiorArray[listitem][intX], interiorArray[listitem][intY], interiorArray[listitem][intZ], interiorArray[listitem][intA], interiorArray[listitem][intID], GetPlayerVirtualWorld(playerid));
        GameTextForPlayer(playerid, "~w~Teleported", 5000, 1);
    }
    return 1;
}

Dialog:DIALOG_BUY(playerid, response, listitem, inputtext[])
{
    if(response && listitem >=0)
    {
        new businessid = GetInsideBusiness(playerid);
        if(businessid == -1)
        {
            return 1;
        }


        if(BusinessInfo[businessid][bType] == BUSINESS_STORE)
        {
            switch(listitem)
            {
                case 0:
                {
                 	new price = 600;

                    if(PlayerData[playerid][pCash] < price)
                    {
                        return SendClientMessage(playerid, COLOR_GREY, "You don't have enough money. You can't buy this.");
                    }

                    if(PlayerData[playerid][pTraderUpgrade] > 0)
                    {
						price -= percent(price, (PlayerData[playerid][pTraderUpgrade] * 10));
						SendClientMessageEx(playerid, COLOR_YELLOW3, "Trader Perk: Your level %i/3 trader perk reduced the price of this item to $%i.", PlayerData[playerid][pTraderUpgrade], price);
                    }

                    PlayerData[playerid][pPhone] = random(799999) + 199999;
                    GivePlayerCash(playerid, -price);

                    if(BusinessInfo[businessid][bProducts] > 0)
                    {
                        BusinessInfo[businessid][bCash] += price;
                        BusinessInfo[businessid][bProducts]--;

                        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE businesses SET cash = %i, products = %i WHERE id = %i", BusinessInfo[businessid][bCash], BusinessInfo[businessid][bProducts], BusinessInfo[businessid][bID]);
                        mysql_tquery(connectionID, queryBuffer);
                    }

                    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET phone = %i WHERE uid = %i", PlayerData[playerid][pPhone], PlayerData[playerid][pID]);
                    mysql_tquery(connectionID, queryBuffer);

                    ShowActionBubble(playerid, "* %s paid $%i to the shopkeeper and received a mobile phone.", GetRPName(playerid), price);
                    SendClientMessageEx(playerid, COLOR_WHITE, "Mobile phone purchased. Your new phone number is %i.", PlayerData[playerid][pPhone]);
				}
				case 1:
				{
				    new price = 300;

				    if(PlayerData[playerid][pCash] < price)
                    {
                        return SendClientMessage(playerid, COLOR_GREY, "You don't have enough money. You can't buy this.");
                    }
				    if(PlayerData[playerid][pPrivateRadio])
				    {
				        return SendClientMessage(playerid, COLOR_GREY, "You have a private radio already.");
				    }

				    if(PlayerData[playerid][pTraderUpgrade] > 0)
                    {
						price -= percent(price, (PlayerData[playerid][pTraderUpgrade] * 10));
						SendClientMessageEx(playerid, COLOR_YELLOW3, "Trader Perk: Your level %i/3 trader perk reduced the price of this item to $%i.", PlayerData[playerid][pTraderUpgrade], price);
                    }

				    PlayerData[playerid][pPrivateRadio] = 1;
                    GivePlayerCash(playerid, -price);

                    if(BusinessInfo[businessid][bProducts] > 0)
                    {
                        BusinessInfo[businessid][bCash] += price;
                        BusinessInfo[businessid][bProducts]--;

                        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE businesses SET cash = %i, products = %i WHERE id = %i", BusinessInfo[businessid][bCash], BusinessInfo[businessid][bProducts], BusinessInfo[businessid][bID]);
                        mysql_tquery(connectionID, queryBuffer);
                    }

                    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET walkietalkie = 1 WHERE uid = %i", PlayerData[playerid][pID]);
                    mysql_tquery(connectionID, queryBuffer);

                    ShowActionBubble(playerid, "* %s paid $%i to the shopkeeper and received a private radio.", GetRPName(playerid), price);
                    SendClientMessage(playerid, COLOR_WHITE, "Private radio purchased. Use /pr to speak and /setfreq to change the frequency.");
				}
				case 2:
				{
				    new price = 500;

				    if(PlayerData[playerid][pCash] < price)
                    {
                        return SendClientMessage(playerid, COLOR_GREY, "You don't have enough money. You can't buy this.");
                    }
				    if(PlayerData[playerid][pCigars] >= 20)
				    {
				        return SendClientMessage(playerid, COLOR_GREY, "You can't have more than 20 cigars.");
				    }

				    if(PlayerData[playerid][pTraderUpgrade] > 0)
                    {
						price -= percent(price, (PlayerData[playerid][pTraderUpgrade] * 10));
						SendClientMessageEx(playerid, COLOR_YELLOW3, "Trader Perk: Your level %i/3 trader perk reduced the price of this item to $%i.", PlayerData[playerid][pTraderUpgrade], price);
                    }

				    PlayerData[playerid][pCigars] += 10;
                    GivePlayerCash(playerid, -price);
                    
                    if(BusinessInfo[businessid][bProducts] > 0)
                    {
                        BusinessInfo[businessid][bCash] += price;
                        BusinessInfo[businessid][bProducts]--;

                        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE businesses SET cash = %i, products = %i WHERE id = %i", BusinessInfo[businessid][bCash], BusinessInfo[businessid][bProducts], BusinessInfo[businessid][bID]);
                        mysql_tquery(connectionID, queryBuffer);
                    }

                    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET cigars = %i WHERE uid = %i", PlayerData[playerid][pCigars], PlayerData[playerid][pID]);
                    mysql_tquery(connectionID, queryBuffer);

                    ShowActionBubble(playerid, "* %s paid $%i to the shopkeeper and received a pack of cigars.", GetRPName(playerid), price);
                    SendClientMessage(playerid, COLOR_WHITE, "Cigars purchased. Use /usecigar to smoke a cigar.");
				}
				case 3:
				{
				    new price = 100;

				    if(PlayerData[playerid][pCash] < price)
                    {
                        return SendClientMessage(playerid, COLOR_GREY, "You don't have enough money. You can't buy this.");
                    }
				    if(PlayerData[playerid][pSpraycans] + 10 > 20)
				    {
				        return SendClientMessage(playerid, COLOR_GREY, "You can't have more than 20 spraycans.");
				    }

				    if(PlayerData[playerid][pTraderUpgrade] > 0)
                    {
						price -= percent(price, (PlayerData[playerid][pTraderUpgrade] * 10));
						SendClientMessageEx(playerid, COLOR_YELLOW3, "Trader Perk: Your level %i/3 trader perk reduced the price of this item to $%i.", PlayerData[playerid][pTraderUpgrade], price);
                    }

				    PlayerData[playerid][pSpraycans] += 10;
                    GivePlayerCash(playerid, -price);

                    if(BusinessInfo[businessid][bProducts] > 0)
                    {
                        BusinessInfo[businessid][bCash] += price;
                        BusinessInfo[businessid][bProducts]--;

                        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE businesses SET cash = %i, products = %i WHERE id = %i", BusinessInfo[businessid][bCash], BusinessInfo[businessid][bProducts], BusinessInfo[businessid][bID]);
                        mysql_tquery(connectionID, queryBuffer);
                    }


                    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET spraycans = %i WHERE uid = %i", PlayerData[playerid][pSpraycans], PlayerData[playerid][pID]);
                    mysql_tquery(connectionID, queryBuffer);

                    ShowActionBubble(playerid, "* %s paid $%i to the shopkeeper and received 10 spraycans.", GetRPName(playerid), price);
                    SendClientMessage(playerid, COLOR_WHITE, "Spraycans purchased. Use /colorcar and /paintcar in a vehicle to use them.");
				}
			/*	case 4:
				{
				    new price = 200;

				    if(PlayerData[playerid][pCash] < price)
                    {
                        return SendClientMessage(playerid, COLOR_GREY, "You don't have enough money. You can't buy this.");
                    }
				    if(PlayerData[playerid][pPhonebook])
				    {
				        return SendClientMessage(playerid, COLOR_GREY, "You have a phonebook already.");
				    }

				    if(PlayerData[playerid][pTraderUpgrade] > 0)
                    {
						price -= percent(price, (PlayerData[playerid][pTraderUpgrade] * 10));
						SendClientMessageEx(playerid, COLOR_YELLOW3, "Trader Perk: Your level %i/3 trader perk reduced the price of this item to $%i.", PlayerData[playerid][pTraderUpgrade], price);
                    }

				    PlayerData[playerid][pPhonebook] = 1;
                    GivePlayerCash(playerid, -price);

                    if(BusinessInfo[businessid][bProducts] > 0)
                    {
                        BusinessInfo[businessid][bProducts]--;
                        BusinessInfo[businessid][bCash] += price;

                        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE businesses SET cash = %i, products = %i WHERE id = %i", BusinessInfo[businessid][bCash], BusinessInfo[businessid][bProducts], BusinessInfo[businessid][bID]);
                        mysql_tquery(connectionID, queryBuffer);
                    }

                    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET phonebook = 1 WHERE uid = %i", PlayerData[playerid][pID]);
                    mysql_tquery(connectionID, queryBuffer);

                    ShowActionBubble(playerid, "* %s paid $%i to the shopkeeper and received a phonebook.", GetRPName(playerid), price);
                    SendClientMessage(playerid, COLOR_WHITE, "Phonebook purchased. Use /number to lookup a player's number.");
				}*/
				case 4:
				{
				    new price = 200;

				    if(PlayerData[playerid][pCash] < price)
                    {
                        return SendClientMessage(playerid, COLOR_GREY, "You don't have enough money. You can't buy this.");
                    }

                    if(PlayerData[playerid][pTraderUpgrade] > 0)
                    {
						price -= percent(price, (PlayerData[playerid][pTraderUpgrade] * 10));
						SendClientMessageEx(playerid, COLOR_YELLOW3, "Trader Perk: Your level %i/3 trader perk reduced the price of this item to $%i.", PlayerData[playerid][pTraderUpgrade], price);
                    }

					GivePlayerWeaponEx(playerid, 43);
                    GivePlayerCash(playerid, -price);

                    if(BusinessInfo[businessid][bProducts] > 0)
                    {
                        BusinessInfo[businessid][bCash] += price;
                        BusinessInfo[businessid][bProducts]--;

                        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE businesses SET cash = %i, products = %i WHERE id = %i", BusinessInfo[businessid][bCash], BusinessInfo[businessid][bProducts], BusinessInfo[businessid][bID]);
                        mysql_tquery(connectionID, queryBuffer);
                    }

                    ShowActionBubble(playerid, "* %s paid $%i to the shopkeeper and received a camera.", GetRPName(playerid), price);
                    SendClientMessage(playerid, COLOR_WHITE, "Camera purchased.");
				}
				case 5:
				{
				    new price = 50;

				    if(PlayerData[playerid][pCash] < price)
                    {
                        return SendClientMessage(playerid, COLOR_GREY, "You don't have enough money. You can't buy this.");
                    }
				    if(PlayerData[playerid][pMP3Player])
				    {
				        return SendClientMessage(playerid, COLOR_GREY, "You have an MP3 player already.");
				    }

				    if(PlayerData[playerid][pTraderUpgrade] > 0)
                    {
						price -= percent(price, (PlayerData[playerid][pTraderUpgrade] * 10));
						SendClientMessageEx(playerid, COLOR_YELLOW3, "Trader Perk: Your level %i/3 trader perk reduced the price of this item to $%i.", PlayerData[playerid][pTraderUpgrade], price);
                    }

				    PlayerData[playerid][pMP3Player] = 1;
                    GivePlayerCash(playerid, -price);

                    if(BusinessInfo[businessid][bProducts] > 0)
                    {
                        BusinessInfo[businessid][bCash] += price;
                        BusinessInfo[businessid][bProducts]--;

                        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE businesses SET cash = %i, products = %i WHERE id = %i", BusinessInfo[businessid][bCash], BusinessInfo[businessid][bProducts], BusinessInfo[businessid][bID]);
                        mysql_tquery(connectionID, queryBuffer);
                    }


                    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET mp3player = 1 WHERE uid = %i", PlayerData[playerid][pID]);
                    mysql_tquery(connectionID, queryBuffer);

                    ShowActionBubble(playerid, "* %s paid $%i to the shopkeeper and received an MP3 player.", GetRPName(playerid), price);
                    SendClientMessage(playerid, COLOR_WHITE, "MP3 player purchased. Use /mp3 for a list of options.");
				}
				case 6:
				{
				    new price = 50;

				    if(PlayerData[playerid][pCash] < price)
                    {
                        return SendClientMessage(playerid, COLOR_GREY, "You don't have enough money. You can't buy this.");
                    }
				    if(PlayerData[playerid][pFishingRod])
				    {
				        return SendClientMessage(playerid, COLOR_GREY, "You have a fishing rod already.");
				    }

				    if(PlayerData[playerid][pTraderUpgrade] > 0)
                    {
						price -= percent(price, (PlayerData[playerid][pTraderUpgrade] * 10));
						SendClientMessageEx(playerid, COLOR_YELLOW3, "Trader Perk: Your level %i/3 trader perk reduced the price of this item to $%i.", PlayerData[playerid][pTraderUpgrade], price);
                    }

				    PlayerData[playerid][pFishingRod] = 1;
                    GivePlayerCash(playerid, -price);

                    if(BusinessInfo[businessid][bProducts] > 0)
                    {
                        BusinessInfo[businessid][bCash] += price;
                        BusinessInfo[businessid][bProducts]--;

                        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE businesses SET cash = %i, products = %i WHERE id = %i", BusinessInfo[businessid][bCash], BusinessInfo[businessid][bProducts], BusinessInfo[businessid][bID]);
                        mysql_tquery(connectionID, queryBuffer);
                    }

                    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET fishingrod = 1 WHERE uid = %i", PlayerData[playerid][pID]);
                    mysql_tquery(connectionID, queryBuffer);

                    ShowActionBubble(playerid, "* %s paid $%i to the shopkeeper and received a fishing rod.", GetRPName(playerid), price);
                    SendClientMessage(playerid, COLOR_WHITE, "Fishing rod purchased. Use /fish at the pier or in a boat to begin fishing.");
				}
				case 7:
				{
				    new price = 300;

				    if(PlayerData[playerid][pCash] < price)
                    {
                        return SendClientMessage(playerid, COLOR_GREY, "You don't have enough money. You can't buy this.");
                    }
				    if(PlayerData[playerid][pFishingBait] + 10 > 20)
				    {
				        return SendClientMessage(playerid, COLOR_GREY, "You can't have more than 20 pieces of bait.");
				    }

				    if(PlayerData[playerid][pTraderUpgrade] > 0)
                    {
						price -= percent(price, (PlayerData[playerid][pTraderUpgrade] * 10));
						SendClientMessageEx(playerid, COLOR_YELLOW3, "Trader Perk: Your level %i/3 trader perk reduced the price of this item to $%i.", PlayerData[playerid][pTraderUpgrade], price);
                    }

				    PlayerData[playerid][pFishingBait] += 10;
                    GivePlayerCash(playerid, -price);
                    
                    if(BusinessInfo[businessid][bProducts] > 0)
                    {
                        BusinessInfo[businessid][bCash] += price;
                        BusinessInfo[businessid][bProducts]--;

                        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE businesses SET cash = %i, products = %i WHERE id = %i", BusinessInfo[businessid][bCash], BusinessInfo[businessid][bProducts], BusinessInfo[businessid][bID]);
                        mysql_tquery(connectionID, queryBuffer);
                        
                    }

                    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET fishingbait = %i WHERE uid = %i", PlayerData[playerid][pFishingBait], PlayerData[playerid][pID]);
                    mysql_tquery(connectionID, queryBuffer);

                    ShowActionBubble(playerid, "* %s paid $%i to the shopkeeper and received fish bait.", GetRPName(playerid), price);
                    SendClientMessage(playerid, COLOR_WHITE, "Fishing bait purchased. Bait increases the odds of catching bigger fish.");
				}
				case 8:
				{
				    new price = 300;

				    if(PlayerData[playerid][pCash] < price)
                    {
                        return SendClientMessage(playerid, COLOR_GREY, "You don't have enough money. You can't buy this.");
                    }
				    if(PlayerData[playerid][pMuriaticAcid] + 1 > 10)
				    {
				        return SendClientMessage(playerid, COLOR_GREY, "You can't have more than 10 bottles of muriatic acid.");
				    }

				    if(PlayerData[playerid][pTraderUpgrade] > 0)
                    {
						price -= percent(price, (PlayerData[playerid][pTraderUpgrade] * 10));
						SendClientMessageEx(playerid, COLOR_YELLOW3, "Trader Perk: Your level %i/3 trader perk reduced the price of this item to $%i.", PlayerData[playerid][pTraderUpgrade], price);
                    }

				    PlayerData[playerid][pMuriaticAcid] += 1;
                    GivePlayerCash(playerid, -price);

                    if(BusinessInfo[businessid][bProducts] > 0)
                    {
                        BusinessInfo[businessid][bCash] += price;
                        BusinessInfo[businessid][bProducts]--;

                        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE businesses SET cash = %i, products = %i WHERE id = %i", BusinessInfo[businessid][bCash], BusinessInfo[businessid][bProducts], BusinessInfo[businessid][bID]);
                        mysql_tquery(connectionID, queryBuffer);
                    }
                    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET muriaticacid = %i WHERE uid = %i", PlayerData[playerid][pMuriaticAcid], PlayerData[playerid][pID]);
                    mysql_tquery(connectionID, queryBuffer);

                    ShowActionBubble(playerid, "* %s paid $%i to the shopkeeper and received a bottle of muriatic acid.", GetRPName(playerid), price);
                    SendClientMessage(playerid, COLOR_WHITE, "Muriatic acid purchased.");
				}
				case 9:
				{
				    new price = 30;

				    if(PlayerData[playerid][pCash] < price)
                    {
                        return SendClientMessage(playerid, COLOR_GREY, "You don't have enough money. You can't buy this.");
                    }
				    if(PlayerData[playerid][pBakingSoda] + 1 > 3)
				    {
				        return SendClientMessage(playerid, COLOR_GREY, "You can't have more than 3 bottles of baking soda.");
				    }

				    if(PlayerData[playerid][pTraderUpgrade] > 0)
                    {
						price -= percent(price, (PlayerData[playerid][pTraderUpgrade] * 10));
						SendClientMessageEx(playerid, COLOR_YELLOW3, "Trader Perk: Your level %i/3 trader perk reduced the price of this item to $%i.", PlayerData[playerid][pTraderUpgrade], price);
                    }

				    PlayerData[playerid][pBakingSoda] += 1;
                    GivePlayerCash(playerid, -price);

                    if(BusinessInfo[businessid][bProducts] > 0)
                    {
                        BusinessInfo[businessid][bCash] += price;
                        BusinessInfo[businessid][bProducts]--;

                        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE businesses SET cash = %i, products = %i WHERE id = %i", BusinessInfo[businessid][bCash], BusinessInfo[businessid][bProducts], BusinessInfo[businessid][bID]);
                        mysql_tquery(connectionID, queryBuffer);
                    }

                    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET bakingsoda = %i WHERE uid = %i", PlayerData[playerid][pBakingSoda], PlayerData[playerid][pID]);
                    mysql_tquery(connectionID, queryBuffer);

                    ShowActionBubble(playerid, "* %s paid $%i to the shopkeeper and received a bottle of baking soda.", GetRPName(playerid), price);
                    SendClientMessage(playerid, COLOR_WHITE, "Baking soda purchased.");
				}
				case 10:
				{
				    new price = 600;

				    if(PlayerData[playerid][pCash] < price)
                    {
                        return SendClientMessage(playerid, COLOR_GREY, "You don't have enough money. You can't buy this.");
                    }
				    if(PlayerData[playerid][pWatch])
				    {
				        return SendClientMessage(playerid, COLOR_GREY, "You have a pocket watch already.");
				    }

				    if(PlayerData[playerid][pTraderUpgrade] > 0)
                    {
						price -= percent(price, (PlayerData[playerid][pTraderUpgrade] * 10));
						SendClientMessageEx(playerid, COLOR_YELLOW3, "Trader Perk: Your level %i/3 trader perk reduced the price of this item to $%i.", PlayerData[playerid][pTraderUpgrade], price);
                    }

				    PlayerData[playerid][pWatch] = 1;
                    GivePlayerCash(playerid, -price);

                    
                    if(BusinessInfo[businessid][bProducts] > 0)
                    {
                        BusinessInfo[businessid][bCash] += price;
                        BusinessInfo[businessid][bProducts]--;

                        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE businesses SET cash = %i, products = %i WHERE id = %i", BusinessInfo[businessid][bCash], BusinessInfo[businessid][bProducts], BusinessInfo[businessid][bID]);
                        mysql_tquery(connectionID, queryBuffer);
                    }

                    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET watch = 1 WHERE uid = %i", PlayerData[playerid][pID]);
                    mysql_tquery(connectionID, queryBuffer);

                    ShowActionBubble(playerid, "* %s paid $%i to the shopkeeper and received a pocket watch.", GetRPName(playerid), price);
                    SendClientMessage(playerid, COLOR_WHITE, "Pocket watch purchased. Use /watch to toggle it.");
				}
				case 11:
				{
				    new price = 150;

				    if(PlayerData[playerid][pCash] < price)
                    {
                        return SendClientMessage(playerid, COLOR_GREY, "You don't have enough money. You can't buy this.");
                    }
				    if(PlayerData[playerid][pGPS])
				    {
				        return SendClientMessage(playerid, COLOR_GREY, "You have a GPS already.");
				    }

				    if(PlayerData[playerid][pTraderUpgrade] > 0)
                    {
						price -= percent(price, (PlayerData[playerid][pTraderUpgrade] * 10));
						SendClientMessageEx(playerid, COLOR_YELLOW3, "Trader Perk: Your level %i/3 trader perk reduced the price of this item to $%i.", PlayerData[playerid][pTraderUpgrade], price);
                    }

				    PlayerData[playerid][pGPS] = 1;
                    GivePlayerCash(playerid, -price);

                    if(BusinessInfo[businessid][bProducts] > 0)
                    {
                        BusinessInfo[businessid][bCash] += price;
                        BusinessInfo[businessid][bProducts]--;

                        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE businesses SET cash = %i, products = %i WHERE id = %i", BusinessInfo[businessid][bCash], BusinessInfo[businessid][bProducts], BusinessInfo[businessid][bID]);
                        mysql_tquery(connectionID, queryBuffer);
                    }

                    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET gps = 1 WHERE uid = %i", PlayerData[playerid][pID]);
                    mysql_tquery(connectionID, queryBuffer);

                    ShowActionBubble(playerid, "* %s paid $%i to the shopkeeper and received a GPS.", GetRPName(playerid), price);
                    SendClientMessage(playerid, COLOR_WHITE, "GPS purchased. Use /gps to toggle it.");
				}
				case 12:
				{
				    new price = 70;

				    if(PlayerData[playerid][pCash] < price)
                    {
                        return SendClientMessage(playerid, COLOR_GREY, "You don't have enough money. You can't buy this.");
                    }

				    if(PlayerData[playerid][pGasCan] + 5 > GetPlayerCapacity(playerid, CAPACITY_GAZCAN))
				    {
				        return SendClientMessageEx(playerid, COLOR_GREY, "You can't have more than %i liters of gas.", GetPlayerCapacity(playerid, CAPACITY_GAZCAN));
				    }

				    if(PlayerData[playerid][pTraderUpgrade] > 0)
                    {
						price -= percent(price, (PlayerData[playerid][pTraderUpgrade] * 10));
						SendClientMessageEx(playerid, COLOR_YELLOW3, "Trader Perk: Your level %i/3 trader perk reduced the price of this item to $%i.", PlayerData[playerid][pTraderUpgrade], price);
                    }

				    PlayerData[playerid][pGasCan] += 5;
                    GivePlayerCash(playerid, -price);


                    if(BusinessInfo[businessid][bProducts] > 0)
                    {
                        BusinessInfo[businessid][bCash] += price;
                        BusinessInfo[businessid][bProducts]--;

                        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE businesses SET cash = %i, products = %i WHERE id = %i", BusinessInfo[businessid][bCash], BusinessInfo[businessid][bProducts], BusinessInfo[businessid][bID]);
                        mysql_tquery(connectionID, queryBuffer);
                    }

                    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET gascan = %i WHERE uid = %i", PlayerData[playerid][pGasCan], PlayerData[playerid][pID]);
                    mysql_tquery(connectionID, queryBuffer);

                    ShowActionBubble(playerid, "* %s paid $%i to the shopkeeper and received 5 liters of gasoline.", GetRPName(playerid), price);
                    SendClientMessage(playerid, COLOR_WHITE, "Gas can purchased. Use /gascan in a vehicle to refill its fuel.");
				}
				case 13:
				{
				    new price = 40;

				    if(PlayerData[playerid][pCash] < price)
                    {
                        return SendClientMessage(playerid, COLOR_GREY, "You don't have enough money. You can't buy this.");
                    }
				    if(PlayerData[playerid][pRope] + 2 > 10)
				    {
				        return SendClientMessage(playerid, COLOR_GREY, "You can't have more than 10 ropes.");
				    }

				    if(PlayerData[playerid][pTraderUpgrade] > 0)
                    {
						price -= percent(price, (PlayerData[playerid][pTraderUpgrade] * 10));
						SendClientMessageEx(playerid, COLOR_YELLOW3, "Trader Perk: Your level %i/3 trader perk reduced the price of this item to $%i.", PlayerData[playerid][pTraderUpgrade], price);
                    }

				    PlayerData[playerid][pRope] += 2;
                    GivePlayerCash(playerid, -price);


                    if(BusinessInfo[businessid][bProducts] > 0)
                    {
                        BusinessInfo[businessid][bCash] += price;
                        BusinessInfo[businessid][bProducts]--;

                        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE businesses SET cash = %i, products = %i WHERE id = %i", BusinessInfo[businessid][bCash], BusinessInfo[businessid][bProducts], BusinessInfo[businessid][bID]);
                        mysql_tquery(connectionID, queryBuffer);
                    }

                    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET rope = %i WHERE uid = %i", PlayerData[playerid][pRope], PlayerData[playerid][pID]);
                    mysql_tquery(connectionID, queryBuffer);

                    ShowActionBubble(playerid, "* %s paid $%i to the shopkeeper and received 2 ropes.", GetRPName(playerid), price);
                    SendClientMessage(playerid, COLOR_WHITE, "Ropes purchased. Use /tie to tie people in your vehicle.");
				}
				case 14:
				{
				    new price = 300;

				    if(PlayerData[playerid][pCash] < price)
                    {
                        return SendClientMessage(playerid, COLOR_GREY, "You don't have enough money. You can't buy this.");
                    }
				    if(PlayerData[playerid][pBoombox] == 1)
				    {
				        return SendClientMessage(playerid, COLOR_GREY, "You already own a boombox.");
				    }

				    if(PlayerData[playerid][pTraderUpgrade] > 0)
                    {
						price -= percent(price, (PlayerData[playerid][pTraderUpgrade] * 10));
						SendClientMessageEx(playerid, COLOR_YELLOW3, "Trader Perk: Your level %i/3 trader perk reduced the price of this item to $%i.", PlayerData[playerid][pTraderUpgrade], price);
                    }

				    PlayerData[playerid][pBoombox] = 1;
                    GivePlayerCash(playerid, -price);


                    if(BusinessInfo[businessid][bProducts] > 0)
                    {
                        BusinessInfo[businessid][bCash] += price;
                        BusinessInfo[businessid][bProducts]--;

                        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE businesses SET cash = %i, products = %i WHERE id = %i", BusinessInfo[businessid][bCash], BusinessInfo[businessid][bProducts], BusinessInfo[businessid][bID]);
                        mysql_tquery(connectionID, queryBuffer);
                    }

                    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET boombox = %i WHERE uid = %i", PlayerData[playerid][pBoombox], PlayerData[playerid][pID]);
                    mysql_tquery(connectionID, queryBuffer);

                    ShowActionBubble(playerid, "* %s paid $%i to the shopkeeper and received a boombox.", GetRPName(playerid), price);
                    SendClientMessage(playerid, COLOR_WHITE, "Boombox purchased. Use /boombox for more information.");
				}
				case 15:
				{
				    new price = 30;

				    if(PlayerData[playerid][pCash] < price)
                    {
                        return SendClientMessage(playerid, COLOR_GREY, "You don't have enough money. You can't buy this.");
                    }
				    if(PlayerData[playerid][pBlindfold] + 2 > 10)
				    {
				        return SendClientMessage(playerid, COLOR_GREY, "You can't have more than 10 blindfolds.");
				    }

				    if(PlayerData[playerid][pTraderUpgrade] > 0)
                    {
						price -= percent(price, (PlayerData[playerid][pTraderUpgrade] * 10));
						SendClientMessageEx(playerid, COLOR_YELLOW3, "Trader Perk: Your level %i/3 trader perk reduced the price of this item to $%i.", PlayerData[playerid][pTraderUpgrade], price);
                    }

				    PlayerData[playerid][pBlindfold] += 2;
                    GivePlayerCash(playerid, -price);


                    if(BusinessInfo[businessid][bProducts] > 0)
                    {
                        BusinessInfo[businessid][bCash] += price;
                        BusinessInfo[businessid][bProducts]--;

                        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE businesses SET cash = %i, products = %i WHERE id = %i", BusinessInfo[businessid][bCash], BusinessInfo[businessid][bProducts], BusinessInfo[businessid][bID]);
                        mysql_tquery(connectionID, queryBuffer);
                    }

                    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET blindfold = %i WHERE uid = %i", PlayerData[playerid][pBlindfold], PlayerData[playerid][pID]);
                    mysql_tquery(connectionID, queryBuffer);

                    ShowActionBubble(playerid, "* %s paid $%i to the shopkeeper and received 2 blindfolds.", GetRPName(playerid), price);
                    SendClientMessage(playerid, COLOR_WHITE, "2 blindfolds purchased. Use /blindfold to blind people in your vehicle.");
				}
				case 16:
				{
				    new price = 250;

				    if(PlayerData[playerid][pCash] < price)
                    {
                        return SendClientMessage(playerid, COLOR_GREY, "You don't have enough money. You can't buy this.");
                    }
				    if(PlayerData[playerid][pPhonebook])
				    {
				        return SendClientMessage(playerid, COLOR_GREY, "You already have a phonebook.");
				    }


				    PlayerData[playerid][pPhonebook]= 1;
                    GivePlayerCash(playerid, -price);


                    if(BusinessInfo[businessid][bProducts] > 0)
                    {
                        BusinessInfo[businessid][bCash] += price;
                        BusinessInfo[businessid][bProducts]--;

                        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE businesses SET cash = %i, products = %i WHERE id = %i", BusinessInfo[businessid][bCash], BusinessInfo[businessid][bProducts], BusinessInfo[businessid][bID]);
                        mysql_tquery(connectionID, queryBuffer);
                    }

                    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET phonebook = %i WHERE uid = %i", PlayerData[playerid][pPhonebook], PlayerData[playerid][pID]);
                    mysql_tquery(connectionID, queryBuffer);

                    ShowActionBubble(playerid, "* %s paid $%i to the phonebook.", GetRPName(playerid), price);
                    SendClientMessage(playerid, COLOR_WHITE, "Now you have phonebook use /number to get player number.");
				}
			}
		}
		else if(BusinessInfo[businessid][bType] == BUSINESS_GUNSHOP)
		{
		    if(PlayerData[playerid][pGunLicense] == 0)
		    {
		        return SendClientMessage(playerid, COLOR_GREY, "You don't have a gun license, you may request that on our forums");
			}
		    if(PlayerData[playerid][pLevel] < MINIMAL_LEVEL_FOR_HAVING_GUNS || PlayerData[playerid][pWeaponRestricted])
		    {
		        return SendClientMessageEx(playerid, COLOR_GREY, "You are either weapon restricted or you are less than level %d. You can't buy stuff here.", MINIMAL_LEVEL_FOR_HAVING_GUNS);
			}

		    switch(listitem)
			{
		        case 0:
		        {
		            new price = 15000;

		            if(PlayerData[playerid][pCash] < price)
                    {
                        return SendClientMessage(playerid, COLOR_GREY, "You don't have enough money. You can't buy this.");
                    }
                    if(PlayerHasWeapon(playerid, 22))
                    {
                        return SendClientMessage(playerid, COLOR_GREY, "You have this weapon already.");
					}

					if(PlayerData[playerid][pTraderUpgrade] > 0)
                    {
						price -= percent(price, (PlayerData[playerid][pTraderUpgrade] * 10));
						SendClientMessageEx(playerid, COLOR_YELLOW3, "Trader Perk: Your level %i/3 trader perk reduced the price of this item to $%i.", PlayerData[playerid][pTraderUpgrade], price);
                    }

                    GivePlayerCash(playerid, -price);
                    GivePlayerWeaponEx(playerid, 22);


                    if(BusinessInfo[businessid][bProducts] > 0)
                    {
                        BusinessInfo[businessid][bCash] += price;
                        BusinessInfo[businessid][bProducts]--;

                        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE businesses SET cash = %i, products = %i WHERE id = %i", BusinessInfo[businessid][bCash], BusinessInfo[businessid][bProducts], BusinessInfo[businessid][bID]);
                        mysql_tquery(connectionID, queryBuffer);
                    }

                    ShowActionBubble(playerid, "* %s paid $%i to the shopkeeper and received a 9mm pistol.", GetRPName(playerid), price);
                    SendClientMessage(playerid, COLOR_WHITE, "9mm pistol purchased.");
		        }
		        case 1:
		        {
		            new price = 25000;

		            if(PlayerData[playerid][pCash] < price)
                    {
                        return SendClientMessage(playerid, COLOR_GREY, "You don't have enough money. You can't buy this.");
                    }
                    if(PlayerHasWeapon(playerid, 25))
                    {
                        return SendClientMessage(playerid, COLOR_GREY, "You have this weapon already.");
					}

					if(PlayerData[playerid][pTraderUpgrade] > 0)
                    {
						price -= percent(price, (PlayerData[playerid][pTraderUpgrade] * 10));
						SendClientMessageEx(playerid, COLOR_YELLOW3, "Trader Perk: Your level %i/3 trader perk reduced the price of this item to $%i.", PlayerData[playerid][pTraderUpgrade], price);
                    }

                    GivePlayerCash(playerid, -price);
                    GivePlayerWeaponEx(playerid, 25);


                    if(BusinessInfo[businessid][bProducts] > 0)
                    {
                        BusinessInfo[businessid][bCash] += price;
                        BusinessInfo[businessid][bProducts]--;

                        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE businesses SET cash = %i, products = %i WHERE id = %i", BusinessInfo[businessid][bCash], BusinessInfo[businessid][bProducts], BusinessInfo[businessid][bID]);
                        mysql_tquery(connectionID, queryBuffer);
                    }

                    ShowActionBubble(playerid, "* %s paid $%i to the shopkeeper and received a shotgun.", GetRPName(playerid), price);
                    SendClientMessage(playerid, COLOR_WHITE, "Shotgun purchased.");
		        }
		        case 2:
		        {
		            new price = 40000;

		            if(PlayerData[playerid][pCash] < price)
                    {
                        return SendClientMessage(playerid, COLOR_GREY, "You don't have enough money. You can't buy this.");
                    }
                    if(PlayerHasWeapon(playerid, 33))
                    {
                        return SendClientMessage(playerid, COLOR_GREY, "You have this weapon already.");
					}

					if(PlayerData[playerid][pTraderUpgrade] > 0)
                    {
						price -= percent(price, (PlayerData[playerid][pTraderUpgrade] * 10));
						SendClientMessageEx(playerid, COLOR_YELLOW3, "Trader Perk: Your level %i/3 trader perk reduced the price of this item to $%i.", PlayerData[playerid][pTraderUpgrade], price);
                    }

                    GivePlayerCash(playerid, -price);
                    GivePlayerWeaponEx(playerid, 33);


                    if(BusinessInfo[businessid][bProducts] > 0)
                    {
                        BusinessInfo[businessid][bCash] += price;
                        BusinessInfo[businessid][bProducts]--;

                        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE businesses SET cash = %i, products = %i WHERE id = %i", BusinessInfo[businessid][bCash], BusinessInfo[businessid][bProducts], BusinessInfo[businessid][bID]);
                        mysql_tquery(connectionID, queryBuffer);
                    }

                    ShowActionBubble(playerid, "* %s paid $%i to the shopkeeper and received a country rifle.", GetRPName(playerid), price);
                    SendClientMessage(playerid, COLOR_WHITE, "Country rifle purchased.");
		        }
		        case 3:
		        {
		            new price = 15000;

		            if(PlayerData[playerid][pCash] < price)
                    {
                        return SendClientMessage(playerid, COLOR_GREY, "You don't have enough money. You can't buy this.");
                    }

					if(PlayerData[playerid][pTraderUpgrade] > 0)
                    {
						price -= percent(price, (PlayerData[playerid][pTraderUpgrade] * 10));
						SendClientMessageEx(playerid, COLOR_YELLOW3, "Trader Perk: Your level %i/3 trader perk reduced the price of this item to $%i.", PlayerData[playerid][pTraderUpgrade], price);
                    }

                    SetScriptArmour(playerid, 25.0);
                    GivePlayerCash(playerid, -price);


                    if(BusinessInfo[businessid][bProducts] > 0)
                    {
                        BusinessInfo[businessid][bCash] += price;
                        BusinessInfo[businessid][bProducts]--;

                        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE businesses SET cash = %i, products = %i WHERE id = %i", BusinessInfo[businessid][bCash], BusinessInfo[businessid][bProducts], BusinessInfo[businessid][bID]);
                        mysql_tquery(connectionID, queryBuffer);
                    }

                    ShowActionBubble(playerid, "* %s paid $%i to the shopkeeper and received light armor.", GetRPName(playerid), price);
                    SendClientMessage(playerid, COLOR_WHITE, "Light armor of 35 armor points purchased.");
		        }
		        case 4:
		        {
		            new price = 25000;

		            if(PlayerData[playerid][pCash] < price)
                    {
                        return SendClientMessage(playerid, COLOR_GREY, "You don't have enough money. You can't buy this.");
                    }

					if(PlayerData[playerid][pTraderUpgrade] > 0)
                    {
						price -= percent(price, (PlayerData[playerid][pTraderUpgrade] * 10));
						SendClientMessageEx(playerid, COLOR_YELLOW3, "Trader Perk: Your level %i/3 trader perk reduced the price of this item to $%i.", PlayerData[playerid][pTraderUpgrade], price);
                    }

                    SetScriptArmour(playerid, 50.0);
                    GivePlayerCash(playerid, -price);


                    if(BusinessInfo[businessid][bProducts] > 0)
                    {
                        BusinessInfo[businessid][bCash] += price;
                        BusinessInfo[businessid][bProducts]--;

                        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE businesses SET cash = %i, products = %i WHERE id = %i", BusinessInfo[businessid][bCash], BusinessInfo[businessid][bProducts], BusinessInfo[businessid][bID]);
                        mysql_tquery(connectionID, queryBuffer);
                    }

                    ShowActionBubble(playerid, "* %s paid $%i to the shopkeeper and received medium armor.", GetRPName(playerid), price);
                    SendClientMessage(playerid, COLOR_WHITE, "Light armor of 60 armor points purchased.");
		        }
			}
		}
		else if(BusinessInfo[businessid][bType] == BUSINESS_CLOTHES)
		{
		    new
				string[128];

            format(string, sizeof(string), "%s's %s [%i products]", BusinessInfo[businessid][bOwner], bizInteriors[BusinessInfo[businessid][bType]][intType], BusinessInfo[businessid][bProducts]);

		    if(listitem == 0)
			{
		        ShowPlayerSelectionMenu(playerid, MODEL_SELECTION_CLOTHES, "Clothes Shop", clothesShopSkins, sizeof(clothesShopSkins));		
			}
			else if(listitem > 0)
			{
				PlayerData[playerid][pCategory] = listitem - 1;
				ShowDialogToPlayer(playerid, DIALOG_BUYCLOTHINGTYPE);
		    }
		}
		else if(BusinessInfo[businessid][bType] == BUSINESS_GYM)
		{
		    switch(listitem)
		    {
		        case 0:
		        {
                    if(PlayerData[playerid][pFightStyle] == FIGHT_STYLE_NORMAL)
                    {
                        return SendClientMessage(playerid, COLOR_GREY, "You already have this fighting style.");
                    }

                    PlayerData[playerid][pFightStyle] = FIGHT_STYLE_NORMAL;
                    SetPlayerFightingStyle(playerid, PlayerData[playerid][pFightStyle]);

					mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET fightstyle = %i WHERE uid = %i", PlayerData[playerid][pFightStyle], PlayerData[playerid][pID]);
                    mysql_tquery(connectionID, queryBuffer);

                    SendClientMessage(playerid, COLOR_WHITE, "You have chosen the normal fighting style.");
				}
				case 1:
				{
				    new price = 4725;

				    if(PlayerData[playerid][pCash] < price)
                    {
                        return SendClientMessage(playerid, COLOR_GREY, "You don't have enough money. You can't buy this.");
                    }
                    if(PlayerData[playerid][pFightStyle] == FIGHT_STYLE_BOXING)
                    {
                        return SendClientMessage(playerid, COLOR_GREY, "You already have this fighting style.");
                    }

					if(PlayerData[playerid][pTraderUpgrade] > 0)
                    {
						price -= percent(price, (PlayerData[playerid][pTraderUpgrade] * 10));
						SendClientMessageEx(playerid, COLOR_YELLOW3, "Trader Perk: Your level %i/3 trader perk reduced the price of this item to $%i.", PlayerData[playerid][pTraderUpgrade], price);
                    }

                    GivePlayerCash(playerid, -price);
                    

                    if(BusinessInfo[businessid][bProducts] > 0)
                    {
                        BusinessInfo[businessid][bCash] += price;
                        BusinessInfo[businessid][bProducts]--;
                        
                        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE businesses SET cash = %i, products = %i WHERE id = %i", BusinessInfo[businessid][bCash], BusinessInfo[businessid][bProducts], BusinessInfo[businessid][bID]);
                        mysql_tquery(connectionID, queryBuffer);
                    }

                    PlayerData[playerid][pFightStyle] = FIGHT_STYLE_BOXING;
                    SetPlayerFightingStyle(playerid, PlayerData[playerid][pFightStyle]);


                    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET fightstyle = %i WHERE uid = %i", PlayerData[playerid][pFightStyle], PlayerData[playerid][pID]);
                    mysql_tquery(connectionID, queryBuffer);

                    SendClientMessageEx(playerid, COLOR_WHITE, "You have purchased the Boxing fighting style for $%i.", price);
				}
				case 2:
				{
				    new price = 7650;

				    if(PlayerData[playerid][pCash] < price)
                    {
                        return SendClientMessage(playerid, COLOR_GREY, "You don't have enough money. You can't buy this.");
                    }
                    if(PlayerData[playerid][pFightStyle] == FIGHT_STYLE_KUNGFU)
                    {
                        return SendClientMessage(playerid, COLOR_GREY, "You already have this fighting style.");
                    }

					if(PlayerData[playerid][pTraderUpgrade] > 0)
                    {
						price -= percent(price, (PlayerData[playerid][pTraderUpgrade] * 10));
						SendClientMessageEx(playerid, COLOR_YELLOW3, "Trader Perk: Your level %i/3 trader perk reduced the price of this item to $%i.", PlayerData[playerid][pTraderUpgrade], price);
                    }

                    GivePlayerCash(playerid, -price);

                    PlayerData[playerid][pFightStyle] = FIGHT_STYLE_KUNGFU;
                    SetPlayerFightingStyle(playerid, PlayerData[playerid][pFightStyle]);

                    if(BusinessInfo[businessid][bProducts] > 0)
                    {
                        BusinessInfo[businessid][bCash] += price;
                        BusinessInfo[businessid][bProducts]--;
                        
                        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE businesses SET cash = %i, products = %i WHERE id = %i", BusinessInfo[businessid][bCash], BusinessInfo[businessid][bProducts], BusinessInfo[businessid][bID]);
                        mysql_tquery(connectionID, queryBuffer);
                    }

                    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET fightstyle = %i WHERE uid = %i", PlayerData[playerid][pFightStyle], PlayerData[playerid][pID]);
                    mysql_tquery(connectionID, queryBuffer);

                    SendClientMessageEx(playerid, COLOR_WHITE, "You have purchased the Kung-Fu fighting style for $%i.", price);
				}
				case 3:
				{
				    new price = 9275;

				    if(PlayerData[playerid][pCash] < price)
                    {
                        return SendClientMessage(playerid, COLOR_GREY, "You don't have enough money. You can't buy this.");
                    }
                    if(PlayerData[playerid][pFightStyle] == FIGHT_STYLE_KNEEHEAD)
                    {
                        return SendClientMessage(playerid, COLOR_GREY, "You already have this fighting style.");
                    }

					if(PlayerData[playerid][pTraderUpgrade] > 0)
                    {
						price -= percent(price, (PlayerData[playerid][pTraderUpgrade] * 10));
						SendClientMessageEx(playerid, COLOR_YELLOW3, "Trader Perk: Your level %i/3 trader perk reduced the price of this item to $%i.", PlayerData[playerid][pTraderUpgrade], price);
                    }

                    GivePlayerCash(playerid, -price);

                    PlayerData[playerid][pFightStyle] = FIGHT_STYLE_KNEEHEAD;
                    SetPlayerFightingStyle(playerid, PlayerData[playerid][pFightStyle]);

                    if(BusinessInfo[businessid][bProducts] > 0)
                    {
                        BusinessInfo[businessid][bCash] += price;
                        BusinessInfo[businessid][bProducts]--;
                        
                        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE businesses SET cash = %i, products = %i WHERE id = %i", BusinessInfo[businessid][bCash], BusinessInfo[businessid][bProducts], BusinessInfo[businessid][bID]);
                        mysql_tquery(connectionID, queryBuffer);
                    }

                    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET fightstyle = %i WHERE uid = %i", PlayerData[playerid][pFightStyle], PlayerData[playerid][pID]);
                    mysql_tquery(connectionID, queryBuffer);

                    SendClientMessageEx(playerid, COLOR_WHITE, "You have purchased the Kneehead fighting style for $%i.", price);
				}
				case 4:
				{
				    new price = 1250;

				    if(PlayerData[playerid][pCash] < price)
                    {
                        return SendClientMessage(playerid, COLOR_GREY, "You don't have enough money. You can't buy this.");
                    }
                    if(PlayerData[playerid][pFightStyle] == FIGHT_STYLE_GRABKICK)
                    {
                        return SendClientMessage(playerid, COLOR_GREY, "You already have this fighting style.");
                    }

					if(PlayerData[playerid][pTraderUpgrade] > 0)
                    {
						price -= percent(price, (PlayerData[playerid][pTraderUpgrade] * 10));
						SendClientMessageEx(playerid, COLOR_YELLOW3, "Trader Perk: Your level %i/3 trader perk reduced the price of this item to $%i.", PlayerData[playerid][pTraderUpgrade], price);
                    }

                    GivePlayerCash(playerid, -price);

                    PlayerData[playerid][pFightStyle] = FIGHT_STYLE_GRABKICK;
                    SetPlayerFightingStyle(playerid, PlayerData[playerid][pFightStyle]);

                    if(BusinessInfo[businessid][bProducts] > 0)
                    {
                        BusinessInfo[businessid][bCash] += price;
                        BusinessInfo[businessid][bProducts]--;
                        
                        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE businesses SET cash = %i, products = %i WHERE id = %i", BusinessInfo[businessid][bCash], BusinessInfo[businessid][bProducts], BusinessInfo[businessid][bID]);
                        mysql_tquery(connectionID, queryBuffer);
                    }

                    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET fightstyle = %i WHERE uid = %i", PlayerData[playerid][pFightStyle], PlayerData[playerid][pID]);
                    mysql_tquery(connectionID, queryBuffer);

                    SendClientMessageEx(playerid, COLOR_WHITE, "You have purchased the Grabkick fighting style for $%i.", price);
				}
				case 5:
				{
				    new price = 2950;

				    if(PlayerData[playerid][pCash] < price)
                    {
                        return SendClientMessage(playerid, COLOR_GREY, "You don't have enough money. You can't buy this.");
                    }
                    if(PlayerData[playerid][pFightStyle] == FIGHT_STYLE_ELBOW)
                    {
                        return SendClientMessage(playerid, COLOR_GREY, "You already have this fighting style.");
                    }

					if(PlayerData[playerid][pTraderUpgrade] > 0)
                    {
						price -= percent(price, (PlayerData[playerid][pTraderUpgrade] * 10));
						SendClientMessageEx(playerid, COLOR_YELLOW3, "Trader Perk: Your level %i/3 trader perk reduced the price of this item to $%i.", PlayerData[playerid][pTraderUpgrade], price);
                    }

                    GivePlayerCash(playerid, -price);

                    PlayerData[playerid][pFightStyle] = FIGHT_STYLE_ELBOW;
                    SetPlayerFightingStyle(playerid, PlayerData[playerid][pFightStyle]);

                    if(BusinessInfo[businessid][bProducts] > 0)
                    {
                        BusinessInfo[businessid][bCash] += price;
                        BusinessInfo[businessid][bProducts]--;
                        
                        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE businesses SET cash = %i, products = %i WHERE id = %i", BusinessInfo[businessid][bCash], BusinessInfo[businessid][bProducts], BusinessInfo[businessid][bID]);
                        mysql_tquery(connectionID, queryBuffer);
                    }

                    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET fightstyle = %i WHERE uid = %i", PlayerData[playerid][pFightStyle], PlayerData[playerid][pID]);
                    mysql_tquery(connectionID, queryBuffer);

                    SendClientMessageEx(playerid, COLOR_WHITE, "You have purchased the Elbow fighting style for $%i.", price);
				}
			}
		}
		else if(BusinessInfo[businessid][bType] == BUSINESS_RESTAURANT)
		{
		    switch(listitem)
		    {
		        case 0:
		        {
		            new price = 10;

		            if(PlayerData[playerid][pCash] < price)
                    {
                        return SendClientMessage(playerid, COLOR_GREY, "You don't have enough money. You can't buy this.");
                    }

					if(PlayerData[playerid][pTraderUpgrade] > 0)
                    {
						price -= percent(price, (PlayerData[playerid][pTraderUpgrade] * 10));
						SendClientMessageEx(playerid, COLOR_YELLOW3, "Trader Perk: Your level %i/3 trader perk reduced the price of this item to $%i.", PlayerData[playerid][pTraderUpgrade], price);
                    }

                    GivePlayerCash(playerid, -price);
                    GivePlayerHealth(playerid, 10.0);


                    if(BusinessInfo[businessid][bProducts] > 0)
                    {
                        BusinessInfo[businessid][bCash] += price;
                        BusinessInfo[businessid][bProducts]--;

                        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE businesses SET cash = %i, products = %i WHERE id = %i", BusinessInfo[businessid][bCash], BusinessInfo[businessid][bProducts], BusinessInfo[businessid][bID]);
                        mysql_tquery(connectionID, queryBuffer);
                    }

                    ShowActionBubble(playerid, "* %s paid $%i to the shopkeeper and received a bottled water.", GetRPName(playerid), price);
				}
				case 1:
		        {
		            new price = 30;

		            if(PlayerData[playerid][pCash] < price)
                    {
                        return SendClientMessage(playerid, COLOR_GREY, "You don't have enough money. You can't buy this.");
                    }

					if(PlayerData[playerid][pTraderUpgrade] > 0)
                    {
						price -= percent(price, (PlayerData[playerid][pTraderUpgrade] * 10));
						SendClientMessageEx(playerid, COLOR_YELLOW3, "Trader Perk: Your level %i/3 trader perk reduced the price of this item to $%i.", PlayerData[playerid][pTraderUpgrade], price);
                    }

                    GivePlayerCash(playerid, -price);
                    GivePlayerHealth(playerid, 15.0);


                    if(BusinessInfo[businessid][bProducts] > 0)
                    {
                        BusinessInfo[businessid][bCash] += price;
                        BusinessInfo[businessid][bProducts]--;

                        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE businesses SET cash = %i, products = %i WHERE id = %i", BusinessInfo[businessid][bCash], BusinessInfo[businessid][bProducts], BusinessInfo[businessid][bID]);
                        mysql_tquery(connectionID, queryBuffer);
                    }

                    ShowActionBubble(playerid, "* %s paid $%i to the shopkeeper and received a can of sprunk.", GetRPName(playerid), price);
				}
				case 2:
		        {
		            new price = 40;

		            if(PlayerData[playerid][pCash] < price)
                    {
                        return SendClientMessage(playerid, COLOR_GREY, "You don't have enough money. You can't buy this.");
                    }

					if(PlayerData[playerid][pTraderUpgrade] > 0)
                    {
						price -= percent(price, (PlayerData[playerid][pTraderUpgrade] * 10));
						SendClientMessageEx(playerid, COLOR_YELLOW3, "Trader Perk: Your level %i/3 trader perk reduced the price of this item to $%i.", PlayerData[playerid][pTraderUpgrade], price);
                    }

                    GivePlayerCash(playerid, -price);
                    GivePlayerHealth(playerid, 20.0);


                    if(BusinessInfo[businessid][bProducts] > 0)
                    {
                        BusinessInfo[businessid][bCash] += price;
                        BusinessInfo[businessid][bProducts]--;

                        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE businesses SET cash = %i, products = %i WHERE id = %i", BusinessInfo[businessid][bCash], BusinessInfo[businessid][bProducts], BusinessInfo[businessid][bID]);
                        mysql_tquery(connectionID, queryBuffer);
                    }

                    ShowActionBubble(playerid, "* %s paid $%i to the shopkeeper and received french fries.", GetRPName(playerid), price);
				}
				case 3:
		        {
		            new price = 40;

		            if(PlayerData[playerid][pCash] < price)
                    {
                        return SendClientMessage(playerid, COLOR_GREY, "You don't have enough money. You can't buy this.");
                    }

					if(PlayerData[playerid][pTraderUpgrade] > 0)
                    {
						price -= percent(price, (PlayerData[playerid][pTraderUpgrade] * 10));
						SendClientMessageEx(playerid, COLOR_YELLOW3, "Trader Perk: Your level %i/3 trader perk reduced the price of this item to $%i.", PlayerData[playerid][pTraderUpgrade], price);
                    }

                    GivePlayerCash(playerid, -price);
                    GivePlayerHealth(playerid, 25.0);


                    if(BusinessInfo[businessid][bProducts] > 0)
                    {
                        BusinessInfo[businessid][bCash] += price;
                        BusinessInfo[businessid][bProducts]--;

                        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE businesses SET cash = %i, products = %i WHERE id = %i", BusinessInfo[businessid][bCash], BusinessInfo[businessid][bProducts], BusinessInfo[businessid][bID]);
                        mysql_tquery(connectionID, queryBuffer);
                    }

                    ShowActionBubble(playerid, "* %s paid $%i to the shopkeeper and received a hamburger.", GetRPName(playerid), price);
				}
				case 4:
		        {
		            new price = 50;

		            if(PlayerData[playerid][pCash] < price)
                    {
                        return SendClientMessage(playerid, COLOR_GREY, "You don't have enough money. You can't buy this.");
                    }

					if(PlayerData[playerid][pTraderUpgrade] > 0)
                    {
						price -= percent(price, (PlayerData[playerid][pTraderUpgrade] * 10));
						SendClientMessageEx(playerid, COLOR_YELLOW3, "Trader Perk: Your level %i/3 trader perk reduced the price of this item to $%i.", PlayerData[playerid][pTraderUpgrade], price);
                    }

                    GivePlayerCash(playerid, -price);
                    GivePlayerHealth(playerid, 30.0);


                    if(BusinessInfo[businessid][bProducts] > 0)
                    {
                        BusinessInfo[businessid][bCash] += price;
                        BusinessInfo[businessid][bProducts]--;

                        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE businesses SET cash = %i, products = %i WHERE id = %i", BusinessInfo[businessid][bCash], BusinessInfo[businessid][bProducts], BusinessInfo[businessid][bID]);
                        mysql_tquery(connectionID, queryBuffer);
                    }

                    ShowActionBubble(playerid, "* %s paid $%i to the shopkeeper and received a cheeseburger.", GetRPName(playerid), price);
				}
				case 5:
		        {
		            new price = 60;

		            if(PlayerData[playerid][pCash] < price)
                    {
                        return SendClientMessage(playerid, COLOR_GREY, "You don't have enough money. You can't buy this.");
                    }

					if(PlayerData[playerid][pTraderUpgrade] > 0)
                    {
						price -= percent(price, (PlayerData[playerid][pTraderUpgrade] * 10));
						SendClientMessageEx(playerid, COLOR_YELLOW3, "Trader Perk: Your level %i/3 trader perk reduced the price of this item to $%i.", PlayerData[playerid][pTraderUpgrade], price);
                    }

                    GivePlayerCash(playerid, -price);
                    GivePlayerHealth(playerid, 25.0);


                    if(BusinessInfo[businessid][bProducts] > 0)
                    {
                        BusinessInfo[businessid][bCash] += price;
                        BusinessInfo[businessid][bProducts]--;

                        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE businesses SET cash = %i, products = %i WHERE id = %i", BusinessInfo[businessid][bCash], BusinessInfo[businessid][bProducts], BusinessInfo[businessid][bID]);
                        mysql_tquery(connectionID, queryBuffer);
                    }

                    ShowActionBubble(playerid, "* %s paid $%i to the shopkeeper and received a mac & cheese.", GetRPName(playerid), price);
				}
				case 6:
		        {
		            new price = 70;

		            if(PlayerData[playerid][pCash] < price)
                    {
                        return SendClientMessage(playerid, COLOR_GREY, "You don't have enough money. You can't buy this.");
                    }

					if(PlayerData[playerid][pTraderUpgrade] > 0)
                    {
						price -= percent(price, (PlayerData[playerid][pTraderUpgrade] * 10));
						SendClientMessageEx(playerid, COLOR_YELLOW3, "Trader Perk: Your level %i/3 trader perk reduced the price of this item to $%i.", PlayerData[playerid][pTraderUpgrade], price);
                    }

                    GivePlayerCash(playerid, -price);
                    GivePlayerHealth(playerid, 35.0);


                    if(BusinessInfo[businessid][bProducts] > 0)
                    {
                        BusinessInfo[businessid][bCash] += price;
                        BusinessInfo[businessid][bProducts]--;

                        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE businesses SET cash = %i, products = %i WHERE id = %i", BusinessInfo[businessid][bCash], BusinessInfo[businessid][bProducts], BusinessInfo[businessid][bID]);
                        mysql_tquery(connectionID, queryBuffer);
                    }

                    ShowActionBubble(playerid, "* %s paid $%i to the shopkeeper and received a club sandwich.", GetRPName(playerid), price);
				}
				case 7:
		        {
		            new price = 80;

		            if(PlayerData[playerid][pCash] < price)
                    {
                        return SendClientMessage(playerid, COLOR_GREY, "You don't have enough money. You can't buy this.");
                    }

					if(PlayerData[playerid][pTraderUpgrade] > 0)
                    {
						price -= percent(price, (PlayerData[playerid][pTraderUpgrade] * 10));
						SendClientMessageEx(playerid, COLOR_YELLOW3, "Trader Perk: Your level %i/3 trader perk reduced the price of this item to $%i.", PlayerData[playerid][pTraderUpgrade], price);
                    }

                    GivePlayerCash(playerid, -price);
                    GivePlayerHealth(playerid, 45.0);


                    if(BusinessInfo[businessid][bProducts] > 0)
                    {
                        BusinessInfo[businessid][bCash] += price;
                        BusinessInfo[businessid][bProducts]--;

                        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE businesses SET cash = %i, products = %i WHERE id = %i", BusinessInfo[businessid][bCash], BusinessInfo[businessid][bProducts], BusinessInfo[businessid][bID]);
                        mysql_tquery(connectionID, queryBuffer);
                    }

                    ShowActionBubble(playerid, "* %s paid $%i to the shopkeeper and received fish & chips.", GetRPName(playerid), price);
				}
				case 8:
		        {
		            new price = 110;

		            if(PlayerData[playerid][pCash] < price)
                    {
                        return SendClientMessage(playerid, COLOR_GREY, "You don't have enough money. You can't buy this.");
                    }

					if(PlayerData[playerid][pTraderUpgrade] > 0)
                    {
						price -= percent(price, (PlayerData[playerid][pTraderUpgrade] * 10));
						SendClientMessageEx(playerid, COLOR_YELLOW3, "Trader Perk: Your level %i/3 trader perk reduced the price of this item to $%i.", PlayerData[playerid][pTraderUpgrade], price);
                    }

                    GivePlayerCash(playerid, -price);
                    GivePlayerHealth(playerid, 55.0);


                    if(BusinessInfo[businessid][bProducts] > 0)
                    {
                        BusinessInfo[businessid][bCash] += price;
                        BusinessInfo[businessid][bProducts]--;

                        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE businesses SET cash = %i, products = %i WHERE id = %i", BusinessInfo[businessid][bCash], BusinessInfo[businessid][bProducts], BusinessInfo[businessid][bID]);
                        mysql_tquery(connectionID, queryBuffer);
                    }

                    ShowActionBubble(playerid, "* %s paid $%i to the shopkeeper and received a pan pizza.", GetRPName(playerid), price);
				}
		    }
		}
		else if(BusinessInfo[businessid][bType] == BUSINESS_BARCLUB)
		{
		    switch(listitem)
		    {
		        case 0:
		        {
		            new price = 10;

		            if(PlayerData[playerid][pCash] < price)
                    {
                        return SendClientMessage(playerid, COLOR_GREY, "You don't have enough money. You can't buy this.");
                    }

					if(PlayerData[playerid][pTraderUpgrade] > 0)
                    {
						price -= percent(price, (PlayerData[playerid][pTraderUpgrade] * 10));
						SendClientMessageEx(playerid, COLOR_YELLOW3, "Trader Perk: Your level %i/3 trader perk reduced the price of this item to $%i.", PlayerData[playerid][pTraderUpgrade], price);
                    }

                    GivePlayerCash(playerid, -price);
                    GivePlayerHealth(playerid, 10.0);


                    if(BusinessInfo[businessid][bProducts] > 0)
                    {
                        BusinessInfo[businessid][bCash] += price;
                        BusinessInfo[businessid][bProducts]--;

                        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE businesses SET cash = %i, products = %i WHERE id = %i", BusinessInfo[businessid][bCash], BusinessInfo[businessid][bProducts], BusinessInfo[businessid][bID]);
                        mysql_tquery(connectionID, queryBuffer);
                    }

                    ShowActionBubble(playerid, "* %s paid $%i to the shopkeeper and received a bottled water.", GetRPName(playerid), price);
				}
				case 1:
		        {
		            new price = 30;

		            if(PlayerData[playerid][pCash] < price)
                    {
                        return SendClientMessage(playerid, COLOR_GREY, "You don't have enough money. You can't buy this.");
                    }

					if(PlayerData[playerid][pTraderUpgrade] > 0)
                    {
						price -= percent(price, (PlayerData[playerid][pTraderUpgrade] * 10));
						SendClientMessageEx(playerid, COLOR_YELLOW3, "Trader Perk: Your level %i/3 trader perk reduced the price of this item to $%i.", PlayerData[playerid][pTraderUpgrade], price);
                    }

                    GivePlayerCash(playerid, -price);
                    SetPlayerSpecialAction(playerid, SPECIAL_ACTION_DRINK_SPRUNK);


                    if(BusinessInfo[businessid][bProducts] > 0)
                    {
                        BusinessInfo[businessid][bCash] += price;
                        BusinessInfo[businessid][bProducts]--;

                        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE businesses SET cash = %i, products = %i WHERE id = %i", BusinessInfo[businessid][bCash], BusinessInfo[businessid][bProducts], BusinessInfo[businessid][bID]);
                        mysql_tquery(connectionID, queryBuffer);
                    }

                    ShowActionBubble(playerid, "* %s paid $%i to the shopkeeper and received a can of sprunk.", GetRPName(playerid), price);
				}
				case 2:
		        {
		            new price = 45;

		            if(PlayerData[playerid][pCash] < price)
                    {
                        return SendClientMessage(playerid, COLOR_GREY, "You don't have enough money. You can't buy this.");
                    }

					if(PlayerData[playerid][pTraderUpgrade] > 0)
                    {
						price -= percent(price, (PlayerData[playerid][pTraderUpgrade] * 10));
						SendClientMessageEx(playerid, COLOR_YELLOW3, "Trader Perk: Your level %i/3 trader perk reduced the price of this item to $%i.", PlayerData[playerid][pTraderUpgrade], price);
                    }

                    GivePlayerCash(playerid, -price);
                    SetPlayerSpecialAction(playerid, SPECIAL_ACTION_DRINK_BEER);


                    if(BusinessInfo[businessid][bProducts] > 0)
                    {
                        BusinessInfo[businessid][bCash] += price;
                        BusinessInfo[businessid][bProducts]--;

                        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE businesses SET cash = %i, products = %i WHERE id = %i", BusinessInfo[businessid][bCash], BusinessInfo[businessid][bProducts], BusinessInfo[businessid][bID]);
                        mysql_tquery(connectionID, queryBuffer);
                    }

                    ShowActionBubble(playerid, "* %s paid $%i to the shopkeeper and received a bottle of beer.", GetRPName(playerid), price);
				}
				case 3:
		        {
		            new price = 300;

		            if(PlayerData[playerid][pCash] < price)
                    {
                        return SendClientMessage(playerid, COLOR_GREY, "You don't have enough money. You can't buy this.");
                    }

					if(PlayerData[playerid][pTraderUpgrade] > 0)
                    {
						price -= percent(price, (PlayerData[playerid][pTraderUpgrade] * 10));
						SendClientMessageEx(playerid, COLOR_YELLOW3, "Trader Perk: Your level %i/3 trader perk reduced the price of this item to $%i.", PlayerData[playerid][pTraderUpgrade], price);
                    }

                    GivePlayerCash(playerid, -price);
                    SetPlayerSpecialAction(playerid, SPECIAL_ACTION_DRINK_WINE);


                    if(BusinessInfo[businessid][bProducts] > 0)
                    {
                        BusinessInfo[businessid][bCash] += price;
                        BusinessInfo[businessid][bProducts]--;

                        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE businesses SET cash = %i, products = %i WHERE id = %i", BusinessInfo[businessid][bCash], BusinessInfo[businessid][bProducts], BusinessInfo[businessid][bID]);
                        mysql_tquery(connectionID, queryBuffer);
                    }

                    ShowActionBubble(playerid, "* %s paid $%i to the shopkeeper and received a bottle of wine.", GetRPName(playerid), price);
				}
				case 4:
		        {
		            new price = 500;

		            if(PlayerData[playerid][pCash] < price)
                    {
                        return SendClientMessage(playerid, COLOR_GREY, "You don't have enough money. You can't buy this.");
                    }

					if(PlayerData[playerid][pTraderUpgrade] > 0)
                    {
						price -= percent(price, (PlayerData[playerid][pTraderUpgrade] * 10));
						SendClientMessageEx(playerid, COLOR_YELLOW3, "Trader Perk: Your level %i/3 trader perk reduced the price of this item to $%i.", PlayerData[playerid][pTraderUpgrade], price);
                    }

                    GivePlayerCash(playerid, -price);
                    SetPlayerSpecialAction(playerid, SPECIAL_ACTION_DRINK_WINE);


                    if(BusinessInfo[businessid][bProducts] > 0)
                    {
                        BusinessInfo[businessid][bCash] += price;
                        BusinessInfo[businessid][bProducts]--;

                        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE businesses SET cash = %i, products = %i WHERE id = %i", BusinessInfo[businessid][bCash], BusinessInfo[businessid][bProducts], BusinessInfo[businessid][bID]);
                        mysql_tquery(connectionID, queryBuffer);
                    }

                    ShowActionBubble(playerid, "* %s paid $%i to the shopkeeper and received a bottle of whiskey.", GetRPName(playerid), price);
				}
			}
		}
		else if(BusinessInfo[businessid][bType] == BUSINESS_TOOLSHOP)
		{
		    //First aid kit\t500 materials\nBody repair kit\t1000 materials\nPolice scanner\t2000 materials\nRimkit\t4000 materials

		    switch(listitem)
		    {
		        case 0:
		        {
		            if(PlayerData[playerid][pMaterials] < 1000)
		            {
		                return SendClientMessage(playerid, COLOR_GREY, "You don't have that many materials.");
		            }
		            if(PlayerData[playerid][pFirstAid] + 1 > 20)
		            {
		                return SendClientMessage(playerid, COLOR_GREY, "You can't carry more than 20 first aid kits.");
		            }

		            PlayerData[playerid][pFirstAid]++;
		            PlayerData[playerid][pMaterials] -= 1000;

		            mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET firstaid = %i, materials = %i WHERE uid = %i", PlayerData[playerid][pFirstAid], PlayerData[playerid][pMaterials], PlayerData[playerid][pID]);
		            mysql_tquery(connectionID, queryBuffer);
                    
                    if(BusinessInfo[businessid][bProducts] > 0)
                    {
                        BusinessInfo[businessid][bMaterials] += 1000;
                        BusinessInfo[businessid][bProducts]--;

                        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE businesses SET materials = %i, products = %i WHERE id = %i", BusinessInfo[businessid][bMaterials], BusinessInfo[businessid][bProducts], BusinessInfo[businessid][bID]);
                        mysql_tquery(connectionID, queryBuffer);
                    }
                    ShowActionBubble(playerid, "* %s exchanged 500 materials to the shopkeeper and received a first aid kit.", GetRPName(playerid));
                    SendClientMessage(playerid, COLOR_WHITE, "HINT: Use /firstaid to in order to use a first aid kit.");
				}
				case 1:
		        {
		            if(PlayerData[playerid][pMaterials] < 10000)
		            {
		                return SendClientMessage(playerid, COLOR_GREY, "You don't have that many materials.");
		            }
		            if(PlayerData[playerid][pBodykits] + 1 > 10)
		            {
		                return SendClientMessage(playerid, COLOR_GREY, "You can't carry more than 10 bodywork kits.");
		            }

		            PlayerData[playerid][pBodykits]++;
		            PlayerData[playerid][pMaterials] -= 10000;

		            mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET bodykits = %i, materials = %i WHERE uid = %i", PlayerData[playerid][pBodykits], PlayerData[playerid][pMaterials], PlayerData[playerid][pID]);
		            mysql_tquery(connectionID, queryBuffer);
                   
                    if(BusinessInfo[businessid][bProducts] > 0)
                    {

                        BusinessInfo[businessid][bMaterials] += 10000;
                        BusinessInfo[businessid][bProducts]--;

                        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE businesses SET materials = %i, products = %i WHERE id = %i", BusinessInfo[businessid][bMaterials], BusinessInfo[businessid][bProducts], BusinessInfo[businessid][bID]);
                        mysql_tquery(connectionID, queryBuffer);
                    }

                    ShowActionBubble(playerid, "* %s exchanged 1000 materials to the shopkeeper and received a bodywork kit.", GetRPName(playerid));
                    SendClientMessage(playerid, COLOR_WHITE, "HINT: Use /bodykit in a vehicle to repair its bodywork and health.");
				}
				case 2:
		        {
		            if(PlayerData[playerid][pMaterials] < 5000)
		            {
		                return SendClientMessage(playerid, COLOR_GREY, "You don't have that many materials.");
		            }
		            if(PlayerData[playerid][pPoliceScanner])
		            {
		                return SendClientMessage(playerid, COLOR_GREY, "You already have this item.");
		            }

		            PlayerData[playerid][pPoliceScanner] = 1;
		            PlayerData[playerid][pMaterials] -= 5000;

		            mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET policescanner = 1, materials = %i WHERE uid = %i", PlayerData[playerid][pMaterials], PlayerData[playerid][pID]);
		            mysql_tquery(connectionID, queryBuffer);
                    
                    if(BusinessInfo[businessid][bProducts] > 0)
                    {
                        BusinessInfo[businessid][bMaterials] += 5000;
                        BusinessInfo[businessid][bProducts]--;

                        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE businesses SET materials = %i, products = %i WHERE id = %i", BusinessInfo[businessid][bMaterials], BusinessInfo[businessid][bProducts], BusinessInfo[businessid][bID]);
                        mysql_tquery(connectionID, queryBuffer);
                    }
                    ShowActionBubble(playerid, "* %s exchanged 2000 materials to the shopkeeper and received a police scanner.", GetRPName(playerid));
                    SendClientMessage(playerid, COLOR_WHITE, "HINT: Use /scanner to listen to emergency and department chats.");
				}
				case 3:
		        {
		            if(PlayerData[playerid][pMaterials] < 4000)
		            {
		                return SendClientMessage(playerid, COLOR_GREY, "You don't have that many materials.");
		            }
		            if(PlayerData[playerid][pRimkits] + 1 > 5)
		            {
		                return SendClientMessage(playerid, COLOR_GREY, "You can't carry more than 5 rimkits.");
		            }

		            PlayerData[playerid][pRimkits]++;
		            PlayerData[playerid][pMaterials] -= 4000;

		            mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET rimkits = %i, materials = %i WHERE uid = %i", PlayerData[playerid][pRimkits], PlayerData[playerid][pMaterials], PlayerData[playerid][pID]);
		            mysql_tquery(connectionID, queryBuffer);

                    if(BusinessInfo[businessid][bProducts] > 0)
                    {
                        BusinessInfo[businessid][bMaterials] += 4000;
                        BusinessInfo[businessid][bProducts]--;

                        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE businesses SET materials = %i, products = %i WHERE id = %i", BusinessInfo[businessid][bMaterials], BusinessInfo[businessid][bProducts], BusinessInfo[businessid][bID]);
                        mysql_tquery(connectionID, queryBuffer);
                    }
                    ShowActionBubble(playerid, "* %s exchanged 4000 materials to the shopkeeper and received a rimkit.", GetRPName(playerid));
                    SendClientMessage(playerid, COLOR_WHITE, "HINT: Use /rimkit in your vehicle to install a new set of rims.");
				}
				case 4:
				{
				    if(PlayerData[playerid][pCash] < 500)
				        return SendClientMessage(playerid, COLOR_GREY, "You dont have enough money to purchase");
					PlayerData[playerid][pHelmet] = 1;
					GivePlayerCash(playerid, -500);
					mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET helmet = %d WHERE uid = %i", PlayerData[playerid][pHelmet], PlayerData[playerid][pID]);
					mysql_tquery(connectionID, queryBuffer);
			        SendClientMessage(playerid, COLOR_GREEN, "Helmet purchased. /helmet to use it.");

				}
				case 5:
				{
		            if(PlayerData[playerid][pMaterials] < 2500)
		            {
		                return SendClientMessage(playerid, COLOR_GREY, "You don't have that many materials.");
		            }
		            if(PlayerData[playerid][pHouseAlarm] > 1)
		            {
		                return SendClientMessage(playerid, COLOR_GREY, "You can't carry more than 1 house alarm.");
		            }
		            PlayerData[playerid][pHouseAlarm]++;
		            PlayerData[playerid][pMaterials] -= 2500;

		            mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET housealarm = %i, materials = %i WHERE uid = %i", PlayerData[playerid][pRimkits], PlayerData[playerid][pMaterials], PlayerData[playerid][pID]);
		            mysql_tquery(connectionID, queryBuffer);
                    
                    if(BusinessInfo[businessid][bProducts] > 0)
                    {
                        BusinessInfo[businessid][bMaterials] += 2500;
                        BusinessInfo[businessid][bProducts]--;

                        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE businesses SET materials = %i, products = %i WHERE id = %i", BusinessInfo[businessid][bMaterials], BusinessInfo[businessid][bProducts], BusinessInfo[businessid][bID]);
                        mysql_tquery(connectionID, queryBuffer);
                    }
                    ShowActionBubble(playerid, "* %s exchanged 2500 materials to the shopkeeper and received a house alarm.", GetRPName(playerid));
                    SendClientMessage(playerid, COLOR_WHITE, "HINT: Use /usehousealarm in your house to install the alarm.");
				}
				case 6: //pVehicleCMD
				{
		            if(PlayerData[playerid][pMaterials] < 4500)
		            {
		                return SendClientMessage(playerid, COLOR_GREY, "You don't have that many materials.");
		            }
		            if(PlayerData[playerid][pVehicleCMD] == 1)
		            {
		                return SendClientMessage(playerid, COLOR_GREY, "You can't carry more than 1 vehicle command.");
		            }
		            PlayerData[playerid][pVehicleCMD] = 1;
		            PlayerData[playerid][pMaterials] -= 4500;

		            mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET vehiclecmd = %i, materials = %i WHERE uid = %i", PlayerData[playerid][pRimkits], PlayerData[playerid][pMaterials], PlayerData[playerid][pID]);
		            mysql_tquery(connectionID, queryBuffer);

                    if(BusinessInfo[businessid][bProducts] > 0)
                    {
                        BusinessInfo[businessid][bMaterials] += 4500;
                        BusinessInfo[businessid][bProducts]--;

                        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE businesses SET materials = %i, products = %i WHERE id = %i", BusinessInfo[businessid][bMaterials], BusinessInfo[businessid][bProducts], BusinessInfo[businessid][bID]);
                        mysql_tquery(connectionID, queryBuffer);
                    }

                    ShowActionBubble(playerid, "* %s exchanged 4500 materials to the shopkeeper and received a auto vehicle command.", GetRPName(playerid));
                    SendClientMessage(playerid, COLOR_WHITE, "HINT: Press '2' while you are driving an vehicle to activate.");
				}
				case 7: //pCrowbar
				{
		            if(PlayerData[playerid][pMaterials] < 2500)
		            {
		                return SendClientMessage(playerid, COLOR_GREY, "You don't have that many materials.");
		            }
		            if(PlayerData[playerid][pVehicleCMD] == 1)
		            {
		                return SendClientMessage(playerid, COLOR_GREY, "You can't carry more than 1 vehicle command.");
		            }
		            PlayerData[playerid][pCrowbar] = 1;
		            PlayerData[playerid][pMaterials] -= 2500;

		            mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET crowbar = %i, materials = %i WHERE uid = %i", PlayerData[playerid][pRimkits], PlayerData[playerid][pMaterials], PlayerData[playerid][pID]);
		            mysql_tquery(connectionID, queryBuffer);

                    if(BusinessInfo[businessid][bProducts] > 0)
                    {
                        BusinessInfo[businessid][bMaterials] += 2500;
                        BusinessInfo[businessid][bProducts]--;

                        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE businesses SET materials = %i, products = %i WHERE id = %i", BusinessInfo[businessid][bMaterials], BusinessInfo[businessid][bProducts], BusinessInfo[businessid][bID]);
                        mysql_tquery(connectionID, queryBuffer);
                    }
                    ShowActionBubble(playerid, "* %s exchanged 2500 materials to the shopkeeper and received a crowbar.", GetRPName(playerid));
                    SendClientMessage(playerid, COLOR_WHITE, "HINT: Use '/breakcuffs' to break cuffs from anybody's hand.");
				}
			}
		}
    }
    return 1;
}


Dialog:DIALOG_UNREADTEXTS(playerid, response, listitem, inputtext[])
{
    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "DELETE FROM texts WHERE recipient_number = %i ORDER BY date DESC LIMIT 25", PlayerData[playerid][pPhone]);
    mysql_tquery(connectionID, queryBuffer);

    if(response)
    {
		callcmd::texts(playerid, "\1");
    }
    return 1;
}
Dialog:DIALOG_ATM(playerid, response, listitem, inputtext[])
{
    if(response)
    {
        if(listitem == 0)
        {
            ShowDialogToPlayer(playerid, DIALOG_ATMDEPOSIT);
        }
        else
        {
            ShowDialogToPlayer(playerid, DIALOG_ATMWITHDRAW);
        }
    }
    return 1;
}
Dialog:DIALOG_ATMDEPOSIT(playerid, response, listitem, inputtext[])
{
	if(response)
    {
        new amount, fee;

        if(sscanf(inputtext, "i", amount))
        {
			return ShowDialogToPlayer(playerid, DIALOG_ATM);
        }
        if(amount < 1 || amount > PlayerData[playerid][pCash])
        {
            SendClientMessage(playerid, COLOR_GREY, "Insufficient amount. Please try again.");
            ShowDialogToPlayer(playerid, DIALOG_ATMDEPOSIT);
            return 1;
        }
        if(amount > 1000000)
        {
            SendClientMessage(playerid, COLOR_GREY, "You can't deposit more than $1,000,000 at a time.");
            ShowDialogToPlayer(playerid, DIALOG_ATMDEPOSIT);
            return 1;
        }

        PlayerData[playerid][pBank] += amount;
        GivePlayerCash(playerid, -amount);

        if(PlayerData[playerid][pDonator] == 0)
        {
            fee = percent(amount, 3);

            PlayerData[playerid][pBank] -= fee;
           // AddToTaxVault(fee);
        }

        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET bank = %i WHERE uid = %i", PlayerData[playerid][pBank], PlayerData[playerid][pID]);
        mysql_tquery(connectionID, queryBuffer);

        ShowActionBubble(playerid, "* %s presses a button and deposits some cash into the ATM.", GetRPName(playerid));
        SendClientMessageEx(playerid, COLOR_AQUA, "You have deposited %s into your account. Your new balance is %s.", FormatCash(amount), FormatCash(PlayerData[playerid][pBank]));

		if(fee)
		{
		    SendClientMessageEx(playerid, COLOR_WHITE, "A 3 percent convenience fee of %s was deducted from your bank account.", FormatCash(fee));
		    AddToTaxVault(fee);
        }
        else if(PlayerData[playerid][pDonator] > 0)
        {
			SendClientMessage(playerid, COLOR_VIP, "VIP Perk: You do not pay the 3 percent convenience fee as you are a VIP!");
        }
    }
    return 1;
}
Dialog:DIALOG_ATMWITHDRAW(playerid, response, listitem, inputtext[])
{
    if(response)
    {
        new amount, fee;

        if(sscanf(inputtext, "i", amount))
        {
			return ShowDialogToPlayer(playerid, DIALOG_ATMWITHDRAW);
        }
        if(amount < 1 || amount > PlayerData[playerid][pBank])
        {
            SendClientMessage(playerid, COLOR_GREY, "Insufficient amount. Please try again.");
            ShowDialogToPlayer(playerid, DIALOG_ATMWITHDRAW);
            return 1;
        }
        if(amount > 1000000)
        {
            SendClientMessage(playerid, COLOR_GREY, "You can't withdraw more than $1,000,000 at a time.");
            ShowDialogToPlayer(playerid, DIALOG_ATMWITHDRAW);
            return 1;
        }

        PlayerData[playerid][pBank] -= amount;
        GivePlayerCash(playerid, amount);

        if(PlayerData[playerid][pDonator] == 0)
        {
            fee = percent(amount, 3);

            PlayerData[playerid][pBank] -= fee;
        }

        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET bank = %i WHERE uid = %i", PlayerData[playerid][pBank], PlayerData[playerid][pID]);
        mysql_tquery(connectionID, queryBuffer);

        ShowActionBubble(playerid, "* %s presses a button and withdraws some cash from the ATM.", GetRPName(playerid));
        SendClientMessageEx(playerid, COLOR_AQUA, "You have withdrawn %s from your account. Your new balance is %s.", FormatCash(amount), FormatCash(PlayerData[playerid][pBank]));

		if(fee)
		{
		    SendClientMessageEx(playerid, COLOR_WHITE, "A 3 percent convenience fee of %s was deducted from your bank account.", FormatCash(fee));
		    AddToTaxVault(fee);
        }
        else if(PlayerData[playerid][pDonator] > 0)
        {
			SendClientMessage(playerid, COLOR_VIP, "VIP Perk: You do not pay the 3 percent convenience fee as you are a VIP!");
        }
    }
    return 1;
}
Dialog:DIALOG_CHANGEPASS(playerid, response, listitem, inputtext[])
{
    if(response)
    {
        if(strlen(inputtext) < 4)
        {
            return SendClientMessage(playerid, COLOR_GREY, "You need to enter a password greater than 4 characters.");
        }

		new
		    password[129];

		WP_Hash(password, sizeof(password), inputtext);

		mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET password = '%s', passwordchanged = '1' WHERE uid = %i", password, PlayerData[playerid][pID]);
		mysql_tquery(connectionID, queryBuffer);

		SendClientMessage(playerid, COLOR_WHITE, "Your account password was changed successfully.");
	}
	return 1;
}
Dialog:DIALOG_BUYCLOTHINGTYPE(playerid, response, listitem, inputtext[])
{
    if(response && listitem >= 0)
    {
        PlayerData[playerid][pMenuType] = listitem;

        if(listitem == 0)
			ShowClothingSelectionMenu(playerid);
		else
			ShowDialogToPlayer(playerid, DIALOG_BUYCLOTHING);
    }
    else
    {
        callcmd::buy(playerid, "\1");
	}
	return 1;
}
Dialog:DIALOG_BUYCLOTHING(playerid, response, listitem, inputtext[])
{
    if(response && listitem >= 0)
    {
        PreviewClothing(playerid, listitem + PlayerData[playerid][pClothingIndex]);
    }
    else
    {
        ShowDialogToPlayer(playerid, DIALOG_BUYCLOTHINGTYPE);
	}
	return 1;
}
Dialog:DIALOG_CLOTHING(playerid, response, listitem, inputtext[])
{
    if(response && listitem >= 0)
    {
        if(!ClothingInfo[playerid][listitem][cExists])
        {
            return SendClientMessage(playerid, COLOR_GREY, "The slot you've selected does not contain any item of clothing.");
        }

        if(ClothingInfo[playerid][listitem][cAttached]) {
			Dialog_Show(playerid, DIALOG_CLOTHINGMENU, DIALOG_STYLE_LIST, ClothingInfo[playerid][listitem][cName], "Detach\nEdit\nDelete", "Select", "Cancel");
        } else {
            Dialog_Show(playerid, DIALOG_CLOTHINGMENU, DIALOG_STYLE_LIST, ClothingInfo[playerid][listitem][cName], "Attach\nEdit\nDelete", "Select", "Cancel");
        }

        PlayerData[playerid][pSelected] = listitem;
	}
	return 1;
}
Dialog:DIALOG_CLOTHINGMENU(playerid, response, listitem, inputtext[])
{
    if(response)
    {
        new clothingid = PlayerData[playerid][pSelected];

        switch(listitem)
        {
            case 0:
            {
                if(!ClothingInfo[playerid][clothingid][cAttached])
                {
                    ClothingInfo[playerid][clothingid][cAttachedIndex] = GetAvailableAttachedSlot(playerid);

                    if(ClothingInfo[playerid][clothingid][cAttachedIndex] >= 0)
                    {
	                    ClothingInfo[playerid][clothingid][cAttached] = 1;

	                    SetPlayerAttachedObject(playerid, ClothingInfo[playerid][clothingid][cAttachedIndex], ClothingInfo[playerid][clothingid][cModel], ClothingInfo[playerid][clothingid][cBone], ClothingInfo[playerid][clothingid][cPosX], ClothingInfo[playerid][clothingid][cPosY], ClothingInfo[playerid][clothingid][cPosZ], ClothingInfo[playerid][clothingid][cRotX], ClothingInfo[playerid][clothingid][cRotY], ClothingInfo[playerid][clothingid][cRotZ],
							ClothingInfo[playerid][clothingid][cScaleX], ClothingInfo[playerid][clothingid][cScaleY], ClothingInfo[playerid][clothingid][cScaleZ]);
						SendClientMessageEx(playerid, COLOR_WHITE, "%s attached to slot %i/5.", ClothingInfo[playerid][clothingid][cName], ClothingInfo[playerid][clothingid][cAttachedIndex] + 1);

						mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE clothing SET attached = 1 WHERE id = %i", ClothingInfo[playerid][clothingid][cID]);
						mysql_tquery(connectionID, queryBuffer);

						for(new i = 0, count = 0; i < MAX_PLAYER_CLOTHING; i ++)
						{
						    if(ClothingInfo[playerid][i][cExists] && ClothingInfo[playerid][i][cAttached])
						    {
						        count++;

						        if(count == 5)
						        {
						            AwardAchievement(playerid, ACH_DressUp);
								}
							}
						}
					}
					else
					{
					    SendClientMessage(playerid, COLOR_GREY, "No attachment slots available. You can only have up to five clothing items attached at once.");
                    }
                }
                else
                {
                    RemovePlayerAttachedObject(playerid, ClothingInfo[playerid][clothingid][cAttachedIndex]);
                    ClothingInfo[playerid][clothingid][cAttached] = 0;
                    ClothingInfo[playerid][clothingid][cAttachedIndex] = -1;

                    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE clothing SET attached = 0 WHERE id = %i", ClothingInfo[playerid][clothingid][cID]);
					mysql_tquery(connectionID, queryBuffer);

					SendClientMessageEx(playerid, COLOR_WHITE, "%s detached and added to inventory.", ClothingInfo[playerid][clothingid][cName]);
                }
            }
			case 1:
			{
		    	Dialog_Show(playerid, DIALOG_CLOTHINGEDIT, DIALOG_STYLE_LIST, "Edition menu", "Edit offset\nChange bone", "Select", "Cancel");
			}
			case 2:
			{
		    	RemovePlayerAttachedObject(playerid, ClothingInfo[playerid][clothingid][cAttachedIndex]);
		    	SendClientMessageEx(playerid, COLOR_WHITE, "%s deleted from your clothing inventory.", ClothingInfo[playerid][clothingid][cName]);

		    	mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "DELETE FROM clothing WHERE id = %i", ClothingInfo[playerid][clothingid][cID]);
		    	mysql_tquery(connectionID, queryBuffer);

			    ClothingInfo[playerid][clothingid][cAttached] = 0;
	            ClothingInfo[playerid][clothingid][cAttachedIndex] = -1;
			    ClothingInfo[playerid][clothingid][cExists] = 0;
			    ClothingInfo[playerid][clothingid][cID] = 0;
			    ClothingInfo[playerid][clothingid][cName] = 0;
			}
		}
	}
	return 1;
}
Dialog:DIALOG_CLOTHINGEDIT(playerid, response, listitem, inputtext[])
{
    if(response)
    {
        switch(listitem)
        {
            case 0:
            {
                PlayerData[playerid][pEditType] = EDIT_CLOTHING;

                if(!ClothingInfo[playerid][PlayerData[playerid][pSelected]][cAttached]) {
                    SetPlayerAttachedObject(playerid, 9, ClothingInfo[playerid][PlayerData[playerid][pSelected]][cModel], ClothingInfo[playerid][PlayerData[playerid][pSelected]][cBone], ClothingInfo[playerid][PlayerData[playerid][pSelected]][cPosX], ClothingInfo[playerid][PlayerData[playerid][pSelected]][cPosY], ClothingInfo[playerid][PlayerData[playerid][pSelected]][cPosZ],
						ClothingInfo[playerid][PlayerData[playerid][pSelected]][cRotX], ClothingInfo[playerid][PlayerData[playerid][pSelected]][cRotY], ClothingInfo[playerid][PlayerData[playerid][pSelected]][cRotZ], ClothingInfo[playerid][PlayerData[playerid][pSelected]][cScaleX], ClothingInfo[playerid][PlayerData[playerid][pSelected]][cScaleY], ClothingInfo[playerid][PlayerData[playerid][pSelected]][cScaleZ]);

					EditAttachedObject(playerid, 9);
                }
                else {
                    EditAttachedObject(playerid, ClothingInfo[playerid][PlayerData[playerid][pSelected]][cAttachedIndex]);
                }

                GameTextForPlayer(playerid, "~w~Editing Mode~n~~g~Click disk to save~n~~r~Press ESC to cancel", 5000, 1);
			}
			case 1:
			{
				Dialog_Show(playerid, DIALOG_CLOTHINGBONE, DIALOG_STYLE_LIST, "Choose a new bone for this clothing item.", "Spine\nHead\nLeft upper arm\nRight upper arm\nLeft hand\nRight hand\nLeft thigh\nRight thigh\nLeft foot\nRight foot\nRight calf\nLeft calf\nLeft forearm\nRight forearm\nLeft shoulder\nRight shoulder\nNeck\nJaw", "Select", "Cancel");
			}
		}
	}
	return 1;
}
Dialog:DIALOG_CLOTHINGBONE(playerid, response, listitem, inputtext[])
{
    if(response)
    {
        ClothingInfo[playerid][PlayerData[playerid][pSelected]][cBone] = listitem + 1;

        if(ClothingInfo[playerid][PlayerData[playerid][pSelected]][cAttached])
        {
            RemovePlayerAttachedObject(playerid, ClothingInfo[playerid][PlayerData[playerid][pSelected]][cAttachedIndex]);
            SetPlayerAttachedObject(playerid, ClothingInfo[playerid][PlayerData[playerid][pSelected]][cAttachedIndex], ClothingInfo[playerid][PlayerData[playerid][pSelected]][cModel], ClothingInfo[playerid][PlayerData[playerid][pSelected]][cBone], ClothingInfo[playerid][PlayerData[playerid][pSelected]][cPosX], ClothingInfo[playerid][PlayerData[playerid][pSelected]][cPosY], ClothingInfo[playerid][PlayerData[playerid][pSelected]][cPosZ],
                ClothingInfo[playerid][PlayerData[playerid][pSelected]][cRotX], ClothingInfo[playerid][PlayerData[playerid][pSelected]][cRotY], ClothingInfo[playerid][PlayerData[playerid][pSelected]][cRotZ], ClothingInfo[playerid][PlayerData[playerid][pSelected]][cScaleX], ClothingInfo[playerid][PlayerData[playerid][pSelected]][cScaleY], ClothingInfo[playerid][PlayerData[playerid][pSelected]][cScaleZ]);
		}

		mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE clothing SET boneid = %i WHERE id = %i", ClothingInfo[playerid][PlayerData[playerid][pSelected]][cBone], ClothingInfo[playerid][PlayerData[playerid][pSelected]][cID]);
		mysql_tquery(connectionID, queryBuffer);

		SendClientMessageEx(playerid, COLOR_WHITE, "Bone for {00AA00}%s{FFFFFF} changed to '%s'.", ClothingInfo[playerid][PlayerData[playerid][pSelected]][cName], inputtext);
    }
    return 1;
}


Dialog:DIALOG_SPAWNCAR(playerid, response, listitem, inputtext[])
{
    if(response)
    {
		mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "SELECT * FROM vehicles WHERE ownerid = %i LIMIT %i, 1", PlayerData[playerid][pID], listitem);
		mysql_tquery(connectionID, queryBuffer, "OnPlayerSpawnVehicle", "ii", playerid, false);
    }
    return 1;
}
Dialog:DIALOG_DESPAWNCAR(playerid, response, listitem, inputtext[])
{
    if(response)
    {
        new count;

        foreach(new i: Vehicle)
	 	{
	 	    if((VehicleInfo[i][vID] > 0 && IsVehicleOwner(playerid, i)) && (count++ == listitem))
	 	    {
	 	        if(IsVehicleOccupied(i) && GetVehicleDriver(i) != playerid)
	 	        {
	 	            return SendClientMessage(playerid, COLOR_GREY, "This vehicle is occupied.");
	 	        }

	 	        SendClientMessageEx(playerid, COLOR_AQUA, "Your {FF6347}%s{33CCFF} which is located in %s has been despawned.", GetVehicleName(i), GetVehicleZoneName(i));
    			DespawnVehicle(i);
    			return 1;
	 	    }
        }
    }
    return 1;
}
Dialog:DIALOG_CARSTORAGE(playerid, response, listitem, inputtext[])
{
    if(response && listitem >= 0)
    {
        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "SELECT id FROM vehicles WHERE ownerid = %i LIMIT %i, 1", PlayerData[playerid][pID], listitem);
        mysql_tquery(connectionID, queryBuffer, "OnPlayerUseCarStorage", "i", playerid);
	}
	return 1;
}
Dialog:DIALOG_FINDCAR(playerid, response, listitem, inputtext[])
{
    if(response)
    {
        new count, garageid;

        foreach(new i: Vehicle)
	 	{
	 	    if((VehicleInfo[i][vID] > 0 && IsVehicleOwner(playerid, i)) && (count++ == listitem))
	 	    {
                PlayerData[playerid][pCP] = CHECKPOINT_MISC;

	            if((garageid = GetVehicleGarage(i)) >= 0)
	            {
	                SetPlayerCheckpoint(playerid, GarageInfo[garageid][gPosX], GarageInfo[garageid][gPosY], GarageInfo[garageid][gPosZ], 3.0);
	                SendClientMessageEx(playerid, COLOR_YELLOW, "Your %s is located in a garage. Checkpoint marked at the garage's location.", GetVehicleName(i));
	            }
	            else
	            {
	                new
	                    Float:x,
	                    Float:y,
	                    Float:z;

	                GetVehiclePos(i, x, y, z);
	                SetPlayerCheckpoint(playerid, x, y, z, 3.0);
	                SendClientMessageEx(playerid, COLOR_YELLOW, "Your %s is located in %s. Checkpoint marked at the location.", GetVehicleName(i), GetZoneName(x, y, z));
	            }

	            return 1;
            }
		}
	}
	return 1;
}
Dialog:DIALOG_BIZINTERIOR(playerid, response, listitem, inputtext[])
{
    if(response)
    {
        new businessid = PlayerData[playerid][pSelected];

        foreach(new i : Player)
        {
            if(GetInsideBusiness(i) == businessid)
            {
				SetPlayerPos(i, bizInteriorArray[listitem][intX], bizInteriorArray[listitem][intY], bizInteriorArray[listitem][intZ]);
				SetPlayerFacingAngle(i, bizInteriorArray[listitem][intA]);
				SetPlayerInterior(i, bizInteriorArray[listitem][intID]);
				SetCameraBehindPlayer(i);
            }
        }

        BusinessInfo[businessid][bIntX] = bizInteriorArray[listitem][intX];
        BusinessInfo[businessid][bIntY] = bizInteriorArray[listitem][intY];
        BusinessInfo[businessid][bIntZ] = bizInteriorArray[listitem][intZ];
        BusinessInfo[businessid][bIntA] = bizInteriorArray[listitem][intA];
	    BusinessInfo[businessid][bInterior] = bizInteriorArray[listitem][intID];

	    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE businesses SET int_x = '%f', int_y = '%f', int_z = '%f', int_a = '%f', interior = %i WHERE id = %i", BusinessInfo[businessid][bIntX], BusinessInfo[businessid][bIntY], BusinessInfo[businessid][bIntZ], BusinessInfo[businessid][bIntA], BusinessInfo[businessid][bInterior], BusinessInfo[businessid][bID]);
	    mysql_tquery(connectionID, queryBuffer);

		ReloadBusiness(businessid);
	    SendClientMessageEx(playerid, COLOR_AQUA, "You've changed the interior of business %i to %s.", businessid, bizInteriorArray[listitem][intName]);
    }
    return 1;
}
Dialog:DIALOG_FACTIONLOCKER(playerid, response, listitem, inputtext[])
{
    if((response) && PlayerData[playerid][pFaction] >= 0 && IsPlayerInRangeOfLocker(playerid, PlayerData[playerid][pFaction]))
    {
		switch(FactionInfo[PlayerData[playerid][pFaction]][fType])
		{
			case FACTION_POLICE, FACTION_MEDIC, FACTION_FEDERAL, FACTION_ARMY:
			{
			    if(listitem == 0) // Toggle duty
			    {
			        if(!PlayerData[playerid][pDuty])
			        {
			            if(IsLawEnforcement(playerid))
			            {
			                ShowActionBubble(playerid, "* %s clocks in and grabs their police issued equipment from the locker.", GetRPName(playerid));
			                SendClientMessage(playerid, COLOR_AQUA, "* You clocked in and grabs your police issued equipment from the locker.");
						}
						else if(FactionInfo[PlayerData[playerid][pFaction]][fType] == FACTION_MEDIC)
			            {
			                ShowActionBubble(playerid, "* %s clocks in and grabs their medical supplies from the locker.", GetRPName(playerid));
			                SendClientMessage(playerid, COLOR_AQUA, "* You clocked in and grabs your medical supplies from the locker.");
						}

                        PlayerData[playerid][pDuty] = 1;

						SetPlayerHealth(playerid, 100.0);
						SetScriptArmour(playerid, 100.0);
					}
					else
					{
					    PlayerData[playerid][pDuty] = 0;
					    ResetPlayerWeaponsEx(playerid);

					    SetScriptArmour(playerid, 0.0);
						ShowActionBubble(playerid, "* %s clocks out and puts their equipment back in the locker.", GetRPName(playerid));
						SendClientMessage(playerid, COLOR_AQUA, "* You clocked out and put your equipment back in the locker.");
					}
				}
				else if(listitem == 1) // Equipment
				{
				    if(PlayerData[playerid][pGunLicense] == 0)
				    {
				        return SendClientMessage(playerid, COLOR_GREY, "You cannot use your faction equipment as you don't have a gun license.");
					}
				    ShowDialogToPlayer(playerid, DIALOG_FACTIONEQUIPMENT);
    				/*if(IsLawEnforcement(playerid))
    				{
				    	Dialog_Show(playerid, DIALOG_FACTIONEQUIPMENT, DIALOG_STYLE_LIST, "Equipment", "Kevlar Vest\nMedkit\nNitestick\nSpraycan\nDesert Eagle\nShotgun\nMP5\nM4\nSPAS-12\nSniper Rifle", "Select", "Cancel");
					}
					else
					{
					    Dialog_Show(playerid, DIALOG_FACTIONEQUIPMENT, DIALOG_STYLE_LIST, "Equipment", "Kevlar Vest\nMedkit\nFire Extinguisher\nDesert Eagle\nPainkillers", "Select", "Cancel");
					}*/
				}
				else if(listitem == 2) // Uniforms
				{
				    if(!GetFactionSkinCount(PlayerData[playerid][pFaction]))
				    {
				        return SendClientMessage(playerid, COLOR_GREY, "There are no uniforms setup for your faction.");
					}
					if(PlayerData[playerid][pClothes] >= 0)
					{
					    PlayerData[playerid][pSkin] = PlayerData[playerid][pClothes];
					    PlayerData[playerid][pClothes] = -1;

					    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET skin = %i, clothes = -1 WHERE uid = %i", PlayerData[playerid][pSkin], PlayerData[playerid][pID]);
					    mysql_tquery(connectionID, queryBuffer);

					    SetPlayerSkin(playerid, PlayerData[playerid][pSkin]);
					    ShowActionBubble(playerid, "* %s switches back to their old outfit.", GetRPName(playerid));
					}
					else
					{
                        PlayerData[playerid][pSkinSelected] = -1;
					    Dialog_Show(playerid, DIALOG_FACTIONSKINS, DIALOG_STYLE_MSGBOX, "Uniform selection", "Press {00AA00}>> Next{A9C4E4} to browse through available uniforms.", ">> Next", "Confirm");
					}
				}
				else if(listitem == 3 && FactionInfo[PlayerData[playerid][pFaction]][fType] != FACTION_MEDIC)
				{
                    ShowCopClothingMenu(playerid);
				}
			}
			case FACTION_GOVERNMENT, FACTION_NEWS:
			{
			    if(PlayerData[playerid][pGunLicense] == 0)
			    {
			        return SendClientMessage(playerid, COLOR_GREY, "You cannot use your faction equipment as you don't have a gun license.");
				}
			    if(listitem == 0) // Equipment
			    {
			        ShowDialogToPlayer(playerid, DIALOG_FACTIONEQUIPMENT);
			        /*if(FactionInfo[PlayerData[playerid][pFaction]][fType] == FACTION_GOVERNMENT)
  					{
  					    Dialog_Show(playerid, DIALOG_FACTIONEQUIPMENT, DIALOG_STYLE_LIST, "Equipment", "Kevlar Vest\nMedkit\nDesert Eagle\nShotgun\nMP5\nM4\nSPAS-12", "Select", "Cancel");
					}
					else
					{
					    Dialog_Show(playerid, DIALOG_FACTIONEQUIPMENT, DIALOG_STYLE_LIST, "Equipment", "Kevlar Vest\nMedkit\nCamera", "Select", "Cancel");
					}*/
				}
				else if(listitem == 1) // Uniforms
				{
				    if(!GetFactionSkinCount(PlayerData[playerid][pFaction]))
				    {
				        return SendClientMessage(playerid, COLOR_GREY, "There are no uniforms setup for your faction.");
					}
					if(PlayerData[playerid][pClothes] >= 0)
					{
					    PlayerData[playerid][pSkin] = PlayerData[playerid][pClothes];
					    PlayerData[playerid][pClothes] = -1;

					    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET skin = %i, clothes = -1 WHERE uid = %i", PlayerData[playerid][pSkin], PlayerData[playerid][pID]);
					    mysql_tquery(connectionID, queryBuffer);

					    ShowActionBubble(playerid, "* %s switches back to their old outfit.", GetRPName(playerid));
					}
					else
					{
					    PlayerData[playerid][pSkinSelected] = -1;
				    	Dialog_Show(playerid, DIALOG_FACTIONSKINS, DIALOG_STYLE_MSGBOX, "Uniform selection", "Press {00AA00}>> Next{A9C4E4} to browse through available uniforms.", ">> Next", "Confirm");
					}
				}
			}
			case FACTION_HITMAN:
			{
			    if(PlayerData[playerid][pGunLicense] == 0)
			    {
			        return SendClientMessage(playerid, COLOR_GREY, "You cannot use your faction equipment as you don't have a gun license.");
				}
			    if(listitem == 0) // Order weapons
			    {
			        Dialog_Show(playerid, DIALOG_FACTIONEQUIPMENT, DIALOG_STYLE_LIST, "Order weapons", "Kevlar Vest ($100)\nKnife ($100)\nShotgun ($150)\nDesert Eagle ($200)\nMP5 ($250)\nM4 ($600)\nSniper rifle ($1,000)\nBomb ($2,500)", "Order", "Cancel");
				}
				else if(listitem == 1) // Change clothes
				{
				    Dialog_Show(playerid, DIALOG_HITMANCLOTHES, DIALOG_STYLE_INPUT, "Change clothes", "Please input the ID of the skin you wish to purchase.\n(( List of skins: http://wiki.sa-mp.com/wiki/Skins:All ))", "Submit", "Cancel");
				}
			}
        }
    }
    return 1;
}
Dialog:DIALOG_FACTIONEQUIPMENT(playerid, response, listitem, inputtext[])
{
    if((response) && PlayerData[playerid][pFaction] >= 0 && IsPlayerInRangeOfLocker(playerid, PlayerData[playerid][pFaction]))
    {
		switch(FactionInfo[PlayerData[playerid][pFaction]][fType])
		{
			/*case FACTION_POLICE, FACTION_FEDERAL, FACTION_ARMY:
			{
			    switch(listitem)
			    {
			        case 0:
			        {
			            SetScriptArmour(playerid, 100.0);
			            ShowActionBubble(playerid, "* %s grabs a kevlar vest from the locker and puts it on.", GetRPName(playerid));
			        }
			        case 1:
			        {
			            SetPlayerHealth(playerid, 100.0);
			            ShowActionBubble(playerid, "* %s grabs a medkit from the locker and opens it.", GetRPName(playerid));
			        }
			        case 2:
			        {
                        GivePlayerWeaponEx(playerid, 3);
			            ShowActionBubble(playerid, "* %s grabs a nitestick from the locker.", GetRPName(playerid));
			        }
			        case 3:
			        {
                        GivePlayerWeaponEx(playerid, 41);
			            ShowActionBubble(playerid, "* %s grabs a can of pepper spray from the locker.", GetRPName(playerid));
			        }
			        case 4:
			        {
						GivePlayerWeaponEx(playerid, 24);
			            ShowActionBubble(playerid, "* %s grabs a Desert Eagle from the locker.", GetRPName(playerid));
			        }
			        case 5:
			        {
			            GivePlayerWeaponEx(playerid, 25);
			            ShowActionBubble(playerid, "* %s grabs a Shotgun from the locker.", GetRPName(playerid));
			        }
			        case 6:
			        {
			            GivePlayerWeaponEx(playerid, 29);
			            ShowActionBubble(playerid, "* %s grabs an MP5 from the locker.", GetRPName(playerid));
			        }
			        case 7:
			        {
			            GivePlayerWeaponEx(playerid, 31);
			            ShowActionBubble(playerid, "* %s grabs an M4 from the locker.", GetRPName(playerid));
			        }
			        case 8:
			        {
			            GivePlayerWeaponEx(playerid, 27);
			            ShowActionBubble(playerid, "* %s grabs a SPAS-12 from the locker.", GetRPName(playerid));
			        }
			        case 9:
			        {
			            GivePlayerWeaponEx(playerid, 34);
			            ShowActionBubble(playerid, "* %s grabs a Sniper Rifle from the locker.", GetRPName(playerid));
			        }
				}
			}
			case FACTION_MEDIC:
			{
			    switch(listitem)
			    {
			        case 0:
			        {
			            SetScriptArmour(playerid, 100.0);
			            ShowActionBubble(playerid, "* %s grabs a kevlar vest from the locker and puts it on.", GetRPName(playerid));
			        }
			        case 1:
			        {
			            SetPlayerHealth(playerid, 100.0);
			            ShowActionBubble(playerid, "* %s grabs a medkit from the locker and opens it.", GetRPName(playerid));
			        }
			        case 2:
			        {
                        GivePlayerWeaponEx(playerid, 42);
			            ShowActionBubble(playerid, "* %s grabs a fire extinguisher from the locker.", GetRPName(playerid));
			        }
			        case 3:
			        {
         				GivePlayerWeaponEx(playerid, 24);
			            ShowActionBubble(playerid, "* %s grabs a Desert Eagle from the locker.", GetRPName(playerid));
			        }
			        case 4:
			        {
			            PlayerData[playerid][pPainkillers] = 5;
			            ShowActionBubble(playerid, "* %s grabs a five pack of painkillers from the locker.", GetRPName(playerid));

			            mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET painkillers = %i WHERE uid = %i", PlayerData[playerid][pPainkillers], PlayerData[playerid][pID]);
			            mysql_tquery(connectionID, queryBuffer);
			        }
				}
			}
			case FACTION_GOVERNMENT:
			{
			    switch(listitem)
			    {
			        case 0:
			        {
			            SetScriptArmour(playerid, 100.0);
			            ShowActionBubble(playerid, "* %s grabs a kevlar vest from the locker and puts it on.", GetRPName(playerid));
			        }
			        case 1:
			        {
			            SetPlayerHealth(playerid, 100.0);
			            ShowActionBubble(playerid, "* %s grabs a medkit from the locker and opens it.", GetRPName(playerid));
			        }
			        case 2:
			        {
			            GivePlayerWeaponEx(playerid, 24);
			            ShowActionBubble(playerid, "* %s grabs a Desert Eagle from the locker.", GetRPName(playerid));
			        }
			        case 3:
			        {
			            GivePlayerWeaponEx(playerid, 25);
			            ShowActionBubble(playerid, "* %s grabs a Shotgun from the locker.", GetRPName(playerid));
			        }
			        case 4:
			        {
			            GivePlayerWeaponEx(playerid, 29);
			            ShowActionBubble(playerid, "* %s grabs an MP5 from the locker.", GetRPName(playerid));
			        }
			        case 5:
			        {
			            GivePlayerWeaponEx(playerid, 31);
			            ShowActionBubble(playerid, "* %s grabs an M4 from the locker.", GetRPName(playerid));
			        }
			        case 6:
			        {
			            GivePlayerWeaponEx(playerid, 27);
			            ShowActionBubble(playerid, "* %s grabs a SPAS-12 from the locker.", GetRPName(playerid));
			        }
			        case 7:
			        {
			            GivePlayerWeaponEx(playerid, 34);
			            ShowActionBubble(playerid, "* %s grabs a Sniper Rifle from the locker.", GetRPName(playerid));
			        }
			    }
			}
			case FACTION_NEWS:
			{
			    switch(listitem)
			    {
			        case 0:
			        {
			            SetScriptArmour(playerid, 100.0);
			            ShowActionBubble(playerid, "* %s grabs a kevlar vest from the locker and puts it on.", GetRPName(playerid));
			        }
			        case 1:
			        {
			            SetPlayerHealth(playerid, 100.0);
			            ShowActionBubble(playerid, "* %s grabs a medkit from the locker and opens it.", GetRPName(playerid));
			        }
			        case 2:
			        {
			            GivePlayerWeaponEx(playerid, 43);
			            ShowActionBubble(playerid, "* %s grabs a digital camera from the locker.", GetRPName(playerid));
			        }
			    }
			}*/
			case FACTION_HITMAN:
			{
			    switch(listitem)
			    {
			        case 0:
					{
					    if(PlayerData[playerid][pCash] < 100)
					    {
					        return SendClientMessage(playerid, COLOR_GREY, "You can't afford this weapon.");
			            }

			            GivePlayerCash(playerid, -100);
			            SetScriptArmour(playerid, 100.0);

			            SendClientMessageEx(playerid, COLOR_AQUA, "* You ordered a kevlar vest for $100.");
			            GameTextForPlayer(playerid, "~r~-$100", 5000, 1);
			    	}
					case 1:
					{
					    if(PlayerData[playerid][pCash] < 100)
					    {
					        return SendClientMessage(playerid, COLOR_GREY, "You can't afford this weapon.");
			            }

			            GivePlayerWeaponEx(playerid, 4);
			            GivePlayerCash(playerid, -100);

			            SendClientMessageEx(playerid, COLOR_AQUA, "* You ordered a knife for $100.");
			            GameTextForPlayer(playerid, "~r~-$100", 5000, 1);
			    	}
			    	case 2:
					{
					    if(PlayerData[playerid][pCash] < 150)
					    {
					        return SendClientMessage(playerid, COLOR_GREY, "You can't afford this weapon.");
			            }

						GivePlayerWeaponEx(playerid, 25);
			            GivePlayerCash(playerid, -150);

			            SendClientMessageEx(playerid, COLOR_AQUA, "* You ordered a shotgun for $150.");
			            GameTextForPlayer(playerid, "~r~-$150", 5000, 1);
			    	}
			    	case 3:					
					{
					    if(PlayerData[playerid][pCash] < 200)
					    {
					        return SendClientMessage(playerid, COLOR_GREY, "You can't afford this weapon.");
			            }

						GivePlayerWeaponEx(playerid, 24);
			            GivePlayerCash(playerid, -200);

			            SendClientMessageEx(playerid, COLOR_AQUA, "* You ordered a Desert Eagle for $200.");
			            GameTextForPlayer(playerid, "~r~-$200", 5000, 1);
			    	}
			    	case 4:
					{
					    if(PlayerData[playerid][pCash] < 250)
					    {
					        return SendClientMessage(playerid, COLOR_GREY, "You can't afford this weapon.");
			            }

						GivePlayerWeaponEx(playerid, 29);
			            GivePlayerCash(playerid, -250);

			            SendClientMessageEx(playerid, COLOR_AQUA, "* You ordered an MP5 for $250.");
			            GameTextForPlayer(playerid, "~r~-$250", 5000, 1);
			    	}
			    	case 5:
					{
					    if(PlayerData[playerid][pCash] < 600)
					    {
					        return SendClientMessage(playerid, COLOR_GREY, "You can't afford this weapon.");
			            }

						GivePlayerWeaponEx(playerid, 31);
			            GivePlayerCash(playerid, -600);

			            SendClientMessageEx(playerid, COLOR_AQUA, "* You ordered an M4 for $600.");
			            GameTextForPlayer(playerid, "~r~-$600", 5000, 1);
			    	}
			    	case 6:
					{
					    if(PlayerData[playerid][pCash] < 1000)
					    {
					        return SendClientMessage(playerid, COLOR_GREY, "You can't afford this weapon.");
			            }

						GivePlayerWeaponEx(playerid, 34);
			            GivePlayerCash(playerid, -1000);

			            SendClientMessageEx(playerid, COLOR_AQUA, "* You ordered a sniper rifle for $1,000.");
			            GameTextForPlayer(playerid, "~r~-$1000", 5000, 1);
			    	}
			    	case 7:
					{
						if(PlayerData[playerid][pFactionRank]<4)
						{
							return SendClientMessage(playerid, COLOR_GREY, "You need to be rank 4 to order a bomb.");
						}
					    if(PlayerData[playerid][pCash] < 2500)
					    {
					        return SendClientMessage(playerid, COLOR_GREY, "You can't afford this weapon.");
			            }
			            if(PlayerData[playerid][pBombs] > 3)
			            {
			                return SendClientMessage(playerid, COLOR_GREY, "You have more than 3 bombs. You can't buy anymore.");
						}

			            PlayerData[playerid][pBombs]++;
			            GivePlayerCash(playerid, -2500);

						mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET bombs = %i WHERE uid = %i", PlayerData[playerid][pBombs], PlayerData[playerid][pID]);
						mysql_tquery(connectionID, queryBuffer);

			            SendClientMessageEx(playerid, COLOR_AQUA, "* You ordered a bomb for $2,500. /plantbomb to place the bomb.");
			            GameTextForPlayer(playerid, "~r~-$2500", 5000, 1);
			    	}
			    }
			}
			default:
			{
			    new amount, weapon, locker = GetNearbyLocker(playerid);
				if(strfind(inputtext, "Kevlar Vest", true) != -1)
				{
				    amount = LockerInfo[locker][locKevlar][1];
                    if(PlayerData[playerid][pCash] < amount)
				    {
				        return SendClientMessage(playerid, COLOR_GREY, "You can't afford this weapon.");
		            }

					SetScriptArmour(playerid, 100.0);
		            GivePlayerCash(playerid, -amount);

		            SendClientMessageEx(playerid, COLOR_AQUA, "* You received a kevlar vest for $%i.", amount);
				}
				else if(strfind(inputtext, "Medkit", true) != -1)
				{
				    amount = LockerInfo[locker][locMedKit][1];
                    if(PlayerData[playerid][pCash] < amount)
				    {
				        return SendClientMessage(playerid, COLOR_GREY, "You can't afford this weapon.");
		            }

					SetPlayerHealth(playerid, 100.0);
		            GivePlayerCash(playerid, -amount);

		            SendClientMessageEx(playerid, COLOR_AQUA, "* You received a medkit for $%i.", amount);
				}
				else if(strfind(inputtext, "Nitestick", true) != -1)
				{
					amount = LockerInfo[locker][locNitestick][1]; weapon = 3;
				    if(PlayerData[playerid][pCash] < amount)
				    {
				        return SendClientMessage(playerid, COLOR_GREY, "You can't afford this weapon.");
		            }

					GivePlayerWeaponEx(playerid, weapon);
		            GivePlayerCash(playerid, -amount);

		            SendClientMessageEx(playerid, COLOR_AQUA, "* You received a %s for $%i.", GetWeaponNameEx(weapon), amount);
				}
				else if(strfind(inputtext, "Mace", true) != -1)
				{
					amount = LockerInfo[locker][locMace][1]; weapon = 41;
				    if(PlayerData[playerid][pCash] < amount)
				    {
				        return SendClientMessage(playerid, COLOR_GREY, "You can't afford this weapon.");
		            }

					GivePlayerWeaponEx(playerid, weapon);
		            GivePlayerCash(playerid, -amount);

		            SendClientMessageEx(playerid, COLOR_AQUA, "* You received a %s for $%i.", GetWeaponNameEx(weapon), amount);
				}
                else if(strfind(inputtext, "Deagle", true) != -1)
				{
					amount = LockerInfo[locker][locDeagle][1]; weapon = 24;
				    if(PlayerData[playerid][pCash] < amount)
				    {
				        return SendClientMessage(playerid, COLOR_GREY, "You can't afford this weapon.");
		            }

					GivePlayerWeaponEx(playerid, weapon);
		            GivePlayerCash(playerid, -amount);

		            SendClientMessageEx(playerid, COLOR_AQUA, "* You received a %s for $%i.", GetWeaponNameEx(weapon), amount);
				}
				else if(strfind(inputtext, "Shotgun", true) != -1)
				{
					amount = LockerInfo[locker][locShotgun][1]; weapon = 25;
				    if(PlayerData[playerid][pCash] < amount)
				    {
				        return SendClientMessage(playerid, COLOR_GREY, "You can't afford this weapon.");
		            }

					GivePlayerWeaponEx(playerid, weapon);
		            GivePlayerCash(playerid, -amount);

		            SendClientMessageEx(playerid, COLOR_AQUA, "* You received a %s for $%i.", GetWeaponNameEx(weapon), amount);
				}
				else if(strfind(inputtext, "MP5", true) != -1)
				{
					amount = LockerInfo[locker][locMP5][1]; weapon = 29;
				    if(PlayerData[playerid][pCash] < amount)
				    {
				        return SendClientMessage(playerid, COLOR_GREY, "You can't afford this weapon.");
		            }

					GivePlayerWeaponEx(playerid, weapon);
		            GivePlayerCash(playerid, -amount);

		            SendClientMessageEx(playerid, COLOR_AQUA, "* You received a %s for $%i.", GetWeaponNameEx(weapon), amount);
				}
				else if(strfind(inputtext, "M4", true) != -1)
				{
					amount = LockerInfo[locker][locM4][1]; weapon = 31;
				    if(PlayerData[playerid][pCash] < amount)
				    {
				        return SendClientMessage(playerid, COLOR_GREY, "You can't afford this weapon.");
		            }

					GivePlayerWeaponEx(playerid, weapon);
		            GivePlayerCash(playerid, -amount);

		            SendClientMessageEx(playerid, COLOR_AQUA, "* You received a %s for $%i.", GetWeaponNameEx(weapon), amount);
				}
				else if(strfind(inputtext, "SPAS-12", true) != -1)
				{
					amount = LockerInfo[locker][locSpas12][1]; weapon = 27;
				    if(PlayerData[playerid][pCash] < amount)
				    {
				        return SendClientMessage(playerid, COLOR_GREY, "You can't afford this weapon.");
		            }

					GivePlayerWeaponEx(playerid, weapon);
		            GivePlayerCash(playerid, -amount);

		            SendClientMessageEx(playerid, COLOR_AQUA, "* You received a %s for $%i.", GetWeaponNameEx(weapon), amount);
				}
				else if(strfind(inputtext, "Sniper", true) != -1)
				{
					amount = LockerInfo[locker][locSniper][1]; weapon = 34;
				    if(PlayerData[playerid][pCash] < amount)
				    {
				        return SendClientMessage(playerid, COLOR_GREY, "You can't afford this weapon.");
		            }

					GivePlayerWeaponEx(playerid, weapon);
		            GivePlayerCash(playerid, -amount);

		            SendClientMessageEx(playerid, COLOR_AQUA, "* You received a %s for $%i.", GetWeaponNameEx(weapon), amount);
				}
				else if(strfind(inputtext, "Camera", true) != -1)
				{
					amount = LockerInfo[locker][locCamera][1]; weapon = 43;
				    if(PlayerData[playerid][pCash] < amount)
				    {
				        return SendClientMessage(playerid, COLOR_GREY, "You can't afford this weapon.");
		            }

					GivePlayerWeaponEx(playerid, weapon);
		            GivePlayerCash(playerid, -amount);

		            SendClientMessageEx(playerid, COLOR_AQUA, "* You received a %s for $%i.", GetWeaponNameEx(weapon), amount);
				}
				else if(strfind(inputtext, "Fire Extinguisher", true) != -1)
				{
					amount = LockerInfo[locker][locFireExt][1]; weapon = 42;
				    if(PlayerData[playerid][pCash] < amount)
				    {
				        return SendClientMessage(playerid, COLOR_GREY, "You can't afford this weapon.");
		            }

					GivePlayerWeaponEx(playerid, weapon);
		            GivePlayerCash(playerid, -amount);

		            SendClientMessageEx(playerid, COLOR_AQUA, "* You received a %s for $%i.", GetWeaponNameEx(weapon), amount);
				}
				else if(strfind(inputtext, "Painkillers", true) != -1)
				{
					amount = LockerInfo[locker][locPainKillers][1];
				    if(PlayerData[playerid][pCash] < amount)
				    {
				        return SendClientMessage(playerid, COLOR_GREY, "You can't afford this weapon.");
		            }

                    PlayerData[playerid][pPainkillers] = 5;
		            GivePlayerCash(playerid, -amount);

		            SendClientMessageEx(playerid, COLOR_AQUA, "* You received painkillers for $%i.", amount);
				}
			}
		}
	}
	return 1;
}
Dialog:DIALOG_FACTIONSKINS(playerid, response, listitem, inputtext[])
{
    if(PlayerData[playerid][pFaction] >= 0 && IsPlayerInRangeOfLocker(playerid, PlayerData[playerid][pFaction]))
    {
        if(response)
        {
			new index = PlayerData[playerid][pSkinSelected] + 1;

			if(index >= MAX_FACTION_SKINS)
			{
			    // When the player is shown the dialog for the first time, their skin isn't changed until they click >> Next.
			    SetPlayerSkin(playerid, PlayerData[playerid][pSkin]);
			    PlayerData[playerid][pSkinSelected] = -1;
			}
			else
			{
			    // Find the next skin in the array.
				for(new i = index; i < MAX_FACTION_SKINS; i ++)
				{
				    if(FactionInfo[PlayerData[playerid][pFaction]][fSkins][i] != 0)
				    {
				        SetPlayerSkin(playerid, FactionInfo[PlayerData[playerid][pFaction]][fSkins][i]);
				        PlayerData[playerid][pSkinSelected] = i;
				        break;
			        }
                }

                if(index == PlayerData[playerid][pSkinSelected] + 1)
                {
                    // Looks like there was no skin found. So, we'll go back to the very first valid skin in the skin array.
                    for(new i = 0; i < MAX_FACTION_SKINS; i ++)
					{
				    	if(FactionInfo[PlayerData[playerid][pFaction]][fSkins][i] != 0)
				    	{
                            SetPlayerSkin(playerid, FactionInfo[PlayerData[playerid][pFaction]][fSkins][i]);
				        	PlayerData[playerid][pSkinSelected] = i;
				        	break;
						}
					}
                }
            }

            Dialog_Show(playerid, DIALOG_FACTIONSKINS, DIALOG_STYLE_MSGBOX, "Uniform selection", "Press {00AA00}>> Next{A9C4E4} to browse through available uniforms.", ">> Next", "Confirm");
        }
        else
        {
            PlayerData[playerid][pClothes] = PlayerData[playerid][pSkin];
            PlayerData[playerid][pSkin] = GetPlayerSkin(playerid);
            PlayerData[playerid][pSkinSelected] = -1;

            mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET skin = %i, clothes = %i WHERE uid = %i", PlayerData[playerid][pSkin], PlayerData[playerid][pClothes], PlayerData[playerid][pID]);
            mysql_tquery(connectionID, queryBuffer);

            ShowActionBubble(playerid, "* %s takes a uniform out of the locker and puts it on.", GetRPName(playerid));
		}
    }
    return 1;
}
Dialog:DIALOG_HITMANCLOTHES(playerid, response, listitem, inputtext[])
{
    if((response) && PlayerData[playerid][pFaction] >= 0 && IsPlayerInRangeOfLocker(playerid, PlayerData[playerid][pFaction]))
    {
		new skinid;

    	if(sscanf(inputtext, "i", skinid))
		{
			return Dialog_Show(playerid, DIALOG_HITMANCLOTHES, DIALOG_STYLE_INPUT, "Change clothes", "Please input the ID of the skin you wish to purchase.\n(( List of skins: http://wiki.sa-mp.com/wiki/Skins:All ))", "Submit", "Cancel");
        }
        if(!(1 <= skinid <= 311))
        {
            SendClientMessage(playerid, COLOR_GREY, "Invalid skin.");
            return Dialog_Show(playerid, DIALOG_HITMANCLOTHES, DIALOG_STYLE_INPUT, "Change clothes", "Please input the ID of the skin you wish to purchase.\n(( List of skins: http://wiki.sa-mp.com/wiki/Skins:All ))", "Submit", "Cancel");
        }

        SetScriptSkin(playerid, skinid);
		GameTextForPlayer(playerid, "~w~Clothes changed for free", 3000, 3);
    }
    return 1;
}

Dialog:DIALOG_VEHICLELOOKUP1(playerid, response, listitem, inputtext[])
{
    if((response) && IsLawEnforcement(playerid))
    {
	    new vehicleid, string[128];

	    if(sscanf(inputtext, "i", vehicleid))
	    {
    	    return Dialog_Show(playerid, DIALOG_VEHICLELOOKUP1, DIALOG_STYLE_INPUT, "Vehicle lookup", "Enter the ID of the vehicle to lookup.\n(( You can find out the ID of a vehicle by using /dl. ))", "Submit", "Cancel");
		}
		if(!IsValidVehicle(vehicleid) || !VehicleInfo[vehicleid][vOwnerID])
		{
		    SendClientMessage(playerid, COLOR_GREY, "The vehicle ID specified is not owned by any particular person.");
	    	return Dialog_Show(playerid, DIALOG_VEHICLELOOKUP1, DIALOG_STYLE_INPUT, "Vehicle lookup", "Enter the ID of the vehicle to lookup.\n(( You can find out the ID of a vehicle by using /dl. ))", "Submit", "Cancel");
		}

		PlayerData[playerid][pSelected] = vehicleid;

		format(string, sizeof(string), "Name: %s\nOwner: %s\nTickets: $%i\nLocation: %s", GetVehicleName(vehicleid), VehicleInfo[vehicleid][vOwner], VehicleInfo[vehicleid][vTickets], GetVehicleZoneName(vehicleid));
    	Dialog_Show(playerid, DIALOG_VEHICLELOOKUP2, DIALOG_STYLE_MSGBOX, "Vehicle lookup", string, "Track", "Cancel");
	}
	return 1;
}
Dialog:DIALOG_VEHICLELOOKUP2(playerid, response, listitem, inputtext[])
{
	if((response) && IsLawEnforcement(playerid))
    {
		new garageid, vehicleid = PlayerData[playerid][pSelected];

		if((garageid = GetVehicleGarage(vehicleid)) >= 0)
		{
		    SetPlayerCheckpoint(playerid, GarageInfo[garageid][gPosX], GarageInfo[garageid][gPosY], GarageInfo[garageid][gPosZ], 3.0);
		    SendClientMessage(playerid, COLOR_WHITE, "Checkpoint marked at the garage this vehicle is inside of.");
		}
		else
		{
		    new
				Float:x,
				Float:y,
				Float:z;

            SendClientMessage(playerid, COLOR_WHITE, "Checkpoint marked at the vehicle's last known location.");

			GetVehiclePos(vehicleid, x, y, z);
			SetPlayerCheckpoint(playerid, x, y, z, 3.0);
		}

		PlayerData[playerid][pCP] = CHECKPOINT_MISC;
	}
	return 1;
}
Dialog:DIALOG_FACTIONPAY1(playerid, response, listitem, inputtext[])
{
    if(response)
    {
        PlayerData[playerid][pSelected] = listitem;
        Dialog_Show(playerid, DIALOG_FACTIONPAY2, DIALOG_STYLE_INPUT, "Change paycheck", "Enter the new paycheck amount for this rank:", "Submit", "Back");
    }
    return 1;
}
Dialog:DIALOG_FACTIONPAY2(playerid, response, listitem, inputtext[])
{
    if(GetPlayerFaction(playerid) != FACTION_NONE)
    {
        if(response)
        {
            new amount, factionid = PlayerData[playerid][pFaction], rankid = PlayerData[playerid][pSelected];

            if(sscanf(inputtext, "i", amount))
            {
                return Dialog_Show(playerid, DIALOG_FACTIONPAY2, DIALOG_STYLE_INPUT, "Change paycheck", "Enter the new paycheck amount for this rank:", "Submit", "Back");
			}
			if(!(1 <= amount <= 10000))
			{
			    SendClientMessage(playerid, COLOR_GREY, "The specified amount must range from $1 to $10,000.");
			    return Dialog_Show(playerid, DIALOG_FACTIONPAY2, DIALOG_STYLE_INPUT, "Change paycheck", "Enter the new paycheck amount for this rank:", "Submit", "Back");
			}
			if(GetTotalFactionPay(factionid) - FactionInfo[factionid][fPaycheck][rankid] + amount > FactionInfo[factionid][fBudget])
			{
				return SendClientMessageEx(playerid, COLOR_GREY, "Your faction only has a budget of $%i left! might have to do some adjusting there.", (FactionInfo[factionid][fBudget] - GetTotalFactionPay(factionid)));
			}

			FactionInfo[factionid][fPaycheck][rankid] = amount;

		    mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "INSERT INTO factionpay VALUES(%i, %i, %i) ON DUPLICATE KEY UPDATE amount = %i", factionid, rankid, amount, amount);
		    mysql_tquery(connectionID, queryBuffer);

			SendClientMessageEx(playerid, COLOR_AQUA, "You have set the paycheck for rank %i to $%i.", rankid, amount);
			SendAdminMessage(COLOR_RED, "AdmCmd: %s [ID: %i] has set the paycheck for rank %i to $%i.", GetRPName(playerid), playerid, rankid, amount);

		    Log_Write("log_faction", "%s (uid: %i) set %s's (id: %i) paycheck for rank %i to $%i.", GetPlayerNameEx(playerid), PlayerData[playerid][pID], FactionInfo[factionid][fName], factionid, rankid, amount);
        }

		ShowDialogToPlayer(playerid, DIALOG_FACTIONPAY1);
    }
    return 1;
}
Dialog:DIALOG_PHONEBOOK(playerid, response, listitem, inputtext[])
{
    if(response)
    {
        if(!strcmp(inputtext, ">> Next page", true))
        {
            PlayerData[playerid][pPage]++;
            ShowDialogToPlayer(playerid, DIALOG_PHONEBOOK);
        }
        else if(!strcmp(inputtext, "<< Go back", true) && PlayerData[playerid][pPage] > 1)
        {
            PlayerData[playerid][pPage]--;
            ShowDialogToPlayer(playerid, DIALOG_PHONEBOOK);
        }
    }
    return 1;
}
Dialog:DIALOG_CREATEZONE(playerid, response, listitem, inputtext[])
{
    if((response) && (PlayerData[playerid][pAdmin] >= MANAGEMENT || PlayerData[playerid][pGangMod] || PlayerData[playerid][pDynamicAdmin]))
    {
        PlayerData[playerid][pMinX] = 0.0;
        PlayerData[playerid][pMinY] = 0.0;
        PlayerData[playerid][pMaxX] = 0.0;
        PlayerData[playerid][pMaxY] = 0.0;

        if(PlayerData[playerid][pZoneType] == ZONETYPE_LAND)
		{
	        PlayerData[playerid][pZoneCreation] = ZONETYPE_LAND;
	        SendClientMessage(playerid, COLOR_WHITE, "Your land needs to be within a square or rectangle. /confirm to set the four boundary points.");
		}
		else if(PlayerData[playerid][pZoneType] == ZONETYPE_TURF)
		{
	        PlayerData[playerid][pZoneCreation] = ZONETYPE_TURF;
	        SendClientMessage(playerid, COLOR_WHITE, "Your turf needs to be within a square or rectangle. /confirm to set the four boundary points.");
		}
    }
    return 1;
}
Dialog:DIALOG_CONFIRMZONE(playerid, response, listitem, inputtext[])
{
    if(response)
    {
        if(PlayerData[playerid][pZoneCreation] == ZONETYPE_LAND)
        {
	        for(new i = 0; i < MAX_LANDS; i ++)
			{
			    if(!LandInfo[i][lExists])
			    {
			        new
			            Float:minx = PlayerData[playerid][pMinX],
			            Float:miny = PlayerData[playerid][pMinY],
			            Float:maxx = PlayerData[playerid][pMaxX],
			            Float:maxy = PlayerData[playerid][pMaxY],
			            Float:x, Float:y, Float:z;

        			GetPlayerPos(playerid, x, y, z);

			        if(minx > maxx)
					{
                        PlayerData[playerid][pMinX] = maxx;
                        PlayerData[playerid][pMaxX] = minx;
			        }
			        if(miny > maxy)
					{
			            PlayerData[playerid][pMinY] = maxy;
			            PlayerData[playerid][pMaxY] = miny;
			        }

					mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "INSERT INTO lands (price, min_x, min_y, max_x, max_y, heightx, heighty, heightz) VALUES(%i, '%f', '%f', '%f', '%f', '%f', '%f', '%f')", PlayerData[playerid][pLandCost], PlayerData[playerid][pMinX], PlayerData[playerid][pMinY], PlayerData[playerid][pMaxX], PlayerData[playerid][pMaxY], x, y, z);
					mysql_tquery(connectionID, queryBuffer, "OnAdminCreateLand", "iiifffffff", playerid, i, PlayerData[playerid][pLandCost], PlayerData[playerid][pMinX], PlayerData[playerid][pMinY], PlayerData[playerid][pMaxX], PlayerData[playerid][pMaxY], x, y, z);
  					CancelZoneCreation(playerid);
					return 1;
				}
			}

			SendClientMessage(playerid, COLOR_GREY, "Land slots are currently full. Ask developers to increase the internal limit.");
			CancelZoneCreation(playerid);
    	}
    	else if(PlayerData[playerid][pZoneCreation] == ZONETYPE_TURF)
    	{
   			for(new i = 0; i < MAX_TURFS; i ++)
			{
			    if(!IsValidTurfId(i))
			    {
			        new
			            Float:minx = PlayerData[playerid][pMinX],
			            Float:miny = PlayerData[playerid][pMinY],
			            Float:maxx = PlayerData[playerid][pMaxX],
			            Float:maxy = PlayerData[playerid][pMaxY],
			            Float:z;

        			GetPlayerPos(playerid, z, z, z);

			        if(minx > maxx)
					{
                        PlayerData[playerid][pMinX] = maxx;
                        PlayerData[playerid][pMaxX] = minx;
			        }
			        if(miny > maxy)
					{
			            PlayerData[playerid][pMinY] = maxy;
			            PlayerData[playerid][pMaxY] = miny;
			        }

					mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "INSERT INTO turfs (id, name, type, min_x, min_y, max_x, max_y, height,heightx,heighty,heightz,heightinterior, heightvirtualworld) VALUES(%i, '%e', %i, '%f', '%f', '%f', '%f', '%f', '%f', '%f', '%f', '%d', '%d')", 
					i, PlayerData[playerid][pTurfName], PlayerData[playerid][pTurfType], PlayerData[playerid][pMinX], PlayerData[playerid][pMinY], 
					PlayerData[playerid][pMaxX], PlayerData[playerid][pMaxY], z, PlayerData[playerid][pTurfPointX],PlayerData[playerid][pTurfPointY],PlayerData[playerid][pTurfPointZ],
					GetPlayerInterior(playerid),GetPlayerVirtualWorld(playerid));
					mysql_tquery(connectionID, queryBuffer, "OnAdminCreateTurf", "iisiffffffff", playerid, i, PlayerData[playerid][pTurfName], PlayerData[playerid][pTurfType], PlayerData[playerid][pMinX], PlayerData[playerid][pMinY], PlayerData[playerid][pMaxX], PlayerData[playerid][pMaxY], z,PlayerData[playerid][pTurfPointX],PlayerData[playerid][pTurfPointY],PlayerData[playerid][pTurfPointZ]);
  					CancelZoneCreation(playerid);
					return 1;
				}
			}

			SendClientMessage(playerid, COLOR_GREY, "Turf slots are currently full. Ask developers to increase the internal limit.");
			CancelZoneCreation(playerid);
    	}
	}
	else
	{
	    CancelZoneCreation(playerid);

        if(PlayerData[playerid][pZoneType] == ZONETYPE_LAND)
		{
			SendClientMessage(playerid, COLOR_WHITE, "Your land needs to be within a square or rectangle. /confirm to set the four boundary points.");
			SendClientMessage(playerid, COLOR_WHITE, "Note: You can use /landcancel to exit land creation mode.");
			PlayerData[playerid][pZoneCreation] = ZONETYPE_LAND;
		}
		else if(PlayerData[playerid][pZoneType] == ZONETYPE_TURF)
		{
			SendClientMessage(playerid, COLOR_WHITE, "Your turf needs to be within a square or rectangle. /confirm to set the four boundary points.");
			SendClientMessage(playerid, COLOR_WHITE, "Note: You can use /turfcancel to exit turf creation mode.");
			PlayerData[playerid][pZoneCreation] = ZONETYPE_TURF;
		}
	}
	return 1;
}
Dialog:DIALOG_LANDBUILDTYPE(playerid, response, listitem, inputtext[])
{
    new landid = GetNearbyLand(playerid);

    if(landid == -1 || !HasLandPerms(playerid, landid))
	{
		return 0;
	}

    if(response)
    {
		PlayerData[playerid][pMenuType] = listitem;
		ShowDialogToPlayer(playerid, DIALOG_LANDBUILD1);
	}
    else
    {
        ShowDialogToPlayer(playerid, DIALOG_LANDMENU);
	}
	return 1;
}
Dialog:DIALOG_LANDBUILD1(playerid, response, listitem, inputtext[])
{
    new landid = GetNearbyLand(playerid);

    if(landid == -1 || !HasLandPerms(playerid, landid))
	{
		return 0;
	}

    if(response)
    {
        switch(PlayerData[playerid][pMenuType])
        {
            case 0: // Model selection
            {
				PlayerData[playerid][pCategory] = listitem;
				ShowLandObjects(playerid, MODEL_SELECTION_LANDOBJECTS);
            }
            case 1:
            {
				PlayerData[playerid][pCategory] = listitem;
				ShowDialogToPlayer(playerid, DIALOG_LANDBUILD2);
			}
       }
	}
    else
    {
        ShowDialogToPlayer(playerid, DIALOG_LANDBUILDTYPE);
	}
	return 1;
}
Dialog:DIALOG_LANDBUILD2(playerid, response, listitem, inputtext[])
{
    new landid = GetNearbyLand(playerid);

    if(landid == -1 || !HasLandPerms(playerid, landid))
	{
		return 0;
	}

    if(response)
    {
        PurchaseLandObject(playerid, landid, listitem + PlayerData[playerid][pFurnitureIndex]);
	}
	else
	{
	    ShowDialogToPlayer(playerid, DIALOG_LANDBUILD1);
	}
	return 1;
}
Dialog:DIALOG_LANDMENU(playerid, response, listitem, inputtext[])
{
    new landid = GetNearbyLand(playerid);

    if(landid == -1 || !HasLandPerms(playerid, landid))
    {
        return 1;
    }

    if(response)
    {
        switch(listitem)
        {
            case 0:
            {
                mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "SELECT COUNT(*) FROM landobjects WHERE landid = %i", LandInfo[landid][lID]);
				mysql_tquery(connectionID, queryBuffer, "OnQueryFinished", "ii", THREAD_COUNT_LANDOBJECTS, playerid);
			}
			case 1:
			{
			    Dialog_Show(playerid, DIALOG_LANDEDITOBJECT, DIALOG_STYLE_INPUT, "Edit object", "Please enter the object ID of the object to edit:\nYou can find out the ID of objects by toggling labels in the menu.", "Submit", "Back");
			}
			case 2:
			{
				if(!LandInfo[landid][lLabels])
			    {
			        LandInfo[landid][lLabels] = 1;
			        SendClientMessage(playerid, COLOR_AQUA, "You will now see labels appear above the objects in your land.");
			    }
			    else
			    {
			        LandInfo[landid][lLabels] = 0;
			        SendClientMessage(playerid, COLOR_AQUA, "You will no longer see any labels appear above your land objects.");
			    }

			    ReloadAllLandObjects(landid);
			    ShowDialogToPlayer(playerid, DIALOG_LANDMENU);
			}
			case 3:
			{
			    PlayerData[playerid][pPage] = 1;
			    ShowDialogToPlayer(playerid, DIALOG_LANDOBJECTS);
			}
			case 4:
			{
			    Dialog_Show(playerid, DIALOG_LANDSELLALL, DIALOG_STYLE_MSGBOX, "Clear objects", "This option sells all the objects in your land. You will receive\n75 percent of the total cost of all your objects.\n\nPress {FF6347}Confirm{A9C4E4} to proceed with the operation.", "Confirm", "Back");
			}
			case 5:
			{
			    if(LandInfo[landid][lLevel] >= 5)
			    {
			        return SendClientMessage(playerid, COLOR_GREY, "Your land can't be upgraded any further.");
			    }

			    new
			        string[224];

			    format(string, sizeof(string), "You are about to upgrade your land to level %i/5.\n\nThis upgrade will cost you {00AA00}$100,000{A9C4E4} and unlocks %i more\nobject slots for your land.\n\nAre you sure you want to upgrade your land?", LandInfo[landid][lLevel] + 1, GetLandObjectCapacity(LandInfo[landid][lLevel] + 1) - GetLandObjectCapacity(LandInfo[landid][lLevel]));
				Dialog_Show(playerid, DIALOG_LANDUPGRADE, DIALOG_STYLE_MSGBOX, "Upgrade land", string, "Yes", "No");
			}
			case 6:
			{
			    Dialog_Show(playerid, DIALOG_LANDPERMS, DIALOG_STYLE_INPUT, "Permissions", "Please enter the name or ID of the player to take or give permissions to:", "Submit", "Back");
			}
		}
    }
    return 1;
}
Dialog:DIALOG_LANDUPGRADE(playerid, response, listitem, inputtext[])
{
    new landid = GetNearbyLand(playerid);

    if(landid == -1 || !HasLandPerms(playerid, landid))
    {
        return 1;
    }

    if(response)
    {
        if(LandInfo[landid][lLevel] < 5)
    	{
            if(PlayerData[playerid][pCash] < 100000)
            {
                return SendClientMessage(playerid, COLOR_GREY, "You can't afford to upgrade your land.");
            }

            LandInfo[landid][lLevel]++;

            mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE lands SET level = level + 1 WHERE id = %i", LandInfo[landid][lID]);
            mysql_tquery(connectionID, queryBuffer);

            GivePlayerCash(playerid, -100000);
            GameTextForPlayer(playerid, "~r~-$100000", 5000, 1);
            SendClientMessageEx(playerid, COLOR_GREEN, "You paid $100,000 to upgrade your land to level %i/5. Your land can now have up to %i objects.", LandInfo[landid][lLevel], GetLandObjectCapacity(LandInfo[landid][lLevel]));
        }
    }
    else
    {
        ShowDialogToPlayer(playerid, DIALOG_LANDMENU);
    }
    return 1;
}
Dialog:DIALOG_LANDEDITOBJECT(playerid, response, listitem, inputtext[])
{
    new landid = GetNearbyLand(playerid);

    if(landid == -1 || !HasLandPerms(playerid, landid))
    {
        return 1;
    }

    if(response)
    {
        new objectid;

        if(sscanf(inputtext, "i", objectid))
        {
            return Dialog_Show(playerid, DIALOG_LANDEDITOBJECT, DIALOG_STYLE_INPUT, "Edit object", "Please enter the object ID of the object to edit:\nYou can find out the ID of objects by toggling labels in the menu.", "Submit", "Back");
		}
		if(!IsValidDynamicObject(objectid) || Streamer_GetExtraInt(objectid, E_OBJECT_TYPE) != E_OBJECT_LAND)
		{
		    SendClientMessage(playerid, COLOR_GREY, "Invalid object. You can find out an object's ID by enabling labels.");
		    return Dialog_Show(playerid, DIALOG_LANDEDITOBJECT, DIALOG_STYLE_INPUT, "Edit object", "Please enter the object ID of the object to edit:\nYou can find out the ID of objects by toggling labels in the menu.", "Submit", "Back");
        }
        if(Streamer_GetExtraInt(objectid, E_OBJECT_EXTRA_ID) != LandInfo[landid][lID])
        {
            SendClientMessage(playerid, COLOR_GREY, "Invalid object. This land object is not apart of your land.");
            return Dialog_Show(playerid, DIALOG_LANDEDITOBJECT, DIALOG_STYLE_INPUT, "Edit object", "Please enter the object ID of the object to edit:\nYou can find out the ID of objects by toggling labels in the menu.", "Submit", "Back");
        }

        PlayerData[playerid][pSelected] = objectid;
		ShowDialogToPlayer(playerid, DIALOG_LANDOBJECTMENU);
    }
    else
    {
        ShowDialogToPlayer(playerid, DIALOG_LANDMENU);
	}
	return 1;
}
Dialog:DIALOG_LANDOBJECTMENU(playerid, response, listitem, inputtext[])
{
    new landid = GetNearbyLand(playerid);

    if(landid == -1 || !HasLandPerms(playerid, landid))
    {
        return 1;
    }

    if(response)
    {
        new objectid = PlayerData[playerid][pSelected];

        if(!strcmp(inputtext, "Edit object"))
        {
            if(Streamer_GetExtraInt(objectid, E_OBJECT_OPENED))
			{
			    return SendClientMessage(playerid, COLOR_GREY, "You can't edit your gate while it is opened.");
			}

	        PlayerData[playerid][pEditType] = EDIT_LAND_OBJECT;
    	    PlayerData[playerid][pEditObject] = objectid;
    		PlayerData[playerid][pObjectLand] = landid;

			EditDynamicObject(playerid, objectid);
		    GameTextForPlayer(playerid, "~w~Editing Mode~n~~g~Click disk to save~n~~r~Press ESC to cancel", 5000, 1);
        }
        else if(!strcmp(inputtext, "Edit gate destination"))
        {
            if(Streamer_GetExtraInt(objectid, E_OBJECT_OPENED))
			{
			    return SendClientMessage(playerid, COLOR_GREY, "You can't edit your gate while it is opened.");
			}

	        PlayerData[playerid][pEditType] = EDIT_LAND_GATE_MOVE;
	        PlayerData[playerid][pEditObject] = objectid;
	        PlayerData[playerid][pObjectLand] = landid;

			EditDynamicObject(playerid, objectid);
			SendClientMessage(playerid, COLOR_WHITE, "You are now editing the move-to position for your gate.");
	        GameTextForPlayer(playerid, "~w~Editing Mode~n~~g~Click disk to save~n~~r~Press ESC to cancel", 5000, 1);
        }
        else if(!strcmp(inputtext, "Duplicate object"))
        {
            PlayerData[playerid][pSelected] = objectid;
            PlayerData[playerid][pObjectLand] = landid;
            mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "SELECT COUNT(*) FROM landobjects WHERE landid = %i", LandInfo[landid][lID]);
			mysql_tquery(connectionID, queryBuffer, "OnQueryFinished", "ii", THREAD_DUPLICATE_LANDOBJ, playerid);

        }
        else if(!strcmp(inputtext, "Sell object"))
        {
            PlayerData[playerid][pSelected] = objectid;

	        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "SELECT name, price FROM landobjects WHERE id = %i", Streamer_GetExtraInt(objectid, E_OBJECT_INDEX_ID));
	        mysql_tquery(connectionID, queryBuffer, "OnQueryFinished", "ii", THREAD_SELL_LANDOBJECT, playerid);
		}
	}
	else
	{
	    ShowDialogToPlayer(playerid, DIALOG_LANDMENU);

	    //Dialog_Show(playerid, DIALOG_LANDEDITOBJECT, DIALOG_STYLE_INPUT, "Edit object", "Please enter the object ID of the object to edit:\nYou can find out the ID of objects by toggling labels in the menu.", "Submit", "Back");
	}
	return 1;
}
Dialog:DIALOG_LANDOBJECTS(playerid, response, listitem, inputtext[])
{
    if(response)
    {
        if(!strcmp(inputtext, ">> Next page", true))
        {
            PlayerData[playerid][pPage]++;
            ShowDialogToPlayer(playerid, DIALOG_LANDOBJECTS);
        }
        else if(!strcmp(inputtext, "<< Go back", true) && PlayerData[playerid][pPage] > 1)
        {
            PlayerData[playerid][pPage]--;
            ShowDialogToPlayer(playerid, DIALOG_LANDOBJECTS);
        }
        else
        {
            new objectid = strval(inputtext);

            if(IsValidDynamicObject(objectid) && Streamer_GetExtraInt(objectid, E_OBJECT_TYPE) == E_OBJECT_LAND)
            {
	            PlayerData[playerid][pSelected] = objectid;
				ShowDialogToPlayer(playerid, DIALOG_LANDOBJECTMENU);
			}
        }
    }
    else
    {
        ShowDialogToPlayer(playerid, DIALOG_LANDMENU);
	}
	return 1;
}
Dialog:DIALOG_LANDSELLALL(playerid, response, listitem, inputtext[])
{
    new landid = GetNearbyLand(playerid);

    if(landid == -1 || !HasLandPerms(playerid, landid))
    {
        return 1;
    }

    if(response)
    {
    	mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "SELECT price FROM landobjects WHERE landid = %i", LandInfo[landid][lID]);
		mysql_tquery(connectionID, queryBuffer, "OnQueryFinished", "ii", THREAD_CLEAR_LANDOBJECTS, playerid);
	}
	else
	{
	    ShowDialogToPlayer(playerid, DIALOG_LANDMENU);
	}
	return 1;
}
/*Dialog:DIALOG_LANDPERMS:
{
    new landid = GetNearbyLand(playerid), targetid;

    if(landid == -1 || !HasLandPerms(playerid, landid))
    {
        return 1;
    }

    if(response)
    {
		if(sscanf(inputtext, "u", targetid))
		{
			return Dialog_Show(playerid, DIALOG_LANDPERMS, DIALOG_STYLE_INPUT, "Permissions", "Please enter the name or ID of the player to take or give permissions to:", "Submit", "Back");
        }
        if(!IsPlayerConnected(targetid))
        {
            SendClientMessage(playerid, COLOR_GREY, "The player specified is disconnected.");
            return Dialog_Show(playerid, DIALOG_LANDPERMS, DIALOG_STYLE_INPUT, "Permissions", "Please enter the name or ID of the player to take or give permissions to:", "Submit", "Back");
        }
        if(targetid == playerid)
		{
			SendClientMessage(playerid, COLOR_GREY, "You can't give permissions to yourself.");
			return Dialog_Show(playerid, DIALOG_LANDPERMS, DIALOG_STYLE_INPUT, "Permissions", "Please enter the name or ID of the player to take or give permissions to:", "Submit", "Back");
		}

        if(PlayerData[targetid][pLandPerms] == landid)
        {
            PlayerData[targetid][pLandPerms] = -1;

            SendClientMessageEx(targetid, COLOR_AQUA, "%s has removed your access to their land's objects.", GetRPName(playerid));
			SendClientMessageEx(playerid, COLOR_AQUA, "You have removed %s's access to your land's objects.", GetRPName(targetid));
		}
		else
		{
		    PlayerData[targetid][pLandPerms] = landid;

            SendClientMessageEx(targetid, COLOR_AQUA, "%s has granted you access to their land's objects.", GetRPName(playerid));
			SendClientMessageEx(playerid, COLOR_AQUA, "You have granted %s access to your land's objects.", GetRPName(targetid));
		}
	}

	ShowDialogToPlayer(playerid, DIALOG_LANDMENU);
}*/
Dialog:DIALOG_LANDPERMS(playerid, response, listitem, inputtext[])
{
    new landid = GetNearbyLand(playerid), targetid;

    if(landid == -1 || !IsLandOwner(playerid, landid))
    {
        return 1;
    }

    if(response)
    {
		if(sscanf(inputtext, "u", targetid))
		{
			return Dialog_Show(playerid, DIALOG_LANDPERMS, DIALOG_STYLE_INPUT, "Permissions", "Please enter the name or ID of the player to take or give permissions to:", "Submit", "Back");
        }
        if(!IsPlayerConnected(targetid))
        {
            SendClientMessage(playerid, COLOR_GREY, "The player specified is disconnected.");
            return Dialog_Show(playerid, DIALOG_LANDPERMS, DIALOG_STYLE_INPUT, "Permissions", "Please enter the name or ID of the player to take or give permissions to:", "Submit", "Back");
        }
        if(targetid == playerid)
		{
			SendClientMessage(playerid, COLOR_GREY, "You can't give permissions to yourself.");
			return Dialog_Show(playerid, DIALOG_LANDPERMS, DIALOG_STYLE_INPUT, "Permissions", "Please enter the name or ID of the player to take or give permissions to:", "Submit", "Back");
		}

        if(PlayerData[targetid][pLandPerms] == landid)
        {
            PlayerData[targetid][pLandPerms] = -1;

            SendClientMessageEx(targetid, COLOR_AQUA, "%s has removed your access to their land's objects.", GetRPName(playerid));
			SendClientMessageEx(playerid, COLOR_AQUA, "You have removed %s's access to your land's objects.", GetRPName(targetid));
			mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET landkeys = %i WHERE uid = %i", LandInfo[landid][lID], PlayerData[targetid][pID]);
			mysql_tquery(connectionID, queryBuffer);
		}
		else if(PlayerData[targetid][pLandPerms] == -1)
		{
		    PlayerData[targetid][pLandPerms] = landid;

            SendClientMessageEx(targetid, COLOR_AQUA, "%s has granted you access to their land's objects.", GetRPName(playerid));
			SendClientMessageEx(playerid, COLOR_AQUA, "You have granted %s access to your land's objects.", GetRPName(targetid));
			mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET landkeys = 0 WHERE uid = %i", PlayerData[targetid][pID]);
			mysql_tquery(connectionID, queryBuffer);
		}
		else
		{
		    SendClientMessage(playerid, COLOR_AQUA, "That player already has access to someone's land. (/droplandkeys)");
		}
	}

	ShowDialogToPlayer(playerid, DIALOG_LANDMENU);
	return 1;
}

Dialog:DIALOG_FREENAMECHANGE(playerid, response, listitem, inputtext[])
{
    if(response)
    {
        if(isnull(inputtext))
        {
            if(!IsPlayerLoggedIn(playerid))
			{
	        	KickPlayer(playerid, "Please reconnect with a proper roleplay name in the Firstname_Lastname format.", INVALID_PLAYER_ID, BAN_VISIBILITY_NONE);
	        	return 1;
			}
            return Dialog_Show(playerid, DIALOG_FREENAMECHANGE, DIALOG_STYLE_INPUT, "Non-RP Name", "An administrator has came to the conclusion that your name is non-RP.\nTherefore you have been given this free namechange in order to correct it.\n\nEnter a name in the Firstname_Lastname format in the box below:", "Submit", "Cancel");
		}
		if(!(3 <= strlen(inputtext) <= 20))
		{
		    SendClientMessage(playerid, COLOR_GREY, "Your name must contain 3 to 20 characters.");
		    return Dialog_Show(playerid, DIALOG_FREENAMECHANGE, DIALOG_STYLE_INPUT, "Non-RP Name", "An administrator has came to the conclusion that your name is non-RP.\nTherefore you have been given this free namechange in order to correct it.\n\nEnter a name in the Firstname_Lastname format in the box below:", "Submit", "Cancel");
		}
		if(strfind(inputtext, "_") == -1 || inputtext[strlen(inputtext)-1] == '_')
		{
		    SendClientMessage(playerid, COLOR_GREY, "The name needs to contain at least one underscore.");
		    return Dialog_Show(playerid, DIALOG_FREENAMECHANGE, DIALOG_STYLE_INPUT, "Non-RP Name", "An administrator has came to the conclusion that your name is non-RP.\nTherefore you have been given this free namechange in order to correct it.\n\nEnter a name in the Firstname_Lastname format in the box below:", "Submit", "Cancel");
		}
        if(!IsValidUsername(inputtext))
        {
		    SendClientMessage(playerid, COLOR_GREY, "That name is not supported by SA-MP.");
		    return Dialog_Show(playerid, DIALOG_FREENAMECHANGE, DIALOG_STYLE_INPUT, "Non-RP Name", "An administrator has came to the conclusion that your name is non-RP.\nTherefore you have been given this free namechange in order to correct it.\n\nEnter a name in the Firstname_Lastname format in the box below:", "Submit", "Cancel");
		}

        PlayerData[playerid][pFreeNamechange] = 1;

        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "SELECT uid FROM "#TABLE_USERS" WHERE username = '%e'", inputtext);
        mysql_tquery(connectionID, queryBuffer, "OnPlayerAttemptNameChange", "is", playerid, inputtext);
    }
    else
    {
        if(!PlayerData[playerid][pLogged])
        {
            KickPlayer(playerid, "Failing to change their name.", INVALID_PLAYER_ID, BAN_VISIBILITY_ADMIN);
        }
        else
        {
	    	PlayerData[playerid][pJailType] = 2;
		    PlayerData[playerid][pJailTime] = 20 * 60;

			ResetPlayerWeaponsEx(playerid);
			ResetPlayer(playerid);

			SetPlayerInJail(playerid);
			GameTextForPlayer(playerid, "~w~Welcome to~n~~r~admin jail", 5000, 3);

			mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET prisonedby = 'Server', prisonreason = 'failing to change their name' WHERE uid = %i", PlayerData[playerid][pID]);
			mysql_tquery(connectionID, queryBuffer);

			strins(PlayerData[playerid][pPrisonedBy], "Server", 0);
			strins(PlayerData[playerid][pPrisonReason], "failing to change their name", 0);

            SendAdminMessage(COLOR_YELLOW, "AdmWarning: %s[%i] has been prisoned for failing to change their name.", GetRPName(playerid), playerid);
			Log_Write("log_punishments", "%s (uid: %i) has been prisoned for 20 minutes, reason: failing to change their name.", GetPlayerNameEx(playerid), PlayerData[playerid][pID]);

		}
	}
	return 1;
}
Dialog:DIALOG_REMOVEFLAG(playerid, response, listitem, inputtext[])
{
    if(response)
    {
		new targetid = PlayerData[playerid][pRemoveFrom];

		if(targetid == INVALID_PLAYER_ID)
		{
		    return SendClientMessage(playerid, COLOR_GREY, "The player has disconnected. You can't remove their flags now.");
		}

		mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "SELECT id, description FROM flags WHERE uid = %i LIMIT %i, 1", PlayerData[targetid][pID], listitem);
		mysql_tquery(connectionID, queryBuffer, "OnVerifyRemoveFlag", "ii", playerid, targetid);
    }
    return 1;
}
Dialog:DIALOG_NEWBIEUNMUTE(playerid, response, listitem, inputtext[])
{
    if((response) && PlayerData[playerid][pNewbieMuted])
    {
        switch(listitem)
        {
            case 0:
            {
                new fine = percent(PlayerData[playerid][pCash] + PlayerData[playerid][pBank], 5);

                GivePlayerCash(playerid, -fine);
                SendClientMessageEx(playerid, COLOR_AQUA, "You have chosen to pay a 5 percent fine of {FF6347}$%i{33CCFF} for a newbie unmute.", fine);
            }
            case 1:
            {
                if(PlayerData[playerid][pJailTime] > 600)
                {
                    return SendClientMessage(playerid, COLOR_GREY, "This punishment is not available to you as you are jailed for more than 10 minutes.");
                }

                PlayerData[playerid][pJailType] = 1;
			    PlayerData[playerid][pJailTime] += 600;

			    ResetPlayerWeaponsEx(playerid);
				ResetPlayer(playerid);
				SetPlayerInJail(playerid);

			    SendClientMessage(playerid, COLOR_AQUA, "You have chosen a 10 minute jail sentence for a newbie unmute.");
            }
        }

        PlayerData[playerid][pNewbieMuted] = 0;
        PlayerData[playerid][pNewbieMuteTime] = 0;
    }
    return 1;
}
Dialog:DIALOG_REPORTUNMUTE(playerid, response, listitem, inputtext[])
{
    if((response) && PlayerData[playerid][pReportMuted])
    {
        switch(listitem)
        {
            case 0:
            {
                new fine = percent(PlayerData[playerid][pCash] + PlayerData[playerid][pBank], 5);

                GivePlayerCash(playerid, -fine);
                SendClientMessageEx(playerid, COLOR_AQUA, "You have chosen to pay a 5 percent fine of {FF6347}$%i{33CCFF} for a report unmute.", fine);
            }
            case 1:
            {
                if(PlayerData[playerid][pJailTime] > 600)
                {
                    return SendClientMessage(playerid, COLOR_GREY, "This punishment is not available to you as you are jailed for more than 10 minutes.");
                }

                PlayerData[playerid][pJailType] = 1;
			    PlayerData[playerid][pJailTime] = 600;

			    ResetPlayerWeaponsEx(playerid);
				ResetPlayer(playerid);
				SetPlayerInJail(playerid);

			    SendClientMessage(playerid, COLOR_AQUA, "You have chosen a 10 minute jail sentence for a report unmute.");
            }
        }

        PlayerData[playerid][pReportMuted] = 0;
        PlayerData[playerid][pReportMuteTime] = 0;
    }
    return 1;
}
Dialog:DIALOG_GLOBALUNMUTE(playerid, response, listitem, inputtext[])
{
    if((response) && PlayerData[playerid][pGlobalMuted])
    {
        switch(listitem)
        {
            case 0:
            {
                new fine = percent(PlayerData[playerid][pCash] + PlayerData[playerid][pBank], 5);

                GivePlayerCash(playerid, -fine);
                SendClientMessageEx(playerid, COLOR_AQUA, "You have chosen to pay a 5 percent fine of {FF6347}$%i{33CCFF} for a global chat unmute.", fine);
            }
            case 1:
            {
                if(PlayerData[playerid][pJailTime] > 600)
                {
                    return SendClientMessage(playerid, COLOR_GREY, "This punishment is not available to you as you are jailed for more than 10 minutes.");
                }

                PlayerData[playerid][pJailType] = 1;
			    PlayerData[playerid][pJailTime] = 600;

			    ResetPlayerWeaponsEx(playerid);
				ResetPlayer(playerid);
				SetPlayerInJail(playerid);

			    SendClientMessage(playerid, COLOR_AQUA, "You have chosen a 10 minute jail sentence for a global chat unmute.");
            }
        }

        PlayerData[playerid][pGlobalMuted] = 0;
        PlayerData[playerid][pGlobalMuteTime] = 0;
    }
    return 1;
}

Dialog:DIALOG_REMOVEPVEH(playerid, response, listitem, inputtext[])
{
	if(response)
    {
        new targetid = PlayerData[playerid][pRemoveFrom];

		if(targetid == INVALID_PLAYER_ID)
		{
		    return SendClientMessage(playerid, COLOR_GREY, "The player has disconnected. You can't remove their vehicles now.");
		}

		mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "SELECT id, modelid FROM vehicles WHERE ownerid = %i LIMIT %i, 1", PlayerData[targetid][pID], listitem);
		mysql_tquery(connectionID, queryBuffer, "OnVerifyRemoveVehicle", "ii", playerid, targetid);
    }
    return 1;
}
Dialog:DIALOG_CRACKTRUNK(playerid, response, listitem, inputtext[])
{
    if(response)
    {
        new vehicleid = PlayerData[playerid][pCocaineFrom], amount;

        if(!IsPlayerInRangeOfBoot(playerid, vehicleid))
        {
            return SendClientMessage(playerid, COLOR_GREY, "You can't steal anything from the trunk now. You're not near it.");
        }
        if(VehicleInfo[vehicleid][vLocked])
        {
            return SendClientMessage(playerid, COLOR_GREY, "You can't steal anything from the trunk now. The vehicle is locked!");
        }

        if(strfind(inputtext, "Weed") != -1 && (amount = VehicleInfo[vehicleid][vWeed]/20) > 0)
        {
            if(PlayerData[playerid][pWeed] + amount > GetPlayerCapacity(playerid, CAPACITY_WEED))
			{
			    SendClientMessageEx(playerid, COLOR_GREY, "You currently have %i/%i weed. You can't carry anymore until you upgrade your inventory skill.", PlayerData[playerid][pWeed], GetPlayerCapacity(playerid, CAPACITY_WEED));
			    return ShowDialogToPlayer(playerid, DIALOG_CRACKTRUNK);
			}

  			VehicleInfo[vehicleid][vWeed] -= amount;
  			PlayerData[playerid][pWeed] += amount;

  			mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE vehicles SET weed = %i WHERE id = %i", VehicleInfo[vehicleid][vWeed], VehicleInfo[vehicleid][vID]);
  			mysql_tquery(connectionID, queryBuffer);

  			mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET weed = %i WHERE uid = %i", PlayerData[playerid][pWeed], PlayerData[playerid][pID]);
  			mysql_tquery(connectionID, queryBuffer);

  			ShowActionBubble(playerid, "* %s steals %i grams of weed from the trunk.", GetRPName(playerid), amount);
        }
        else if(strfind(inputtext, "crack") != -1 && (amount = VehicleInfo[vehicleid][vCocaine]/20) > 0)
        {
            if(PlayerData[playerid][pCocaine] + amount > GetPlayerCapacity(playerid, CAPACITY_COCAINE))
			{
			    SendClientMessageEx(playerid, COLOR_GREY, "You currently have %i/%i crack. You can't carry anymore until you upgrade your inventory skill.", PlayerData[playerid][pCocaine], GetPlayerCapacity(playerid, CAPACITY_COCAINE));
			    return ShowDialogToPlayer(playerid, DIALOG_CRACKTRUNK);
			}

  			VehicleInfo[vehicleid][vCocaine] -= amount;
  			PlayerData[playerid][pCocaine] += amount;

  			mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE vehicles SET cocaine = %i WHERE id = %i", VehicleInfo[vehicleid][vCocaine], VehicleInfo[vehicleid][vID]);
  			mysql_tquery(connectionID, queryBuffer);

  			mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET cocaine = %i WHERE uid = %i", PlayerData[playerid][pCocaine], PlayerData[playerid][pID]);
  			mysql_tquery(connectionID, queryBuffer);

  			ShowActionBubble(playerid, "* %s steals %i grams of crack from the trunk.", GetRPName(playerid), amount);
        }
        else if(strfind(inputtext, "Heroin") != -1 && (amount = VehicleInfo[vehicleid][vHeroin]/20) > 0)
        {
            if(PlayerData[playerid][pHeroin] + amount > GetPlayerCapacity(playerid, CAPACITY_HEROIN))
			{
			    SendClientMessageEx(playerid, COLOR_GREY, "You currently have %i/%i Heroin. You can't carry anymore until you upgrade your inventory skill.", PlayerData[playerid][pHeroin], GetPlayerCapacity(playerid, CAPACITY_HEROIN));
			    return ShowDialogToPlayer(playerid, DIALOG_CRACKTRUNK);
			}

  			VehicleInfo[vehicleid][vHeroin] -= amount;
  			PlayerData[playerid][pHeroin] += amount;

  			mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE vehicles SET heroin = %i WHERE id = %i", VehicleInfo[vehicleid][vHeroin], VehicleInfo[vehicleid][vID]);
  			mysql_tquery(connectionID, queryBuffer);

  			mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET heroin = %i WHERE uid = %i", PlayerData[playerid][pHeroin], PlayerData[playerid][pID]);
  			mysql_tquery(connectionID, queryBuffer);

  			ShowActionBubble(playerid, "* %s steals %i grams of Heroin from the trunk.", GetRPName(playerid), amount);
        }
        else if(strfind(inputtext, "Painkillers") != -1 && (amount = VehicleInfo[vehicleid][vPainkillers]/20) > 0)
        {
            if(PlayerData[playerid][pPainkillers] + amount > GetPlayerCapacity(playerid, CAPACITY_PAINKILLERS))
			{
			    SendClientMessageEx(playerid, COLOR_GREY, "You currently have %i/%i painkillers. You can't carry anymore until you upgrade your inventory skill.", PlayerData[playerid][pPainkillers], GetPlayerCapacity(playerid, CAPACITY_PAINKILLERS));
			    return ShowDialogToPlayer(playerid, DIALOG_CRACKTRUNK);
			}

  			VehicleInfo[vehicleid][vPainkillers] -= amount;
  			PlayerData[playerid][pPainkillers] += amount;

  			mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE vehicles SET painkillers = %i WHERE id = %i", VehicleInfo[vehicleid][vPainkillers], VehicleInfo[vehicleid][vID]);
  			mysql_tquery(connectionID, queryBuffer);

  			mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET painkillers = %i WHERE uid = %i", PlayerData[playerid][pPainkillers], PlayerData[playerid][pID]);
  			mysql_tquery(connectionID, queryBuffer);

  			ShowActionBubble(playerid, "* %s steals %i painkillers from the trunk.", GetRPName(playerid), amount);
        }
        else if(strfind(inputtext, "Materials") != -1 && (amount = VehicleInfo[vehicleid][vMaterials]/20) > 0)
        {
            if(PlayerData[playerid][pMaterials] + amount > GetPlayerCapacity(playerid, CAPACITY_MATERIALS))
			{
			    SendClientMessageEx(playerid, COLOR_GREY, "You currently have %i/%i materials. You can't carry anymore until you upgrade your inventory skill.", PlayerData[playerid][pMaterials], GetPlayerCapacity(playerid, CAPACITY_MATERIALS));
			    return ShowDialogToPlayer(playerid, DIALOG_CRACKTRUNK);
			}

  			VehicleInfo[vehicleid][vMaterials] -= amount;
  			PlayerData[playerid][pMaterials] += amount;

  			mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE vehicles SET materials = %i WHERE id = %i", VehicleInfo[vehicleid][vMaterials], VehicleInfo[vehicleid][vID]);
  			mysql_tquery(connectionID, queryBuffer);

  			mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET materials = %i WHERE uid = %i", PlayerData[playerid][pMaterials], PlayerData[playerid][pID]);
  			mysql_tquery(connectionID, queryBuffer);

  			ShowActionBubble(playerid, "* %s steals %i materials from the trunk.", GetRPName(playerid), amount);
        }
        else if(strfind(inputtext, "Cash") != -1 && (amount = VehicleInfo[vehicleid][vCash]/20) > 0)
        {
  			VehicleInfo[vehicleid][vCash] -= amount;
  			PlayerData[playerid][pCash] += amount;

  			mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE vehicles SET cash = %i WHERE id = %i", VehicleInfo[vehicleid][vCash], VehicleInfo[vehicleid][vID]);
  			mysql_tquery(connectionID, queryBuffer);

  			mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET cash = %i WHERE uid = %i", PlayerData[playerid][pCash], PlayerData[playerid][pID]);
  			mysql_tquery(connectionID, queryBuffer);

  			ShowActionBubble(playerid, "* %s steals %s worth of cash from the trunk.", GetRPName(playerid), FormatCash(amount));
        }
        else
        {
            for(new i = 0; i < 5; i ++)
            {
                if(VehicleInfo[vehicleid][vWeapons][i] != 0 && !strcmp(GetWeaponNameEx(VehicleInfo[vehicleid][vWeapons][i]), inputtext))
                {
                    if(PlayerHasWeapon(playerid, VehicleInfo[vehicleid][vWeapons][i]))
                    {
                        SendClientMessage(playerid, COLOR_GREY, "You have this weapon already.");
                        return ShowDialogToPlayer(playerid, DIALOG_CRACKTRUNK);
					}

					GivePlayerWeaponEx(playerid, VehicleInfo[vehicleid][vWeapons][i]);
					ShowActionBubble(playerid, "* %s steals a %s from the trunk.", GetRPName(playerid), GetWeaponNameEx(VehicleInfo[vehicleid][vWeapons][i]));

					mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE vehicles SET weapon_%i = 0 WHERE id = %i", i + 1, VehicleInfo[vehicleid][vID]);
					mysql_tquery(connectionID, queryBuffer);

					VehicleInfo[vehicleid][vWeapons][i] = 0;
					break;
				}
			}
        }
	}

	PlayerData[playerid][pCocaineTrunk] = INVALID_PLAYER_ID;
	return 1;
}

Dialog:DIALOG_NEWBWELCOME(playerid, response, listitem, inputtext[])
{
    if(response)
    {
        new count;
		foreach(new i : Player)
		{
			if(PlayerData[i][pHelper] > 0)
			{
			    count++;
			}
		}
		if(count > 0)
		{
        	new string[30];
        	format(string, sizeof(string), "Show me around LS please, I am new.");
			strcpy(PlayerData[playerid][pHelpRequest], string, 128);
			SendHelperMessage(COLOR_AQUA, "* Help Request: New Player %s (ID:%d) is requesting a helper to show them around. *", GetRPName(playerid), playerid);

			PlayerData[playerid][pLastRequest] = gettime();
			SendClientMessage(playerid, COLOR_GREEN, "Your help request was sent to all helpers. Please wait for a response.");
		}
		else
		{
		    Dialog_Show(playerid, DIALOG_NONE, DIALOG_STYLE_MSGBOX, "{00aa00}"SERVER_SHORT_NAME"{FFFFFF} | Failed", "{FFFFFF}Unfortunately there are no members of the {33CCFF}helper team{FFFFFF} online :(.\nYou can also try /newb, This is where most of the community can help you with simple questions such as \"Where is the Bank\".\nYou can also checkout {00aa00} %s {FFFFFF} for beginner tutorials.", "Cancel", "", GetServerWebsite());
		}
	}
	return 1;
}
Dialog:DIALOG_USERIMKIT(playerid, response, listitem, inputtext[])
{
    if(response)
    {
        new vehicleid = GetPlayerVehicleID(playerid), componentid;

        if((vehicleid) && VehicleHasDoors(vehicleid) && PlayerData[playerid][pRimkits] > 0)
        {
  			if(!IsVehicleOwner(playerid, vehicleid) && PlayerData[playerid][pVehicleKeys] != vehicleid && !(VehicleInfo[vehicleid][vGang] >= 0 && PlayerData[playerid][pGang] == VehicleInfo[vehicleid][vGang]))
			{
			    return 1;
	        }

	        if(listitem == 0) {
				componentid = 1025;
			} else if(1 <= listitem <= 13) {
			    componentid = (listitem - 1) + 1073;
			} else if(14 <= listitem <= 16) {
			    componentid = (listitem - 14) + 1096;
			}

			VehicleInfo[vehicleid][vMods][CARMODTYPE_WHEELS] = componentid;
			PlayerData[playerid][pRimkits]--;

			AddVehicleComponent(vehicleid, componentid);
			SaveVehicleModifications(vehicleid);

			mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "UPDATE "#TABLE_USERS" SET rimkits = %i WHERE uid = %i", PlayerData[playerid][pRimkits], PlayerData[playerid][pID]);
			mysql_tquery(connectionID, queryBuffer);

			PlayerPlaySound(playerid, 1133, 0.0, 0.0, 0.0);
			ShowActionBubble(playerid, "* %s installs a set of %s rims on the vehicle.", GetRPName(playerid), inputtext);
		}
    }
    return 1;
}
Dialog:DIALOG_TURFLIST(playerid, response, listitem, inputtext[])
{
    if(response)
    {
        tsstring = "Id\tName\tOwner\tPerk\t";
        if(strlen(tsstring) < 5)
        {
			SendClientMessage(playerid, COLOR_AQUA, "Please use /showturfs to enable turf bounds");
		}
		else
		{
		    Dialog_Show(playerid, DIALOG_TURFLIST2, DIALOG_STYLE_TABLIST_HEADERS, "Turf list", tsstring, "Cancel", "");
		}
	}
    return 1;
}
Dialog:DIALOG_TURFLIST2(playerid, response, listitem, inputtext[])
{
    if(response)
    {
		SendClientMessage(playerid, COLOR_AQUA, "Please use /showturfs to enable turf bounds");
	}
	return 1;
}
Dialog:DIALOG_LOCATE(playerid, response, listitem, inputtext[])
{
	if(response)
	{
		switch(listitem)
		{
		    case 0: // JOBS
		    {
				new string[512];
				for(new i=0;i<sizeof(jobLocations);i++){
					if(!isnull(jobLocations[i][jobShortName])){
						if(isnull(string))
							format(string, sizeof(string), "%s",jobLocations[i][jobName]);
						else format(string, sizeof(string), "%s\n%s",string,jobLocations[i][jobName]);
					}
				}
		    	Dialog_Show(playerid, DIALOG_LOCATELIST1, DIALOG_STYLE_LIST, "GPS - Select Destination", string, "Select", "Close");
		    }
		    case 1: // STORES
		    {
		    	Dialog_Show(playerid, DIALOG_LOCATELIST2, DIALOG_STYLE_LIST, "GPS - Select Destination", "24/7\nAmmunation\nClothing Store\nGymnasium\nRestaurant\nAdvertisement Store\nClub\nTool Shop\nDealership", "Select", "Close");
		    }
		    case 2: // GENERAL LOCATIONS
		    {
		    	Dialog_Show(playerid, DIALOG_LOCATELIST3, DIALOG_STYLE_LIST, "GPS - Select Destination", "DMV\nBank\nPaintball\nCasino\nVIP\nDrug Factory\nMaterials Pickup 1\nMaterials Pickup 2\nMaterials Factory 1\nMaterials Factory 2\nHeisenbergs\nAirport Materials Depot\nMarina Materials Depot", "Select", "Close");
		    }
			case 3: // Find Turfs
			{
			    ShowFindTurfDlg(playerid);
			}
			case 4: // More locations
			{
			    new string[MAX_LOCATIONS*34];
				for(new x = 0; x < MAX_LOCATIONS; x++)
				{
				    if(LocationInfo[x][locExists]) {
			    		strcat(string, LocationInfo[x][locName]);
						strcat(string, "\n");
					}
				}
				if(strlen(string) > 2) {
					Dialog_Show(playerid, DIALOG_LOCATELISTC, DIALOG_STYLE_LIST, "GPS - Select Destination", string, "Select", "Close");
				} else {
				    Dialog_Show(playerid, DIALOG_NONE, DIALOG_STYLE_MSGBOX, "GPS - Signal Lost", "Unable to locate any new locations.", "Cancel", "");
				}
			}
			case 5:
			{
			    new housestring[1064], type[16];
			    housestring = "House ID\tHouse Type\tHouse Locations\tStatus";
				foreach(new i : House)
				{
					if(HouseInfo[i][hType] == -1)
					{
					    type = "Other";
					}
					else
					{
					    strcpy(type, houseInteriors[HouseInfo[i][hType]][intClass]);
					}
					if(HouseInfo[i][hExists] && IsHouseOwner(playerid, i))
					{
						format(housestring, sizeof(housestring), "%s\n%d\t%s\t%s\t%s",housestring, i, type, GetZoneName(HouseInfo[i][hPosX], HouseInfo[i][hPosY], HouseInfo[i][hPosZ]), (HouseInfo[i][hLocked]) ? ("Locked") : ("Unlocked"));
					}
				    if(strlen(housestring) > 0)
					{
						Dialog_Show(playerid, DIALOG_LOCATEHOUSE, DIALOG_STYLE_TABLIST_HEADERS, "My House Location", housestring, "Locate", "Close");
					}
				}
			}
			case 6:
			{
			    new business[1064];
			    business = "Business ID\tBusiness Type\tBusiness Locations\tStatus";
			 	foreach(new i : Business)
				{
				    if(BusinessInfo[i][bExists] && IsBusinessOwner(playerid, i))
				    {
						format(business, sizeof(business), "%s\n%d\t%s\t%s\t%s",business, i, bizInteriors[BusinessInfo[i][bType]][intType], GetZoneName(BusinessInfo[i][bPosX], BusinessInfo[i][bPosY], BusinessInfo[i][bPosZ]), (BusinessInfo[i][bLocked]) ? ("Locked") : ("Unlocked"));
					}
				    if(strlen(business) > 0)
					{
						Dialog_Show(playerid, DIALOG_LOCATEBUSINESS, DIALOG_STYLE_TABLIST_HEADERS, "My Business Location", business, "Locate", "Close");
					}
				}
			}
		}
	}
	return 1;
}
Dialog:DIALOG_LOCATEBUSINESS(playerid, response, listitem, inputtext[])
{
	if(response)
	{
		new c = 0;
	 	foreach(new i : Business)
		{
		    if(BusinessInfo[i][bExists] && IsBusinessOwner(playerid, i))
		    {
				if(c == listitem){
					SetPlayerCheckpoint(playerid, BusinessInfo[i][bPosX], BusinessInfo[i][bPosY], BusinessInfo[i][bPosZ], 2.5);
					SendClientMessage(playerid, COLOR_GREEN, "Waypoint set to your business");
					PlayerData[playerid][pCP] = CHECKPOINT_MISC;
					break;
				}else c++;
		    }
		}
	}
	return 1;
}
Dialog:DIALOG_LOCATELIST1(playerid, response, listitem, inputtext[])
{
	if(response && listitem >= 0)
	{
		PlayerData[playerid][pCP] = CHECKPOINT_MISC;
	    SetPlayerCheckpoint(playerid, jobLocations[listitem][jobX], jobLocations[listitem][jobY], jobLocations[listitem][jobZ], 3.0);
	    SendClientMessageEx(playerid, COLOR_WHITE, "* Checkpoint marked at the location of %s.",jobLocations[listitem][jobName]);
	}
	return 1;
}
Dialog:DIALOG_LOCATELIST2(playerid, response, listitem, inputtext[])
{
    if(response)
	{
	    switch(listitem)
	    {
		    case 0:
				LocateMethod(playerid,"Supermarket");
		    case 1:
		        LocateMethod(playerid,"GunShop");
		    case 2:
		        LocateMethod(playerid,"ClothesShop");
		    case 3:
		        LocateMethod(playerid,"Gym");
		    case 4:
		        LocateMethod(playerid,"Restaurant");
		    case 5:
		        LocateMethod(playerid,"AdAgency");
		    case 6:
		        LocateMethod(playerid,"Club");
		    case 7:
		        LocateMethod(playerid,"ToolShop");
			case 8:
			    LocateMethod(playerid,"Dealership");
		}
	}
	return 1;
}
Dialog:DIALOG_LOCATELIST3(playerid, response, listitem, inputtext[])
{
    if(response)
	{
	    switch(listitem)
	    {
            case 0:
				LocateMethod(playerid,"DMV");
            case 1:
				LocateMethod(playerid,"Bank");
            case 2:
				LocateMethod(playerid,"Paintball");
        	case 3:
				LocateMethod(playerid,"Casino");
            case 4:
				LocateMethod(playerid,"VIP");
            case 5:
				LocateMethod(playerid,"Smuggledrugs");
            case 6:
				LocateMethod(playerid,"MatPickup1");
            case 7:
				LocateMethod(playerid,"MatPickup2");
            case 8:
				LocateMethod(playerid,"MatFactory1");
            case 9:
				LocateMethod(playerid,"MatFactory2");
        	case 10:
				LocateMethod(playerid,"Heisenbergs");
			case 11:
			    LocateMethod(playerid,"AirportDepot");
			case 12:
			    LocateMethod(playerid,"MarinaDepot");
		}
	}
	return 1;
}
Dialog:DIALOG_LOCATELISTC(playerid, response, listitem, inputtext[])
{
    if(response)
    {
		LocateMethod(playerid, inputtext);
    }
    return 1;
}
Dialog:DIALOG_RULES(playerid, response, listitem, inputtext[])
{
    if(response)
    {
        switch(listitem)
        {
			case 0: Dialog_Show(playerid, DIALOG_NONE, DIALOG_STYLE_MSGBOX, "{FFFF00}Policy on cheats & unfair advantage", "All types of cheating, hacking, and unfair advantages are prohibited on this server", "Close", "");
			case 1: Dialog_Show(playerid, DIALOG_NONE, DIALOG_STYLE_MSGBOX, "{FFFF00}Policy on exploits", "Any and all exploits, such as QS, CS, NJ, script exploits, etc.\nIS STRICLY PROHIBITED!", "Close", "");
			case 2: Dialog_Show(playerid, DIALOG_NONE, DIALOG_STYLE_MSGBOX, "{FFFF00}Policy on advertisments", "Advertising anything other than in-game entities/items is prohibited", "Close", "");
			case 3: Dialog_Show(playerid, DIALOG_NONE, DIALOG_STYLE_MSGBOX, "{FFFF00}Policy on death-match", "Deathmatching is when you kill another player for an invalid (non-RP) reason.\nThis is strictly prohibited on this server", "Close", "");
	        case 4: Dialog_Show(playerid, DIALOG_NONE, DIALOG_STYLE_MSGBOX, "{FFFF00}Policy on spawn-killing", "Spawn-killing is similar to deathmatch, with worse punishments.\nDo not kill anyone that has just spawned!", "Close", "");
	        case 5: Dialog_Show(playerid, DIALOG_NONE, DIALOG_STYLE_MSGBOX, "{FFFF00}Policy on revenge-killing", "Killing a player because you got killed by them is not allowed!\nThis rule is expected to be followed during turfs.", "Close", "");
    	    case 6: Dialog_Show(playerid, DIALOG_NONE, DIALOG_STYLE_MSGBOX, "{FFFF00}Policy on car raming", "Ramming player without a valid in character reason is not allowed\nThis includes car-parking", "Close", "");
		 	case 7: Dialog_Show(playerid, DIALOG_NONE, DIALOG_STYLE_MSGBOX, "{FFFF00}Policy on heli-blading", "Heli-blading people is not allowed.", "Close", "");
	        case 8: Dialog_Show(playerid, DIALOG_NONE, DIALOG_STYLE_MSGBOX, "{FFFF00}Policy on meta-gaming", "Using out of character information for in character purposes is not allowed.", "Close", "");
	        case 9: Dialog_Show(playerid, DIALOG_NONE, DIALOG_STYLE_MSGBOX, "{FFFF00}Policy on money-farming", "Money-farming is when you create new accounts to leech spawn money\nThis will always result in a permanant ban.", "Close", "");
            case 10: Dialog_Show(playerid, DIALOG_NONE, DIALOG_STYLE_MSGBOX, "{FFFF00}Policy on lying to admins", "Intentionally lying to an administrator is not allowed.", "Close", "");
            case 11: Dialog_Show(playerid, DIALOG_NONE, DIALOG_STYLE_MSGBOX, "{FFFF00}Policy on robbery", "You can only rob the same player ONCE in 24 hours.\nPlease follow regulations regarding max. robbery, etc (available at %s)", "Close", "", GetServerWebsite());
            case 12: Dialog_Show(playerid, DIALOG_NONE, DIALOG_STYLE_MSGBOX, "{FFFF00}Policy on scamming", "Donation scams are prohibited\nPlease follow regulations regarding max. scamming, etc (available at %s)", "Close", "", GetServerWebsite());
			case 13: Dialog_Show(playerid, DIALOG_NONE, DIALOG_STYLE_MSGBOX, "Full list of rules", "{FFFFFF}Please visit {00aa00} %s {FFFFFF} for a complete list of rules.", "Close", "", GetServerWebsite());
		}
	}
	return 1;
}
Dialog:DIALOG_PAYCHECK(playerid, response, listitem, inputtext[])
{
	if(!response) return 1;
	new
		szMessage[150];
	if(strlen(inputtext) < 1)
	{
        format(szMessage, sizeof(szMessage), "You must enter the check code before signing.\n\nCheck code: %d\n\nEnter your check code to receive your paycheck:", PayCheckCode[playerid]);
		Dialog_Show(playerid, DIALOG_PAYCHECK, DIALOG_STYLE_INPUT, "Sign check", szMessage, "Sign check","Cancel");
		return 1;
    }
	if(!IsNumeric(inputtext))
	{
		format(szMessage, sizeof(szMessage), "Wrong check code. The check code consists out of numbers only.\n\nCheck code: %d\n\nEnter your check code to receive your paycheck:", PayCheckCode[playerid]);
		Dialog_Show(playerid, DIALOG_PAYCHECK, DIALOG_STYLE_INPUT, "Sign check", szMessage, "Sign check","Cancel");
		return 1;
	}
    if(strlen(inputtext) > 6 || (strlen(inputtext) > 0 && strlen(inputtext) < 6))
	{
       	format(szMessage, sizeof(szMessage), "Wrong check code. The check code consists out of 6 digits.\n\nCheck code: %d\n\nEnter your check code to receive your paycheck:", PayCheckCode[playerid]);
		Dialog_Show(playerid, DIALOG_PAYCHECK, DIALOG_STYLE_INPUT, "Sign check", szMessage, "Sign check","Cancel");
		return 1;
    }
    new code = strval(inputtext);
	if(code == PayCheckCode[playerid])
    {
		if(PlayerData[playerid][pCash] < 0){
			PlayerData[playerid][pWantedLevel]++;
		}
		SendPaycheck(playerid);
    	PayCheckCode[playerid] = 0;
	}
	else
	{
        SendClientMessage(playerid, COLOR_WHITE, "Wrong check code.");
    }
    return 1;
}
Dialog:DIALOG_CREATEQUIZ(playerid, response, listitem, inputtext[])
{
	if(CreateQuiz == 0)
	{
	    strcpy(quizQuestion, inputtext);
	    CreateQuiz = 1;
        ShowDialogToPlayer(playerid, DIALOG_CREATEQUIZ);
	}
	else if(CreateQuiz == 1)
	{
	    strcpy(quizAnswer, inputtext);
        CreateQuiz = -1;
        SendAdminMessage(COLOR_LIGHTRED, "AdmCmd: %s has started a quiz.", GetRPName(playerid));
        SendClientMessageToAllEx(COLOR_RETIRED, "QUIZ: %s (/quiz answer to answer)", quizQuestion);
	}
    return 1;
}
Dialog:DIALOG_DELETEOBJECT(playerid, response, listitem, inputtext[])
{
    if(response)
    {
        if(IsValidDynamicObject(PlayerData[playerid][pSelected]))
        {
            new Text3D:textid = Text3D:Streamer_GetExtraInt(PlayerData[playerid][pSelected], E_OBJECT_3DTEXT_ID);
	        if(IsValidDynamic3DTextLabel(textid))
	        {
	            DestroyDynamic3DTextLabel(textid);
	        }
        	DestroyDynamicObject(PlayerData[playerid][pSelected]);
        	/*if(Streamer_GetExtraInt(i, E_OBJECT_TYPE) == E_OBJECT_LAND)
        	{
        	    Iter_Remove(PlayerData[playerid][pSelected], LandObjects);
        	}*/
        	SendClientMessageEx(playerid, COLOR_AQUA, "You have successfully deleted object id %i.", PlayerData[playerid][pSelected]);
			new Float: x, Float: y, Float: z;
			GetPlayerPos(playerid, x, y, z);
			foreach(new i : Player)
			{
			    if(IsPlayerInRangeOfPoint(i, 100.0, x, y ,z))
			    {
					Streamer_UpdateEx(i, x, y, z);
				}
			}
		}
		else
		{
		    SendClientMessage(playerid, COLOR_AQUA, "Unable to destroy that object, ERROR #1: Not a valid streamer object.");
		}
	}
    else
    {
        SendClientMessageEx(playerid, COLOR_AQUA, "You cancelled deleting object id %i.", PlayerData[playerid][pSelected]);
    }
    return 1;
}
Dialog:DIALOG_PAINTBALL(playerid, response, listitem, inputtext[])
{
    if(response)
    {
	    ShowActionBubble(playerid, "* %s has entered the paintball arena.", GetRPName(playerid));
		SetPlayerInPaintball(playerid, listitem+1);

		foreach(new i : Player)
		{
		    if(PlayerData[playerid][pPaintball] == PlayerData[i][pPaintball])
		    {
		        SendClientMessageEx(i, COLOR_LIGHTORANGE, "(( %s has entered the paintball arena. ))", GetRPName(playerid));
			}
	    }
    }
    return 1;
}
Dialog:DIALOG_ADDSTATION(playerid, response, listitem, inputtext[])
{
    if(response)
    {
        new name;
        mysql_format(connectionID, queryBuffer, sizeof(queryBuffer), "INSERT INTO radiostations VALUES ('%e', '%e', '%e', '%e')", name, inputtext, PlayerData[playerid][pSubgenre], PlayerData[playerid][pGenre]);
		mysql_tquery(connectionID, queryBuffer);
		PlayerData[playerid][pStationEdit] = 0;
    }
    return 1;
}

Dialog:DIALOG_NONE(playerid, response, listitem, inputtext[])
{
	return 1;
}
// ---------------------------------------
stock Float:GetPizzaDistance(houseid)
{
	new Float: pizzaDistance;
	pizzaDistance = GetDistanceBetweenPoints(2104.1999511719, -1787.5999755859, 13.60000038147, HouseInfo[houseid][hPosX], HouseInfo[houseid][hPosY], HouseInfo[houseid][hPosZ]);
    return pizzaDistance;
}


// ---------------------------------------

public OnPlayerCameraUpdate(playerid, Float:oldx, Float:oldy, Float:oldz, olddir, Float:newx, Float:newy, Float:newz, newdir)
{
	new string[256];
	new Float:fVX, Float:fVY, Float:fVZ;
	GetPlayerCameraFrontVector(playerid, fVX, fVY, fVZ);
	format(string, sizeof(string), "X: %.4f, Y: %.4f, Z: %.4f, fVX: %.4f, fVY: %.4f, fVZ: %.4f,", newx,newy,newz,fVX, fVY, fVZ);
	TextDrawSetString(currentcam[playerid],string);
}

PrintNetWorthPlayer(playerid)
{
	new others = 0,
	assets = 0,
	pricevehicle = 0,
	pricehouse = 0,
	pricebiz = 0,
	priceland = 0,
	pricegarage = 0;
	new totalwealth = PlayerData[playerid][pCash] + PlayerData[playerid][pBank];

 	foreach(new i : Vehicle)
	{
	    if(PlayerData[playerid][pID] == VehicleInfo[i][vOwnerID])
	    {
            assets += VehicleInfo[i][vPrice];
            pricevehicle += VehicleInfo[i][vPrice];
		}
	}
    foreach(new i : House)
    {
        if(HouseInfo[i][hExists] && PlayerData[playerid][pID] == HouseInfo[i][hOwnerID])
        {
            assets += HouseInfo[i][hPrice];
            pricehouse += HouseInfo[i][hPrice];
		}
	}
 	foreach(new i : Business)
    {
        if(BusinessInfo[i][bExists] && PlayerData[playerid][pID] == BusinessInfo[i][bOwnerID])
        {
            assets += BusinessInfo[i][bPrice];
            pricebiz += BusinessInfo[i][bPrice];
		}
	}
    foreach(new i : Land)
	{
	    if(LandInfo[i][lExists] && PlayerData[playerid][pID] == LandInfo[i][lOwnerID])
	    {
            others += LandInfo[i][lPrice];
            priceland += LandInfo[i][lPrice];
		}
	}
	foreach(new i : Garage)
	{
        if(GarageInfo[i][gExists] && PlayerData[playerid][pID] == GarageInfo[i][gOwnerID])
        {
            others += GarageInfo[i][gPrice];
            pricegarage += GarageInfo[i][gPrice];
		}
	}
	new total = totalwealth + assets;
	new total2 = total + others;

    SendClientMessage(playerid, 0x7514F6FF, "__________ Net Worth __________");
	SendClientMessageEx(playerid, COLOR_GREY2, "Para: +{FF6347}%s", FormatCash(PlayerData[playerid][pBank]));
    SendClientMessageEx(playerid, COLOR_GREY2, "Bank: +{FF6347}%s", FormatCash(PlayerData[playerid][pBank]));
    SendClientMessageEx(playerid, COLOR_GREY2, "Pronat: +{ff6347}%s", FormatCash(assets));

    foreach(new i : House)
    {
        if(HouseInfo[i][hExists] && IsHouseOwner(playerid, i))
        {
            SendClientMessageEx(playerid, COLOR_GREY2, "- Sht?pia: +{FF6347}%s", FormatCash(pricehouse));
            break;
		}
	}
	foreach(new i : Business)
    {
        if(BusinessInfo[i][bExists] && IsBusinessOwner(playerid, i))
        {
            SendClientMessageEx(playerid, COLOR_GREY2, "- Biznese: +{FF6347}%s", FormatCash(pricebiz));
            break;
		}
	}
 	foreach(new i : Vehicle)
    {
	    if(PlayerData[playerid][pID] == VehicleInfo[i][vOwnerID])
	    {
	        SendClientMessageEx(playerid, COLOR_GREY2, "- Vetura: +{FF6347}%s", FormatCash(pricevehicle));
	        break;
		}
	}
    SendClientMessageEx(playerid, COLOR_GREY2, "Tjera: +{FF6347}%s", FormatCash(others));
    foreach(new i : Land)
	{
	    if(LandInfo[i][lExists] && IsLandOwner(playerid, i))
	    {
	        SendClientMessageEx(playerid, COLOR_GREY2, "- Toka: +{FF6347}%s", FormatCash(priceland));
	        break;
		}
	}
    foreach(new i : Garage)
	{
        if(GarageInfo[i][gExists] && IsGarageOwner(playerid, i))
        {
            SendClientMessageEx(playerid, COLOR_GREY2, "- Garazha: +{FF6347}%s", FormatCash(pricegarage));
            break;
		}
	}

	SendClientMessage(playerid, COLOR_GREEN, "_______________________________");
	SendClientMessageEx(playerid, COLOR_GREEN, "Pasuria totale e juaj ?sht?: %s", FormatCash(total2));
	return 1;
}

publish VehEngine(playerid)
{
    new vehicleid = GetPlayerVehicleID(playerid);
	if(!IsVehicleParamOn(vehicleid, VEHICLE_ENGINE))
	{
		SetVehicleParams(vehicleid, VEHICLE_ENGINE, true);
		ShowActionBubble(playerid, "* %s's engine was turned on (( %s )).", GetVehicleName(vehicleid), GetRPName(playerid));
	}
	else
	{
		SetVehicleParams(vehicleid, VEHICLE_ENGINE, false);
		ShowActionBubble(playerid, "* %s's engine was turned off (( %s )).", GetVehicleName(vehicleid), GetRPName(playerid));

	}
	return 1;
}

EditDynamicObjectEx(playerid, type, objectid, extraid = -1)
{
	PlayerData[playerid][pEdit] = type;
	PlayerData[playerid][pEditID] = extraid;

	return EditDynamicObject(playerid, objectid);
}

CancelObjectEdit(playerid)
{
    PlayerData[playerid][pEdit] = EDIT_TYPE_NONE;
	PlayerData[playerid][pEditID] = -1;

	return CancelEdit(playerid);
}

new const randFirstname[][] = {
	"Alex", "Blake", "Hayden", "Devin", "Jane", "John", "Austin", "Richy", "Richard", "Alexander",
	"Salem", "Daisy", "Janey", "Casey", "Orlando", "Jake", "Kevin", "Faze", "India", "Vene", "Demorgan", "Jazzy", "Dori", "Jess", "Linda",
	"Dave", "Jessica", "Masey", "Rose", "Romeo", "Juliet", "Ben", "Lenny", "Kayle", "Emily", "Tori", "Michael", "Mike", "Mikey", "Christian", "Josh", "Travis",
	"Dulles", "William", "Stephen", "Peter", "Quin", "Raze", "Morgan", "Oliver", "Madison", "Mark", "Robin", "Tyler", "Sophie", "Sophia", "Brianna", "Azure", "Steely", "Lee",
	"Ray", "Harry", "Ralph", "Anthony", "Alan", "Shawn", "Kanye", "Kane", "Stephanie", "Kimmy", "Kim" "Fox", "Bob", "Adore", "Lexi", "Rex", "Hex", "Xav", "Wally", "Stone", "Kate", "Katie", "Patrick", "James", "Thomas", "Hank",
	"George", "David", "Dori", "Dante", "Jordan", "Arnold" };
new const randLastname[][] = {
	"Craig", "Jones", "Johnson", "Kennedy", "Hinson", "Doe", "Silva", "Nigeria", "Branche", "Erickson", "Defolt", "Morgan",
	"Stalovsky", "Box", "Wards", "Sanders", "Williams", "Trump", "Nixon", "Jackson", "Houston", "Hilfiger", "Gucci", "Washington", "Clinton",
	"Cromwell", "Prime", "Connor", "ONeil", "Rose", "Ginger", "Dodge", "McKing", "Guerreo", "Jackson", "Cartel", "Devil", "Rolex", "Street", "Molintino",
	"Martin", "Stone", "Henderson", "Brady", "Wilkinson" }; // keep adding names if u want

getRandomRPName()
{
	new rand[2], name[60];
	rand[0] = random(sizeof(randFirstname));
	rand[1] = random(sizeof(randLastname));

	if(strcmp(randFirstname[rand[0]], randLastname[rand[1]], true) != 0)
	{
	    format(name, sizeof(name), "%s_%s", randFirstname[rand[0]], randLastname[rand[1]]);
		if(strlen(name) < MAX_PLAYER_NAME)
   		{
		    return name;
   		}
	}
 	return getRandomRPName();
}

forward OnUndercover(playerid, tog, name[], level, Float:hp, Float:armor);
public OnUndercover(playerid, tog, name[], level, Float:hp, Float:armor)
{
	if(tog)
	{
		if(cache_get_row_count(connectionID))
		{
		    SendClientMessage(playerid, COLOR_GREY, "The name specified is taken already.");
		}
		else
		{
		    Log_Write("log_admin", "(undercover) %s (uid: %i) changed their name to %s.", GetPlayerNameEx(playerid), PlayerData[playerid][pID], name);
			SendClientMessageEx(playerid, COLOR_WHITE, "* You changed your name from %s to %s.", GetRPName(playerid), name);
			PlayerData[playerid][pUndercover][0] = 1;
			PlayerData[playerid][pUndercover][1] = PlayerData[playerid][pLevel];
			PlayerData[playerid][pUndercoverHP] = PlayerData[playerid][pHealth];
			PlayerData[playerid][pUndercoverAR] = PlayerData[playerid][pArmor];
			PlayerData[playerid][pLevel] = level;
			SetPlayerHealth(playerid, hp);
			SetScriptArmour(playerid, armor);
			SetPlayerName(playerid, name);
			PlayerData[playerid][pAdminHide] = 1;
	    	SendClientMessage(playerid, COLOR_AQUA, "You are now hidden in /admins and your admin rank no longer shows in /a, /g or /o.");
		}
	}
	else
	{
	    SetPlayerName(playerid, PlayerData[playerid][pUsername]);
		PlayerData[playerid][pUndercover][0] = 0;
		PlayerData[playerid][pLevel] = PlayerData[playerid][pUndercover][1];
		SetPlayerHealth(playerid, PlayerData[playerid][pUndercoverHP]);
		SetScriptArmour(playerid, PlayerData[playerid][pUndercoverAR]);
		PlayerData[playerid][pAdminHide] = 0;
	    SendClientMessage(playerid, COLOR_AQUA, "You are no longer hidden as an administrator.");
	}
	return 1;
}

LocateMethod(playerid, params[])
{
	if(isnull(params))
	{
	    SendClientMessage(playerid, COLOR_GREY, "Null Error - failed to locate properly - contact a developer.");
	    return 1;
	}
	if(!strcmp(params,"hooker",true)){
		format(params,7,"pigpen");
	}
	for(new i=0;i<sizeof(staticEntrances);i++)
	{
		if(isnull(staticEntrances[i][eShortName]))
			continue;
		if(!strcmp(params,staticEntrances[i][eShortName],true)){
			PlayerData[playerid][pCP] = CHECKPOINT_MISC;
			SetPlayerCheckpoint(playerid, staticEntrances[i][ePosX], staticEntrances[i][ePosY], staticEntrances[i][ePosZ], 3.0);
			return SendClientMessageEx(playerid, COLOR_WHITE, "* Checkpoint marked at the location of %s.",staticEntrances[i][eName]);
		}
	}
	for(new i=0;i<sizeof(jobLocations);i++)
	{
		if(isnull(jobLocations[i][jobShortName]))
			continue;
		if(!strcmp(params,jobLocations[i][jobShortName],true)){
			PlayerData[playerid][pCP] = CHECKPOINT_MISC;
			SetPlayerCheckpoint(playerid, jobLocations[i][jobX], jobLocations[i][jobY], jobLocations[i][jobZ], 3.0);
			return SendClientMessageEx(playerid, COLOR_WHITE, "* Checkpoint marked at the location of %s job.",jobLocations[i][jobName]);
		}
	}
	if(!strcmp(params, "dmv", true))
	{
	    PlayerData[playerid][pCP] = CHECKPOINT_MISC;
	    SetPlayerCheckpoint(playerid, 1219.2590, -1812.1093, 16.5938, 3.0);
	    SendClientMessage(playerid, COLOR_WHITE, "* Checkpoint marked at the location of DMV.");
	}
	else if(!strcmp(params, "dealership", true))
	{
	    new businessid = GetClosestBusiness(playerid, BUSINESS_DEALERSHIP);

	    if(businessid == -1)
	    {
	        return SendClientMessage(playerid, COLOR_GREY, "There are no businesses of this type to be found.");
	    }

	    PlayerData[playerid][pCP] = CHECKPOINT_MISC;
	    SetPlayerCheckpoint(playerid, BusinessInfo[businessid][bPosX], BusinessInfo[businessid][bPosY], BusinessInfo[businessid][bPosZ], 3.0);
	    SendClientMessage(playerid, COLOR_WHITE, "* Checkpoint marked at the location of the closest supermarket to you.");

	}
	else if(!strcmp(params, "boatdealer", true))
	{
	    PlayerData[playerid][pCP] = CHECKPOINT_MISC;
	    SetPlayerCheckpoint(playerid, 154.2223, -1946.3030, 5.1920, 3.0);
	    SendClientMessage(playerid, COLOR_WHITE, "* Checkpoint marked at the location of the boat dealership.");
	}
	else if(!strcmp(params, "airdealer", true))
	{
	    PlayerData[playerid][pCP] = CHECKPOINT_MISC;
	    SetPlayerCheckpoint(playerid, 1892.6315, -2328.6721, 13.5469, 3.0);
	    SendClientMessage(playerid, COLOR_WHITE, "* Checkpoint marked at the location of the aircraft dealership.");
	}
	else if(!strcmp(params, "matpickup1", true))
	{
	    PlayerData[playerid][pCP] = CHECKPOINT_MISC;
	    SetPlayerCheckpoint(playerid, 1421.6913, -1318.4719, 13.5547, 3.0);
	    SendClientMessage(playerid, COLOR_WHITE, "* Checkpoint marked at the location of the 1st materials pickup.");
	}
    else if(!strcmp(params, "matpickup2", true))
	{
	    PlayerData[playerid][pCP] = CHECKPOINT_MISC;
	    SetPlayerCheckpoint(playerid, 2393.4885, -2008.5726, 13.3467, 3.0);
	    SendClientMessage(playerid, COLOR_WHITE, "* Checkpoint marked at the location of the 2nd materials pickup.");
	}
	else if(!strcmp(params, "matfactory1", true))
	{
	    PlayerData[playerid][pCP] = CHECKPOINT_MISC;
	    SetPlayerCheckpoint(playerid, 2173.2129, -2264.1548, 13.3467, 3.0);
	    SendClientMessage(playerid, COLOR_WHITE, "* Checkpoint marked at the location of the 1st materials factory.");
	}
    else if(!strcmp(params, "matfactory2", true))
	{
	    PlayerData[playerid][pCP] = CHECKPOINT_MISC;
	    SetPlayerCheckpoint(playerid, 2288.0918, -1105.6555, 37.9766, 3.0);
	    SendClientMessage(playerid, COLOR_WHITE, "* Checkpoint marked at the location of the 2nd materials factory.");
	}	
	else if(!strcmp(params, "aiportdepot", true))
	{
	    PlayerData[playerid][pCP] = CHECKPOINT_MISC;
	    SetPlayerCheckpoint(playerid, 2112.3240, -2432.8130, 13.5469, 3.0);
	    SendClientMessage(playerid, COLOR_WHITE, "* Checkpoint marked at the location of LSI Materials Depot.");
	}
	else if(!strcmp(params, "marinadepot", true))
	{
	    PlayerData[playerid][pCP] = CHECKPOINT_MISC;
	    SetPlayerCheckpoint(playerid, 714.5344, -1565.1694, 1.7680, 3.0);
        SendClientMessage(playerid, COLOR_WHITE, "* Checkpoint marked at the location of Marina materials depot.");
	}
	else if(!strcmp(params, "supermarket", true))
	{
	    new businessid = GetClosestBusiness(playerid, BUSINESS_STORE);

	    if(businessid == -1)
	    {
	        return SendClientMessage(playerid, COLOR_GREY, "There are no businesses of this type to be found.");
	    }

	    PlayerData[playerid][pCP] = CHECKPOINT_MISC;
	    SetPlayerCheckpoint(playerid, BusinessInfo[businessid][bPosX], BusinessInfo[businessid][bPosY], BusinessInfo[businessid][bPosZ], 3.0);
	    SendClientMessage(playerid, COLOR_WHITE, "* Checkpoint marked at the location of the closest supermarket to you.");
	}
	else if(!strcmp(params, "gunshop", true))
	{
	    new businessid = GetClosestBusiness(playerid, BUSINESS_GUNSHOP);

	    if(businessid == -1)
	    {
	        return SendClientMessage(playerid, COLOR_GREY, "There are no businesses of this type to be found.");
	    }

	    PlayerData[playerid][pCP] = CHECKPOINT_MISC;
	    SetPlayerCheckpoint(playerid, BusinessInfo[businessid][bPosX], BusinessInfo[businessid][bPosY], BusinessInfo[businessid][bPosZ], 3.0);
	    SendClientMessage(playerid, COLOR_WHITE, "* Checkpoint marked at the location of the closest gun shop to you.");
	}
	else if(!strcmp(params, "clothesshop", true))
	{
	    new businessid = GetClosestBusiness(playerid, BUSINESS_CLOTHES);

	    if(businessid == -1)
	    {
	        return SendClientMessage(playerid, COLOR_GREY, "There are no businesses of this type to be found.");
	    }

	    PlayerData[playerid][pCP] = CHECKPOINT_MISC;
	    SetPlayerCheckpoint(playerid, BusinessInfo[businessid][bPosX], BusinessInfo[businessid][bPosY], BusinessInfo[businessid][bPosZ], 3.0);
	    SendClientMessage(playerid, COLOR_WHITE, "* Checkpoint marked at the location of the closest clothes shop to you.");
	}
	else if(!strcmp(params, "gym", true))
	{
	    new businessid = GetClosestBusiness(playerid, BUSINESS_GYM);

	    if(businessid == -1)
	    {
	        return SendClientMessage(playerid, COLOR_GREY, "There are no businesses of this type to be found.");
	    }

	    PlayerData[playerid][pCP] = CHECKPOINT_MISC;
	    SetPlayerCheckpoint(playerid, BusinessInfo[businessid][bPosX], BusinessInfo[businessid][bPosY], BusinessInfo[businessid][bPosZ], 3.0);
	    SendClientMessage(playerid, COLOR_WHITE, "* Checkpoint marked at the location of the closest gym to you.");
	}
	else if(!strcmp(params, "restaurant", true))
	{
	    new businessid = GetClosestBusiness(playerid, BUSINESS_RESTAURANT);

	    if(businessid == -1)
	    {
	        return SendClientMessage(playerid, COLOR_GREY, "There are no businesses of this type to be found.");
	    }

	    PlayerData[playerid][pCP] = CHECKPOINT_MISC;
	    SetPlayerCheckpoint(playerid, BusinessInfo[businessid][bPosX], BusinessInfo[businessid][bPosY], BusinessInfo[businessid][bPosZ], 3.0);
	    SendClientMessage(playerid, COLOR_WHITE, "* Checkpoint marked at the location of the closest restaurant to you.");
	}
	else if(!strcmp(params, "adagency", true))
	{
	    new businessid = GetClosestBusiness(playerid, BUSINESS_AGENCY);

	    if(businessid == -1)
	    {
	        return SendClientMessage(playerid, COLOR_GREY, "There are no businesses of this type to be found.");
	    }

	    PlayerData[playerid][pCP] = CHECKPOINT_MISC;
	    SetPlayerCheckpoint(playerid, BusinessInfo[businessid][bPosX], BusinessInfo[businessid][bPosY], BusinessInfo[businessid][bPosZ], 3.0);
	    SendClientMessage(playerid, COLOR_WHITE, "* Checkpoint marked at the location of the closest advertisement agency to you.");
	}
	else if(!strcmp(params, "club", true))
	{
	    new businessid = GetClosestBusiness(playerid, BUSINESS_BARCLUB);

	    if(businessid == -1)
	    {
	        return SendClientMessage(playerid, COLOR_GREY, "There are no businesses of this type to be found.");
	    }

	    PlayerData[playerid][pCP] = CHECKPOINT_MISC;
	    SetPlayerCheckpoint(playerid, BusinessInfo[businessid][bPosX], BusinessInfo[businessid][bPosY], BusinessInfo[businessid][bPosZ], 3.0);
	    SendClientMessage(playerid, COLOR_WHITE, "* Checkpoint marked at the location of the closest club/bar to you.");
	}
	else if(!strcmp(params, "toolshop", true))
	{
	    new businessid = GetClosestBusiness(playerid, BUSINESS_TOOLSHOP);

	    if(businessid == -1)
	    {
	        return SendClientMessage(playerid, COLOR_GREY, "There are no businesses of this type to be found.");
	    }

	    PlayerData[playerid][pCP] = CHECKPOINT_MISC;
	    SetPlayerCheckpoint(playerid, BusinessInfo[businessid][bPosX], BusinessInfo[businessid][bPosY], BusinessInfo[businessid][bPosZ], 3.0);
	    SendClientMessage(playerid, COLOR_WHITE, "* Checkpoint marked at the location of the closest tool shop to you.");
	}

 	else
	{
	    for(new x = 0; x < MAX_LOCATIONS; x++)
		{
			if(!strcmp(params, LocationInfo[x][locName], true))
			{
		    	PlayerData[playerid][pCP] = CHECKPOINT_MISC;
		    	SetPlayerCheckpoint(playerid, LocationInfo[x][locPosX], LocationInfo[x][locPosY], LocationInfo[x][locPosZ], 3.0);
		    	SendClientMessageEx(playerid, COLOR_WHITE, "* Checkpoint marked at the location of %s", LocationInfo[x][locName]);
		    	break;
			}
   			if(x == MAX_LOCATIONS - 1)
		    {
      			SendClientMessageEx(playerid, COLOR_SYNTAX, "Unable to locate '%s'. Contact an administrator!", params);
      			break;
		    }
		}
	    /*SendClientMessage(playerid, COLOR_SYNTAX, "USAGE: /locate [option]");
	    SendClientMessage(playerid, COLOR_SYNTAX, "Business Types: Supermarket, GunShop, ClothesShop, Gym, Restaurant, AdAgency, Club, ToolShop");
	    SendClientMessage(playerid, COLOR_SYNTAX, "General Locations: DMV, Bank, Paintball, Casino, VIP, DrugFactory, MatPickup1, MatPickup2");
		SendClientMessage(playerid, COLOR_SYNTAX, "General Locations: Dealership, AirDealer, BoatDealer, MatFactory1, MatFactory2, Heisenbergs");
        SendClientMessage(playerid, COLOR_SYNTAX, "Scripted Jobs: Pizzaman, Courier, Fisherman, Bodyguard, ArmsDealer, Mechanic, Miner, Sweeper");
        SendClientMessage(playerid, COLOR_SYNTAX, "Scripted Jobs: TaxiDriver, DrugDealer, Lawyer, Detective, Thief");*/

	}
	return 1;
}

forward showMirandaRights(playerid, step);
public showMirandaRights(playerid, step)
{
	new string[128];
    switch(step)
    {
        case 1:
        {
            format(string, sizeof(string), "%s says: You have the right to remain silent.", GetRPName(playerid));
			SendProximityFadeMessage(playerid, 20.0, string, COLOR_GREY1, COLOR_GREY2, COLOR_GREY3, COLOR_GREY4, COLOR_GREY5);
            SetTimerEx("showMirandaRights", 1000, false, "ii", playerid, 2);
        }
        case 2:
        {
            format(string, sizeof(string), "%s says: Anything you say can and will be used against you in a court of law.", GetRPName(playerid));
			SendProximityFadeMessage(playerid, 20.0, string, COLOR_GREY1, COLOR_GREY2, COLOR_GREY3, COLOR_GREY4, COLOR_GREY5);
            SetTimerEx("showMirandaRights", 1000, false, "ii", playerid, 3);
        }
        case 3:
        {
            format(string, sizeof(string), "%s says: You have the right to to an attorney, If you can not afford one, one will be appointed for you.", GetRPName(playerid));
			SendProximityFadeMessage(playerid, 20.0, string, COLOR_GREY1, COLOR_GREY2, COLOR_GREY3, COLOR_GREY4, COLOR_GREY5);
        }
	}
}

publish DrugDeliveryDetect(playerid)
{

	new Float:x, Float:y, Float:z, zone[26];
	GetPlayerPos(playerid, x, y, z);
	strcpy(zone, GetZoneName(x, y, z));
	foreach(new targetid : Player)
	{
    	new factiontype = GetPlayerFaction(targetid);

	    if(factiontype == FACTION_POLICE || factiontype == FACTION_FEDERAL || factiontype == FACTION_ARMY)
	    {
			SendFactionMessage(targetid, COLOR_YELLOW, "HQ: CamDetect: A drug delivery has been spoted at %s, please send a unit immediately!", zone);
		}
	}
	return 1;
}


forward BreakCuffs(playerid, userid);
public BreakCuffs(playerid, userid)
{

	if (random(2))
	{
	    SendClientMessageEx(playerid, COLOR_GREEN, "You have failed to pick the cuffs.");
		SendNearbyMessage(playerid, 30.0, COLOR_PURPLE, "* %s has failed to pick the cuffs.", GetRPName(playerid));
	}
	else
	{
	    PlayerData[userid][pCuffed] = 0;
	    SetPlayerSpecialAction(userid, SPECIAL_ACTION_NONE);

	    SendClientMessage(playerid, COLOR_GREEN, "You have picked the cuffs.");
		SendNearbyMessage(playerid, 30.0, COLOR_PURPLE, "* %s has picked the cuffs from %s's wrists.", GetRPName(playerid), GetRPName(userid));
	}
	return 1;
}

IsProductionServer()
{
    return (GetServerVarAsInt("port") == 10412);
}

forward GetAdminLevel(playerid);
public GetAdminLevel(playerid)
{
	return PlayerData[playerid][pAdmin];
}

#include "core\core.cmd.inc"
#include "cmd\cmd.func.inc"
#include "misc\misc.inc"
#include "mapping/index.pwn"
#include "modules/Announce.pwn"
#include "modules/YourID.pwn"
#include "modules/SniperInfo.pwn"
#include "modules/RentSystem.pwn"
#include "modules/ServerLogo.pwn"
#include "modules/GreenZone.pwn"
#include "modules/FuelSystem.pwn"
#include "modules/MainParking.pwn"
#include "modules/MiniMapRadar.pwn"
#include "modules/MiniGame.pwn"
#include "modules/MDC.pwn"
#include "modules/VoteSystem.pwn"
#include "modules/AFKSystem.pwn"
#include "modules/EventSystem.pwn"
#include "modules/TreasureHunt.pwn"
#include "modules/Hunter.pwn"
#include "modules/InvalidCommand.pwn"
#include "modules/Spectate.pwn"
#include "modules/Anims.pwn"
#include "modules/RankingSystem.pwn"
#include "modules/LawEnforcementRadar.pwn"
#include "modules/LoginSignup.pwn"
#include "modules/SFWhitelist.pwn"
#include "modules/Cookies.pwn"
#include "modules/Gym.pwn"
#include "modules/GTAWasted.pwn"
#include "modules/CarTuning.pwn"
#include "modules/AdSystem.pwn"
#include "modules/StorageSystem.pwn"
#include "modules/AdminReportIndicator.pwn"
#include "modules/ServerStats.pwn"
#include "modules/ServerState.pwn"
#include "modules/PlayerRespawn.pwn"
#include "modules/Gates.pwn"
#include "modules/Meter.pwn"
#include "modules/AutoGift.pwn"
#include "modules/FightClub.pwn"
#include "modules/CCTV.pwn"
#include "modules/Crate.pwn"
#include "modules/HelpCounter.pwn"
#include "modules/EmergencyLights.pwn"
#include "modules/HitmanSms.pwn"
#include "modules/RobCasino.pwn"
#include "modules/RobShop.pwn"
#include "modules/GangTags.pwn"
#include "modules/RolePlay.pwn"
#include "modules/Carry.pwn"
#include "modules/TollGuard.pwn"
#include "modules/drugfactory.pwn"
#include "modules/mafia.pwn"
//#include "modules/AutoRestart.pwn"
#include "modules/VIP.pwn"
#include "modules/Mask.pwn"
#include "modules/PlayerIDCard.pwn"
#include "modules/CustomWantedLevel.pwn"
#include "modules/ImpoundSystem.pwn"
#include "modules/IsMobile.pwn"
#include "rex/Anti-Lag.pwn"
#include "rex/Anti-UnFreeze.pwn"
#include "rex/Anti-Proxy.pwn"
#include "rex/Anti-ServerAd.pwn"
#include "rex/Anti-Hack-System.pwn"
#include "rex/Anti-Hack-SystemV2.pwn"
#include "rex/Anti-WeaponHack.pwn"
#include "rex/Anti-PingHack.pwn"
//#include "rex/Anti-TrollBoss.pwn"
#include "rex/Anti-BotSpawn.pwn"
#include "rex/Anti-RapidFire.pwn"
#include "rex/Anti-NameTag.pwn"
#include "rex/Anti-Fly.pwn"
#include "rex/Anti-NOP.pwn"
#include "rex/Anti-CBug.pwn"
#include "rex/Anti-GodMod.pwn"

//#include "dev\WishSystem.pwn"
#include "dev/StaffLogs.pwn"
#include "dev/Sprunk.pwn"
